(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var Qu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function gC(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function i(){var o=!1;try{o=this instanceof i}catch{}return o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var o=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return e[i]}})}),n}var Wh={exports:{}},ks={};var h1;function yC(){if(h1)return ks;h1=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,o,s){var l=null;if(s!==void 0&&(l=""+s),o.key!==void 0&&(l=""+o.key),"key"in o){s={};for(var c in o)c!=="key"&&(s[c]=o[c])}else s=o;return o=s.ref,{$$typeof:e,type:i,key:l,ref:o!==void 0?o:null,props:s}}return ks.Fragment=t,ks.jsx=n,ks.jsxs=n,ks}var p1;function xC(){return p1||(p1=1,Wh.exports=yC()),Wh.exports}var x=xC(),Qh={exports:{}},Be={};var m1;function vC(){if(m1)return Be;m1=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function y(z){return z===null||typeof z!="object"?null:(z=g&&z[g]||z["@@iterator"],typeof z=="function"?z:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function b(z,I,O){this.props=z,this.context=I,this.refs=_,this.updater=O||w}b.prototype.isReactComponent={},b.prototype.setState=function(z,I){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,I,"setState")},b.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function k(){}k.prototype=b.prototype;function E(z,I,O){this.props=z,this.context=I,this.refs=_,this.updater=O||w}var j=E.prototype=new k;j.constructor=E,S(j,b.prototype),j.isPureReactComponent=!0;var A=Array.isArray;function T(){}var M={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function F(z,I,O){var Q=O.ref;return{$$typeof:e,type:z,key:I,ref:Q!==void 0?Q:null,props:O}}function $(z,I){return F(z.type,I,z.props)}function Z(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function D(z){var I={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(O){return I[O]})}var q=/\/+/g;function N(z,I){return typeof z=="object"&&z!==null&&z.key!=null?D(""+z.key):I.toString(36)}function H(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(T,T):(z.status="pending",z.then(function(I){z.status==="pending"&&(z.status="fulfilled",z.value=I)},function(I){z.status==="pending"&&(z.status="rejected",z.reason=I)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function U(z,I,O,Q,ee){var ue=typeof z;(ue==="undefined"||ue==="boolean")&&(z=null);var ye=!1;if(z===null)ye=!0;else switch(ue){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(z.$$typeof){case e:case t:ye=!0;break;case m:return ye=z._init,U(ye(z._payload),I,O,Q,ee)}}if(ye)return ee=ee(z),ye=Q===""?"."+N(z,0):Q,A(ee)?(O="",ye!=null&&(O=ye.replace(q,"$&/")+"/"),U(ee,I,O,"",function(Ae){return Ae})):ee!=null&&(Z(ee)&&(ee=$(ee,O+(ee.key==null||z&&z.key===ee.key?"":(""+ee.key).replace(q,"$&/")+"/")+ye)),I.push(ee)),1;ye=0;var de=Q===""?".":Q+":";if(A(z))for(var ve=0;ve<z.length;ve++)Q=z[ve],ue=de+N(Q,ve),ye+=U(Q,I,O,ue,ee);else if(ve=y(z),typeof ve=="function")for(z=ve.call(z),ve=0;!(Q=z.next()).done;)Q=Q.value,ue=de+N(Q,ve++),ye+=U(Q,I,O,ue,ee);else if(ue==="object"){if(typeof z.then=="function")return U(H(z),I,O,Q,ee);throw I=String(z),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return ye}function V(z,I,O){if(z==null)return z;var Q=[],ee=0;return U(z,Q,"","",function(ue){return I.call(O,ue,ee++)}),Q}function X(z){if(z._status===-1){var I=z._result;I=I(),I.then(function(O){(z._status===0||z._status===-1)&&(z._status=1,z._result=O)},function(O){(z._status===0||z._status===-1)&&(z._status=2,z._result=O)}),z._status===-1&&(z._status=0,z._result=I)}if(z._status===1)return z._result.default;throw z._result}var Y=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},B={map:V,forEach:function(z,I,O){V(z,function(){I.apply(this,arguments)},O)},count:function(z){var I=0;return V(z,function(){I++}),I},toArray:function(z){return V(z,function(I){return I})||[]},only:function(z){if(!Z(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return Be.Activity=p,Be.Children=B,Be.Component=b,Be.Fragment=n,Be.Profiler=o,Be.PureComponent=E,Be.StrictMode=i,Be.Suspense=d,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Be.__COMPILER_RUNTIME={__proto__:null,c:function(z){return M.H.useMemoCache(z)}},Be.cache=function(z){return function(){return z.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(z,I,O){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var Q=S({},z.props),ee=z.key;if(I!=null)for(ue in I.key!==void 0&&(ee=""+I.key),I)!P.call(I,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&I.ref===void 0||(Q[ue]=I[ue]);var ue=arguments.length-2;if(ue===1)Q.children=O;else if(1<ue){for(var ye=Array(ue),de=0;de<ue;de++)ye[de]=arguments[de+2];Q.children=ye}return F(z.type,ee,Q)},Be.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:s,_context:z},z},Be.createElement=function(z,I,O){var Q,ee={},ue=null;if(I!=null)for(Q in I.key!==void 0&&(ue=""+I.key),I)P.call(I,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(ee[Q]=I[Q]);var ye=arguments.length-2;if(ye===1)ee.children=O;else if(1<ye){for(var de=Array(ye),ve=0;ve<ye;ve++)de[ve]=arguments[ve+2];ee.children=de}if(z&&z.defaultProps)for(Q in ye=z.defaultProps,ye)ee[Q]===void 0&&(ee[Q]=ye[Q]);return F(z,ue,ee)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(z){return{$$typeof:c,render:z}},Be.isValidElement=Z,Be.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:X}},Be.memo=function(z,I){return{$$typeof:h,type:z,compare:I===void 0?null:I}},Be.startTransition=function(z){var I=M.T,O={};M.T=O;try{var Q=z(),ee=M.S;ee!==null&&ee(O,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(T,Y)}catch(ue){Y(ue)}finally{I!==null&&O.types!==null&&(I.types=O.types),M.T=I}},Be.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Be.use=function(z){return M.H.use(z)},Be.useActionState=function(z,I,O){return M.H.useActionState(z,I,O)},Be.useCallback=function(z,I){return M.H.useCallback(z,I)},Be.useContext=function(z){return M.H.useContext(z)},Be.useDebugValue=function(){},Be.useDeferredValue=function(z,I){return M.H.useDeferredValue(z,I)},Be.useEffect=function(z,I){return M.H.useEffect(z,I)},Be.useEffectEvent=function(z){return M.H.useEffectEvent(z)},Be.useId=function(){return M.H.useId()},Be.useImperativeHandle=function(z,I,O){return M.H.useImperativeHandle(z,I,O)},Be.useInsertionEffect=function(z,I){return M.H.useInsertionEffect(z,I)},Be.useLayoutEffect=function(z,I){return M.H.useLayoutEffect(z,I)},Be.useMemo=function(z,I){return M.H.useMemo(z,I)},Be.useOptimistic=function(z,I){return M.H.useOptimistic(z,I)},Be.useReducer=function(z,I,O){return M.H.useReducer(z,I,O)},Be.useRef=function(z){return M.H.useRef(z)},Be.useState=function(z){return M.H.useState(z)},Be.useSyncExternalStore=function(z,I,O){return M.H.useSyncExternalStore(z,I,O)},Be.useTransition=function(){return M.H.useTransition()},Be.version="19.2.3",Be}var g1;function hl(){return g1||(g1=1,Qh.exports=vC()),Qh.exports}var J=hl();const Fs=jo(J);var Jh={exports:{}},Es={},ep={exports:{}},tp={};var y1;function bC(){return y1||(y1=1,(function(e){function t(U,V){var X=U.length;U.push(V);e:for(;0<X;){var Y=X-1>>>1,B=U[Y];if(0<o(B,V))U[Y]=V,U[X]=B,X=Y;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var V=U[0],X=U.pop();if(X!==V){U[0]=X;e:for(var Y=0,B=U.length,z=B>>>1;Y<z;){var I=2*(Y+1)-1,O=U[I],Q=I+1,ee=U[Q];if(0>o(O,X))Q<B&&0>o(ee,O)?(U[Y]=ee,U[Q]=X,Y=Q):(U[Y]=O,U[I]=X,Y=I);else if(Q<B&&0>o(ee,X))U[Y]=ee,U[Q]=X,Y=Q;else break e}}return V}function o(U,V){var X=U.sortIndex-V.sortIndex;return X!==0?X:U.id-V.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var d=[],h=[],m=1,p=null,g=3,y=!1,w=!1,S=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function j(U){for(var V=n(h);V!==null;){if(V.callback===null)i(h);else if(V.startTime<=U)i(h),V.sortIndex=V.expirationTime,t(d,V);else break;V=n(h)}}function A(U){if(S=!1,j(U),!w)if(n(d)!==null)w=!0,T||(T=!0,D());else{var V=n(h);V!==null&&H(A,V.startTime-U)}}var T=!1,M=-1,P=5,F=-1;function $(){return _?!0:!(e.unstable_now()-F<P)}function Z(){if(_=!1,T){var U=e.unstable_now();F=U;var V=!0;try{e:{w=!1,S&&(S=!1,k(M),M=-1),y=!0;var X=g;try{t:{for(j(U),p=n(d);p!==null&&!(p.expirationTime>U&&$());){var Y=p.callback;if(typeof Y=="function"){p.callback=null,g=p.priorityLevel;var B=Y(p.expirationTime<=U);if(U=e.unstable_now(),typeof B=="function"){p.callback=B,j(U),V=!0;break t}p===n(d)&&i(d),j(U)}else i(d);p=n(d)}if(p!==null)V=!0;else{var z=n(h);z!==null&&H(A,z.startTime-U),V=!1}}break e}finally{p=null,g=X,y=!1}V=void 0}}finally{V?D():T=!1}}}var D;if(typeof E=="function")D=function(){E(Z)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,N=q.port2;q.port1.onmessage=Z,D=function(){N.postMessage(null)}}else D=function(){b(Z,0)};function H(U,V){M=b(function(){U(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(U){switch(g){case 1:case 2:case 3:var V=3;break;default:V=g}var X=g;g=V;try{return U()}finally{g=X}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(U,V){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var X=g;g=U;try{return V()}finally{g=X}},e.unstable_scheduleCallback=function(U,V,X){var Y=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Y+X:Y):X=Y,U){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=X+B,U={id:m++,callback:V,priorityLevel:U,startTime:X,expirationTime:B,sortIndex:-1},X>Y?(U.sortIndex=X,t(h,U),n(d)===null&&U===n(h)&&(S?(k(M),M=-1):S=!0,H(A,X-Y))):(U.sortIndex=B,t(d,U),w||y||(w=!0,T||(T=!0,D()))),U},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(U){var V=g;return function(){var X=g;g=V;try{return U.apply(this,arguments)}finally{g=X}}}})(tp)),tp}var x1;function wC(){return x1||(x1=1,ep.exports=bC()),ep.exports}var np={exports:{}},Gt={};var v1;function SC(){if(v1)return Gt;v1=1;var e=hl();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function s(d,h,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:p==null?null:""+p,children:d,containerInfo:h,implementation:m}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Gt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Gt.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return s(d,h,null,m)},Gt.flushSync=function(d){var h=l.T,m=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=h,i.p=m,i.d.f()}},Gt.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(d,h))},Gt.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Gt.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,p=c(m,h.crossOrigin),g=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?i.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):m==="script"&&i.d.X(d,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Gt.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=c(h.as,h.crossOrigin);i.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(d)},Gt.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,p=c(m,h.crossOrigin);i.d.L(d,m,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Gt.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=c(h.as,h.crossOrigin);i.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(d)},Gt.requestFormReset=function(d){i.d.r(d)},Gt.unstable_batchedUpdates=function(d,h){return d(h)},Gt.useFormState=function(d,h,m){return l.H.useFormState(d,h,m)},Gt.useFormStatus=function(){return l.H.useHostTransitionStatus()},Gt.version="19.2.3",Gt}var b1;function fw(){if(b1)return np.exports;b1=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),np.exports=SC(),np.exports}var w1;function _C(){if(w1)return Es;w1=1;var e=wC(),t=hl(),n=fw();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function s(r){var a=r,u=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(u=a.return),r=a.return;while(r)}return a.tag===3?u:null}function l(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function c(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function d(r){if(s(r)!==r)throw Error(i(188))}function h(r){var a=r.alternate;if(!a){if(a=s(r),a===null)throw Error(i(188));return a!==r?null:r}for(var u=r,f=a;;){var v=u.return;if(v===null)break;var C=v.alternate;if(C===null){if(f=v.return,f!==null){u=f;continue}break}if(v.child===C.child){for(C=v.child;C;){if(C===u)return d(v),r;if(C===f)return d(v),a;C=C.sibling}throw Error(i(188))}if(u.return!==f.return)u=v,f=C;else{for(var R=!1,G=v.child;G;){if(G===u){R=!0,u=v,f=C;break}if(G===f){R=!0,f=v,u=C;break}G=G.sibling}if(!R){for(G=C.child;G;){if(G===u){R=!0,u=C,f=v;break}if(G===f){R=!0,f=C,u=v;break}G=G.sibling}if(!R)throw Error(i(189))}}if(u.alternate!==f)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:a}function m(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=m(r),a!==null)return a;r=r.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),E=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function D(r){return r===null||typeof r!="object"?null:(r=Z&&r[Z]||r["@@iterator"],typeof r=="function"?r:null)}var q=Symbol.for("react.client.reference");function N(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===q?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case b:return"Profiler";case _:return"StrictMode";case A:return"Suspense";case T:return"SuspenseList";case F:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case w:return"Portal";case E:return r.displayName||"Context";case k:return(r._context.displayName||"Context")+".Consumer";case j:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case M:return a=r.displayName||null,a!==null?a:N(r.type)||"Memo";case P:a=r._payload,r=r._init;try{return N(r(a))}catch{}}return null}var H=Array.isArray,U=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},Y=[],B=-1;function z(r){return{current:r}}function I(r){0>B||(r.current=Y[B],Y[B]=null,B--)}function O(r,a){B++,Y[B]=r.current,r.current=a}var Q=z(null),ee=z(null),ue=z(null),ye=z(null);function de(r,a){switch(O(ue,a),O(ee,r),O(Q,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?Ix(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=Ix(a),r=Lx(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}I(Q),O(Q,r)}function ve(){I(Q),I(ee),I(ue)}function Ae(r){r.memoizedState!==null&&O(ye,r);var a=Q.current,u=Lx(a,r.type);a!==u&&(O(ee,r),O(Q,u))}function je(r){ee.current===r&&(I(Q),I(ee)),ye.current===r&&(I(ye),bs._currentValue=X)}var Te,De;function L(r){if(Te===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Te=a&&a[1]||"",De=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Te+r+De}var te=!1;function re(r,a){if(!r||te)return"";te=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(me){var he=me}Reflect.construct(r,[],Se)}else{try{Se.call()}catch(me){he=me}r.call(Se.prototype)}}else{try{throw Error()}catch(me){he=me}(Se=r())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(me){if(me&&he&&typeof me.stack=="string")return[me.stack,he.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=f.DetermineComponentFrameRoot(),R=C[0],G=C[1];if(R&&G){var ne=R.split(`
`),fe=G.split(`
`);for(v=f=0;f<ne.length&&!ne[f].includes("DetermineComponentFrameRoot");)f++;for(;v<fe.length&&!fe[v].includes("DetermineComponentFrameRoot");)v++;if(f===ne.length||v===fe.length)for(f=ne.length-1,v=fe.length-1;1<=f&&0<=v&&ne[f]!==fe[v];)v--;for(;1<=f&&0<=v;f--,v--)if(ne[f]!==fe[v]){if(f!==1||v!==1)do if(f--,v--,0>v||ne[f]!==fe[v]){var xe=`
`+ne[f].replace(" at new "," at ");return r.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",r.displayName)),xe}while(1<=f&&0<=v);break}}}finally{te=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?L(u):""}function W(r,a){switch(r.tag){case 26:case 27:case 5:return L(r.type);case 16:return L("Lazy");case 13:return r.child!==a&&a!==null?L("Suspense Fallback"):L("Suspense");case 19:return L("SuspenseList");case 0:case 15:return re(r.type,!1);case 11:return re(r.type.render,!1);case 1:return re(r.type,!0);case 31:return L("Activity");default:return""}}function K(r){try{var a="",u=null;do a+=W(r,u),u=r,r=r.return;while(r);return a}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var ie=Object.prototype.hasOwnProperty,pe=e.unstable_scheduleCallback,ge=e.unstable_cancelCallback,oe=e.unstable_shouldYield,_e=e.unstable_requestPaint,Ce=e.unstable_now,ke=e.unstable_getCurrentPriorityLevel,se=e.unstable_ImmediatePriority,we=e.unstable_UserBlockingPriority,Ne=e.unstable_NormalPriority,Ie=e.unstable_LowPriority,qe=e.unstable_IdlePriority,dt=e.log,Bt=e.unstable_setDisableYieldValue,$e=null,ht=null;function jt(r){if(typeof dt=="function"&&Bt(r),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode($e,r)}catch{}}var Ve=Math.clz32?Math.clz32:To,mn=Math.log,Kt=Math.LN2;function To(r){return r>>>=0,r===0?32:31-(mn(r)/Kt|0)|0}var Zr=256,pr=262144,Tn=4194304;function tn(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ya(r,a,u){var f=r.pendingLanes;if(f===0)return 0;var v=0,C=r.suspendedLanes,R=r.pingedLanes;r=r.warmLanes;var G=f&134217727;return G!==0?(f=G&~C,f!==0?v=tn(f):(R&=G,R!==0?v=tn(R):u||(u=G&~r,u!==0&&(v=tn(u))))):(G=f&~C,G!==0?v=tn(G):R!==0?v=tn(R):u||(u=f&~r,u!==0&&(v=tn(u)))),v===0?0:a!==0&&a!==v&&(a&C)===0&&(C=v&-v,u=a&-a,C>=u||C===32&&(u&4194048)!==0)?a:v}function Oi(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function Hf(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Al(){var r=Tn;return Tn<<=1,(Tn&62914560)===0&&(Tn=4194304),r}function Do(r){for(var a=[],u=0;31>u;u++)a.push(r);return a}function Ri(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Pf(r,a,u,f,v,C){var R=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var G=r.entanglements,ne=r.expirationTimes,fe=r.hiddenUpdates;for(u=R&~u;0<u;){var xe=31-Ve(u),Se=1<<xe;G[xe]=0,ne[xe]=-1;var he=fe[xe];if(he!==null)for(fe[xe]=null,xe=0;xe<he.length;xe++){var me=he[xe];me!==null&&(me.lane&=-536870913)}u&=~Se}f!==0&&Tl(r,f,0),C!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=C&~(R&~a))}function Tl(r,a,u){r.pendingLanes|=a,r.suspendedLanes&=~a;var f=31-Ve(a);r.entangledLanes|=a,r.entanglements[f]=r.entanglements[f]|1073741824|u&261930}function Dl(r,a){var u=r.entangledLanes|=a;for(r=r.entanglements;u;){var f=31-Ve(u),v=1<<f;v&a|r[f]&a&&(r[f]|=a),u&=~v}}function zl(r,a){var u=a&-a;return u=(u&42)!==0?1:zo(u),(u&(r.suspendedLanes|a))!==0?0:u}function zo(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Mo(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ml(){var r=V.p;return r!==0?r:(r=window.event,r===void 0?32:o1(r.type))}function Ol(r,a){var u=V.p;try{return V.p=r,a()}finally{V.p=u}}var nr=Math.random().toString(36).slice(2),Rt="__reactFiber$"+nr,Yt="__reactProps$"+nr,mr="__reactContainer$"+nr,xa="__reactEvents$"+nr,Rl="__reactListeners$"+nr,Ff="__reactHandles$"+nr,Il="__reactResources$"+nr,Ii="__reactMarker$"+nr;function Oo(r){delete r[Rt],delete r[Yt],delete r[xa],delete r[Rl],delete r[Ff]}function Kr(r){var a=r[Rt];if(a)return a;for(var u=r.parentNode;u;){if(a=u[mr]||u[Rt]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(r=$x(r);r!==null;){if(u=r[Rt])return u;r=$x(r)}return a}r=u,u=r.parentNode}return null}function Wr(r){if(r=r[Rt]||r[mr]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Qr(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function Jr(r){var a=r[Il];return a||(a=r[Il]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Nt(r){r[Ii]=!0}var Ll=new Set,Ul={};function gr(r,a){ei(r,a),ei(r+"Capture",a)}function ei(r,a){for(Ul[r]=a,r=0;r<a.length;r++)Ll.add(a[r])}var qf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ro={},Bl={};function $f(r){return ie.call(Bl,r)?!0:ie.call(Ro,r)?!1:qf.test(r)?Bl[r]=!0:(Ro[r]=!0,!1)}function va(r,a,u){if($f(a))if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+u)}}function ba(r,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+u)}}function qn(r,a,u,f){if(f===null)r.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(a,u,""+f)}}function nn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Hl(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Vf(r,a,u){var f=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,C=f.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return v.call(this)},set:function(R){u=""+R,C.call(this,R)}}),Object.defineProperty(r,a,{enumerable:f.enumerable}),{getValue:function(){return u},setValue:function(R){u=""+R},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function wa(r){if(!r._valueTracker){var a=Hl(r)?"checked":"value";r._valueTracker=Vf(r,a,""+r[a])}}function Pl(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var u=a.getValue(),f="";return r&&(f=Hl(r)?r.checked?"true":"false":r.value),r=f,r!==u?(a.setValue(r),!0):!1}function Li(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Yf=/[\n"\\]/g;function rn(r){return r.replace(Yf,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ui(r,a,u,f,v,C,R,G){r.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.type=R:r.removeAttribute("type"),a!=null?R==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+nn(a)):r.value!==""+nn(a)&&(r.value=""+nn(a)):R!=="submit"&&R!=="reset"||r.removeAttribute("value"),a!=null?Io(r,R,nn(a)):u!=null?Io(r,R,nn(u)):f!=null&&r.removeAttribute("value"),v==null&&C!=null&&(r.defaultChecked=!!C),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?r.name=""+nn(G):r.removeAttribute("name")}function Fl(r,a,u,f,v,C,R,G){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(r.type=C),a!=null||u!=null){if(!(C!=="submit"&&C!=="reset"||a!=null)){wa(r);return}u=u!=null?""+nn(u):"",a=a!=null?""+nn(a):u,G||a===r.value||(r.value=a),r.defaultValue=a}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,r.checked=G?r.checked:!!f,r.defaultChecked=!!f,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(r.name=R),wa(r)}function Io(r,a,u){a==="number"&&Li(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function yr(r,a,u,f){if(r=r.options,a){a={};for(var v=0;v<u.length;v++)a["$"+u[v]]=!0;for(u=0;u<r.length;u++)v=a.hasOwnProperty("$"+r[u].value),r[u].selected!==v&&(r[u].selected=v),v&&f&&(r[u].defaultSelected=!0)}else{for(u=""+nn(u),a=null,v=0;v<r.length;v++){if(r[v].value===u){r[v].selected=!0,f&&(r[v].defaultSelected=!0);return}a!==null||r[v].disabled||(a=r[v])}a!==null&&(a.selected=!0)}}function Dg(r,a,u){if(a!=null&&(a=""+nn(a),a!==r.value&&(r.value=a),u==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=u!=null?""+nn(u):""}function zg(r,a,u,f){if(a==null){if(f!=null){if(u!=null)throw Error(i(92));if(H(f)){if(1<f.length)throw Error(i(93));f=f[0]}u=f}u==null&&(u=""),a=u}u=nn(a),r.defaultValue=u,f=r.textContent,f===u&&f!==""&&f!==null&&(r.value=f),wa(r)}function Sa(r,a){if(a){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=a;return}}r.textContent=a}var fk=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mg(r,a,u){var f=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":f?r.setProperty(a,u):typeof u!="number"||u===0||fk.has(a)?a==="float"?r.cssFloat=u:r[a]=(""+u).trim():r[a]=u+"px"}function Og(r,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?r.setProperty(f,""):f==="float"?r.cssFloat="":r[f]="");for(var v in a)f=a[v],a.hasOwnProperty(v)&&u[v]!==f&&Mg(r,v,f)}else for(var C in a)a.hasOwnProperty(C)&&Mg(r,C,a[C])}function Gf(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dk=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hk=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ql(r){return hk.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function xr(){}var Xf=null;function Zf(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var _a=null,ka=null;function Rg(r){var a=Wr(r);if(a&&(r=a.stateNode)){var u=r[Yt]||null;e:switch(r=a.stateNode,a.type){case"input":if(Ui(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+rn(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var f=u[a];if(f!==r&&f.form===r.form){var v=f[Yt]||null;if(!v)throw Error(i(90));Ui(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(a=0;a<u.length;a++)f=u[a],f.form===r.form&&Pl(f)}break e;case"textarea":Dg(r,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&yr(r,!!u.multiple,a,!1)}}}var Kf=!1;function Ig(r,a,u){if(Kf)return r(a,u);Kf=!0;try{var f=r(a);return f}finally{if(Kf=!1,(_a!==null||ka!==null)&&(Tu(),_a&&(a=_a,r=ka,ka=_a=null,Rg(a),r)))for(a=0;a<r.length;a++)Rg(r[a])}}function Lo(r,a){var u=r.stateNode;if(u===null)return null;var f=u[Yt]||null;if(f===null)return null;u=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wf=!1;if(vr)try{var Uo={};Object.defineProperty(Uo,"passive",{get:function(){Wf=!0}}),window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{Wf=!1}var ti=null,Qf=null,$l=null;function Lg(){if($l)return $l;var r,a=Qf,u=a.length,f,v="value"in ti?ti.value:ti.textContent,C=v.length;for(r=0;r<u&&a[r]===v[r];r++);var R=u-r;for(f=1;f<=R&&a[u-f]===v[C-f];f++);return $l=v.slice(r,1<f?1-f:void 0)}function Vl(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Yl(){return!0}function Ug(){return!1}function an(r){function a(u,f,v,C,R){this._reactName=u,this._targetInst=v,this.type=f,this.nativeEvent=C,this.target=R,this.currentTarget=null;for(var G in r)r.hasOwnProperty(G)&&(u=r[G],this[G]=u?u(C):C[G]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Yl:Ug,this.isPropagationStopped=Ug,this}return p(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Yl)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Yl)},persist:function(){},isPersistent:Yl}),a}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gl=an(Bi),Bo=p({},Bi,{view:0,detail:0}),pk=an(Bo),Jf,ed,Ho,Xl=p({},Bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nd,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ho&&(Ho&&r.type==="mousemove"?(Jf=r.screenX-Ho.screenX,ed=r.screenY-Ho.screenY):ed=Jf=0,Ho=r),Jf)},movementY:function(r){return"movementY"in r?r.movementY:ed}}),Bg=an(Xl),mk=p({},Xl,{dataTransfer:0}),gk=an(mk),yk=p({},Bo,{relatedTarget:0}),td=an(yk),xk=p({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),vk=an(xk),bk=p({},Bi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),wk=an(bk),Sk=p({},Bi,{data:0}),Hg=an(Sk),_k={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ek={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ck(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Ek[r])?!!a[r]:!1}function nd(){return Ck}var jk=p({},Bo,{key:function(r){if(r.key){var a=_k[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Vl(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?kk[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nd,charCode:function(r){return r.type==="keypress"?Vl(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Vl(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Nk=an(jk),Ak=p({},Xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pg=an(Ak),Tk=p({},Bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nd}),Dk=an(Tk),zk=p({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mk=an(zk),Ok=p({},Xl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Rk=an(Ok),Ik=p({},Bi,{newState:0,oldState:0}),Lk=an(Ik),Uk=[9,13,27,32],rd=vr&&"CompositionEvent"in window,Po=null;vr&&"documentMode"in document&&(Po=document.documentMode);var Bk=vr&&"TextEvent"in window&&!Po,Fg=vr&&(!rd||Po&&8<Po&&11>=Po),qg=" ",$g=!1;function Vg(r,a){switch(r){case"keyup":return Uk.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yg(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ea=!1;function Hk(r,a){switch(r){case"compositionend":return Yg(a);case"keypress":return a.which!==32?null:($g=!0,qg);case"textInput":return r=a.data,r===qg&&$g?null:r;default:return null}}function Pk(r,a){if(Ea)return r==="compositionend"||!rd&&Vg(r,a)?(r=Lg(),$l=Qf=ti=null,Ea=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Fg&&a.locale!=="ko"?null:a.data;default:return null}}var Fk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gg(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!Fk[r.type]:a==="textarea"}function Xg(r,a,u,f){_a?ka?ka.push(f):ka=[f]:_a=f,a=Lu(a,"onChange"),0<a.length&&(u=new Gl("onChange","change",null,u,f),r.push({event:u,listeners:a}))}var Fo=null,qo=null;function qk(r){Tx(r,0)}function Zl(r){var a=Qr(r);if(Pl(a))return r}function Zg(r,a){if(r==="change")return a}var Kg=!1;if(vr){var id;if(vr){var ad="oninput"in document;if(!ad){var Wg=document.createElement("div");Wg.setAttribute("oninput","return;"),ad=typeof Wg.oninput=="function"}id=ad}else id=!1;Kg=id&&(!document.documentMode||9<document.documentMode)}function Qg(){Fo&&(Fo.detachEvent("onpropertychange",Jg),qo=Fo=null)}function Jg(r){if(r.propertyName==="value"&&Zl(qo)){var a=[];Xg(a,qo,r,Zf(r)),Ig(qk,a)}}function $k(r,a,u){r==="focusin"?(Qg(),Fo=a,qo=u,Fo.attachEvent("onpropertychange",Jg)):r==="focusout"&&Qg()}function Vk(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Zl(qo)}function Yk(r,a){if(r==="click")return Zl(a)}function Gk(r,a){if(r==="input"||r==="change")return Zl(a)}function Xk(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var gn=typeof Object.is=="function"?Object.is:Xk;function $o(r,a){if(gn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var u=Object.keys(r),f=Object.keys(a);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var v=u[f];if(!ie.call(a,v)||!gn(r[v],a[v]))return!1}return!0}function e0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function t0(r,a){var u=e0(r);r=0;for(var f;u;){if(u.nodeType===3){if(f=r+u.textContent.length,r<=a&&f>=a)return{node:u,offset:a-r};r=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=e0(u)}}function n0(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?n0(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function r0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=Li(r.document);a instanceof r.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)r=a.contentWindow;else break;a=Li(r.document)}return a}function od(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var Zk=vr&&"documentMode"in document&&11>=document.documentMode,Ca=null,sd=null,Vo=null,ld=!1;function i0(r,a,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ld||Ca==null||Ca!==Li(f)||(f=Ca,"selectionStart"in f&&od(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Vo&&$o(Vo,f)||(Vo=f,f=Lu(sd,"onSelect"),0<f.length&&(a=new Gl("onSelect","select",null,a,u),r.push({event:a,listeners:f}),a.target=Ca)))}function Hi(r,a){var u={};return u[r.toLowerCase()]=a.toLowerCase(),u["Webkit"+r]="webkit"+a,u["Moz"+r]="moz"+a,u}var ja={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionrun:Hi("Transition","TransitionRun"),transitionstart:Hi("Transition","TransitionStart"),transitioncancel:Hi("Transition","TransitionCancel"),transitionend:Hi("Transition","TransitionEnd")},ud={},a0={};vr&&(a0=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function Pi(r){if(ud[r])return ud[r];if(!ja[r])return r;var a=ja[r],u;for(u in a)if(a.hasOwnProperty(u)&&u in a0)return ud[r]=a[u];return r}var o0=Pi("animationend"),s0=Pi("animationiteration"),l0=Pi("animationstart"),Kk=Pi("transitionrun"),Wk=Pi("transitionstart"),Qk=Pi("transitioncancel"),u0=Pi("transitionend"),c0=new Map,cd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cd.push("scrollEnd");function $n(r,a){c0.set(r,a),gr(a,[r])}var Kl=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Dn=[],Na=0,fd=0;function Wl(){for(var r=Na,a=fd=Na=0;a<r;){var u=Dn[a];Dn[a++]=null;var f=Dn[a];Dn[a++]=null;var v=Dn[a];Dn[a++]=null;var C=Dn[a];if(Dn[a++]=null,f!==null&&v!==null){var R=f.pending;R===null?v.next=v:(v.next=R.next,R.next=v),f.pending=v}C!==0&&f0(u,v,C)}}function Ql(r,a,u,f){Dn[Na++]=r,Dn[Na++]=a,Dn[Na++]=u,Dn[Na++]=f,fd|=f,r.lanes|=f,r=r.alternate,r!==null&&(r.lanes|=f)}function dd(r,a,u,f){return Ql(r,a,u,f),Jl(r)}function Fi(r,a){return Ql(r,null,null,a),Jl(r)}function f0(r,a,u){r.lanes|=u;var f=r.alternate;f!==null&&(f.lanes|=u);for(var v=!1,C=r.return;C!==null;)C.childLanes|=u,f=C.alternate,f!==null&&(f.childLanes|=u),C.tag===22&&(r=C.stateNode,r===null||r._visibility&1||(v=!0)),r=C,C=C.return;return r.tag===3?(C=r.stateNode,v&&a!==null&&(v=31-Ve(u),r=C.hiddenUpdates,f=r[v],f===null?r[v]=[a]:f.push(a),a.lane=u|536870912),C):null}function Jl(r){if(50<hs)throw hs=0,wh=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var Aa={};function Jk(r,a,u,f){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(r,a,u,f){return new Jk(r,a,u,f)}function hd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function br(r,a){var u=r.alternate;return u===null?(u=yn(r.tag,a,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=a,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,a=r.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function d0(r,a){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,a=u.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function eu(r,a,u,f,v,C){var R=0;if(f=r,typeof r=="function")hd(r)&&(R=1);else if(typeof r=="string")R=iC(r,u,Q.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case F:return r=yn(31,u,a,v),r.elementType=F,r.lanes=C,r;case S:return qi(u.children,v,C,a);case _:R=8,v|=24;break;case b:return r=yn(12,u,a,v|2),r.elementType=b,r.lanes=C,r;case A:return r=yn(13,u,a,v),r.elementType=A,r.lanes=C,r;case T:return r=yn(19,u,a,v),r.elementType=T,r.lanes=C,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case E:R=10;break e;case k:R=9;break e;case j:R=11;break e;case M:R=14;break e;case P:R=16,f=null;break e}R=29,u=Error(i(130,r===null?"null":typeof r,"")),f=null}return a=yn(R,u,a,v),a.elementType=r,a.type=f,a.lanes=C,a}function qi(r,a,u,f){return r=yn(7,r,f,a),r.lanes=u,r}function pd(r,a,u){return r=yn(6,r,null,a),r.lanes=u,r}function h0(r){var a=yn(18,null,null,0);return a.stateNode=r,a}function md(r,a,u){return a=yn(4,r.children!==null?r.children:[],r.key,a),a.lanes=u,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var p0=new WeakMap;function zn(r,a){if(typeof r=="object"&&r!==null){var u=p0.get(r);return u!==void 0?u:(a={value:r,source:a,stack:K(a)},p0.set(r,a),a)}return{value:r,source:a,stack:K(a)}}var Ta=[],Da=0,tu=null,Yo=0,Mn=[],On=0,ni=null,rr=1,ir="";function wr(r,a){Ta[Da++]=Yo,Ta[Da++]=tu,tu=r,Yo=a}function m0(r,a,u){Mn[On++]=rr,Mn[On++]=ir,Mn[On++]=ni,ni=r;var f=rr;r=ir;var v=32-Ve(f)-1;f&=~(1<<v),u+=1;var C=32-Ve(a)+v;if(30<C){var R=v-v%5;C=(f&(1<<R)-1).toString(32),f>>=R,v-=R,rr=1<<32-Ve(a)+v|u<<v|f,ir=C+r}else rr=1<<C|u<<v|f,ir=r}function gd(r){r.return!==null&&(wr(r,1),m0(r,1,0))}function yd(r){for(;r===tu;)tu=Ta[--Da],Ta[Da]=null,Yo=Ta[--Da],Ta[Da]=null;for(;r===ni;)ni=Mn[--On],Mn[On]=null,ir=Mn[--On],Mn[On]=null,rr=Mn[--On],Mn[On]=null}function g0(r,a){Mn[On++]=rr,Mn[On++]=ir,Mn[On++]=ni,rr=a.id,ir=a.overflow,ni=r}var Ht=null,mt=null,Qe=!1,ri=null,Rn=!1,xd=Error(i(519));function ii(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Go(zn(a,r)),xd}function y0(r){var a=r.stateNode,u=r.type,f=r.memoizedProps;switch(a[Rt]=r,a[Yt]=f,u){case"dialog":Ge("cancel",a),Ge("close",a);break;case"iframe":case"object":case"embed":Ge("load",a);break;case"video":case"audio":for(u=0;u<ms.length;u++)Ge(ms[u],a);break;case"source":Ge("error",a);break;case"img":case"image":case"link":Ge("error",a),Ge("load",a);break;case"details":Ge("toggle",a);break;case"input":Ge("invalid",a),Fl(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Ge("invalid",a);break;case"textarea":Ge("invalid",a),zg(a,f.value,f.defaultValue,f.children)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||f.suppressHydrationWarning===!0||Ox(a.textContent,u)?(f.popover!=null&&(Ge("beforetoggle",a),Ge("toggle",a)),f.onScroll!=null&&Ge("scroll",a),f.onScrollEnd!=null&&Ge("scrollend",a),f.onClick!=null&&(a.onclick=xr),a=!0):a=!1,a||ii(r,!0)}function x0(r){for(Ht=r.return;Ht;)switch(Ht.tag){case 5:case 31:case 13:Rn=!1;return;case 27:case 3:Rn=!0;return;default:Ht=Ht.return}}function za(r){if(r!==Ht)return!1;if(!Qe)return x0(r),Qe=!0,!1;var a=r.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||Ih(r.type,r.memoizedProps)),u=!u),u&&mt&&ii(r),x0(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));mt=qx(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));mt=qx(r)}else a===27?(a=mt,xi(r.type)?(r=Ph,Ph=null,mt=r):mt=a):mt=Ht?Ln(r.stateNode.nextSibling):null;return!0}function $i(){mt=Ht=null,Qe=!1}function vd(){var r=ri;return r!==null&&(un===null?un=r:un.push.apply(un,r),ri=null),r}function Go(r){ri===null?ri=[r]:ri.push(r)}var bd=z(null),Vi=null,Sr=null;function ai(r,a,u){O(bd,a._currentValue),a._currentValue=u}function _r(r){r._currentValue=bd.current,I(bd)}function wd(r,a,u){for(;r!==null;){var f=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),r===u)break;r=r.return}}function Sd(r,a,u,f){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var C=v.dependencies;if(C!==null){var R=v.child;C=C.firstContext;e:for(;C!==null;){var G=C;C=v;for(var ne=0;ne<a.length;ne++)if(G.context===a[ne]){C.lanes|=u,G=C.alternate,G!==null&&(G.lanes|=u),wd(C.return,u,r),f||(R=null);break e}C=G.next}}else if(v.tag===18){if(R=v.return,R===null)throw Error(i(341));R.lanes|=u,C=R.alternate,C!==null&&(C.lanes|=u),wd(R,u,r),R=null}else R=v.child;if(R!==null)R.return=v;else for(R=v;R!==null;){if(R===r){R=null;break}if(v=R.sibling,v!==null){v.return=R.return,R=v;break}R=R.return}v=R}}function Ma(r,a,u,f){r=null;for(var v=a,C=!1;v!==null;){if(!C){if((v.flags&524288)!==0)C=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var R=v.alternate;if(R===null)throw Error(i(387));if(R=R.memoizedProps,R!==null){var G=v.type;gn(v.pendingProps.value,R.value)||(r!==null?r.push(G):r=[G])}}else if(v===ye.current){if(R=v.alternate,R===null)throw Error(i(387));R.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(bs):r=[bs])}v=v.return}r!==null&&Sd(a,r,u,f),a.flags|=262144}function nu(r){for(r=r.firstContext;r!==null;){if(!gn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Yi(r){Vi=r,Sr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Pt(r){return v0(Vi,r)}function ru(r,a){return Vi===null&&Yi(r),v0(r,a)}function v0(r,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},Sr===null){if(r===null)throw Error(i(308));Sr=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Sr=Sr.next=a;return u}var eE=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(u,f){r.push(f)}};this.abort=function(){a.aborted=!0,r.forEach(function(u){return u()})}},tE=e.unstable_scheduleCallback,nE=e.unstable_NormalPriority,At={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _d(){return{controller:new eE,data:new Map,refCount:0}}function Xo(r){r.refCount--,r.refCount===0&&tE(nE,function(){r.controller.abort()})}var Zo=null,kd=0,Oa=0,Ra=null;function rE(r,a){if(Zo===null){var u=Zo=[];kd=0,Oa=jh(),Ra={status:"pending",value:void 0,then:function(f){u.push(f)}}}return kd++,a.then(b0,b0),a}function b0(){if(--kd===0&&Zo!==null){Ra!==null&&(Ra.status="fulfilled");var r=Zo;Zo=null,Oa=0,Ra=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function iE(r,a){var u=[],f={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return r.then(function(){f.status="fulfilled",f.value=a;for(var v=0;v<u.length;v++)(0,u[v])(a)},function(v){for(f.status="rejected",f.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),f}var w0=U.S;U.S=function(r,a){ix=Ce(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&rE(r,a),w0!==null&&w0(r,a)};var Gi=z(null);function Ed(){var r=Gi.current;return r!==null?r:ut.pooledCache}function iu(r,a){a===null?O(Gi,Gi.current):O(Gi,a.pool)}function S0(){var r=Ed();return r===null?null:{parent:At._currentValue,pool:r}}var Ia=Error(i(460)),Cd=Error(i(474)),au=Error(i(542)),ou={then:function(){}};function _0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function k0(r,a,u){switch(u=r[u],u===void 0?r.push(a):u!==a&&(a.then(xr,xr),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,C0(r),r;default:if(typeof a.status=="string")a.then(xr,xr);else{if(r=ut,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(f){if(a.status==="pending"){var v=a;v.status="fulfilled",v.value=f}},function(f){if(a.status==="pending"){var v=a;v.status="rejected",v.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,C0(r),r}throw Zi=a,Ia}}function Xi(r){try{var a=r._init;return a(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Zi=u,Ia):u}}var Zi=null;function E0(){if(Zi===null)throw Error(i(459));var r=Zi;return Zi=null,r}function C0(r){if(r===Ia||r===au)throw Error(i(483))}var La=null,Ko=0;function su(r){var a=Ko;return Ko+=1,La===null&&(La=[]),k0(La,r,a)}function Wo(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function lu(r,a){throw a.$$typeof===g?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function j0(r){function a(le,ae){if(r){var ce=le.deletions;ce===null?(le.deletions=[ae],le.flags|=16):ce.push(ae)}}function u(le,ae){if(!r)return null;for(;ae!==null;)a(le,ae),ae=ae.sibling;return null}function f(le){for(var ae=new Map;le!==null;)le.key!==null?ae.set(le.key,le):ae.set(le.index,le),le=le.sibling;return ae}function v(le,ae){return le=br(le,ae),le.index=0,le.sibling=null,le}function C(le,ae,ce){return le.index=ce,r?(ce=le.alternate,ce!==null?(ce=ce.index,ce<ae?(le.flags|=67108866,ae):ce):(le.flags|=67108866,ae)):(le.flags|=1048576,ae)}function R(le){return r&&le.alternate===null&&(le.flags|=67108866),le}function G(le,ae,ce,be){return ae===null||ae.tag!==6?(ae=pd(ce,le.mode,be),ae.return=le,ae):(ae=v(ae,ce),ae.return=le,ae)}function ne(le,ae,ce,be){var Re=ce.type;return Re===S?xe(le,ae,ce.props.children,be,ce.key):ae!==null&&(ae.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===P&&Xi(Re)===ae.type)?(ae=v(ae,ce.props),Wo(ae,ce),ae.return=le,ae):(ae=eu(ce.type,ce.key,ce.props,null,le.mode,be),Wo(ae,ce),ae.return=le,ae)}function fe(le,ae,ce,be){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==ce.containerInfo||ae.stateNode.implementation!==ce.implementation?(ae=md(ce,le.mode,be),ae.return=le,ae):(ae=v(ae,ce.children||[]),ae.return=le,ae)}function xe(le,ae,ce,be,Re){return ae===null||ae.tag!==7?(ae=qi(ce,le.mode,be,Re),ae.return=le,ae):(ae=v(ae,ce),ae.return=le,ae)}function Se(le,ae,ce){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return ae=pd(""+ae,le.mode,ce),ae.return=le,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case y:return ce=eu(ae.type,ae.key,ae.props,null,le.mode,ce),Wo(ce,ae),ce.return=le,ce;case w:return ae=md(ae,le.mode,ce),ae.return=le,ae;case P:return ae=Xi(ae),Se(le,ae,ce)}if(H(ae)||D(ae))return ae=qi(ae,le.mode,ce,null),ae.return=le,ae;if(typeof ae.then=="function")return Se(le,su(ae),ce);if(ae.$$typeof===E)return Se(le,ru(le,ae),ce);lu(le,ae)}return null}function he(le,ae,ce,be){var Re=ae!==null?ae.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Re!==null?null:G(le,ae,""+ce,be);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case y:return ce.key===Re?ne(le,ae,ce,be):null;case w:return ce.key===Re?fe(le,ae,ce,be):null;case P:return ce=Xi(ce),he(le,ae,ce,be)}if(H(ce)||D(ce))return Re!==null?null:xe(le,ae,ce,be,null);if(typeof ce.then=="function")return he(le,ae,su(ce),be);if(ce.$$typeof===E)return he(le,ae,ru(le,ce),be);lu(le,ce)}return null}function me(le,ae,ce,be,Re){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return le=le.get(ce)||null,G(ae,le,""+be,Re);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case y:return le=le.get(be.key===null?ce:be.key)||null,ne(ae,le,be,Re);case w:return le=le.get(be.key===null?ce:be.key)||null,fe(ae,le,be,Re);case P:return be=Xi(be),me(le,ae,ce,be,Re)}if(H(be)||D(be))return le=le.get(ce)||null,xe(ae,le,be,Re,null);if(typeof be.then=="function")return me(le,ae,ce,su(be),Re);if(be.$$typeof===E)return me(le,ae,ce,ru(ae,be),Re);lu(ae,be)}return null}function Me(le,ae,ce,be){for(var Re=null,tt=null,Oe=ae,Pe=ae=0,Ke=null;Oe!==null&&Pe<ce.length;Pe++){Oe.index>Pe?(Ke=Oe,Oe=null):Ke=Oe.sibling;var nt=he(le,Oe,ce[Pe],be);if(nt===null){Oe===null&&(Oe=Ke);break}r&&Oe&&nt.alternate===null&&a(le,Oe),ae=C(nt,ae,Pe),tt===null?Re=nt:tt.sibling=nt,tt=nt,Oe=Ke}if(Pe===ce.length)return u(le,Oe),Qe&&wr(le,Pe),Re;if(Oe===null){for(;Pe<ce.length;Pe++)Oe=Se(le,ce[Pe],be),Oe!==null&&(ae=C(Oe,ae,Pe),tt===null?Re=Oe:tt.sibling=Oe,tt=Oe);return Qe&&wr(le,Pe),Re}for(Oe=f(Oe);Pe<ce.length;Pe++)Ke=me(Oe,le,Pe,ce[Pe],be),Ke!==null&&(r&&Ke.alternate!==null&&Oe.delete(Ke.key===null?Pe:Ke.key),ae=C(Ke,ae,Pe),tt===null?Re=Ke:tt.sibling=Ke,tt=Ke);return r&&Oe.forEach(function(_i){return a(le,_i)}),Qe&&wr(le,Pe),Re}function Ue(le,ae,ce,be){if(ce==null)throw Error(i(151));for(var Re=null,tt=null,Oe=ae,Pe=ae=0,Ke=null,nt=ce.next();Oe!==null&&!nt.done;Pe++,nt=ce.next()){Oe.index>Pe?(Ke=Oe,Oe=null):Ke=Oe.sibling;var _i=he(le,Oe,nt.value,be);if(_i===null){Oe===null&&(Oe=Ke);break}r&&Oe&&_i.alternate===null&&a(le,Oe),ae=C(_i,ae,Pe),tt===null?Re=_i:tt.sibling=_i,tt=_i,Oe=Ke}if(nt.done)return u(le,Oe),Qe&&wr(le,Pe),Re;if(Oe===null){for(;!nt.done;Pe++,nt=ce.next())nt=Se(le,nt.value,be),nt!==null&&(ae=C(nt,ae,Pe),tt===null?Re=nt:tt.sibling=nt,tt=nt);return Qe&&wr(le,Pe),Re}for(Oe=f(Oe);!nt.done;Pe++,nt=ce.next())nt=me(Oe,le,Pe,nt.value,be),nt!==null&&(r&&nt.alternate!==null&&Oe.delete(nt.key===null?Pe:nt.key),ae=C(nt,ae,Pe),tt===null?Re=nt:tt.sibling=nt,tt=nt);return r&&Oe.forEach(function(mC){return a(le,mC)}),Qe&&wr(le,Pe),Re}function lt(le,ae,ce,be){if(typeof ce=="object"&&ce!==null&&ce.type===S&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case y:e:{for(var Re=ce.key;ae!==null;){if(ae.key===Re){if(Re=ce.type,Re===S){if(ae.tag===7){u(le,ae.sibling),be=v(ae,ce.props.children),be.return=le,le=be;break e}}else if(ae.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===P&&Xi(Re)===ae.type){u(le,ae.sibling),be=v(ae,ce.props),Wo(be,ce),be.return=le,le=be;break e}u(le,ae);break}else a(le,ae);ae=ae.sibling}ce.type===S?(be=qi(ce.props.children,le.mode,be,ce.key),be.return=le,le=be):(be=eu(ce.type,ce.key,ce.props,null,le.mode,be),Wo(be,ce),be.return=le,le=be)}return R(le);case w:e:{for(Re=ce.key;ae!==null;){if(ae.key===Re)if(ae.tag===4&&ae.stateNode.containerInfo===ce.containerInfo&&ae.stateNode.implementation===ce.implementation){u(le,ae.sibling),be=v(ae,ce.children||[]),be.return=le,le=be;break e}else{u(le,ae);break}else a(le,ae);ae=ae.sibling}be=md(ce,le.mode,be),be.return=le,le=be}return R(le);case P:return ce=Xi(ce),lt(le,ae,ce,be)}if(H(ce))return Me(le,ae,ce,be);if(D(ce)){if(Re=D(ce),typeof Re!="function")throw Error(i(150));return ce=Re.call(ce),Ue(le,ae,ce,be)}if(typeof ce.then=="function")return lt(le,ae,su(ce),be);if(ce.$$typeof===E)return lt(le,ae,ru(le,ce),be);lu(le,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,ae!==null&&ae.tag===6?(u(le,ae.sibling),be=v(ae,ce),be.return=le,le=be):(u(le,ae),be=pd(ce,le.mode,be),be.return=le,le=be),R(le)):u(le,ae)}return function(le,ae,ce,be){try{Ko=0;var Re=lt(le,ae,ce,be);return La=null,Re}catch(Oe){if(Oe===Ia||Oe===au)throw Oe;var tt=yn(29,Oe,null,le.mode);return tt.lanes=be,tt.return=le,tt}}}var Ki=j0(!0),N0=j0(!1),oi=!1;function jd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nd(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function si(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function li(r,a,u){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(rt&2)!==0){var v=f.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),f.pending=a,a=Jl(r),f0(r,null,u),a}return Ql(r,f,a,u),Jl(r)}function Qo(r,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var f=a.lanes;f&=r.pendingLanes,u|=f,a.lanes=u,Dl(r,u)}}function Ad(r,a){var u=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var v=null,C=null;if(u=u.firstBaseUpdate,u!==null){do{var R={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};C===null?v=C=R:C=C.next=R,u=u.next}while(u!==null);C===null?v=C=a:C=C.next=a}else v=C=a;u={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:C,shared:f.shared,callbacks:f.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=a:r.next=a,u.lastBaseUpdate=a}var Td=!1;function Jo(){if(Td){var r=Ra;if(r!==null)throw r}}function es(r,a,u,f){Td=!1;var v=r.updateQueue;oi=!1;var C=v.firstBaseUpdate,R=v.lastBaseUpdate,G=v.shared.pending;if(G!==null){v.shared.pending=null;var ne=G,fe=ne.next;ne.next=null,R===null?C=fe:R.next=fe,R=ne;var xe=r.alternate;xe!==null&&(xe=xe.updateQueue,G=xe.lastBaseUpdate,G!==R&&(G===null?xe.firstBaseUpdate=fe:G.next=fe,xe.lastBaseUpdate=ne))}if(C!==null){var Se=v.baseState;R=0,xe=fe=ne=null,G=C;do{var he=G.lane&-536870913,me=he!==G.lane;if(me?(Ze&he)===he:(f&he)===he){he!==0&&he===Oa&&(Td=!0),xe!==null&&(xe=xe.next={lane:0,tag:G.tag,payload:G.payload,callback:null,next:null});e:{var Me=r,Ue=G;he=a;var lt=u;switch(Ue.tag){case 1:if(Me=Ue.payload,typeof Me=="function"){Se=Me.call(lt,Se,he);break e}Se=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Ue.payload,he=typeof Me=="function"?Me.call(lt,Se,he):Me,he==null)break e;Se=p({},Se,he);break e;case 2:oi=!0}}he=G.callback,he!==null&&(r.flags|=64,me&&(r.flags|=8192),me=v.callbacks,me===null?v.callbacks=[he]:me.push(he))}else me={lane:he,tag:G.tag,payload:G.payload,callback:G.callback,next:null},xe===null?(fe=xe=me,ne=Se):xe=xe.next=me,R|=he;if(G=G.next,G===null){if(G=v.shared.pending,G===null)break;me=G,G=me.next,me.next=null,v.lastBaseUpdate=me,v.shared.pending=null}}while(!0);xe===null&&(ne=Se),v.baseState=ne,v.firstBaseUpdate=fe,v.lastBaseUpdate=xe,C===null&&(v.shared.lanes=0),hi|=R,r.lanes=R,r.memoizedState=Se}}function A0(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function T0(r,a){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)A0(u[r],a)}var Ua=z(null),uu=z(0);function D0(r,a){r=zr,O(uu,r),O(Ua,a),zr=r|a.baseLanes}function Dd(){O(uu,zr),O(Ua,Ua.current)}function zd(){zr=uu.current,I(Ua),I(uu)}var xn=z(null),In=null;function ui(r){var a=r.alternate;O(kt,kt.current&1),O(xn,r),In===null&&(a===null||Ua.current!==null||a.memoizedState!==null)&&(In=r)}function Md(r){O(kt,kt.current),O(xn,r),In===null&&(In=r)}function z0(r){r.tag===22?(O(kt,kt.current),O(xn,r),In===null&&(In=r)):ci()}function ci(){O(kt,kt.current),O(xn,xn.current)}function vn(r){I(xn),In===r&&(In=null),I(kt)}var kt=z(0);function cu(r){for(var a=r;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Bh(u)||Hh(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var kr=0,He=null,ot=null,Tt=null,fu=!1,Ba=!1,Wi=!1,du=0,ts=0,Ha=null,aE=0;function wt(){throw Error(i(321))}function Od(r,a){if(a===null)return!1;for(var u=0;u<a.length&&u<r.length;u++)if(!gn(r[u],a[u]))return!1;return!0}function Rd(r,a,u,f,v,C){return kr=C,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,U.H=r===null||r.memoizedState===null?my:Kd,Wi=!1,C=u(f,v),Wi=!1,Ba&&(C=O0(a,u,f,v)),M0(r),C}function M0(r){U.H=is;var a=ot!==null&&ot.next!==null;if(kr=0,Tt=ot=He=null,fu=!1,ts=0,Ha=null,a)throw Error(i(300));r===null||Dt||(r=r.dependencies,r!==null&&nu(r)&&(Dt=!0))}function O0(r,a,u,f){He=r;var v=0;do{if(Ba&&(Ha=null),ts=0,Ba=!1,25<=v)throw Error(i(301));if(v+=1,Tt=ot=null,r.updateQueue!=null){var C=r.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}U.H=gy,C=a(u,f)}while(Ba);return C}function oE(){var r=U.H,a=r.useState()[0];return a=typeof a.then=="function"?ns(a):a,r=r.useState()[0],(ot!==null?ot.memoizedState:null)!==r&&(He.flags|=1024),a}function Id(){var r=du!==0;return du=0,r}function Ld(r,a,u){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~u}function Ud(r){if(fu){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}fu=!1}kr=0,Tt=ot=He=null,Ba=!1,ts=du=0,Ha=null}function Wt(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?He.memoizedState=Tt=r:Tt=Tt.next=r,Tt}function Et(){if(ot===null){var r=He.alternate;r=r!==null?r.memoizedState:null}else r=ot.next;var a=Tt===null?He.memoizedState:Tt.next;if(a!==null)Tt=a,ot=r;else{if(r===null)throw He.alternate===null?Error(i(467)):Error(i(310));ot=r,r={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Tt===null?He.memoizedState=Tt=r:Tt=Tt.next=r}return Tt}function hu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ns(r){var a=ts;return ts+=1,Ha===null&&(Ha=[]),r=k0(Ha,r,a),a=He,(Tt===null?a.memoizedState:Tt.next)===null&&(a=a.alternate,U.H=a===null||a.memoizedState===null?my:Kd),r}function pu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ns(r);if(r.$$typeof===E)return Pt(r)}throw Error(i(438,String(r)))}function Bd(r){var a=null,u=He.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var f=He.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(v){return v.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=hu(),He.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(r),f=0;f<r;f++)u[f]=$;return a.index++,u}function Er(r,a){return typeof a=="function"?a(r):a}function mu(r){var a=Et();return Hd(a,ot,r)}function Hd(r,a,u){var f=r.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=u;var v=r.baseQueue,C=f.pending;if(C!==null){if(v!==null){var R=v.next;v.next=C.next,C.next=R}a.baseQueue=v=C,f.pending=null}if(C=r.baseState,v===null)r.memoizedState=C;else{a=v.next;var G=R=null,ne=null,fe=a,xe=!1;do{var Se=fe.lane&-536870913;if(Se!==fe.lane?(Ze&Se)===Se:(kr&Se)===Se){var he=fe.revertLane;if(he===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),Se===Oa&&(xe=!0);else if((kr&he)===he){fe=fe.next,he===Oa&&(xe=!0);continue}else Se={lane:0,revertLane:fe.revertLane,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},ne===null?(G=ne=Se,R=C):ne=ne.next=Se,He.lanes|=he,hi|=he;Se=fe.action,Wi&&u(C,Se),C=fe.hasEagerState?fe.eagerState:u(C,Se)}else he={lane:Se,revertLane:fe.revertLane,gesture:fe.gesture,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},ne===null?(G=ne=he,R=C):ne=ne.next=he,He.lanes|=Se,hi|=Se;fe=fe.next}while(fe!==null&&fe!==a);if(ne===null?R=C:ne.next=G,!gn(C,r.memoizedState)&&(Dt=!0,xe&&(u=Ra,u!==null)))throw u;r.memoizedState=C,r.baseState=R,r.baseQueue=ne,f.lastRenderedState=C}return v===null&&(f.lanes=0),[r.memoizedState,f.dispatch]}function Pd(r){var a=Et(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var f=u.dispatch,v=u.pending,C=a.memoizedState;if(v!==null){u.pending=null;var R=v=v.next;do C=r(C,R.action),R=R.next;while(R!==v);gn(C,a.memoizedState)||(Dt=!0),a.memoizedState=C,a.baseQueue===null&&(a.baseState=C),u.lastRenderedState=C}return[C,f]}function R0(r,a,u){var f=He,v=Et(),C=Qe;if(C){if(u===void 0)throw Error(i(407));u=u()}else u=a();var R=!gn((ot||v).memoizedState,u);if(R&&(v.memoizedState=u,Dt=!0),v=v.queue,$d(U0.bind(null,f,v,r),[r]),v.getSnapshot!==a||R||Tt!==null&&Tt.memoizedState.tag&1){if(f.flags|=2048,Pa(9,{destroy:void 0},L0.bind(null,f,v,u,a),null),ut===null)throw Error(i(349));C||(kr&127)!==0||I0(f,a,u)}return u}function I0(r,a,u){r.flags|=16384,r={getSnapshot:a,value:u},a=He.updateQueue,a===null?(a=hu(),He.updateQueue=a,a.stores=[r]):(u=a.stores,u===null?a.stores=[r]:u.push(r))}function L0(r,a,u,f){a.value=u,a.getSnapshot=f,B0(a)&&H0(r)}function U0(r,a,u){return u(function(){B0(a)&&H0(r)})}function B0(r){var a=r.getSnapshot;r=r.value;try{var u=a();return!gn(r,u)}catch{return!0}}function H0(r){var a=Fi(r,2);a!==null&&cn(a,r,2)}function Fd(r){var a=Wt();if(typeof r=="function"){var u=r;if(r=u(),Wi){jt(!0);try{u()}finally{jt(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:r},a}function P0(r,a,u,f){return r.baseState=u,Hd(r,ot,typeof f=="function"?f:Er)}function sE(r,a,u,f,v){if(xu(r))throw Error(i(485));if(r=a.action,r!==null){var C={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){C.listeners.push(R)}};U.T!==null?u(!0):C.isTransition=!1,f(C),u=a.pending,u===null?(C.next=a.pending=C,F0(a,C)):(C.next=u.next,a.pending=u.next=C)}}function F0(r,a){var u=a.action,f=a.payload,v=r.state;if(a.isTransition){var C=U.T,R={};U.T=R;try{var G=u(v,f),ne=U.S;ne!==null&&ne(R,G),q0(r,a,G)}catch(fe){qd(r,a,fe)}finally{C!==null&&R.types!==null&&(C.types=R.types),U.T=C}}else try{C=u(v,f),q0(r,a,C)}catch(fe){qd(r,a,fe)}}function q0(r,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){$0(r,a,f)},function(f){return qd(r,a,f)}):$0(r,a,u)}function $0(r,a,u){a.status="fulfilled",a.value=u,V0(a),r.state=u,a=r.pending,a!==null&&(u=a.next,u===a?r.pending=null:(u=u.next,a.next=u,F0(r,u)))}function qd(r,a,u){var f=r.pending;if(r.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=u,V0(a),a=a.next;while(a!==f)}r.action=null}function V0(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function Y0(r,a){return a}function G0(r,a){if(Qe){var u=ut.formState;if(u!==null){e:{var f=He;if(Qe){if(mt){t:{for(var v=mt,C=Rn;v.nodeType!==8;){if(!C){v=null;break t}if(v=Ln(v.nextSibling),v===null){v=null;break t}}C=v.data,v=C==="F!"||C==="F"?v:null}if(v){mt=Ln(v.nextSibling),f=v.data==="F!";break e}}ii(f)}f=!1}f&&(a=u[0])}}return u=Wt(),u.memoizedState=u.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Y0,lastRenderedState:a},u.queue=f,u=dy.bind(null,He,f),f.dispatch=u,f=Fd(!1),C=Zd.bind(null,He,!1,f.queue),f=Wt(),v={state:a,dispatch:null,action:r,pending:null},f.queue=v,u=sE.bind(null,He,v,C,u),v.dispatch=u,f.memoizedState=r,[a,u,!1]}function X0(r){var a=Et();return Z0(a,ot,r)}function Z0(r,a,u){if(a=Hd(r,a,Y0)[0],r=mu(Er)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var f=ns(a)}catch(R){throw R===Ia?au:R}else f=a;a=Et();var v=a.queue,C=v.dispatch;return u!==a.memoizedState&&(He.flags|=2048,Pa(9,{destroy:void 0},lE.bind(null,v,u),null)),[f,C,r]}function lE(r,a){r.action=a}function K0(r){var a=Et(),u=ot;if(u!==null)return Z0(a,u,r);Et(),a=a.memoizedState,u=Et();var f=u.queue.dispatch;return u.memoizedState=r,[a,f,!1]}function Pa(r,a,u,f){return r={tag:r,create:u,deps:f,inst:a,next:null},a=He.updateQueue,a===null&&(a=hu(),He.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=r.next=r:(f=u.next,u.next=r,r.next=f,a.lastEffect=r),r}function W0(){return Et().memoizedState}function gu(r,a,u,f){var v=Wt();He.flags|=r,v.memoizedState=Pa(1|a,{destroy:void 0},u,f===void 0?null:f)}function yu(r,a,u,f){var v=Et();f=f===void 0?null:f;var C=v.memoizedState.inst;ot!==null&&f!==null&&Od(f,ot.memoizedState.deps)?v.memoizedState=Pa(a,C,u,f):(He.flags|=r,v.memoizedState=Pa(1|a,C,u,f))}function Q0(r,a){gu(8390656,8,r,a)}function $d(r,a){yu(2048,8,r,a)}function uE(r){He.flags|=4;var a=He.updateQueue;if(a===null)a=hu(),He.updateQueue=a,a.events=[r];else{var u=a.events;u===null?a.events=[r]:u.push(r)}}function J0(r){var a=Et().memoizedState;return uE({ref:a,nextImpl:r}),function(){if((rt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function ey(r,a){return yu(4,2,r,a)}function ty(r,a){return yu(4,4,r,a)}function ny(r,a){if(typeof a=="function"){r=r();var u=a(r);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function ry(r,a,u){u=u!=null?u.concat([r]):null,yu(4,4,ny.bind(null,a,r),u)}function Vd(){}function iy(r,a){var u=Et();a=a===void 0?null:a;var f=u.memoizedState;return a!==null&&Od(a,f[1])?f[0]:(u.memoizedState=[r,a],r)}function ay(r,a){var u=Et();a=a===void 0?null:a;var f=u.memoizedState;if(a!==null&&Od(a,f[1]))return f[0];if(f=r(),Wi){jt(!0);try{r()}finally{jt(!1)}}return u.memoizedState=[f,a],f}function Yd(r,a,u){return u===void 0||(kr&1073741824)!==0&&(Ze&261930)===0?r.memoizedState=a:(r.memoizedState=u,r=ox(),He.lanes|=r,hi|=r,u)}function oy(r,a,u,f){return gn(u,a)?u:Ua.current!==null?(r=Yd(r,u,f),gn(r,a)||(Dt=!0),r):(kr&42)===0||(kr&1073741824)!==0&&(Ze&261930)===0?(Dt=!0,r.memoizedState=u):(r=ox(),He.lanes|=r,hi|=r,a)}function sy(r,a,u,f,v){var C=V.p;V.p=C!==0&&8>C?C:8;var R=U.T,G={};U.T=G,Zd(r,!1,a,u);try{var ne=v(),fe=U.S;if(fe!==null&&fe(G,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var xe=iE(ne,f);rs(r,a,xe,Sn(r))}else rs(r,a,f,Sn(r))}catch(Se){rs(r,a,{then:function(){},status:"rejected",reason:Se},Sn())}finally{V.p=C,R!==null&&G.types!==null&&(R.types=G.types),U.T=R}}function cE(){}function Gd(r,a,u,f){if(r.tag!==5)throw Error(i(476));var v=ly(r).queue;sy(r,v,a,X,u===null?cE:function(){return uy(r),u(f)})}function ly(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:X},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:u},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function uy(r){var a=ly(r);a.next===null&&(a=r.alternate.memoizedState),rs(r,a.next.queue,{},Sn())}function Xd(){return Pt(bs)}function cy(){return Et().memoizedState}function fy(){return Et().memoizedState}function fE(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var u=Sn();r=si(u);var f=li(a,r,u);f!==null&&(cn(f,a,u),Qo(f,a,u)),a={cache:_d()},r.payload=a;return}a=a.return}}function dE(r,a,u){var f=Sn();u={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},xu(r)?hy(a,u):(u=dd(r,a,u,f),u!==null&&(cn(u,r,f),py(u,a,f)))}function dy(r,a,u){var f=Sn();rs(r,a,u,f)}function rs(r,a,u,f){var v={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(xu(r))hy(a,v);else{var C=r.alternate;if(r.lanes===0&&(C===null||C.lanes===0)&&(C=a.lastRenderedReducer,C!==null))try{var R=a.lastRenderedState,G=C(R,u);if(v.hasEagerState=!0,v.eagerState=G,gn(G,R))return Ql(r,a,v,0),ut===null&&Wl(),!1}catch{}if(u=dd(r,a,v,f),u!==null)return cn(u,r,f),py(u,a,f),!0}return!1}function Zd(r,a,u,f){if(f={lane:2,revertLane:jh(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},xu(r)){if(a)throw Error(i(479))}else a=dd(r,u,f,2),a!==null&&cn(a,r,2)}function xu(r){var a=r.alternate;return r===He||a!==null&&a===He}function hy(r,a){Ba=fu=!0;var u=r.pending;u===null?a.next=a:(a.next=u.next,u.next=a),r.pending=a}function py(r,a,u){if((u&4194048)!==0){var f=a.lanes;f&=r.pendingLanes,u|=f,a.lanes=u,Dl(r,u)}}var is={readContext:Pt,use:pu,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};is.useEffectEvent=wt;var my={readContext:Pt,use:pu,useCallback:function(r,a){return Wt().memoizedState=[r,a===void 0?null:a],r},useContext:Pt,useEffect:Q0,useImperativeHandle:function(r,a,u){u=u!=null?u.concat([r]):null,gu(4194308,4,ny.bind(null,a,r),u)},useLayoutEffect:function(r,a){return gu(4194308,4,r,a)},useInsertionEffect:function(r,a){gu(4,2,r,a)},useMemo:function(r,a){var u=Wt();a=a===void 0?null:a;var f=r();if(Wi){jt(!0);try{r()}finally{jt(!1)}}return u.memoizedState=[f,a],f},useReducer:function(r,a,u){var f=Wt();if(u!==void 0){var v=u(a);if(Wi){jt(!0);try{u(a)}finally{jt(!1)}}}else v=a;return f.memoizedState=f.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},f.queue=r,r=r.dispatch=dE.bind(null,He,r),[f.memoizedState,r]},useRef:function(r){var a=Wt();return r={current:r},a.memoizedState=r},useState:function(r){r=Fd(r);var a=r.queue,u=dy.bind(null,He,a);return a.dispatch=u,[r.memoizedState,u]},useDebugValue:Vd,useDeferredValue:function(r,a){var u=Wt();return Yd(u,r,a)},useTransition:function(){var r=Fd(!1);return r=sy.bind(null,He,r.queue,!0,!1),Wt().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,u){var f=He,v=Wt();if(Qe){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),ut===null)throw Error(i(349));(Ze&127)!==0||I0(f,a,u)}v.memoizedState=u;var C={value:u,getSnapshot:a};return v.queue=C,Q0(U0.bind(null,f,C,r),[r]),f.flags|=2048,Pa(9,{destroy:void 0},L0.bind(null,f,C,u,a),null),u},useId:function(){var r=Wt(),a=ut.identifierPrefix;if(Qe){var u=ir,f=rr;u=(f&~(1<<32-Ve(f)-1)).toString(32)+u,a="_"+a+"R_"+u,u=du++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=aE++,a="_"+a+"r_"+u.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:Xd,useFormState:G0,useActionState:G0,useOptimistic:function(r){var a=Wt();a.memoizedState=a.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Zd.bind(null,He,!0,u),u.dispatch=a,[r,a]},useMemoCache:Bd,useCacheRefresh:function(){return Wt().memoizedState=fE.bind(null,He)},useEffectEvent:function(r){var a=Wt(),u={impl:r};return a.memoizedState=u,function(){if((rt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Kd={readContext:Pt,use:pu,useCallback:iy,useContext:Pt,useEffect:$d,useImperativeHandle:ry,useInsertionEffect:ey,useLayoutEffect:ty,useMemo:ay,useReducer:mu,useRef:W0,useState:function(){return mu(Er)},useDebugValue:Vd,useDeferredValue:function(r,a){var u=Et();return oy(u,ot.memoizedState,r,a)},useTransition:function(){var r=mu(Er)[0],a=Et().memoizedState;return[typeof r=="boolean"?r:ns(r),a]},useSyncExternalStore:R0,useId:cy,useHostTransitionStatus:Xd,useFormState:X0,useActionState:X0,useOptimistic:function(r,a){var u=Et();return P0(u,ot,r,a)},useMemoCache:Bd,useCacheRefresh:fy};Kd.useEffectEvent=J0;var gy={readContext:Pt,use:pu,useCallback:iy,useContext:Pt,useEffect:$d,useImperativeHandle:ry,useInsertionEffect:ey,useLayoutEffect:ty,useMemo:ay,useReducer:Pd,useRef:W0,useState:function(){return Pd(Er)},useDebugValue:Vd,useDeferredValue:function(r,a){var u=Et();return ot===null?Yd(u,r,a):oy(u,ot.memoizedState,r,a)},useTransition:function(){var r=Pd(Er)[0],a=Et().memoizedState;return[typeof r=="boolean"?r:ns(r),a]},useSyncExternalStore:R0,useId:cy,useHostTransitionStatus:Xd,useFormState:K0,useActionState:K0,useOptimistic:function(r,a){var u=Et();return ot!==null?P0(u,ot,r,a):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:Bd,useCacheRefresh:fy};gy.useEffectEvent=J0;function Wd(r,a,u,f){a=r.memoizedState,u=u(f,a),u=u==null?a:p({},a,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Qd={enqueueSetState:function(r,a,u){r=r._reactInternals;var f=Sn(),v=si(f);v.payload=a,u!=null&&(v.callback=u),a=li(r,v,f),a!==null&&(cn(a,r,f),Qo(a,r,f))},enqueueReplaceState:function(r,a,u){r=r._reactInternals;var f=Sn(),v=si(f);v.tag=1,v.payload=a,u!=null&&(v.callback=u),a=li(r,v,f),a!==null&&(cn(a,r,f),Qo(a,r,f))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var u=Sn(),f=si(u);f.tag=2,a!=null&&(f.callback=a),a=li(r,f,u),a!==null&&(cn(a,r,u),Qo(a,r,u))}};function yy(r,a,u,f,v,C,R){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,C,R):a.prototype&&a.prototype.isPureReactComponent?!$o(u,f)||!$o(v,C):!0}function xy(r,a,u,f){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,f),a.state!==r&&Qd.enqueueReplaceState(a,a.state,null)}function Qi(r,a){var u=a;if("ref"in a){u={};for(var f in a)f!=="ref"&&(u[f]=a[f])}if(r=r.defaultProps){u===a&&(u=p({},u));for(var v in r)u[v]===void 0&&(u[v]=r[v])}return u}function vy(r){Kl(r)}function by(r){console.error(r)}function wy(r){Kl(r)}function vu(r,a){try{var u=r.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function Sy(r,a,u){try{var f=r.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Jd(r,a,u){return u=si(u),u.tag=3,u.payload={element:null},u.callback=function(){vu(r,a)},u}function _y(r){return r=si(r),r.tag=3,r}function ky(r,a,u,f){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var C=f.value;r.payload=function(){return v(C)},r.callback=function(){Sy(a,u,f)}}var R=u.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(r.callback=function(){Sy(a,u,f),typeof v!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var G=f.stack;this.componentDidCatch(f.value,{componentStack:G!==null?G:""})})}function hE(r,a,u,f,v){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=u.alternate,a!==null&&Ma(a,u,v,!0),u=xn.current,u!==null){switch(u.tag){case 31:case 13:return In===null?Du():u.alternate===null&&St===0&&(St=3),u.flags&=-257,u.flags|=65536,u.lanes=v,f===ou?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([f]):a.add(f),kh(r,f,v)),!1;case 22:return u.flags|=65536,f===ou?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([f]):u.add(f)),kh(r,f,v)),!1}throw Error(i(435,u.tag))}return kh(r,f,v),Du(),!1}if(Qe)return a=xn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=v,f!==xd&&(r=Error(i(422),{cause:f}),Go(zn(r,u)))):(f!==xd&&(a=Error(i(423),{cause:f}),Go(zn(a,u))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,f=zn(f,u),v=Jd(r.stateNode,f,v),Ad(r,v),St!==4&&(St=2)),!1;var C=Error(i(520),{cause:f});if(C=zn(C,u),ds===null?ds=[C]:ds.push(C),St!==4&&(St=2),a===null)return!0;f=zn(f,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,r=v&-v,u.lanes|=r,r=Jd(u.stateNode,f,r),Ad(u,r),!1;case 1:if(a=u.type,C=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(pi===null||!pi.has(C))))return u.flags|=65536,v&=-v,u.lanes|=v,v=_y(v),ky(v,r,u,f),Ad(u,v),!1}u=u.return}while(u!==null);return!1}var eh=Error(i(461)),Dt=!1;function Ft(r,a,u,f){a.child=r===null?N0(a,null,u,f):Ki(a,r.child,u,f)}function Ey(r,a,u,f,v){u=u.render;var C=a.ref;if("ref"in f){var R={};for(var G in f)G!=="ref"&&(R[G]=f[G])}else R=f;return Yi(a),f=Rd(r,a,u,R,C,v),G=Id(),r!==null&&!Dt?(Ld(r,a,v),Cr(r,a,v)):(Qe&&G&&gd(a),a.flags|=1,Ft(r,a,f,v),a.child)}function Cy(r,a,u,f,v){if(r===null){var C=u.type;return typeof C=="function"&&!hd(C)&&C.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=C,jy(r,a,C,f,v)):(r=eu(u.type,null,f,a,a.mode,v),r.ref=a.ref,r.return=a,a.child=r)}if(C=r.child,!lh(r,v)){var R=C.memoizedProps;if(u=u.compare,u=u!==null?u:$o,u(R,f)&&r.ref===a.ref)return Cr(r,a,v)}return a.flags|=1,r=br(C,f),r.ref=a.ref,r.return=a,a.child=r}function jy(r,a,u,f,v){if(r!==null){var C=r.memoizedProps;if($o(C,f)&&r.ref===a.ref)if(Dt=!1,a.pendingProps=f=C,lh(r,v))(r.flags&131072)!==0&&(Dt=!0);else return a.lanes=r.lanes,Cr(r,a,v)}return th(r,a,u,f,v)}function Ny(r,a,u,f){var v=f.children,C=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((a.flags&128)!==0){if(C=C!==null?C.baseLanes|u:u,r!==null){for(f=a.child=r.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~C}else f=0,a.child=null;return Ay(r,a,C,u,f)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&iu(a,C!==null?C.cachePool:null),C!==null?D0(a,C):Dd(),z0(a);else return f=a.lanes=536870912,Ay(r,a,C!==null?C.baseLanes|u:u,u,f)}else C!==null?(iu(a,C.cachePool),D0(a,C),ci(),a.memoizedState=null):(r!==null&&iu(a,null),Dd(),ci());return Ft(r,a,v,u),a.child}function as(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Ay(r,a,u,f,v){var C=Ed();return C=C===null?null:{parent:At._currentValue,pool:C},a.memoizedState={baseLanes:u,cachePool:C},r!==null&&iu(a,null),Dd(),z0(a),r!==null&&Ma(r,a,f,!0),a.childLanes=v,null}function bu(r,a){return a=Su({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function Ty(r,a,u){return Ki(a,r.child,null,u),r=bu(a,a.pendingProps),r.flags|=2,vn(a),a.memoizedState=null,r}function pE(r,a,u){var f=a.pendingProps,v=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Qe){if(f.mode==="hidden")return r=bu(a,f),a.lanes=536870912,as(null,r);if(Md(a),(r=mt)?(r=Fx(r,Rn),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:ni!==null?{id:rr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},u=h0(r),u.return=a,a.child=u,Ht=a,mt=null)):r=null,r===null)throw ii(a);return a.lanes=536870912,null}return bu(a,f)}var C=r.memoizedState;if(C!==null){var R=C.dehydrated;if(Md(a),v)if(a.flags&256)a.flags&=-257,a=Ty(r,a,u);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if(Dt||Ma(r,a,u,!1),v=(u&r.childLanes)!==0,Dt||v){if(f=ut,f!==null&&(R=zl(f,u),R!==0&&R!==C.retryLane))throw C.retryLane=R,Fi(r,R),cn(f,r,R),eh;Du(),a=Ty(r,a,u)}else r=C.treeContext,mt=Ln(R.nextSibling),Ht=a,Qe=!0,ri=null,Rn=!1,r!==null&&g0(a,r),a=bu(a,f),a.flags|=4096;return a}return r=br(r.child,{mode:f.mode,children:f.children}),r.ref=a.ref,a.child=r,r.return=a,r}function wu(r,a){var u=a.ref;if(u===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(a.flags|=4194816)}}function th(r,a,u,f,v){return Yi(a),u=Rd(r,a,u,f,void 0,v),f=Id(),r!==null&&!Dt?(Ld(r,a,v),Cr(r,a,v)):(Qe&&f&&gd(a),a.flags|=1,Ft(r,a,u,v),a.child)}function Dy(r,a,u,f,v,C){return Yi(a),a.updateQueue=null,u=O0(a,f,u,v),M0(r),f=Id(),r!==null&&!Dt?(Ld(r,a,C),Cr(r,a,C)):(Qe&&f&&gd(a),a.flags|=1,Ft(r,a,u,C),a.child)}function zy(r,a,u,f,v){if(Yi(a),a.stateNode===null){var C=Aa,R=u.contextType;typeof R=="object"&&R!==null&&(C=Pt(R)),C=new u(f,C),a.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Qd,a.stateNode=C,C._reactInternals=a,C=a.stateNode,C.props=f,C.state=a.memoizedState,C.refs={},jd(a),R=u.contextType,C.context=typeof R=="object"&&R!==null?Pt(R):Aa,C.state=a.memoizedState,R=u.getDerivedStateFromProps,typeof R=="function"&&(Wd(a,u,R,f),C.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(R=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),R!==C.state&&Qd.enqueueReplaceState(C,C.state,null),es(a,f,C,v),Jo(),C.state=a.memoizedState),typeof C.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(r===null){C=a.stateNode;var G=a.memoizedProps,ne=Qi(u,G);C.props=ne;var fe=C.context,xe=u.contextType;R=Aa,typeof xe=="object"&&xe!==null&&(R=Pt(xe));var Se=u.getDerivedStateFromProps;xe=typeof Se=="function"||typeof C.getSnapshotBeforeUpdate=="function",G=a.pendingProps!==G,xe||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(G||fe!==R)&&xy(a,C,f,R),oi=!1;var he=a.memoizedState;C.state=he,es(a,f,C,v),Jo(),fe=a.memoizedState,G||he!==fe||oi?(typeof Se=="function"&&(Wd(a,u,Se,f),fe=a.memoizedState),(ne=oi||yy(a,u,ne,f,he,fe,R))?(xe||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=fe),C.props=f,C.state=fe,C.context=R,f=ne):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{C=a.stateNode,Nd(r,a),R=a.memoizedProps,xe=Qi(u,R),C.props=xe,Se=a.pendingProps,he=C.context,fe=u.contextType,ne=Aa,typeof fe=="object"&&fe!==null&&(ne=Pt(fe)),G=u.getDerivedStateFromProps,(fe=typeof G=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(R!==Se||he!==ne)&&xy(a,C,f,ne),oi=!1,he=a.memoizedState,C.state=he,es(a,f,C,v),Jo();var me=a.memoizedState;R!==Se||he!==me||oi||r!==null&&r.dependencies!==null&&nu(r.dependencies)?(typeof G=="function"&&(Wd(a,u,G,f),me=a.memoizedState),(xe=oi||yy(a,u,xe,f,he,me,ne)||r!==null&&r.dependencies!==null&&nu(r.dependencies))?(fe||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(f,me,ne),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(f,me,ne)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||R===r.memoizedProps&&he===r.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&he===r.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=me),C.props=f,C.state=me,C.context=ne,f=xe):(typeof C.componentDidUpdate!="function"||R===r.memoizedProps&&he===r.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&he===r.memoizedState||(a.flags|=1024),f=!1)}return C=f,wu(r,a),f=(a.flags&128)!==0,C||f?(C=a.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:C.render(),a.flags|=1,r!==null&&f?(a.child=Ki(a,r.child,null,v),a.child=Ki(a,null,u,v)):Ft(r,a,u,v),a.memoizedState=C.state,r=a.child):r=Cr(r,a,v),r}function My(r,a,u,f){return $i(),a.flags|=256,Ft(r,a,u,f),a.child}var nh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rh(r){return{baseLanes:r,cachePool:S0()}}function ih(r,a,u){return r=r!==null?r.childLanes&~u:0,a&&(r|=wn),r}function Oy(r,a,u){var f=a.pendingProps,v=!1,C=(a.flags&128)!==0,R;if((R=C)||(R=r!==null&&r.memoizedState===null?!1:(kt.current&2)!==0),R&&(v=!0,a.flags&=-129),R=(a.flags&32)!==0,a.flags&=-33,r===null){if(Qe){if(v?ui(a):ci(),(r=mt)?(r=Fx(r,Rn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:ni!==null?{id:rr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},u=h0(r),u.return=a,a.child=u,Ht=a,mt=null)):r=null,r===null)throw ii(a);return Hh(r)?a.lanes=32:a.lanes=536870912,null}var G=f.children;return f=f.fallback,v?(ci(),v=a.mode,G=Su({mode:"hidden",children:G},v),f=qi(f,v,u,null),G.return=a,f.return=a,G.sibling=f,a.child=G,f=a.child,f.memoizedState=rh(u),f.childLanes=ih(r,R,u),a.memoizedState=nh,as(null,f)):(ui(a),ah(a,G))}var ne=r.memoizedState;if(ne!==null&&(G=ne.dehydrated,G!==null)){if(C)a.flags&256?(ui(a),a.flags&=-257,a=oh(r,a,u)):a.memoizedState!==null?(ci(),a.child=r.child,a.flags|=128,a=null):(ci(),G=f.fallback,v=a.mode,f=Su({mode:"visible",children:f.children},v),G=qi(G,v,u,null),G.flags|=2,f.return=a,G.return=a,f.sibling=G,a.child=f,Ki(a,r.child,null,u),f=a.child,f.memoizedState=rh(u),f.childLanes=ih(r,R,u),a.memoizedState=nh,a=as(null,f));else if(ui(a),Hh(G)){if(R=G.nextSibling&&G.nextSibling.dataset,R)var fe=R.dgst;R=fe,f=Error(i(419)),f.stack="",f.digest=R,Go({value:f,source:null,stack:null}),a=oh(r,a,u)}else if(Dt||Ma(r,a,u,!1),R=(u&r.childLanes)!==0,Dt||R){if(R=ut,R!==null&&(f=zl(R,u),f!==0&&f!==ne.retryLane))throw ne.retryLane=f,Fi(r,f),cn(R,r,f),eh;Bh(G)||Du(),a=oh(r,a,u)}else Bh(G)?(a.flags|=192,a.child=r.child,a=null):(r=ne.treeContext,mt=Ln(G.nextSibling),Ht=a,Qe=!0,ri=null,Rn=!1,r!==null&&g0(a,r),a=ah(a,f.children),a.flags|=4096);return a}return v?(ci(),G=f.fallback,v=a.mode,ne=r.child,fe=ne.sibling,f=br(ne,{mode:"hidden",children:f.children}),f.subtreeFlags=ne.subtreeFlags&65011712,fe!==null?G=br(fe,G):(G=qi(G,v,u,null),G.flags|=2),G.return=a,f.return=a,f.sibling=G,a.child=f,as(null,f),f=a.child,G=r.child.memoizedState,G===null?G=rh(u):(v=G.cachePool,v!==null?(ne=At._currentValue,v=v.parent!==ne?{parent:ne,pool:ne}:v):v=S0(),G={baseLanes:G.baseLanes|u,cachePool:v}),f.memoizedState=G,f.childLanes=ih(r,R,u),a.memoizedState=nh,as(r.child,f)):(ui(a),u=r.child,r=u.sibling,u=br(u,{mode:"visible",children:f.children}),u.return=a,u.sibling=null,r!==null&&(R=a.deletions,R===null?(a.deletions=[r],a.flags|=16):R.push(r)),a.child=u,a.memoizedState=null,u)}function ah(r,a){return a=Su({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function Su(r,a){return r=yn(22,r,null,a),r.lanes=0,r}function oh(r,a,u){return Ki(a,r.child,null,u),r=ah(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function Ry(r,a,u){r.lanes|=a;var f=r.alternate;f!==null&&(f.lanes|=a),wd(r.return,a,u)}function sh(r,a,u,f,v,C){var R=r.memoizedState;R===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:v,treeForkCount:C}:(R.isBackwards=a,R.rendering=null,R.renderingStartTime=0,R.last=f,R.tail=u,R.tailMode=v,R.treeForkCount=C)}function Iy(r,a,u){var f=a.pendingProps,v=f.revealOrder,C=f.tail;f=f.children;var R=kt.current,G=(R&2)!==0;if(G?(R=R&1|2,a.flags|=128):R&=1,O(kt,R),Ft(r,a,f,u),f=Qe?Yo:0,!G&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Ry(r,u,a);else if(r.tag===19)Ry(r,u,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(u=a.child,v=null;u!==null;)r=u.alternate,r!==null&&cu(r)===null&&(v=u),u=u.sibling;u=v,u===null?(v=a.child,a.child=null):(v=u.sibling,u.sibling=null),sh(a,!1,v,u,C,f);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=a.child,a.child=null;v!==null;){if(r=v.alternate,r!==null&&cu(r)===null){a.child=v;break}r=v.sibling,v.sibling=u,u=v,v=r}sh(a,!0,u,null,C,f);break;case"together":sh(a,!1,null,null,void 0,f);break;default:a.memoizedState=null}return a.child}function Cr(r,a,u){if(r!==null&&(a.dependencies=r.dependencies),hi|=a.lanes,(u&a.childLanes)===0)if(r!==null){if(Ma(r,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,u=br(r,r.pendingProps),a.child=u,u.return=a;r.sibling!==null;)r=r.sibling,u=u.sibling=br(r,r.pendingProps),u.return=a;u.sibling=null}return a.child}function lh(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&nu(r)))}function mE(r,a,u){switch(a.tag){case 3:de(a,a.stateNode.containerInfo),ai(a,At,r.memoizedState.cache),$i();break;case 27:case 5:Ae(a);break;case 4:de(a,a.stateNode.containerInfo);break;case 10:ai(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Md(a),null;break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(ui(a),a.flags|=128,null):(u&a.child.childLanes)!==0?Oy(r,a,u):(ui(a),r=Cr(r,a,u),r!==null?r.sibling:null);ui(a);break;case 19:var v=(r.flags&128)!==0;if(f=(u&a.childLanes)!==0,f||(Ma(r,a,u,!1),f=(u&a.childLanes)!==0),v){if(f)return Iy(r,a,u);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),O(kt,kt.current),f)break;return null;case 22:return a.lanes=0,Ny(r,a,u,a.pendingProps);case 24:ai(a,At,r.memoizedState.cache)}return Cr(r,a,u)}function Ly(r,a,u){if(r!==null)if(r.memoizedProps!==a.pendingProps)Dt=!0;else{if(!lh(r,u)&&(a.flags&128)===0)return Dt=!1,mE(r,a,u);Dt=(r.flags&131072)!==0}else Dt=!1,Qe&&(a.flags&1048576)!==0&&m0(a,Yo,a.index);switch(a.lanes=0,a.tag){case 16:e:{var f=a.pendingProps;if(r=Xi(a.elementType),a.type=r,typeof r=="function")hd(r)?(f=Qi(r,f),a.tag=1,a=zy(null,a,r,f,u)):(a.tag=0,a=th(null,a,r,f,u));else{if(r!=null){var v=r.$$typeof;if(v===j){a.tag=11,a=Ey(null,a,r,f,u);break e}else if(v===M){a.tag=14,a=Cy(null,a,r,f,u);break e}}throw a=N(r)||r,Error(i(306,a,""))}}return a;case 0:return th(r,a,a.type,a.pendingProps,u);case 1:return f=a.type,v=Qi(f,a.pendingProps),zy(r,a,f,v,u);case 3:e:{if(de(a,a.stateNode.containerInfo),r===null)throw Error(i(387));f=a.pendingProps;var C=a.memoizedState;v=C.element,Nd(r,a),es(a,f,null,u);var R=a.memoizedState;if(f=R.cache,ai(a,At,f),f!==C.cache&&Sd(a,[At],u,!0),Jo(),f=R.element,C.isDehydrated)if(C={element:f,isDehydrated:!1,cache:R.cache},a.updateQueue.baseState=C,a.memoizedState=C,a.flags&256){a=My(r,a,f,u);break e}else if(f!==v){v=zn(Error(i(424)),a),Go(v),a=My(r,a,f,u);break e}else for(r=a.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,mt=Ln(r.firstChild),Ht=a,Qe=!0,ri=null,Rn=!0,u=N0(a,null,f,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if($i(),f===v){a=Cr(r,a,u);break e}Ft(r,a,f,u)}a=a.child}return a;case 26:return wu(r,a),r===null?(u=Xx(a.type,null,a.pendingProps,null))?a.memoizedState=u:Qe||(u=a.type,r=a.pendingProps,f=Uu(ue.current).createElement(u),f[Rt]=a,f[Yt]=r,qt(f,u,r),Nt(f),a.stateNode=f):a.memoizedState=Xx(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return Ae(a),r===null&&Qe&&(f=a.stateNode=Vx(a.type,a.pendingProps,ue.current),Ht=a,Rn=!0,v=mt,xi(a.type)?(Ph=v,mt=Ln(f.firstChild)):mt=v),Ft(r,a,a.pendingProps.children,u),wu(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Qe&&((v=f=mt)&&(f=VE(f,a.type,a.pendingProps,Rn),f!==null?(a.stateNode=f,Ht=a,mt=Ln(f.firstChild),Rn=!1,v=!0):v=!1),v||ii(a)),Ae(a),v=a.type,C=a.pendingProps,R=r!==null?r.memoizedProps:null,f=C.children,Ih(v,C)?f=null:R!==null&&Ih(v,R)&&(a.flags|=32),a.memoizedState!==null&&(v=Rd(r,a,oE,null,null,u),bs._currentValue=v),wu(r,a),Ft(r,a,f,u),a.child;case 6:return r===null&&Qe&&((r=u=mt)&&(u=YE(u,a.pendingProps,Rn),u!==null?(a.stateNode=u,Ht=a,mt=null,r=!0):r=!1),r||ii(a)),null;case 13:return Oy(r,a,u);case 4:return de(a,a.stateNode.containerInfo),f=a.pendingProps,r===null?a.child=Ki(a,null,f,u):Ft(r,a,f,u),a.child;case 11:return Ey(r,a,a.type,a.pendingProps,u);case 7:return Ft(r,a,a.pendingProps,u),a.child;case 8:return Ft(r,a,a.pendingProps.children,u),a.child;case 12:return Ft(r,a,a.pendingProps.children,u),a.child;case 10:return f=a.pendingProps,ai(a,a.type,f.value),Ft(r,a,f.children,u),a.child;case 9:return v=a.type._context,f=a.pendingProps.children,Yi(a),v=Pt(v),f=f(v),a.flags|=1,Ft(r,a,f,u),a.child;case 14:return Cy(r,a,a.type,a.pendingProps,u);case 15:return jy(r,a,a.type,a.pendingProps,u);case 19:return Iy(r,a,u);case 31:return pE(r,a,u);case 22:return Ny(r,a,u,a.pendingProps);case 24:return Yi(a),f=Pt(At),r===null?(v=Ed(),v===null&&(v=ut,C=_d(),v.pooledCache=C,C.refCount++,C!==null&&(v.pooledCacheLanes|=u),v=C),a.memoizedState={parent:f,cache:v},jd(a),ai(a,At,v)):((r.lanes&u)!==0&&(Nd(r,a),es(a,null,null,u),Jo()),v=r.memoizedState,C=a.memoizedState,v.parent!==f?(v={parent:f,cache:f},a.memoizedState=v,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=v),ai(a,At,f)):(f=C.cache,ai(a,At,f),f!==v.cache&&Sd(a,[At],u,!0))),Ft(r,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function jr(r){r.flags|=4}function uh(r,a,u,f,v){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(cx())r.flags|=8192;else throw Zi=ou,Cd}else r.flags&=-16777217}function Uy(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Jx(a))if(cx())r.flags|=8192;else throw Zi=ou,Cd}function _u(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?Al():536870912,r.lanes|=a,Va|=a)}function os(r,a){if(!Qe)switch(r.tailMode){case"hidden":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function gt(r){var a=r.alternate!==null&&r.alternate.child===r.child,u=0,f=0;if(a)for(var v=r.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=f,r.childLanes=u,a}function gE(r,a,u){var f=a.pendingProps;switch(yd(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(a),null;case 1:return gt(a),null;case 3:return u=a.stateNode,f=null,r!==null&&(f=r.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),_r(At),ve(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(za(a)?jr(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,vd())),gt(a),null;case 26:var v=a.type,C=a.memoizedState;return r===null?(jr(a),C!==null?(gt(a),Uy(a,C)):(gt(a),uh(a,v,null,f,u))):C?C!==r.memoizedState?(jr(a),gt(a),Uy(a,C)):(gt(a),a.flags&=-16777217):(r=r.memoizedProps,r!==f&&jr(a),gt(a),uh(a,v,r,f,u)),null;case 27:if(je(a),u=ue.current,v=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==f&&jr(a);else{if(!f){if(a.stateNode===null)throw Error(i(166));return gt(a),null}r=Q.current,za(a)?y0(a):(r=Vx(v,f,u),a.stateNode=r,jr(a))}return gt(a),null;case 5:if(je(a),v=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==f&&jr(a);else{if(!f){if(a.stateNode===null)throw Error(i(166));return gt(a),null}if(C=Q.current,za(a))y0(a);else{var R=Uu(ue.current);switch(C){case 1:C=R.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:C=R.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":C=R.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":C=R.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":C=R.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof f.is=="string"?R.createElement("select",{is:f.is}):R.createElement("select"),f.multiple?C.multiple=!0:f.size&&(C.size=f.size);break;default:C=typeof f.is=="string"?R.createElement(v,{is:f.is}):R.createElement(v)}}C[Rt]=a,C[Yt]=f;e:for(R=a.child;R!==null;){if(R.tag===5||R.tag===6)C.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===a)break e;for(;R.sibling===null;){if(R.return===null||R.return===a)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}a.stateNode=C;e:switch(qt(C,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&jr(a)}}return gt(a),uh(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,u),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==f&&jr(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(i(166));if(r=ue.current,za(a)){if(r=a.stateNode,u=a.memoizedProps,f=null,v=Ht,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}r[Rt]=a,r=!!(r.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||Ox(r.nodeValue,u)),r||ii(a,!0)}else r=Uu(r).createTextNode(f),r[Rt]=a,a.stateNode=r}return gt(a),null;case 31:if(u=a.memoizedState,r===null||r.memoizedState!==null){if(f=za(a),u!==null){if(r===null){if(!f)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Rt]=a}else $i(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;gt(a),r=!1}else u=vd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return a.flags&256?(vn(a),a):(vn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return gt(a),null;case 13:if(f=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=za(a),f!==null&&f.dehydrated!==null){if(r===null){if(!v)throw Error(i(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Rt]=a}else $i(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;gt(a),v=!1}else v=vd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return a.flags&256?(vn(a),a):(vn(a),null)}return vn(a),(a.flags&128)!==0?(a.lanes=u,a):(u=f!==null,r=r!==null&&r.memoizedState!==null,u&&(f=a.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),C=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(C=f.memoizedState.cachePool.pool),C!==v&&(f.flags|=2048)),u!==r&&u&&(a.child.flags|=8192),_u(a,a.updateQueue),gt(a),null);case 4:return ve(),r===null&&Dh(a.stateNode.containerInfo),gt(a),null;case 10:return _r(a.type),gt(a),null;case 19:if(I(kt),f=a.memoizedState,f===null)return gt(a),null;if(v=(a.flags&128)!==0,C=f.rendering,C===null)if(v)os(f,!1);else{if(St!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(C=cu(r),C!==null){for(a.flags|=128,os(f,!1),r=C.updateQueue,a.updateQueue=r,_u(a,r),a.subtreeFlags=0,r=u,u=a.child;u!==null;)d0(u,r),u=u.sibling;return O(kt,kt.current&1|2),Qe&&wr(a,f.treeForkCount),a.child}r=r.sibling}f.tail!==null&&Ce()>Nu&&(a.flags|=128,v=!0,os(f,!1),a.lanes=4194304)}else{if(!v)if(r=cu(C),r!==null){if(a.flags|=128,v=!0,r=r.updateQueue,a.updateQueue=r,_u(a,r),os(f,!0),f.tail===null&&f.tailMode==="hidden"&&!C.alternate&&!Qe)return gt(a),null}else 2*Ce()-f.renderingStartTime>Nu&&u!==536870912&&(a.flags|=128,v=!0,os(f,!1),a.lanes=4194304);f.isBackwards?(C.sibling=a.child,a.child=C):(r=f.last,r!==null?r.sibling=C:a.child=C,f.last=C)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=Ce(),r.sibling=null,u=kt.current,O(kt,v?u&1|2:u&1),Qe&&wr(a,f.treeForkCount),r):(gt(a),null);case 22:case 23:return vn(a),zd(),f=a.memoizedState!==null,r!==null?r.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?(u&536870912)!==0&&(a.flags&128)===0&&(gt(a),a.subtreeFlags&6&&(a.flags|=8192)):gt(a),u=a.updateQueue,u!==null&&_u(a,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==u&&(a.flags|=2048),r!==null&&I(Gi),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),_r(At),gt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function yE(r,a){switch(yd(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return _r(At),ve(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return je(a),null;case 31:if(a.memoizedState!==null){if(vn(a),a.alternate===null)throw Error(i(340));$i()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(vn(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));$i()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return I(kt),null;case 4:return ve(),null;case 10:return _r(a.type),null;case 22:case 23:return vn(a),zd(),r!==null&&I(Gi),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return _r(At),null;case 25:return null;default:return null}}function By(r,a){switch(yd(a),a.tag){case 3:_r(At),ve();break;case 26:case 27:case 5:je(a);break;case 4:ve();break;case 31:a.memoizedState!==null&&vn(a);break;case 13:vn(a);break;case 19:I(kt);break;case 10:_r(a.type);break;case 22:case 23:vn(a),zd(),r!==null&&I(Gi);break;case 24:_r(At)}}function ss(r,a){try{var u=a.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var v=f.next;u=v;do{if((u.tag&r)===r){f=void 0;var C=u.create,R=u.inst;f=C(),R.destroy=f}u=u.next}while(u!==v)}}catch(G){at(a,a.return,G)}}function fi(r,a,u){try{var f=a.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var C=v.next;f=C;do{if((f.tag&r)===r){var R=f.inst,G=R.destroy;if(G!==void 0){R.destroy=void 0,v=a;var ne=u,fe=G;try{fe()}catch(xe){at(v,ne,xe)}}}f=f.next}while(f!==C)}}catch(xe){at(a,a.return,xe)}}function Hy(r){var a=r.updateQueue;if(a!==null){var u=r.stateNode;try{T0(a,u)}catch(f){at(r,r.return,f)}}}function Py(r,a,u){u.props=Qi(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(f){at(r,a,f)}}function ls(r,a){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var f=r.stateNode;break;case 30:f=r.stateNode;break;default:f=r.stateNode}typeof u=="function"?r.refCleanup=u(f):u.current=f}}catch(v){at(r,a,v)}}function ar(r,a){var u=r.ref,f=r.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(v){at(r,a,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){at(r,a,v)}else u.current=null}function Fy(r){var a=r.type,u=r.memoizedProps,f=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(v){at(r,r.return,v)}}function ch(r,a,u){try{var f=r.stateNode;BE(f,r.type,u,a),f[Yt]=a}catch(v){at(r,r.return,v)}}function qy(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&xi(r.type)||r.tag===4}function fh(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||qy(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&xi(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function dh(r,a,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(r),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=xr));else if(f!==4&&(f===27&&xi(r.type)&&(u=r.stateNode,a=null),r=r.child,r!==null))for(dh(r,a,u),r=r.sibling;r!==null;)dh(r,a,u),r=r.sibling}function ku(r,a,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,a?u.insertBefore(r,a):u.appendChild(r);else if(f!==4&&(f===27&&xi(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(ku(r,a,u),r=r.sibling;r!==null;)ku(r,a,u),r=r.sibling}function $y(r){var a=r.stateNode,u=r.memoizedProps;try{for(var f=r.type,v=a.attributes;v.length;)a.removeAttributeNode(v[0]);qt(a,f,u),a[Rt]=r,a[Yt]=u}catch(C){at(r,r.return,C)}}var Nr=!1,zt=!1,hh=!1,Vy=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function xE(r,a){if(r=r.containerInfo,Oh=Vu,r=r0(r),od(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var v=f.anchorOffset,C=f.focusNode;f=f.focusOffset;try{u.nodeType,C.nodeType}catch{u=null;break e}var R=0,G=-1,ne=-1,fe=0,xe=0,Se=r,he=null;t:for(;;){for(var me;Se!==u||v!==0&&Se.nodeType!==3||(G=R+v),Se!==C||f!==0&&Se.nodeType!==3||(ne=R+f),Se.nodeType===3&&(R+=Se.nodeValue.length),(me=Se.firstChild)!==null;)he=Se,Se=me;for(;;){if(Se===r)break t;if(he===u&&++fe===v&&(G=R),he===C&&++xe===f&&(ne=R),(me=Se.nextSibling)!==null)break;Se=he,he=Se.parentNode}Se=me}u=G===-1||ne===-1?null:{start:G,end:ne}}else u=null}u=u||{start:0,end:0}}else u=null;for(Rh={focusedElem:r,selectionRange:u},Vu=!1,Ut=a;Ut!==null;)if(a=Ut,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,Ut=r;else for(;Ut!==null;){switch(a=Ut,C=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)v=r[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&C!==null){r=void 0,u=a,v=C.memoizedProps,C=C.memoizedState,f=u.stateNode;try{var Me=Qi(u.type,v);r=f.getSnapshotBeforeUpdate(Me,C),f.__reactInternalSnapshotBeforeUpdate=r}catch(Ue){at(u,u.return,Ue)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,u=r.nodeType,u===9)Uh(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Uh(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,Ut=r;break}Ut=a.return}}function Yy(r,a,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:Tr(r,u),f&4&&ss(5,u);break;case 1:if(Tr(r,u),f&4)if(r=u.stateNode,a===null)try{r.componentDidMount()}catch(R){at(u,u.return,R)}else{var v=Qi(u.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(v,a,r.__reactInternalSnapshotBeforeUpdate)}catch(R){at(u,u.return,R)}}f&64&&Hy(u),f&512&&ls(u,u.return);break;case 3:if(Tr(r,u),f&64&&(r=u.updateQueue,r!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{T0(r,a)}catch(R){at(u,u.return,R)}}break;case 27:a===null&&f&4&&$y(u);case 26:case 5:Tr(r,u),a===null&&f&4&&Fy(u),f&512&&ls(u,u.return);break;case 12:Tr(r,u);break;case 31:Tr(r,u),f&4&&Zy(r,u);break;case 13:Tr(r,u),f&4&&Ky(r,u),f&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=jE.bind(null,u),GE(r,u))));break;case 22:if(f=u.memoizedState!==null||Nr,!f){a=a!==null&&a.memoizedState!==null||zt,v=Nr;var C=zt;Nr=f,(zt=a)&&!C?Dr(r,u,(u.subtreeFlags&8772)!==0):Tr(r,u),Nr=v,zt=C}break;case 30:break;default:Tr(r,u)}}function Gy(r){var a=r.alternate;a!==null&&(r.alternate=null,Gy(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Oo(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var bt=null,on=!1;function Ar(r,a,u){for(u=u.child;u!==null;)Xy(r,a,u),u=u.sibling}function Xy(r,a,u){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount($e,u)}catch{}switch(u.tag){case 26:zt||ar(u,a),Ar(r,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:zt||ar(u,a);var f=bt,v=on;xi(u.type)&&(bt=u.stateNode,on=!1),Ar(r,a,u),ys(u.stateNode),bt=f,on=v;break;case 5:zt||ar(u,a);case 6:if(f=bt,v=on,bt=null,Ar(r,a,u),bt=f,on=v,bt!==null)if(on)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(u.stateNode)}catch(C){at(u,a,C)}else try{bt.removeChild(u.stateNode)}catch(C){at(u,a,C)}break;case 18:bt!==null&&(on?(r=bt,Hx(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),Ja(r)):Hx(bt,u.stateNode));break;case 4:f=bt,v=on,bt=u.stateNode.containerInfo,on=!0,Ar(r,a,u),bt=f,on=v;break;case 0:case 11:case 14:case 15:fi(2,u,a),zt||fi(4,u,a),Ar(r,a,u);break;case 1:zt||(ar(u,a),f=u.stateNode,typeof f.componentWillUnmount=="function"&&Py(u,a,f)),Ar(r,a,u);break;case 21:Ar(r,a,u);break;case 22:zt=(f=zt)||u.memoizedState!==null,Ar(r,a,u),zt=f;break;default:Ar(r,a,u)}}function Zy(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Ja(r)}catch(u){at(a,a.return,u)}}}function Ky(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ja(r)}catch(u){at(a,a.return,u)}}function vE(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new Vy),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new Vy),a;default:throw Error(i(435,r.tag))}}function Eu(r,a){var u=vE(r);a.forEach(function(f){if(!u.has(f)){u.add(f);var v=NE.bind(null,r,f);f.then(v,v)}})}function sn(r,a){var u=a.deletions;if(u!==null)for(var f=0;f<u.length;f++){var v=u[f],C=r,R=a,G=R;e:for(;G!==null;){switch(G.tag){case 27:if(xi(G.type)){bt=G.stateNode,on=!1;break e}break;case 5:bt=G.stateNode,on=!1;break e;case 3:case 4:bt=G.stateNode.containerInfo,on=!0;break e}G=G.return}if(bt===null)throw Error(i(160));Xy(C,R,v),bt=null,on=!1,C=v.alternate,C!==null&&(C.return=null),v.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Wy(a,r),a=a.sibling}var Vn=null;function Wy(r,a){var u=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:sn(a,r),ln(r),f&4&&(fi(3,r,r.return),ss(3,r),fi(5,r,r.return));break;case 1:sn(a,r),ln(r),f&512&&(zt||u===null||ar(u,u.return)),f&64&&Nr&&(r=r.updateQueue,r!==null&&(f=r.callbacks,f!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var v=Vn;if(sn(a,r),ln(r),f&512&&(zt||u===null||ar(u,u.return)),f&4){var C=u!==null?u.memoizedState:null;if(f=r.memoizedState,u===null)if(f===null)if(r.stateNode===null){e:{f=r.type,u=r.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":C=v.getElementsByTagName("title")[0],(!C||C[Ii]||C[Rt]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=v.createElement(f),v.head.insertBefore(C,v.querySelector("head > title"))),qt(C,f,u),C[Rt]=r,Nt(C),f=C;break e;case"link":var R=Wx("link","href",v).get(f+(u.href||""));if(R){for(var G=0;G<R.length;G++)if(C=R[G],C.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&C.getAttribute("rel")===(u.rel==null?null:u.rel)&&C.getAttribute("title")===(u.title==null?null:u.title)&&C.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){R.splice(G,1);break t}}C=v.createElement(f),qt(C,f,u),v.head.appendChild(C);break;case"meta":if(R=Wx("meta","content",v).get(f+(u.content||""))){for(G=0;G<R.length;G++)if(C=R[G],C.getAttribute("content")===(u.content==null?null:""+u.content)&&C.getAttribute("name")===(u.name==null?null:u.name)&&C.getAttribute("property")===(u.property==null?null:u.property)&&C.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&C.getAttribute("charset")===(u.charSet==null?null:u.charSet)){R.splice(G,1);break t}}C=v.createElement(f),qt(C,f,u),v.head.appendChild(C);break;default:throw Error(i(468,f))}C[Rt]=r,Nt(C),f=C}r.stateNode=f}else Qx(v,r.type,r.stateNode);else r.stateNode=Kx(v,f,r.memoizedProps);else C!==f?(C===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):C.count--,f===null?Qx(v,r.type,r.stateNode):Kx(v,f,r.memoizedProps)):f===null&&r.stateNode!==null&&ch(r,r.memoizedProps,u.memoizedProps)}break;case 27:sn(a,r),ln(r),f&512&&(zt||u===null||ar(u,u.return)),u!==null&&f&4&&ch(r,r.memoizedProps,u.memoizedProps);break;case 5:if(sn(a,r),ln(r),f&512&&(zt||u===null||ar(u,u.return)),r.flags&32){v=r.stateNode;try{Sa(v,"")}catch(Me){at(r,r.return,Me)}}f&4&&r.stateNode!=null&&(v=r.memoizedProps,ch(r,v,u!==null?u.memoizedProps:v)),f&1024&&(hh=!0);break;case 6:if(sn(a,r),ln(r),f&4){if(r.stateNode===null)throw Error(i(162));f=r.memoizedProps,u=r.stateNode;try{u.nodeValue=f}catch(Me){at(r,r.return,Me)}}break;case 3:if(Pu=null,v=Vn,Vn=Bu(a.containerInfo),sn(a,r),Vn=v,ln(r),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Ja(a.containerInfo)}catch(Me){at(r,r.return,Me)}hh&&(hh=!1,Qy(r));break;case 4:f=Vn,Vn=Bu(r.stateNode.containerInfo),sn(a,r),ln(r),Vn=f;break;case 12:sn(a,r),ln(r);break;case 31:sn(a,r),ln(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,Eu(r,f)));break;case 13:sn(a,r),ln(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(ju=Ce()),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,Eu(r,f)));break;case 22:v=r.memoizedState!==null;var ne=u!==null&&u.memoizedState!==null,fe=Nr,xe=zt;if(Nr=fe||v,zt=xe||ne,sn(a,r),zt=xe,Nr=fe,ln(r),f&8192)e:for(a=r.stateNode,a._visibility=v?a._visibility&-2:a._visibility|1,v&&(u===null||ne||Nr||zt||Ji(r)),u=null,a=r;;){if(a.tag===5||a.tag===26){if(u===null){ne=u=a;try{if(C=ne.stateNode,v)R=C.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{G=ne.stateNode;var Se=ne.memoizedProps.style,he=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;G.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(Me){at(ne,ne.return,Me)}}}else if(a.tag===6){if(u===null){ne=a;try{ne.stateNode.nodeValue=v?"":ne.memoizedProps}catch(Me){at(ne,ne.return,Me)}}}else if(a.tag===18){if(u===null){ne=a;try{var me=ne.stateNode;v?Px(me,!0):Px(ne.stateNode,!1)}catch(Me){at(ne,ne.return,Me)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=r.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,Eu(r,u))));break;case 19:sn(a,r),ln(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,Eu(r,f)));break;case 30:break;case 21:break;default:sn(a,r),ln(r)}}function ln(r){var a=r.flags;if(a&2){try{for(var u,f=r.return;f!==null;){if(qy(f)){u=f;break}f=f.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var v=u.stateNode,C=fh(r);ku(r,C,v);break;case 5:var R=u.stateNode;u.flags&32&&(Sa(R,""),u.flags&=-33);var G=fh(r);ku(r,G,R);break;case 3:case 4:var ne=u.stateNode.containerInfo,fe=fh(r);dh(r,fe,ne);break;default:throw Error(i(161))}}catch(xe){at(r,r.return,xe)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function Qy(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;Qy(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function Tr(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Yy(r,a.alternate,a),a=a.sibling}function Ji(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:fi(4,a,a.return),Ji(a);break;case 1:ar(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&Py(a,a.return,u),Ji(a);break;case 27:ys(a.stateNode);case 26:case 5:ar(a,a.return),Ji(a);break;case 22:a.memoizedState===null&&Ji(a);break;case 30:Ji(a);break;default:Ji(a)}r=r.sibling}}function Dr(r,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,v=r,C=a,R=C.flags;switch(C.tag){case 0:case 11:case 15:Dr(v,C,u),ss(4,C);break;case 1:if(Dr(v,C,u),f=C,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(fe){at(f,f.return,fe)}if(f=C,v=f.updateQueue,v!==null){var G=f.stateNode;try{var ne=v.shared.hiddenCallbacks;if(ne!==null)for(v.shared.hiddenCallbacks=null,v=0;v<ne.length;v++)A0(ne[v],G)}catch(fe){at(f,f.return,fe)}}u&&R&64&&Hy(C),ls(C,C.return);break;case 27:$y(C);case 26:case 5:Dr(v,C,u),u&&f===null&&R&4&&Fy(C),ls(C,C.return);break;case 12:Dr(v,C,u);break;case 31:Dr(v,C,u),u&&R&4&&Zy(v,C);break;case 13:Dr(v,C,u),u&&R&4&&Ky(v,C);break;case 22:C.memoizedState===null&&Dr(v,C,u),ls(C,C.return);break;case 30:break;default:Dr(v,C,u)}a=a.sibling}}function ph(r,a){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&Xo(u))}function mh(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Xo(r))}function Yn(r,a,u,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Jy(r,a,u,f),a=a.sibling}function Jy(r,a,u,f){var v=a.flags;switch(a.tag){case 0:case 11:case 15:Yn(r,a,u,f),v&2048&&ss(9,a);break;case 1:Yn(r,a,u,f);break;case 3:Yn(r,a,u,f),v&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Xo(r)));break;case 12:if(v&2048){Yn(r,a,u,f),r=a.stateNode;try{var C=a.memoizedProps,R=C.id,G=C.onPostCommit;typeof G=="function"&&G(R,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(ne){at(a,a.return,ne)}}else Yn(r,a,u,f);break;case 31:Yn(r,a,u,f);break;case 13:Yn(r,a,u,f);break;case 23:break;case 22:C=a.stateNode,R=a.alternate,a.memoizedState!==null?C._visibility&2?Yn(r,a,u,f):us(r,a):C._visibility&2?Yn(r,a,u,f):(C._visibility|=2,Fa(r,a,u,f,(a.subtreeFlags&10256)!==0||!1)),v&2048&&ph(R,a);break;case 24:Yn(r,a,u,f),v&2048&&mh(a.alternate,a);break;default:Yn(r,a,u,f)}}function Fa(r,a,u,f,v){for(v=v&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var C=r,R=a,G=u,ne=f,fe=R.flags;switch(R.tag){case 0:case 11:case 15:Fa(C,R,G,ne,v),ss(8,R);break;case 23:break;case 22:var xe=R.stateNode;R.memoizedState!==null?xe._visibility&2?Fa(C,R,G,ne,v):us(C,R):(xe._visibility|=2,Fa(C,R,G,ne,v)),v&&fe&2048&&ph(R.alternate,R);break;case 24:Fa(C,R,G,ne,v),v&&fe&2048&&mh(R.alternate,R);break;default:Fa(C,R,G,ne,v)}a=a.sibling}}function us(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=r,f=a,v=f.flags;switch(f.tag){case 22:us(u,f),v&2048&&ph(f.alternate,f);break;case 24:us(u,f),v&2048&&mh(f.alternate,f);break;default:us(u,f)}a=a.sibling}}var cs=8192;function qa(r,a,u){if(r.subtreeFlags&cs)for(r=r.child;r!==null;)ex(r,a,u),r=r.sibling}function ex(r,a,u){switch(r.tag){case 26:qa(r,a,u),r.flags&cs&&r.memoizedState!==null&&aC(u,Vn,r.memoizedState,r.memoizedProps);break;case 5:qa(r,a,u);break;case 3:case 4:var f=Vn;Vn=Bu(r.stateNode.containerInfo),qa(r,a,u),Vn=f;break;case 22:r.memoizedState===null&&(f=r.alternate,f!==null&&f.memoizedState!==null?(f=cs,cs=16777216,qa(r,a,u),cs=f):qa(r,a,u));break;default:qa(r,a,u)}}function tx(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function fs(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var f=a[u];Ut=f,rx(f,r)}tx(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)nx(r),r=r.sibling}function nx(r){switch(r.tag){case 0:case 11:case 15:fs(r),r.flags&2048&&fi(9,r,r.return);break;case 3:fs(r);break;case 12:fs(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,Cu(r)):fs(r);break;default:fs(r)}}function Cu(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var f=a[u];Ut=f,rx(f,r)}tx(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:fi(8,a,a.return),Cu(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,Cu(a));break;default:Cu(a)}r=r.sibling}}function rx(r,a){for(;Ut!==null;){var u=Ut;switch(u.tag){case 0:case 11:case 15:fi(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Xo(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,Ut=f;else e:for(u=r;Ut!==null;){f=Ut;var v=f.sibling,C=f.return;if(Gy(f),f===u){Ut=null;break e}if(v!==null){v.return=C,Ut=v;break e}Ut=C}}}var bE={getCacheForType:function(r){var a=Pt(At),u=a.data.get(r);return u===void 0&&(u=r(),a.data.set(r,u)),u},cacheSignal:function(){return Pt(At).controller.signal}},wE=typeof WeakMap=="function"?WeakMap:Map,rt=0,ut=null,Ye=null,Ze=0,it=0,bn=null,di=!1,$a=!1,gh=!1,zr=0,St=0,hi=0,ea=0,yh=0,wn=0,Va=0,ds=null,un=null,xh=!1,ju=0,ix=0,Nu=1/0,Au=null,pi=null,It=0,mi=null,Ya=null,Mr=0,vh=0,bh=null,ax=null,hs=0,wh=null;function Sn(){return(rt&2)!==0&&Ze!==0?Ze&-Ze:U.T!==null?jh():Ml()}function ox(){if(wn===0)if((Ze&536870912)===0||Qe){var r=pr;pr<<=1,(pr&3932160)===0&&(pr=262144),wn=r}else wn=536870912;return r=xn.current,r!==null&&(r.flags|=32),wn}function cn(r,a,u){(r===ut&&(it===2||it===9)||r.cancelPendingCommit!==null)&&(Ga(r,0),gi(r,Ze,wn,!1)),Ri(r,u),((rt&2)===0||r!==ut)&&(r===ut&&((rt&2)===0&&(ea|=u),St===4&&gi(r,Ze,wn,!1)),or(r))}function sx(r,a,u){if((rt&6)!==0)throw Error(i(327));var f=!u&&(a&127)===0&&(a&r.expiredLanes)===0||Oi(r,a),v=f?kE(r,a):_h(r,a,!0),C=f;do{if(v===0){$a&&!f&&gi(r,a,0,!1);break}else{if(u=r.current.alternate,C&&!SE(u)){v=_h(r,a,!1),C=!1;continue}if(v===2){if(C=a,r.errorRecoveryDisabledLanes&C)var R=0;else R=r.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){a=R;e:{var G=r;v=ds;var ne=G.current.memoizedState.isDehydrated;if(ne&&(Ga(G,R).flags|=256),R=_h(G,R,!1),R!==2){if(gh&&!ne){G.errorRecoveryDisabledLanes|=C,ea|=C,v=4;break e}C=un,un=v,C!==null&&(un===null?un=C:un.push.apply(un,C))}v=R}if(C=!1,v!==2)continue}}if(v===1){Ga(r,0),gi(r,a,0,!0);break}e:{switch(f=r,C=v,C){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:gi(f,a,wn,!di);break e;case 2:un=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(v=ju+300-Ce(),10<v)){if(gi(f,a,wn,!di),ya(f,0,!0)!==0)break e;Mr=a,f.timeoutHandle=Ux(lx.bind(null,f,u,un,Au,xh,a,wn,ea,Va,di,C,"Throttled",-0,0),v);break e}lx(f,u,un,Au,xh,a,wn,ea,Va,di,C,null,-0,0)}}break}while(!0);or(r)}function lx(r,a,u,f,v,C,R,G,ne,fe,xe,Se,he,me){if(r.timeoutHandle=-1,Se=a.subtreeFlags,Se&8192||(Se&16785408)===16785408){Se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xr},ex(a,C,Se);var Me=(C&62914560)===C?ju-Ce():(C&4194048)===C?ix-Ce():0;if(Me=oC(Se,Me),Me!==null){Mr=C,r.cancelPendingCommit=Me(gx.bind(null,r,a,C,u,f,v,R,G,ne,xe,Se,null,he,me)),gi(r,C,R,!fe);return}}gx(r,a,C,u,f,v,R,G,ne)}function SE(r){for(var a=r;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var v=u[f],C=v.getSnapshot;v=v.value;try{if(!gn(C(),v))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function gi(r,a,u,f){a&=~yh,a&=~ea,r.suspendedLanes|=a,r.pingedLanes&=~a,f&&(r.warmLanes|=a),f=r.expirationTimes;for(var v=a;0<v;){var C=31-Ve(v),R=1<<C;f[C]=-1,v&=~R}u!==0&&Tl(r,u,a)}function Tu(){return(rt&6)===0?(ps(0),!1):!0}function Sh(){if(Ye!==null){if(it===0)var r=Ye.return;else r=Ye,Sr=Vi=null,Ud(r),La=null,Ko=0,r=Ye;for(;r!==null;)By(r.alternate,r),r=r.return;Ye=null}}function Ga(r,a){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,FE(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),Mr=0,Sh(),ut=r,Ye=u=br(r.current,null),Ze=a,it=0,bn=null,di=!1,$a=Oi(r,a),gh=!1,Va=wn=yh=ea=hi=St=0,un=ds=null,xh=!1,(a&8)!==0&&(a|=a&32);var f=r.entangledLanes;if(f!==0)for(r=r.entanglements,f&=a;0<f;){var v=31-Ve(f),C=1<<v;a|=r[v],f&=~C}return zr=a,Wl(),u}function ux(r,a){He=null,U.H=is,a===Ia||a===au?(a=E0(),it=3):a===Cd?(a=E0(),it=4):it=a===eh?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,bn=a,Ye===null&&(St=1,vu(r,zn(a,r.current)))}function cx(){var r=xn.current;return r===null?!0:(Ze&4194048)===Ze?In===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?r===In:!1}function fx(){var r=U.H;return U.H=is,r===null?is:r}function dx(){var r=U.A;return U.A=bE,r}function Du(){St=4,di||(Ze&4194048)!==Ze&&xn.current!==null||($a=!0),(hi&134217727)===0&&(ea&134217727)===0||ut===null||gi(ut,Ze,wn,!1)}function _h(r,a,u){var f=rt;rt|=2;var v=fx(),C=dx();(ut!==r||Ze!==a)&&(Au=null,Ga(r,a)),a=!1;var R=St;e:do try{if(it!==0&&Ye!==null){var G=Ye,ne=bn;switch(it){case 8:Sh(),R=6;break e;case 3:case 2:case 9:case 6:xn.current===null&&(a=!0);var fe=it;if(it=0,bn=null,Xa(r,G,ne,fe),u&&$a){R=0;break e}break;default:fe=it,it=0,bn=null,Xa(r,G,ne,fe)}}_E(),R=St;break}catch(xe){ux(r,xe)}while(!0);return a&&r.shellSuspendCounter++,Sr=Vi=null,rt=f,U.H=v,U.A=C,Ye===null&&(ut=null,Ze=0,Wl()),R}function _E(){for(;Ye!==null;)hx(Ye)}function kE(r,a){var u=rt;rt|=2;var f=fx(),v=dx();ut!==r||Ze!==a?(Au=null,Nu=Ce()+500,Ga(r,a)):$a=Oi(r,a);e:do try{if(it!==0&&Ye!==null){a=Ye;var C=bn;t:switch(it){case 1:it=0,bn=null,Xa(r,a,C,1);break;case 2:case 9:if(_0(C)){it=0,bn=null,px(a);break}a=function(){it!==2&&it!==9||ut!==r||(it=7),or(r)},C.then(a,a);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:_0(C)?(it=0,bn=null,px(a)):(it=0,bn=null,Xa(r,a,C,7));break;case 5:var R=null;switch(Ye.tag){case 26:R=Ye.memoizedState;case 5:case 27:var G=Ye;if(R?Jx(R):G.stateNode.complete){it=0,bn=null;var ne=G.sibling;if(ne!==null)Ye=ne;else{var fe=G.return;fe!==null?(Ye=fe,zu(fe)):Ye=null}break t}}it=0,bn=null,Xa(r,a,C,5);break;case 6:it=0,bn=null,Xa(r,a,C,6);break;case 8:Sh(),St=6;break e;default:throw Error(i(462))}}EE();break}catch(xe){ux(r,xe)}while(!0);return Sr=Vi=null,U.H=f,U.A=v,rt=u,Ye!==null?0:(ut=null,Ze=0,Wl(),St)}function EE(){for(;Ye!==null&&!oe();)hx(Ye)}function hx(r){var a=Ly(r.alternate,r,zr);r.memoizedProps=r.pendingProps,a===null?zu(r):Ye=a}function px(r){var a=r,u=a.alternate;switch(a.tag){case 15:case 0:a=Dy(u,a,a.pendingProps,a.type,void 0,Ze);break;case 11:a=Dy(u,a,a.pendingProps,a.type.render,a.ref,Ze);break;case 5:Ud(a);default:By(u,a),a=Ye=d0(a,zr),a=Ly(u,a,zr)}r.memoizedProps=r.pendingProps,a===null?zu(r):Ye=a}function Xa(r,a,u,f){Sr=Vi=null,Ud(a),La=null,Ko=0;var v=a.return;try{if(hE(r,v,a,u,Ze)){St=1,vu(r,zn(u,r.current)),Ye=null;return}}catch(C){if(v!==null)throw Ye=v,C;St=1,vu(r,zn(u,r.current)),Ye=null;return}a.flags&32768?(Qe||f===1?r=!0:$a||(Ze&536870912)!==0?r=!1:(di=r=!0,(f===2||f===9||f===3||f===6)&&(f=xn.current,f!==null&&f.tag===13&&(f.flags|=16384))),mx(a,r)):zu(a)}function zu(r){var a=r;do{if((a.flags&32768)!==0){mx(a,di);return}r=a.return;var u=gE(a.alternate,a,zr);if(u!==null){Ye=u;return}if(a=a.sibling,a!==null){Ye=a;return}Ye=a=r}while(a!==null);St===0&&(St=5)}function mx(r,a){do{var u=yE(r.alternate,r);if(u!==null){u.flags&=32767,Ye=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(r=r.sibling,r!==null)){Ye=r;return}Ye=r=u}while(r!==null);St=6,Ye=null}function gx(r,a,u,f,v,C,R,G,ne){r.cancelPendingCommit=null;do Mu();while(It!==0);if((rt&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(C=a.lanes|a.childLanes,C|=fd,Pf(r,u,C,R,G,ne),r===ut&&(Ye=ut=null,Ze=0),Ya=a,mi=r,Mr=u,vh=C,bh=v,ax=f,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,AE(Ne,function(){return wx(),null})):(r.callbackNode=null,r.callbackPriority=0),f=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||f){f=U.T,U.T=null,v=V.p,V.p=2,R=rt,rt|=4;try{xE(r,a,u)}finally{rt=R,V.p=v,U.T=f}}It=1,yx(),xx(),vx()}}function yx(){if(It===1){It=0;var r=mi,a=Ya,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=U.T,U.T=null;var f=V.p;V.p=2;var v=rt;rt|=4;try{Wy(a,r);var C=Rh,R=r0(r.containerInfo),G=C.focusedElem,ne=C.selectionRange;if(R!==G&&G&&G.ownerDocument&&n0(G.ownerDocument.documentElement,G)){if(ne!==null&&od(G)){var fe=ne.start,xe=ne.end;if(xe===void 0&&(xe=fe),"selectionStart"in G)G.selectionStart=fe,G.selectionEnd=Math.min(xe,G.value.length);else{var Se=G.ownerDocument||document,he=Se&&Se.defaultView||window;if(he.getSelection){var me=he.getSelection(),Me=G.textContent.length,Ue=Math.min(ne.start,Me),lt=ne.end===void 0?Ue:Math.min(ne.end,Me);!me.extend&&Ue>lt&&(R=lt,lt=Ue,Ue=R);var le=t0(G,Ue),ae=t0(G,lt);if(le&&ae&&(me.rangeCount!==1||me.anchorNode!==le.node||me.anchorOffset!==le.offset||me.focusNode!==ae.node||me.focusOffset!==ae.offset)){var ce=Se.createRange();ce.setStart(le.node,le.offset),me.removeAllRanges(),Ue>lt?(me.addRange(ce),me.extend(ae.node,ae.offset)):(ce.setEnd(ae.node,ae.offset),me.addRange(ce))}}}}for(Se=[],me=G;me=me.parentNode;)me.nodeType===1&&Se.push({element:me,left:me.scrollLeft,top:me.scrollTop});for(typeof G.focus=="function"&&G.focus(),G=0;G<Se.length;G++){var be=Se[G];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}Vu=!!Oh,Rh=Oh=null}finally{rt=v,V.p=f,U.T=u}}r.current=a,It=2}}function xx(){if(It===2){It=0;var r=mi,a=Ya,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=U.T,U.T=null;var f=V.p;V.p=2;var v=rt;rt|=4;try{Yy(r,a.alternate,a)}finally{rt=v,V.p=f,U.T=u}}It=3}}function vx(){if(It===4||It===3){It=0,_e();var r=mi,a=Ya,u=Mr,f=ax;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?It=5:(It=0,Ya=mi=null,bx(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(pi=null),Mo(u),a=a.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot($e,a,void 0,(a.current.flags&128)===128)}catch{}if(f!==null){a=U.T,v=V.p,V.p=2,U.T=null;try{for(var C=r.onRecoverableError,R=0;R<f.length;R++){var G=f[R];C(G.value,{componentStack:G.stack})}}finally{U.T=a,V.p=v}}(Mr&3)!==0&&Mu(),or(r),v=r.pendingLanes,(u&261930)!==0&&(v&42)!==0?r===wh?hs++:(hs=0,wh=r):hs=0,ps(0)}}function bx(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,Xo(a)))}function Mu(){return yx(),xx(),vx(),wx()}function wx(){if(It!==5)return!1;var r=mi,a=vh;vh=0;var u=Mo(Mr),f=U.T,v=V.p;try{V.p=32>u?32:u,U.T=null,u=bh,bh=null;var C=mi,R=Mr;if(It=0,Ya=mi=null,Mr=0,(rt&6)!==0)throw Error(i(331));var G=rt;if(rt|=4,nx(C.current),Jy(C,C.current,R,u),rt=G,ps(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot($e,C)}catch{}return!0}finally{V.p=v,U.T=f,bx(r,a)}}function Sx(r,a,u){a=zn(u,a),a=Jd(r.stateNode,a,2),r=li(r,a,2),r!==null&&(Ri(r,2),or(r))}function at(r,a,u){if(r.tag===3)Sx(r,r,u);else for(;a!==null;){if(a.tag===3){Sx(a,r,u);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(pi===null||!pi.has(f))){r=zn(u,r),u=_y(2),f=li(a,u,2),f!==null&&(ky(u,f,a,r),Ri(f,2),or(f));break}}a=a.return}}function kh(r,a,u){var f=r.pingCache;if(f===null){f=r.pingCache=new wE;var v=new Set;f.set(a,v)}else v=f.get(a),v===void 0&&(v=new Set,f.set(a,v));v.has(u)||(gh=!0,v.add(u),r=CE.bind(null,r,a,u),a.then(r,r))}function CE(r,a,u){var f=r.pingCache;f!==null&&f.delete(a),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,ut===r&&(Ze&u)===u&&(St===4||St===3&&(Ze&62914560)===Ze&&300>Ce()-ju?(rt&2)===0&&Ga(r,0):yh|=u,Va===Ze&&(Va=0)),or(r)}function _x(r,a){a===0&&(a=Al()),r=Fi(r,a),r!==null&&(Ri(r,a),or(r))}function jE(r){var a=r.memoizedState,u=0;a!==null&&(u=a.retryLane),_x(r,u)}function NE(r,a){var u=0;switch(r.tag){case 31:case 13:var f=r.stateNode,v=r.memoizedState;v!==null&&(u=v.retryLane);break;case 19:f=r.stateNode;break;case 22:f=r.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(a),_x(r,u)}function AE(r,a){return pe(r,a)}var Ou=null,Za=null,Eh=!1,Ru=!1,Ch=!1,yi=0;function or(r){r!==Za&&r.next===null&&(Za===null?Ou=Za=r:Za=Za.next=r),Ru=!0,Eh||(Eh=!0,DE())}function ps(r,a){if(!Ch&&Ru){Ch=!0;do for(var u=!1,f=Ou;f!==null;){if(r!==0){var v=f.pendingLanes;if(v===0)var C=0;else{var R=f.suspendedLanes,G=f.pingedLanes;C=(1<<31-Ve(42|r)+1)-1,C&=v&~(R&~G),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(u=!0,jx(f,C))}else C=Ze,C=ya(f,f===ut?C:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(C&3)===0||Oi(f,C)||(u=!0,jx(f,C));f=f.next}while(u);Ch=!1}}function TE(){kx()}function kx(){Ru=Eh=!1;var r=0;yi!==0&&PE()&&(r=yi);for(var a=Ce(),u=null,f=Ou;f!==null;){var v=f.next,C=Ex(f,a);C===0?(f.next=null,u===null?Ou=v:u.next=v,v===null&&(Za=u)):(u=f,(r!==0||(C&3)!==0)&&(Ru=!0)),f=v}It!==0&&It!==5||ps(r),yi!==0&&(yi=0)}function Ex(r,a){for(var u=r.suspendedLanes,f=r.pingedLanes,v=r.expirationTimes,C=r.pendingLanes&-62914561;0<C;){var R=31-Ve(C),G=1<<R,ne=v[R];ne===-1?((G&u)===0||(G&f)!==0)&&(v[R]=Hf(G,a)):ne<=a&&(r.expiredLanes|=G),C&=~G}if(a=ut,u=Ze,u=ya(r,r===a?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f=r.callbackNode,u===0||r===a&&(it===2||it===9)||r.cancelPendingCommit!==null)return f!==null&&f!==null&&ge(f),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Oi(r,u)){if(a=u&-u,a===r.callbackPriority)return a;switch(f!==null&&ge(f),Mo(u)){case 2:case 8:u=we;break;case 32:u=Ne;break;case 268435456:u=qe;break;default:u=Ne}return f=Cx.bind(null,r),u=pe(u,f),r.callbackPriority=a,r.callbackNode=u,a}return f!==null&&f!==null&&ge(f),r.callbackPriority=2,r.callbackNode=null,2}function Cx(r,a){if(It!==0&&It!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(Mu()&&r.callbackNode!==u)return null;var f=Ze;return f=ya(r,r===ut?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f===0?null:(sx(r,f,a),Ex(r,Ce()),r.callbackNode!=null&&r.callbackNode===u?Cx.bind(null,r):null)}function jx(r,a){if(Mu())return null;sx(r,a,!0)}function DE(){qE(function(){(rt&6)!==0?pe(se,TE):kx()})}function jh(){if(yi===0){var r=Oa;r===0&&(r=Zr,Zr<<=1,(Zr&261888)===0&&(Zr=256)),yi=r}return yi}function Nx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ql(""+r)}function Ax(r,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,r.id&&u.setAttribute("form",r.id),a.parentNode.insertBefore(u,a),r=new FormData(r),u.parentNode.removeChild(u),r}function zE(r,a,u,f,v){if(a==="submit"&&u&&u.stateNode===v){var C=Nx((v[Yt]||null).action),R=f.submitter;R&&(a=(a=R[Yt]||null)?Nx(a.formAction):R.getAttribute("formAction"),a!==null&&(C=a,R=null));var G=new Gl("action","action",null,f,v);r.push({event:G,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(yi!==0){var ne=R?Ax(v,R):new FormData(v);Gd(u,{pending:!0,data:ne,method:v.method,action:C},null,ne)}}else typeof C=="function"&&(G.preventDefault(),ne=R?Ax(v,R):new FormData(v),Gd(u,{pending:!0,data:ne,method:v.method,action:C},C,ne))},currentTarget:v}]})}}for(var Nh=0;Nh<cd.length;Nh++){var Ah=cd[Nh],ME=Ah.toLowerCase(),OE=Ah[0].toUpperCase()+Ah.slice(1);$n(ME,"on"+OE)}$n(o0,"onAnimationEnd"),$n(s0,"onAnimationIteration"),$n(l0,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(Kk,"onTransitionRun"),$n(Wk,"onTransitionStart"),$n(Qk,"onTransitionCancel"),$n(u0,"onTransitionEnd"),ei("onMouseEnter",["mouseout","mouseover"]),ei("onMouseLeave",["mouseout","mouseover"]),ei("onPointerEnter",["pointerout","pointerover"]),ei("onPointerLeave",["pointerout","pointerover"]),gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gr("onBeforeInput",["compositionend","keypress","textInput","paste"]),gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ms));function Tx(r,a){a=(a&4)!==0;for(var u=0;u<r.length;u++){var f=r[u],v=f.event;f=f.listeners;e:{var C=void 0;if(a)for(var R=f.length-1;0<=R;R--){var G=f[R],ne=G.instance,fe=G.currentTarget;if(G=G.listener,ne!==C&&v.isPropagationStopped())break e;C=G,v.currentTarget=fe;try{C(v)}catch(xe){Kl(xe)}v.currentTarget=null,C=ne}else for(R=0;R<f.length;R++){if(G=f[R],ne=G.instance,fe=G.currentTarget,G=G.listener,ne!==C&&v.isPropagationStopped())break e;C=G,v.currentTarget=fe;try{C(v)}catch(xe){Kl(xe)}v.currentTarget=null,C=ne}}}}function Ge(r,a){var u=a[xa];u===void 0&&(u=a[xa]=new Set);var f=r+"__bubble";u.has(f)||(Dx(a,r,2,!1),u.add(f))}function Th(r,a,u){var f=0;a&&(f|=4),Dx(u,r,f,a)}var Iu="_reactListening"+Math.random().toString(36).slice(2);function Dh(r){if(!r[Iu]){r[Iu]=!0,Ll.forEach(function(u){u!=="selectionchange"&&(RE.has(u)||Th(u,!1,r),Th(u,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Iu]||(a[Iu]=!0,Th("selectionchange",!1,a))}}function Dx(r,a,u,f){switch(o1(a)){case 2:var v=uC;break;case 8:v=cC;break;default:v=Yh}u=v.bind(null,a,u,r),v=void 0,!Wf||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),f?v!==void 0?r.addEventListener(a,u,{capture:!0,passive:v}):r.addEventListener(a,u,!0):v!==void 0?r.addEventListener(a,u,{passive:v}):r.addEventListener(a,u,!1)}function zh(r,a,u,f,v){var C=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var R=f.tag;if(R===3||R===4){var G=f.stateNode.containerInfo;if(G===v)break;if(R===4)for(R=f.return;R!==null;){var ne=R.tag;if((ne===3||ne===4)&&R.stateNode.containerInfo===v)return;R=R.return}for(;G!==null;){if(R=Kr(G),R===null)return;if(ne=R.tag,ne===5||ne===6||ne===26||ne===27){f=C=R;continue e}G=G.parentNode}}f=f.return}Ig(function(){var fe=C,xe=Zf(u),Se=[];e:{var he=c0.get(r);if(he!==void 0){var me=Gl,Me=r;switch(r){case"keypress":if(Vl(u)===0)break e;case"keydown":case"keyup":me=Nk;break;case"focusin":Me="focus",me=td;break;case"focusout":Me="blur",me=td;break;case"beforeblur":case"afterblur":me=td;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=Bg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=gk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=Dk;break;case o0:case s0:case l0:me=vk;break;case u0:me=Mk;break;case"scroll":case"scrollend":me=pk;break;case"wheel":me=Rk;break;case"copy":case"cut":case"paste":me=wk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=Pg;break;case"toggle":case"beforetoggle":me=Lk}var Ue=(a&4)!==0,lt=!Ue&&(r==="scroll"||r==="scrollend"),le=Ue?he!==null?he+"Capture":null:he;Ue=[];for(var ae=fe,ce;ae!==null;){var be=ae;if(ce=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||ce===null||le===null||(be=Lo(ae,le),be!=null&&Ue.push(gs(ae,be,ce))),lt)break;ae=ae.return}0<Ue.length&&(he=new me(he,Me,null,u,xe),Se.push({event:he,listeners:Ue}))}}if((a&7)===0){e:{if(he=r==="mouseover"||r==="pointerover",me=r==="mouseout"||r==="pointerout",he&&u!==Xf&&(Me=u.relatedTarget||u.fromElement)&&(Kr(Me)||Me[mr]))break e;if((me||he)&&(he=xe.window===xe?xe:(he=xe.ownerDocument)?he.defaultView||he.parentWindow:window,me?(Me=u.relatedTarget||u.toElement,me=fe,Me=Me?Kr(Me):null,Me!==null&&(lt=s(Me),Ue=Me.tag,Me!==lt||Ue!==5&&Ue!==27&&Ue!==6)&&(Me=null)):(me=null,Me=fe),me!==Me)){if(Ue=Bg,be="onMouseLeave",le="onMouseEnter",ae="mouse",(r==="pointerout"||r==="pointerover")&&(Ue=Pg,be="onPointerLeave",le="onPointerEnter",ae="pointer"),lt=me==null?he:Qr(me),ce=Me==null?he:Qr(Me),he=new Ue(be,ae+"leave",me,u,xe),he.target=lt,he.relatedTarget=ce,be=null,Kr(xe)===fe&&(Ue=new Ue(le,ae+"enter",Me,u,xe),Ue.target=ce,Ue.relatedTarget=lt,be=Ue),lt=be,me&&Me)t:{for(Ue=IE,le=me,ae=Me,ce=0,be=le;be;be=Ue(be))ce++;be=0;for(var Re=ae;Re;Re=Ue(Re))be++;for(;0<ce-be;)le=Ue(le),ce--;for(;0<be-ce;)ae=Ue(ae),be--;for(;ce--;){if(le===ae||ae!==null&&le===ae.alternate){Ue=le;break t}le=Ue(le),ae=Ue(ae)}Ue=null}else Ue=null;me!==null&&zx(Se,he,me,Ue,!1),Me!==null&&lt!==null&&zx(Se,lt,Me,Ue,!0)}}e:{if(he=fe?Qr(fe):window,me=he.nodeName&&he.nodeName.toLowerCase(),me==="select"||me==="input"&&he.type==="file")var tt=Zg;else if(Gg(he))if(Kg)tt=Gk;else{tt=Vk;var Oe=$k}else me=he.nodeName,!me||me.toLowerCase()!=="input"||he.type!=="checkbox"&&he.type!=="radio"?fe&&Gf(fe.elementType)&&(tt=Zg):tt=Yk;if(tt&&(tt=tt(r,fe))){Xg(Se,tt,u,xe);break e}Oe&&Oe(r,he,fe),r==="focusout"&&fe&&he.type==="number"&&fe.memoizedProps.value!=null&&Io(he,"number",he.value)}switch(Oe=fe?Qr(fe):window,r){case"focusin":(Gg(Oe)||Oe.contentEditable==="true")&&(Ca=Oe,sd=fe,Vo=null);break;case"focusout":Vo=sd=Ca=null;break;case"mousedown":ld=!0;break;case"contextmenu":case"mouseup":case"dragend":ld=!1,i0(Se,u,xe);break;case"selectionchange":if(Zk)break;case"keydown":case"keyup":i0(Se,u,xe)}var Pe;if(rd)e:{switch(r){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else Ea?Vg(r,u)&&(Ke="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(Ke="onCompositionStart");Ke&&(Fg&&u.locale!=="ko"&&(Ea||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&Ea&&(Pe=Lg()):(ti=xe,Qf="value"in ti?ti.value:ti.textContent,Ea=!0)),Oe=Lu(fe,Ke),0<Oe.length&&(Ke=new Hg(Ke,r,null,u,xe),Se.push({event:Ke,listeners:Oe}),Pe?Ke.data=Pe:(Pe=Yg(u),Pe!==null&&(Ke.data=Pe)))),(Pe=Bk?Hk(r,u):Pk(r,u))&&(Ke=Lu(fe,"onBeforeInput"),0<Ke.length&&(Oe=new Hg("onBeforeInput","beforeinput",null,u,xe),Se.push({event:Oe,listeners:Ke}),Oe.data=Pe)),zE(Se,r,fe,u,xe)}Tx(Se,a)})}function gs(r,a,u){return{instance:r,listener:a,currentTarget:u}}function Lu(r,a){for(var u=a+"Capture",f=[];r!==null;){var v=r,C=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||C===null||(v=Lo(r,u),v!=null&&f.unshift(gs(r,v,C)),v=Lo(r,a),v!=null&&f.push(gs(r,v,C))),r.tag===3)return f;r=r.return}return[]}function IE(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function zx(r,a,u,f,v){for(var C=a._reactName,R=[];u!==null&&u!==f;){var G=u,ne=G.alternate,fe=G.stateNode;if(G=G.tag,ne!==null&&ne===f)break;G!==5&&G!==26&&G!==27||fe===null||(ne=fe,v?(fe=Lo(u,C),fe!=null&&R.unshift(gs(u,fe,ne))):v||(fe=Lo(u,C),fe!=null&&R.push(gs(u,fe,ne)))),u=u.return}R.length!==0&&r.push({event:a,listeners:R})}var LE=/\r\n?/g,UE=/\u0000|\uFFFD/g;function Mx(r){return(typeof r=="string"?r:""+r).replace(LE,`
`).replace(UE,"")}function Ox(r,a){return a=Mx(a),Mx(r)===a}function st(r,a,u,f,v,C){switch(u){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||Sa(r,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&Sa(r,""+f);break;case"className":ba(r,"class",f);break;case"tabIndex":ba(r,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":ba(r,u,f);break;case"style":Og(r,f,C);break;case"data":if(a!=="object"){ba(r,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||u!=="href")){r.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=ql(""+f),r.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(u==="formAction"?(a!=="input"&&st(r,a,"name",v.name,v,null),st(r,a,"formEncType",v.formEncType,v,null),st(r,a,"formMethod",v.formMethod,v,null),st(r,a,"formTarget",v.formTarget,v,null)):(st(r,a,"encType",v.encType,v,null),st(r,a,"method",v.method,v,null),st(r,a,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=ql(""+f),r.setAttribute(u,f);break;case"onClick":f!=null&&(r.onclick=xr);break;case"onScroll":f!=null&&Ge("scroll",r);break;case"onScrollEnd":f!=null&&Ge("scrollend",r);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":r.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){r.removeAttribute("xlink:href");break}u=ql(""+f),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""+f):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":f===!0?r.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,f):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?r.setAttribute(u,f):r.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?r.removeAttribute(u):r.setAttribute(u,f);break;case"popover":Ge("beforetoggle",r),Ge("toggle",r),va(r,"popover",f);break;case"xlinkActuate":qn(r,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":qn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":qn(r,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":qn(r,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":qn(r,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":qn(r,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":qn(r,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":qn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":qn(r,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":va(r,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=dk.get(u)||u,va(r,u,f))}}function Mh(r,a,u,f,v,C){switch(u){case"style":Og(r,f,C);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof f=="string"?Sa(r,f):(typeof f=="number"||typeof f=="bigint")&&Sa(r,""+f);break;case"onScroll":f!=null&&Ge("scroll",r);break;case"onScrollEnd":f!=null&&Ge("scrollend",r);break;case"onClick":f!=null&&(r.onclick=xr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ul.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),a=u.slice(2,v?u.length-7:void 0),C=r[Yt]||null,C=C!=null?C[u]:null,typeof C=="function"&&r.removeEventListener(a,C,v),typeof f=="function")){typeof C!="function"&&C!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(a,f,v);break e}u in r?r[u]=f:f===!0?r.setAttribute(u,""):va(r,u,f)}}}function qt(r,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",r),Ge("load",r);var f=!1,v=!1,C;for(C in u)if(u.hasOwnProperty(C)){var R=u[C];if(R!=null)switch(C){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:st(r,a,C,R,u,null)}}v&&st(r,a,"srcSet",u.srcSet,u,null),f&&st(r,a,"src",u.src,u,null);return;case"input":Ge("invalid",r);var G=C=R=v=null,ne=null,fe=null;for(f in u)if(u.hasOwnProperty(f)){var xe=u[f];if(xe!=null)switch(f){case"name":v=xe;break;case"type":R=xe;break;case"checked":ne=xe;break;case"defaultChecked":fe=xe;break;case"value":C=xe;break;case"defaultValue":G=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(i(137,a));break;default:st(r,a,f,xe,u,null)}}Fl(r,C,G,ne,fe,R,v,!1);return;case"select":Ge("invalid",r),f=R=C=null;for(v in u)if(u.hasOwnProperty(v)&&(G=u[v],G!=null))switch(v){case"value":C=G;break;case"defaultValue":R=G;break;case"multiple":f=G;default:st(r,a,v,G,u,null)}a=C,u=R,r.multiple=!!f,a!=null?yr(r,!!f,a,!1):u!=null&&yr(r,!!f,u,!0);return;case"textarea":Ge("invalid",r),C=v=f=null;for(R in u)if(u.hasOwnProperty(R)&&(G=u[R],G!=null))switch(R){case"value":f=G;break;case"defaultValue":v=G;break;case"children":C=G;break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(91));break;default:st(r,a,R,G,u,null)}zg(r,f,v,C);return;case"option":for(ne in u)u.hasOwnProperty(ne)&&(f=u[ne],f!=null)&&(ne==="selected"?r.selected=f&&typeof f!="function"&&typeof f!="symbol":st(r,a,ne,f,u,null));return;case"dialog":Ge("beforetoggle",r),Ge("toggle",r),Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":Ge("load",r);break;case"video":case"audio":for(f=0;f<ms.length;f++)Ge(ms[f],r);break;case"image":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"embed":case"source":case"link":Ge("error",r),Ge("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fe in u)if(u.hasOwnProperty(fe)&&(f=u[fe],f!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:st(r,a,fe,f,u,null)}return;default:if(Gf(a)){for(xe in u)u.hasOwnProperty(xe)&&(f=u[xe],f!==void 0&&Mh(r,a,xe,f,u,void 0));return}}for(G in u)u.hasOwnProperty(G)&&(f=u[G],f!=null&&st(r,a,G,f,u,null))}function BE(r,a,u,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,C=null,R=null,G=null,ne=null,fe=null,xe=null;for(me in u){var Se=u[me];if(u.hasOwnProperty(me)&&Se!=null)switch(me){case"checked":break;case"value":break;case"defaultValue":ne=Se;default:f.hasOwnProperty(me)||st(r,a,me,null,f,Se)}}for(var he in f){var me=f[he];if(Se=u[he],f.hasOwnProperty(he)&&(me!=null||Se!=null))switch(he){case"type":C=me;break;case"name":v=me;break;case"checked":fe=me;break;case"defaultChecked":xe=me;break;case"value":R=me;break;case"defaultValue":G=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(i(137,a));break;default:me!==Se&&st(r,a,he,me,f,Se)}}Ui(r,R,G,ne,fe,xe,C,v);return;case"select":me=R=G=he=null;for(C in u)if(ne=u[C],u.hasOwnProperty(C)&&ne!=null)switch(C){case"value":break;case"multiple":me=ne;default:f.hasOwnProperty(C)||st(r,a,C,null,f,ne)}for(v in f)if(C=f[v],ne=u[v],f.hasOwnProperty(v)&&(C!=null||ne!=null))switch(v){case"value":he=C;break;case"defaultValue":G=C;break;case"multiple":R=C;default:C!==ne&&st(r,a,v,C,f,ne)}a=G,u=R,f=me,he!=null?yr(r,!!u,he,!1):!!f!=!!u&&(a!=null?yr(r,!!u,a,!0):yr(r,!!u,u?[]:"",!1));return;case"textarea":me=he=null;for(G in u)if(v=u[G],u.hasOwnProperty(G)&&v!=null&&!f.hasOwnProperty(G))switch(G){case"value":break;case"children":break;default:st(r,a,G,null,f,v)}for(R in f)if(v=f[R],C=u[R],f.hasOwnProperty(R)&&(v!=null||C!=null))switch(R){case"value":he=v;break;case"defaultValue":me=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==C&&st(r,a,R,v,f,C)}Dg(r,he,me);return;case"option":for(var Me in u)he=u[Me],u.hasOwnProperty(Me)&&he!=null&&!f.hasOwnProperty(Me)&&(Me==="selected"?r.selected=!1:st(r,a,Me,null,f,he));for(ne in f)he=f[ne],me=u[ne],f.hasOwnProperty(ne)&&he!==me&&(he!=null||me!=null)&&(ne==="selected"?r.selected=he&&typeof he!="function"&&typeof he!="symbol":st(r,a,ne,he,f,me));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in u)he=u[Ue],u.hasOwnProperty(Ue)&&he!=null&&!f.hasOwnProperty(Ue)&&st(r,a,Ue,null,f,he);for(fe in f)if(he=f[fe],me=u[fe],f.hasOwnProperty(fe)&&he!==me&&(he!=null||me!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,a));break;default:st(r,a,fe,he,f,me)}return;default:if(Gf(a)){for(var lt in u)he=u[lt],u.hasOwnProperty(lt)&&he!==void 0&&!f.hasOwnProperty(lt)&&Mh(r,a,lt,void 0,f,he);for(xe in f)he=f[xe],me=u[xe],!f.hasOwnProperty(xe)||he===me||he===void 0&&me===void 0||Mh(r,a,xe,he,f,me);return}}for(var le in u)he=u[le],u.hasOwnProperty(le)&&he!=null&&!f.hasOwnProperty(le)&&st(r,a,le,null,f,he);for(Se in f)he=f[Se],me=u[Se],!f.hasOwnProperty(Se)||he===me||he==null&&me==null||st(r,a,Se,he,f,me)}function Rx(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function HE(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,u=performance.getEntriesByType("resource"),f=0;f<u.length;f++){var v=u[f],C=v.transferSize,R=v.initiatorType,G=v.duration;if(C&&G&&Rx(R)){for(R=0,G=v.responseEnd,f+=1;f<u.length;f++){var ne=u[f],fe=ne.startTime;if(fe>G)break;var xe=ne.transferSize,Se=ne.initiatorType;xe&&Rx(Se)&&(ne=ne.responseEnd,R+=xe*(ne<G?1:(G-fe)/(ne-fe)))}if(--f,a+=8*(C+R)/(v.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Oh=null,Rh=null;function Uu(r){return r.nodeType===9?r:r.ownerDocument}function Ix(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lx(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Ih(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Lh=null;function PE(){var r=window.event;return r&&r.type==="popstate"?r===Lh?!1:(Lh=r,!0):(Lh=null,!1)}var Ux=typeof setTimeout=="function"?setTimeout:void 0,FE=typeof clearTimeout=="function"?clearTimeout:void 0,Bx=typeof Promise=="function"?Promise:void 0,qE=typeof queueMicrotask=="function"?queueMicrotask:typeof Bx<"u"?function(r){return Bx.resolve(null).then(r).catch($E)}:Ux;function $E(r){setTimeout(function(){throw r})}function xi(r){return r==="head"}function Hx(r,a){var u=a,f=0;do{var v=u.nextSibling;if(r.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(f===0){r.removeChild(v),Ja(a);return}f--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")f++;else if(u==="html")ys(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,ys(u);for(var C=u.firstChild;C;){var R=C.nextSibling,G=C.nodeName;C[Ii]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&C.rel.toLowerCase()==="stylesheet"||u.removeChild(C),C=R}}else u==="body"&&ys(r.ownerDocument.body);u=v}while(u);Ja(a)}function Px(r,a){var u=r;r=0;do{var f=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=f}while(u)}function Uh(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Uh(u),Oo(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function VE(r,a,u,f){for(;r.nodeType===1;){var v=u;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(f){if(!r[Ii])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(C=r.getAttribute("rel"),C==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(C!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(C=r.getAttribute("src"),(C!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&C&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var C=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===C)return r}else return r;if(r=Ln(r.nextSibling),r===null)break}return null}function YE(r,a,u){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=Ln(r.nextSibling),r===null))return null;return r}function Fx(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=Ln(r.nextSibling),r===null))return null;return r}function Bh(r){return r.data==="$?"||r.data==="$~"}function Hh(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function GE(r,a){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||u.readyState!=="loading")a();else{var f=function(){a(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),r._reactRetry=f}}function Ln(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var Ph=null;function qx(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(a===0)return Ln(r.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}r=r.nextSibling}return null}function $x(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return r;a--}else u!=="/$"&&u!=="/&"||a++}r=r.previousSibling}return null}function Vx(r,a,u){switch(a=Uu(u),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function ys(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Oo(r)}var Un=new Map,Yx=new Set;function Bu(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Or=V.d;V.d={f:XE,r:ZE,D:KE,C:WE,L:QE,m:JE,X:tC,S:eC,M:nC};function XE(){var r=Or.f(),a=Tu();return r||a}function ZE(r){var a=Wr(r);a!==null&&a.tag===5&&a.type==="form"?uy(a):Or.r(r)}var Ka=typeof document>"u"?null:document;function Gx(r,a,u){var f=Ka;if(f&&typeof a=="string"&&a){var v=rn(a);v='link[rel="'+r+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),Yx.has(v)||(Yx.add(v),r={rel:r,crossOrigin:u,href:a},f.querySelector(v)===null&&(a=f.createElement("link"),qt(a,"link",r),Nt(a),f.head.appendChild(a)))}}function KE(r){Or.D(r),Gx("dns-prefetch",r,null)}function WE(r,a){Or.C(r,a),Gx("preconnect",r,a)}function QE(r,a,u){Or.L(r,a,u);var f=Ka;if(f&&r&&a){var v='link[rel="preload"][as="'+rn(a)+'"]';a==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+rn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+rn(u.imageSizes)+'"]')):v+='[href="'+rn(r)+'"]';var C=v;switch(a){case"style":C=Wa(r);break;case"script":C=Qa(r)}Un.has(C)||(r=p({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:r,as:a},u),Un.set(C,r),f.querySelector(v)!==null||a==="style"&&f.querySelector(xs(C))||a==="script"&&f.querySelector(vs(C))||(a=f.createElement("link"),qt(a,"link",r),Nt(a),f.head.appendChild(a)))}}function JE(r,a){Or.m(r,a);var u=Ka;if(u&&r){var f=a&&typeof a.as=="string"?a.as:"script",v='link[rel="modulepreload"][as="'+rn(f)+'"][href="'+rn(r)+'"]',C=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=Qa(r)}if(!Un.has(C)&&(r=p({rel:"modulepreload",href:r},a),Un.set(C,r),u.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(vs(C)))return}f=u.createElement("link"),qt(f,"link",r),Nt(f),u.head.appendChild(f)}}}function eC(r,a,u){Or.S(r,a,u);var f=Ka;if(f&&r){var v=Jr(f).hoistableStyles,C=Wa(r);a=a||"default";var R=v.get(C);if(!R){var G={loading:0,preload:null};if(R=f.querySelector(xs(C)))G.loading=5;else{r=p({rel:"stylesheet",href:r,"data-precedence":a},u),(u=Un.get(C))&&Fh(r,u);var ne=R=f.createElement("link");Nt(ne),qt(ne,"link",r),ne._p=new Promise(function(fe,xe){ne.onload=fe,ne.onerror=xe}),ne.addEventListener("load",function(){G.loading|=1}),ne.addEventListener("error",function(){G.loading|=2}),G.loading|=4,Hu(R,a,f)}R={type:"stylesheet",instance:R,count:1,state:G},v.set(C,R)}}}function tC(r,a){Or.X(r,a);var u=Ka;if(u&&r){var f=Jr(u).hoistableScripts,v=Qa(r),C=f.get(v);C||(C=u.querySelector(vs(v)),C||(r=p({src:r,async:!0},a),(a=Un.get(v))&&qh(r,a),C=u.createElement("script"),Nt(C),qt(C,"link",r),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},f.set(v,C))}}function nC(r,a){Or.M(r,a);var u=Ka;if(u&&r){var f=Jr(u).hoistableScripts,v=Qa(r),C=f.get(v);C||(C=u.querySelector(vs(v)),C||(r=p({src:r,async:!0,type:"module"},a),(a=Un.get(v))&&qh(r,a),C=u.createElement("script"),Nt(C),qt(C,"link",r),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},f.set(v,C))}}function Xx(r,a,u,f){var v=(v=ue.current)?Bu(v):null;if(!v)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Wa(u.href),u=Jr(v).hoistableStyles,f=u.get(a),f||(f={type:"style",instance:null,count:0,state:null},u.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=Wa(u.href);var C=Jr(v).hoistableStyles,R=C.get(r);if(R||(v=v.ownerDocument||v,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(r,R),(C=v.querySelector(xs(r)))&&!C._p&&(R.instance=C,R.state.loading=5),Un.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Un.set(r,u),C||rC(v,r,u,R.state))),a&&f===null)throw Error(i(528,""));return R}if(a&&f!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Qa(u),u=Jr(v).hoistableScripts,f=u.get(a),f||(f={type:"script",instance:null,count:0,state:null},u.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Wa(r){return'href="'+rn(r)+'"'}function xs(r){return'link[rel="stylesheet"]['+r+"]"}function Zx(r){return p({},r,{"data-precedence":r.precedence,precedence:null})}function rC(r,a,u,f){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=r.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),qt(a,"link",u),Nt(a),r.head.appendChild(a))}function Qa(r){return'[src="'+rn(r)+'"]'}function vs(r){return"script[async]"+r}function Kx(r,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var f=r.querySelector('style[data-href~="'+rn(u.href)+'"]');if(f)return a.instance=f,Nt(f),f;var v=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(r.ownerDocument||r).createElement("style"),Nt(f),qt(f,"style",v),Hu(f,u.precedence,r),a.instance=f;case"stylesheet":v=Wa(u.href);var C=r.querySelector(xs(v));if(C)return a.state.loading|=4,a.instance=C,Nt(C),C;f=Zx(u),(v=Un.get(v))&&Fh(f,v),C=(r.ownerDocument||r).createElement("link"),Nt(C);var R=C;return R._p=new Promise(function(G,ne){R.onload=G,R.onerror=ne}),qt(C,"link",f),a.state.loading|=4,Hu(C,u.precedence,r),a.instance=C;case"script":return C=Qa(u.src),(v=r.querySelector(vs(C)))?(a.instance=v,Nt(v),v):(f=u,(v=Un.get(C))&&(f=p({},u),qh(f,v)),r=r.ownerDocument||r,v=r.createElement("script"),Nt(v),qt(v,"link",f),r.head.appendChild(v),a.instance=v);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(f=a.instance,a.state.loading|=4,Hu(f,u.precedence,r));return a.instance}function Hu(r,a,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,C=v,R=0;R<f.length;R++){var G=f[R];if(G.dataset.precedence===a)C=G;else if(C!==v)break}C?C.parentNode.insertBefore(r,C.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(r,a.firstChild))}function Fh(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function qh(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var Pu=null;function Wx(r,a,u){if(Pu===null){var f=new Map,v=Pu=new Map;v.set(u,f)}else v=Pu,f=v.get(u),f||(f=new Map,v.set(u,f));if(f.has(r))return f;for(f.set(r,null),u=u.getElementsByTagName(r),v=0;v<u.length;v++){var C=u[v];if(!(C[Ii]||C[Rt]||r==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var R=C.getAttribute(a)||"";R=r+R;var G=f.get(R);G?G.push(C):f.set(R,[C])}}return f}function Qx(r,a,u){r=r.ownerDocument||r,r.head.insertBefore(u,a==="title"?r.querySelector("head > title"):null)}function iC(r,a,u){if(u===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(r=a.disabled,typeof a.precedence=="string"&&r==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Jx(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function aC(r,a,u,f){if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=Wa(f.href),C=a.querySelector(xs(v));if(C){a=C._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=Fu.bind(r),a.then(r,r)),u.state.loading|=4,u.instance=C,Nt(C);return}C=a.ownerDocument||a,f=Zx(f),(v=Un.get(v))&&Fh(f,v),C=C.createElement("link"),Nt(C);var R=C;R._p=new Promise(function(G,ne){R.onload=G,R.onerror=ne}),qt(C,"link",f),u.instance=C}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=Fu.bind(r),a.addEventListener("load",u),a.addEventListener("error",u))}}var $h=0;function oC(r,a){return r.stylesheets&&r.count===0&&$u(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var f=setTimeout(function(){if(r.stylesheets&&$u(r,r.stylesheets),r.unsuspend){var C=r.unsuspend;r.unsuspend=null,C()}},6e4+a);0<r.imgBytes&&$h===0&&($h=62500*HE());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&$u(r,r.stylesheets),r.unsuspend)){var C=r.unsuspend;r.unsuspend=null,C()}},(r.imgBytes>$h?50:800)+a);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function Fu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$u(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var qu=null;function $u(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,qu=new Map,a.forEach(sC,r),qu=null,Fu.call(r))}function sC(r,a){if(!(a.state.loading&4)){var u=qu.get(r);if(u)var f=u.get(null);else{u=new Map,qu.set(r,u);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<v.length;C++){var R=v[C];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(u.set(R.dataset.precedence,R),f=R)}f&&u.set(null,f)}v=a.instance,R=v.getAttribute("data-precedence"),C=u.get(R)||f,C===f&&u.set(null,v),u.set(R,v),this.count++,f=Fu.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),C?C.parentNode.insertBefore(v,C.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),a.state.loading|=4}}var bs={$$typeof:E,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function lC(r,a,u,f,v,C,R,G,ne){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Do(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Do(0),this.hiddenUpdates=Do(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=C,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function e1(r,a,u,f,v,C,R,G,ne,fe,xe,Se){return r=new lC(r,a,u,R,ne,fe,xe,Se,G),a=1,C===!0&&(a|=24),C=yn(3,null,null,a),r.current=C,C.stateNode=r,a=_d(),a.refCount++,r.pooledCache=a,a.refCount++,C.memoizedState={element:f,isDehydrated:u,cache:a},jd(C),r}function t1(r){return r?(r=Aa,r):Aa}function n1(r,a,u,f,v,C){v=t1(v),f.context===null?f.context=v:f.pendingContext=v,f=si(a),f.payload={element:u},C=C===void 0?null:C,C!==null&&(f.callback=C),u=li(r,f,a),u!==null&&(cn(u,r,a),Qo(u,r,a))}function r1(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<a?u:a}}function Vh(r,a){r1(r,a),(r=r.alternate)&&r1(r,a)}function i1(r){if(r.tag===13||r.tag===31){var a=Fi(r,67108864);a!==null&&cn(a,r,67108864),Vh(r,67108864)}}function a1(r){if(r.tag===13||r.tag===31){var a=Sn();a=zo(a);var u=Fi(r,a);u!==null&&cn(u,r,a),Vh(r,a)}}var Vu=!0;function uC(r,a,u,f){var v=U.T;U.T=null;var C=V.p;try{V.p=2,Yh(r,a,u,f)}finally{V.p=C,U.T=v}}function cC(r,a,u,f){var v=U.T;U.T=null;var C=V.p;try{V.p=8,Yh(r,a,u,f)}finally{V.p=C,U.T=v}}function Yh(r,a,u,f){if(Vu){var v=Gh(f);if(v===null)zh(r,a,f,Yu,u),s1(r,f);else if(dC(v,r,a,u,f))f.stopPropagation();else if(s1(r,f),a&4&&-1<fC.indexOf(r)){for(;v!==null;){var C=Wr(v);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var R=tn(C.pendingLanes);if(R!==0){var G=C;for(G.pendingLanes|=2,G.entangledLanes|=2;R;){var ne=1<<31-Ve(R);G.entanglements[1]|=ne,R&=~ne}or(C),(rt&6)===0&&(Nu=Ce()+500,ps(0))}}break;case 31:case 13:G=Fi(C,2),G!==null&&cn(G,C,2),Tu(),Vh(C,2)}if(C=Gh(f),C===null&&zh(r,a,f,Yu,u),C===v)break;v=C}v!==null&&f.stopPropagation()}else zh(r,a,f,null,u)}}function Gh(r){return r=Zf(r),Xh(r)}var Yu=null;function Xh(r){if(Yu=null,r=Kr(r),r!==null){var a=s(r);if(a===null)r=null;else{var u=a.tag;if(u===13){if(r=l(a),r!==null)return r;r=null}else if(u===31){if(r=c(a),r!==null)return r;r=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Yu=r,null}function o1(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ke()){case se:return 2;case we:return 8;case Ne:case Ie:return 32;case qe:return 268435456;default:return 32}default:return 32}}var Zh=!1,vi=null,bi=null,wi=null,ws=new Map,Ss=new Map,Si=[],fC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s1(r,a){switch(r){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":ws.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(a.pointerId)}}function _s(r,a,u,f,v,C){return r===null||r.nativeEvent!==C?(r={blockedOn:a,domEventName:u,eventSystemFlags:f,nativeEvent:C,targetContainers:[v]},a!==null&&(a=Wr(a),a!==null&&i1(a)),r):(r.eventSystemFlags|=f,a=r.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),r)}function dC(r,a,u,f,v){switch(a){case"focusin":return vi=_s(vi,r,a,u,f,v),!0;case"dragenter":return bi=_s(bi,r,a,u,f,v),!0;case"mouseover":return wi=_s(wi,r,a,u,f,v),!0;case"pointerover":var C=v.pointerId;return ws.set(C,_s(ws.get(C)||null,r,a,u,f,v)),!0;case"gotpointercapture":return C=v.pointerId,Ss.set(C,_s(Ss.get(C)||null,r,a,u,f,v)),!0}return!1}function l1(r){var a=Kr(r.target);if(a!==null){var u=s(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){r.blockedOn=a,Ol(r.priority,function(){a1(u)});return}}else if(a===31){if(a=c(u),a!==null){r.blockedOn=a,Ol(r.priority,function(){a1(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Gu(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var u=Gh(r.nativeEvent);if(u===null){u=r.nativeEvent;var f=new u.constructor(u.type,u);Xf=f,u.target.dispatchEvent(f),Xf=null}else return a=Wr(u),a!==null&&i1(a),r.blockedOn=u,!1;a.shift()}return!0}function u1(r,a,u){Gu(r)&&u.delete(a)}function hC(){Zh=!1,vi!==null&&Gu(vi)&&(vi=null),bi!==null&&Gu(bi)&&(bi=null),wi!==null&&Gu(wi)&&(wi=null),ws.forEach(u1),Ss.forEach(u1)}function Xu(r,a){r.blockedOn===a&&(r.blockedOn=null,Zh||(Zh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hC)))}var Zu=null;function c1(r){Zu!==r&&(Zu=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Zu===r&&(Zu=null);for(var a=0;a<r.length;a+=3){var u=r[a],f=r[a+1],v=r[a+2];if(typeof f!="function"){if(Xh(f||u)===null)continue;break}var C=Wr(u);C!==null&&(r.splice(a,3),a-=3,Gd(C,{pending:!0,data:v,method:u.method,action:f},f,v))}}))}function Ja(r){function a(ne){return Xu(ne,r)}vi!==null&&Xu(vi,r),bi!==null&&Xu(bi,r),wi!==null&&Xu(wi,r),ws.forEach(a),Ss.forEach(a);for(var u=0;u<Si.length;u++){var f=Si[u];f.blockedOn===r&&(f.blockedOn=null)}for(;0<Si.length&&(u=Si[0],u.blockedOn===null);)l1(u),u.blockedOn===null&&Si.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var v=u[f],C=u[f+1],R=v[Yt]||null;if(typeof C=="function")R||c1(u);else if(R){var G=null;if(C&&C.hasAttribute("formAction")){if(v=C,R=C[Yt]||null)G=R.formAction;else if(Xh(v)!==null)continue}else G=R.action;typeof G=="function"?u[f+1]=G:(u.splice(f,3),f-=3),c1(u)}}}function f1(){function r(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(R){return v=R})},focusReset:"manual",scroll:"manual"})}function a(){v!==null&&(v(),v=null),f||setTimeout(u,20)}function u(){if(!f&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){f=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),v!==null&&(v(),v=null)}}}function Kh(r){this._internalRoot=r}Ku.prototype.render=Kh.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,f=Sn();n1(u,f,r,a,null,null)},Ku.prototype.unmount=Kh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;n1(r.current,2,null,r,null,null),Tu(),a[mr]=null}};function Ku(r){this._internalRoot=r}Ku.prototype.unstable_scheduleHydration=function(r){if(r){var a=Ml();r={blockedOn:null,target:r,priority:a};for(var u=0;u<Si.length&&a!==0&&a<Si[u].priority;u++);Si.splice(u,0,r),u===0&&l1(r)}};var d1=t.version;if(d1!=="19.2.3")throw Error(i(527,d1,"19.2.3"));V.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(a),r=r!==null?m(r):null,r=r===null?null:r.stateNode,r};var pC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wu.isDisabled&&Wu.supportsFiber)try{$e=Wu.inject(pC),ht=Wu}catch{}}return Es.createRoot=function(r,a){if(!o(r))throw Error(i(299));var u=!1,f="",v=vy,C=by,R=wy;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(C=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError)),a=e1(r,1,!1,null,null,u,f,null,v,C,R,f1),r[mr]=a.current,Dh(r),new Kh(a)},Es.hydrateRoot=function(r,a,u){if(!o(r))throw Error(i(299));var f=!1,v="",C=vy,R=by,G=wy,ne=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(R=u.onCaughtError),u.onRecoverableError!==void 0&&(G=u.onRecoverableError),u.formState!==void 0&&(ne=u.formState)),a=e1(r,1,!0,a,u??null,f,v,ne,C,R,G,f1),a.context=t1(null),u=a.current,f=Sn(),f=zo(f),v=si(f),v.callback=null,li(u,v,f),u=f,a.current.lanes=u,Ri(a,u),or(a),r[mr]=a.current,Dh(r),new Ku(a)},Es.version="19.2.3",Es}var S1;function kC(){if(S1)return Jh.exports;S1=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Jh.exports=_C(),Jh.exports}var EC=kC();function Ot(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=Ot(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var CC={value:()=>{}};function cf(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new _c(n)}function _c(e){this._=e}function jC(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}_c.prototype=cf.prototype={constructor:_c,on:function(e,t){var n=this._,i=jC(e+"",n),o,s=-1,l=i.length;if(arguments.length<2){for(;++s<l;)if((o=(e=i[s]).type)&&(o=NC(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<l;)if(o=(e=i[s]).type)n[o]=_1(n[o],e.name,t);else if(t==null)for(o in n)n[o]=_1(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new _c(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,s;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,o=s.length;i<o;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,s=i.length;o<s;++o)i[o].value.apply(t,n)}};function NC(e,t){for(var n=0,i=e.length,o;n<i;++n)if((o=e[n]).name===t)return o.value}function _1(e,t,n){for(var i=0,o=e.length;i<o;++i)if(e[i].name===t){e[i]=CC,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Yp="http://www.w3.org/1999/xhtml";const k1={svg:"http://www.w3.org/2000/svg",xhtml:Yp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ff(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),k1.hasOwnProperty(t)?{space:k1[t],local:e}:e}function AC(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Yp&&t.documentElement.namespaceURI===Yp?t.createElement(e):t.createElementNS(n,e)}}function TC(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function dw(e){var t=ff(e);return(t.local?TC:AC)(t)}function DC(){}function zm(e){return e==null?DC:function(){return this.querySelector(e)}}function zC(e){typeof e!="function"&&(e=zm(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var s=t[o],l=s.length,c=i[o]=new Array(l),d,h,m=0;m<l;++m)(d=s[m])&&(h=e.call(d,d.__data__,m,s))&&("__data__"in d&&(h.__data__=d.__data__),c[m]=h);return new An(i,this._parents)}function MC(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function OC(){return[]}function hw(e){return e==null?OC:function(){return this.querySelectorAll(e)}}function RC(e){return function(){return MC(e.apply(this,arguments))}}function IC(e){typeof e=="function"?e=RC(e):e=hw(e);for(var t=this._groups,n=t.length,i=[],o=[],s=0;s<n;++s)for(var l=t[s],c=l.length,d,h=0;h<c;++h)(d=l[h])&&(i.push(e.call(d,d.__data__,h,l)),o.push(d));return new An(i,o)}function pw(e){return function(){return this.matches(e)}}function mw(e){return function(t){return t.matches(e)}}var LC=Array.prototype.find;function UC(e){return function(){return LC.call(this.children,e)}}function BC(){return this.firstElementChild}function HC(e){return this.select(e==null?BC:UC(typeof e=="function"?e:mw(e)))}var PC=Array.prototype.filter;function FC(){return Array.from(this.children)}function qC(e){return function(){return PC.call(this.children,e)}}function $C(e){return this.selectAll(e==null?FC:qC(typeof e=="function"?e:mw(e)))}function VC(e){typeof e!="function"&&(e=pw(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var s=t[o],l=s.length,c=i[o]=[],d,h=0;h<l;++h)(d=s[h])&&e.call(d,d.__data__,h,s)&&c.push(d);return new An(i,this._parents)}function gw(e){return new Array(e.length)}function YC(){return new An(this._enter||this._groups.map(gw),this._parents)}function Rc(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Rc.prototype={constructor:Rc,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function GC(e){return function(){return e}}function XC(e,t,n,i,o,s){for(var l=0,c,d=t.length,h=s.length;l<h;++l)(c=t[l])?(c.__data__=s[l],i[l]=c):n[l]=new Rc(e,s[l]);for(;l<d;++l)(c=t[l])&&(o[l]=c)}function ZC(e,t,n,i,o,s,l){var c,d,h=new Map,m=t.length,p=s.length,g=new Array(m),y;for(c=0;c<m;++c)(d=t[c])&&(g[c]=y=l.call(d,d.__data__,c,t)+"",h.has(y)?o[c]=d:h.set(y,d));for(c=0;c<p;++c)y=l.call(e,s[c],c,s)+"",(d=h.get(y))?(i[c]=d,d.__data__=s[c],h.delete(y)):n[c]=new Rc(e,s[c]);for(c=0;c<m;++c)(d=t[c])&&h.get(g[c])===d&&(o[c]=d)}function KC(e){return e.__data__}function WC(e,t){if(!arguments.length)return Array.from(this,KC);var n=t?ZC:XC,i=this._parents,o=this._groups;typeof e!="function"&&(e=GC(e));for(var s=o.length,l=new Array(s),c=new Array(s),d=new Array(s),h=0;h<s;++h){var m=i[h],p=o[h],g=p.length,y=QC(e.call(m,m&&m.__data__,h,i)),w=y.length,S=c[h]=new Array(w),_=l[h]=new Array(w),b=d[h]=new Array(g);n(m,p,S,_,b,y,t);for(var k=0,E=0,j,A;k<w;++k)if(j=S[k]){for(k>=E&&(E=k+1);!(A=_[E])&&++E<w;);j._next=A||null}}return l=new An(l,i),l._enter=c,l._exit=d,l}function QC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function JC(){return new An(this._exit||this._groups.map(gw),this._parents)}function e3(e,t,n){var i=this.enter(),o=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?s.remove():n(s),i&&o?i.merge(o).order():o}function t3(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,o=n.length,s=i.length,l=Math.min(o,s),c=new Array(o),d=0;d<l;++d)for(var h=n[d],m=i[d],p=h.length,g=c[d]=new Array(p),y,w=0;w<p;++w)(y=h[w]||m[w])&&(g[w]=y);for(;d<o;++d)c[d]=n[d];return new An(c,this._parents)}function n3(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],o=i.length-1,s=i[o],l;--o>=0;)(l=i[o])&&(s&&l.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(l,s),s=l);return this}function r3(e){e||(e=i3);function t(p,g){return p&&g?e(p.__data__,g.__data__):!p-!g}for(var n=this._groups,i=n.length,o=new Array(i),s=0;s<i;++s){for(var l=n[s],c=l.length,d=o[s]=new Array(c),h,m=0;m<c;++m)(h=l[m])&&(d[m]=h);d.sort(t)}return new An(o,this._parents).order()}function i3(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function a3(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function o3(){return Array.from(this)}function s3(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,s=i.length;o<s;++o){var l=i[o];if(l)return l}return null}function l3(){let e=0;for(const t of this)++e;return e}function u3(){return!this.node()}function c3(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var o=t[n],s=0,l=o.length,c;s<l;++s)(c=o[s])&&e.call(c,c.__data__,s,o);return this}function f3(e){return function(){this.removeAttribute(e)}}function d3(e){return function(){this.removeAttributeNS(e.space,e.local)}}function h3(e,t){return function(){this.setAttribute(e,t)}}function p3(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function m3(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function g3(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function y3(e,t){var n=ff(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?d3:f3:typeof t=="function"?n.local?g3:m3:n.local?p3:h3)(n,t))}function yw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function x3(e){return function(){this.style.removeProperty(e)}}function v3(e,t,n){return function(){this.style.setProperty(e,t,n)}}function b3(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function w3(e,t,n){return arguments.length>1?this.each((t==null?x3:typeof t=="function"?b3:v3)(e,t,n??"")):yo(this.node(),e)}function yo(e,t){return e.style.getPropertyValue(t)||yw(e).getComputedStyle(e,null).getPropertyValue(t)}function S3(e){return function(){delete this[e]}}function _3(e,t){return function(){this[e]=t}}function k3(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function E3(e,t){return arguments.length>1?this.each((t==null?S3:typeof t=="function"?k3:_3)(e,t)):this.node()[e]}function xw(e){return e.trim().split(/^|\s+/)}function Mm(e){return e.classList||new vw(e)}function vw(e){this._node=e,this._names=xw(e.getAttribute("class")||"")}vw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function bw(e,t){for(var n=Mm(e),i=-1,o=t.length;++i<o;)n.add(t[i])}function ww(e,t){for(var n=Mm(e),i=-1,o=t.length;++i<o;)n.remove(t[i])}function C3(e){return function(){bw(this,e)}}function j3(e){return function(){ww(this,e)}}function N3(e,t){return function(){(t.apply(this,arguments)?bw:ww)(this,e)}}function A3(e,t){var n=xw(e+"");if(arguments.length<2){for(var i=Mm(this.node()),o=-1,s=n.length;++o<s;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?N3:t?C3:j3)(n,t))}function T3(){this.textContent=""}function D3(e){return function(){this.textContent=e}}function z3(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function M3(e){return arguments.length?this.each(e==null?T3:(typeof e=="function"?z3:D3)(e)):this.node().textContent}function O3(){this.innerHTML=""}function R3(e){return function(){this.innerHTML=e}}function I3(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function L3(e){return arguments.length?this.each(e==null?O3:(typeof e=="function"?I3:R3)(e)):this.node().innerHTML}function U3(){this.nextSibling&&this.parentNode.appendChild(this)}function B3(){return this.each(U3)}function H3(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function P3(){return this.each(H3)}function F3(e){var t=typeof e=="function"?e:dw(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function q3(){return null}function $3(e,t){var n=typeof e=="function"?e:dw(e),i=t==null?q3:typeof t=="function"?t:zm(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function V3(){var e=this.parentNode;e&&e.removeChild(this)}function Y3(){return this.each(V3)}function G3(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function X3(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Z3(e){return this.select(e?X3:G3)}function K3(e){return arguments.length?this.property("__data__",e):this.node().__data__}function W3(e){return function(t){e.call(this,t,this.__data__)}}function Q3(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function J3(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,o=t.length,s;n<o;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function ej(e,t,n){return function(){var i=this.__on,o,s=W3(t);if(i){for(var l=0,c=i.length;l<c;++l)if((o=i[l]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),o.value=t;return}}this.addEventListener(e.type,s,n),o={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(o):this.__on=[o]}}function tj(e,t,n){var i=Q3(e+""),o,s=i.length,l;if(arguments.length<2){var c=this.node().__on;if(c){for(var d=0,h=c.length,m;d<h;++d)for(o=0,m=c[d];o<s;++o)if((l=i[o]).type===m.type&&l.name===m.name)return m.value}return}for(c=t?ej:J3,o=0;o<s;++o)this.each(c(i[o],t,n));return this}function Sw(e,t,n){var i=yw(e),o=i.CustomEvent;typeof o=="function"?o=new o(t,n):(o=i.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function nj(e,t){return function(){return Sw(this,e,t)}}function rj(e,t){return function(){return Sw(this,e,t.apply(this,arguments))}}function ij(e,t){return this.each((typeof t=="function"?rj:nj)(e,t))}function*aj(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,s=i.length,l;o<s;++o)(l=i[o])&&(yield l)}var _w=[null];function An(e,t){this._groups=e,this._parents=t}function pl(){return new An([[document.documentElement]],_w)}function oj(){return this}An.prototype=pl.prototype={constructor:An,select:zC,selectAll:IC,selectChild:HC,selectChildren:$C,filter:VC,data:WC,enter:YC,exit:JC,join:e3,merge:t3,selection:oj,order:n3,sort:r3,call:a3,nodes:o3,node:s3,size:l3,empty:u3,each:c3,attr:y3,style:w3,property:E3,classed:A3,text:M3,html:L3,raise:B3,lower:P3,append:F3,insert:$3,remove:Y3,clone:Z3,datum:K3,on:tj,dispatch:ij,[Symbol.iterator]:aj};function Cn(e){return typeof e=="string"?new An([[document.querySelector(e)]],[document.documentElement]):new An([[e]],_w)}function sj(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Zn(e,t){if(e=sj(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const lj={passive:!1},Qs={capture:!0,passive:!1};function rp(e){e.stopImmediatePropagation()}function ho(e){e.preventDefault(),e.stopImmediatePropagation()}function kw(e){var t=e.document.documentElement,n=Cn(e).on("dragstart.drag",ho,Qs);"onselectstart"in t?n.on("selectstart.drag",ho,Qs):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ew(e,t){var n=e.document.documentElement,i=Cn(e).on("dragstart.drag",null);t&&(i.on("click.drag",ho,Qs),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ju=e=>()=>e;function Gp(e,{sourceEvent:t,subject:n,target:i,identifier:o,active:s,x:l,y:c,dx:d,dy:h,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:m}})}Gp.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function uj(e){return!e.ctrlKey&&!e.button}function cj(){return this.parentNode}function fj(e,t){return t??{x:e.x,y:e.y}}function dj(){return navigator.maxTouchPoints||"ontouchstart"in this}function Cw(){var e=uj,t=cj,n=fj,i=dj,o={},s=cf("start","drag","end"),l=0,c,d,h,m,p=0;function g(j){j.on("mousedown.drag",y).filter(i).on("touchstart.drag",_).on("touchmove.drag",b,lj).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(j,A){if(!(m||!e.call(this,j,A))){var T=E(this,t.call(this,j,A),j,A,"mouse");T&&(Cn(j.view).on("mousemove.drag",w,Qs).on("mouseup.drag",S,Qs),kw(j.view),rp(j),h=!1,c=j.clientX,d=j.clientY,T("start",j))}}function w(j){if(ho(j),!h){var A=j.clientX-c,T=j.clientY-d;h=A*A+T*T>p}o.mouse("drag",j)}function S(j){Cn(j.view).on("mousemove.drag mouseup.drag",null),Ew(j.view,h),ho(j),o.mouse("end",j)}function _(j,A){if(e.call(this,j,A)){var T=j.changedTouches,M=t.call(this,j,A),P=T.length,F,$;for(F=0;F<P;++F)($=E(this,M,j,A,T[F].identifier,T[F]))&&(rp(j),$("start",j,T[F]))}}function b(j){var A=j.changedTouches,T=A.length,M,P;for(M=0;M<T;++M)(P=o[A[M].identifier])&&(ho(j),P("drag",j,A[M]))}function k(j){var A=j.changedTouches,T=A.length,M,P;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),M=0;M<T;++M)(P=o[A[M].identifier])&&(rp(j),P("end",j,A[M]))}function E(j,A,T,M,P,F){var $=s.copy(),Z=Zn(F||T,A),D,q,N;if((N=n.call(j,new Gp("beforestart",{sourceEvent:T,target:g,identifier:P,active:l,x:Z[0],y:Z[1],dx:0,dy:0,dispatch:$}),M))!=null)return D=N.x-Z[0]||0,q=N.y-Z[1]||0,function H(U,V,X){var Y=Z,B;switch(U){case"start":o[P]=H,B=l++;break;case"end":delete o[P],--l;case"drag":Z=Zn(X||V,A),B=l;break}$.call(U,j,new Gp(U,{sourceEvent:V,subject:N,target:g,identifier:P,active:B,x:Z[0]+D,y:Z[1]+q,dx:Z[0]-Y[0],dy:Z[1]-Y[1],dispatch:$}),M)}}return g.filter=function(j){return arguments.length?(e=typeof j=="function"?j:Ju(!!j),g):e},g.container=function(j){return arguments.length?(t=typeof j=="function"?j:Ju(j),g):t},g.subject=function(j){return arguments.length?(n=typeof j=="function"?j:Ju(j),g):n},g.touchable=function(j){return arguments.length?(i=typeof j=="function"?j:Ju(!!j),g):i},g.on=function(){var j=s.on.apply(s,arguments);return j===s?g:j},g.clickDistance=function(j){return arguments.length?(p=(j=+j)*j,g):Math.sqrt(p)},g}function Om(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function jw(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function ml(){}var Js=.7,Ic=1/Js,po="\\s*([+-]?\\d+)\\s*",el="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ur="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hj=/^#([0-9a-f]{3,8})$/,pj=new RegExp(`^rgb\\(${po},${po},${po}\\)$`),mj=new RegExp(`^rgb\\(${ur},${ur},${ur}\\)$`),gj=new RegExp(`^rgba\\(${po},${po},${po},${el}\\)$`),yj=new RegExp(`^rgba\\(${ur},${ur},${ur},${el}\\)$`),xj=new RegExp(`^hsl\\(${el},${ur},${ur}\\)$`),vj=new RegExp(`^hsla\\(${el},${ur},${ur},${el}\\)$`),E1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Om(ml,la,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:C1,formatHex:C1,formatHex8:bj,formatHsl:wj,formatRgb:j1,toString:j1});function C1(){return this.rgb().formatHex()}function bj(){return this.rgb().formatHex8()}function wj(){return Nw(this).formatHsl()}function j1(){return this.rgb().formatRgb()}function la(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hj.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?N1(t):n===3?new hn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ec(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ec(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pj.exec(e))?new hn(t[1],t[2],t[3],1):(t=mj.exec(e))?new hn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gj.exec(e))?ec(t[1],t[2],t[3],t[4]):(t=yj.exec(e))?ec(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=xj.exec(e))?D1(t[1],t[2]/100,t[3]/100,1):(t=vj.exec(e))?D1(t[1],t[2]/100,t[3]/100,t[4]):E1.hasOwnProperty(e)?N1(E1[e]):e==="transparent"?new hn(NaN,NaN,NaN,0):null}function N1(e){return new hn(e>>16&255,e>>8&255,e&255,1)}function ec(e,t,n,i){return i<=0&&(e=t=n=NaN),new hn(e,t,n,i)}function Sj(e){return e instanceof ml||(e=la(e)),e?(e=e.rgb(),new hn(e.r,e.g,e.b,e.opacity)):new hn}function Xp(e,t,n,i){return arguments.length===1?Sj(e):new hn(e,t,n,i??1)}function hn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Om(hn,Xp,jw(ml,{brighter(e){return e=e==null?Ic:Math.pow(Ic,e),new hn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Js:Math.pow(Js,e),new hn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new hn(oa(this.r),oa(this.g),oa(this.b),Lc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:A1,formatHex:A1,formatHex8:_j,formatRgb:T1,toString:T1}));function A1(){return`#${aa(this.r)}${aa(this.g)}${aa(this.b)}`}function _j(){return`#${aa(this.r)}${aa(this.g)}${aa(this.b)}${aa((isNaN(this.opacity)?1:this.opacity)*255)}`}function T1(){const e=Lc(this.opacity);return`${e===1?"rgb(":"rgba("}${oa(this.r)}, ${oa(this.g)}, ${oa(this.b)}${e===1?")":`, ${e})`}`}function Lc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function oa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function aa(e){return e=oa(e),(e<16?"0":"")+e.toString(16)}function D1(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Kn(e,t,n,i)}function Nw(e){if(e instanceof Kn)return new Kn(e.h,e.s,e.l,e.opacity);if(e instanceof ml||(e=la(e)),!e)return new Kn;if(e instanceof Kn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),s=Math.max(t,n,i),l=NaN,c=s-o,d=(s+o)/2;return c?(t===s?l=(n-i)/c+(n<i)*6:n===s?l=(i-t)/c+2:l=(t-n)/c+4,c/=d<.5?s+o:2-s-o,l*=60):c=d>0&&d<1?0:l,new Kn(l,c,d,e.opacity)}function kj(e,t,n,i){return arguments.length===1?Nw(e):new Kn(e,t,n,i??1)}function Kn(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Om(Kn,kj,jw(ml,{brighter(e){return e=e==null?Ic:Math.pow(Ic,e),new Kn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Js:Math.pow(Js,e),new Kn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,o=2*n-i;return new hn(ip(e>=240?e-240:e+120,o,i),ip(e,o,i),ip(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new Kn(z1(this.h),tc(this.s),tc(this.l),Lc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Lc(this.opacity);return`${e===1?"hsl(":"hsla("}${z1(this.h)}, ${tc(this.s)*100}%, ${tc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function z1(e){return e=(e||0)%360,e<0?e+360:e}function tc(e){return Math.max(0,Math.min(1,e||0))}function ip(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Rm=e=>()=>e;function Ej(e,t){return function(n){return e+n*t}}function Cj(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function jj(e){return(e=+e)==1?Aw:function(t,n){return n-t?Cj(t,n,e):Rm(isNaN(t)?n:t)}}function Aw(e,t){var n=t-e;return n?Ej(e,n):Rm(isNaN(e)?t:e)}const Uc=(function e(t){var n=jj(t);function i(o,s){var l=n((o=Xp(o)).r,(s=Xp(s)).r),c=n(o.g,s.g),d=n(o.b,s.b),h=Aw(o.opacity,s.opacity);return function(m){return o.r=l(m),o.g=c(m),o.b=d(m),o.opacity=h(m),o+""}}return i.gamma=e,i})(1);function Nj(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),o;return function(s){for(o=0;o<n;++o)i[o]=e[o]*(1-s)+t[o]*s;return i}}function Aj(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Tj(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,o=new Array(i),s=new Array(n),l;for(l=0;l<i;++l)o[l]=Ys(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(c){for(l=0;l<i;++l)s[l]=o[l](c);return s}}function Dj(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function lr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function zj(e,t){var n={},i={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=Ys(e[o],t[o]):i[o]=t[o];return function(s){for(o in n)i[o]=n[o](s);return i}}var Zp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ap=new RegExp(Zp.source,"g");function Mj(e){return function(){return e}}function Oj(e){return function(t){return e(t)+""}}function Tw(e,t){var n=Zp.lastIndex=ap.lastIndex=0,i,o,s,l=-1,c=[],d=[];for(e=e+"",t=t+"";(i=Zp.exec(e))&&(o=ap.exec(t));)(s=o.index)>n&&(s=t.slice(n,s),c[l]?c[l]+=s:c[++l]=s),(i=i[0])===(o=o[0])?c[l]?c[l]+=o:c[++l]=o:(c[++l]=null,d.push({i:l,x:lr(i,o)})),n=ap.lastIndex;return n<t.length&&(s=t.slice(n),c[l]?c[l]+=s:c[++l]=s),c.length<2?d[0]?Oj(d[0].x):Mj(t):(t=d.length,function(h){for(var m=0,p;m<t;++m)c[(p=d[m]).i]=p.x(h);return c.join("")})}function Ys(e,t){var n=typeof t,i;return t==null||n==="boolean"?Rm(t):(n==="number"?lr:n==="string"?(i=la(t))?(t=i,Uc):Tw:t instanceof la?Uc:t instanceof Date?Dj:Aj(t)?Nj:Array.isArray(t)?Tj:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?zj:lr)(e,t)}var M1=180/Math.PI,Kp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Dw(e,t,n,i,o,s){var l,c,d;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(d=e*n+t*i)&&(n-=e*d,i-=t*d),(c=Math.sqrt(n*n+i*i))&&(n/=c,i/=c,d/=c),e*i<t*n&&(e=-e,t=-t,d=-d,l=-l),{translateX:o,translateY:s,rotate:Math.atan2(t,e)*M1,skewX:Math.atan(d)*M1,scaleX:l,scaleY:c}}var nc;function Rj(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Kp:Dw(t.a,t.b,t.c,t.d,t.e,t.f)}function Ij(e){return e==null||(nc||(nc=document.createElementNS("http://www.w3.org/2000/svg","g")),nc.setAttribute("transform",e),!(e=nc.transform.baseVal.consolidate()))?Kp:(e=e.matrix,Dw(e.a,e.b,e.c,e.d,e.e,e.f))}function zw(e,t,n,i){function o(h){return h.length?h.pop()+" ":""}function s(h,m,p,g,y,w){if(h!==p||m!==g){var S=y.push("translate(",null,t,null,n);w.push({i:S-4,x:lr(h,p)},{i:S-2,x:lr(m,g)})}else(p||g)&&y.push("translate("+p+t+g+n)}function l(h,m,p,g){h!==m?(h-m>180?m+=360:m-h>180&&(h+=360),g.push({i:p.push(o(p)+"rotate(",null,i)-2,x:lr(h,m)})):m&&p.push(o(p)+"rotate("+m+i)}function c(h,m,p,g){h!==m?g.push({i:p.push(o(p)+"skewX(",null,i)-2,x:lr(h,m)}):m&&p.push(o(p)+"skewX("+m+i)}function d(h,m,p,g,y,w){if(h!==p||m!==g){var S=y.push(o(y)+"scale(",null,",",null,")");w.push({i:S-4,x:lr(h,p)},{i:S-2,x:lr(m,g)})}else(p!==1||g!==1)&&y.push(o(y)+"scale("+p+","+g+")")}return function(h,m){var p=[],g=[];return h=e(h),m=e(m),s(h.translateX,h.translateY,m.translateX,m.translateY,p,g),l(h.rotate,m.rotate,p,g),c(h.skewX,m.skewX,p,g),d(h.scaleX,h.scaleY,m.scaleX,m.scaleY,p,g),h=m=null,function(y){for(var w=-1,S=g.length,_;++w<S;)p[(_=g[w]).i]=_.x(y);return p.join("")}}}var Lj=zw(Rj,"px, ","px)","deg)"),Uj=zw(Ij,", ",")",")"),Bj=1e-12;function O1(e){return((e=Math.exp(e))+1/e)/2}function Hj(e){return((e=Math.exp(e))-1/e)/2}function Pj(e){return((e=Math.exp(2*e))-1)/(e+1)}const kc=(function e(t,n,i){function o(s,l){var c=s[0],d=s[1],h=s[2],m=l[0],p=l[1],g=l[2],y=m-c,w=p-d,S=y*y+w*w,_,b;if(S<Bj)b=Math.log(g/h)/t,_=function(M){return[c+M*y,d+M*w,h*Math.exp(t*M*b)]};else{var k=Math.sqrt(S),E=(g*g-h*h+i*S)/(2*h*n*k),j=(g*g-h*h-i*S)/(2*g*n*k),A=Math.log(Math.sqrt(E*E+1)-E),T=Math.log(Math.sqrt(j*j+1)-j);b=(T-A)/t,_=function(M){var P=M*b,F=O1(A),$=h/(n*k)*(F*Pj(t*P+A)-Hj(A));return[c+$*y,d+$*w,h*F/O1(t*P+A)]}}return _.duration=b*1e3*t/Math.SQRT2,_}return o.rho=function(s){var l=Math.max(.001,+s),c=l*l,d=c*c;return e(l,c,d)},o})(Math.SQRT2,2,4);var xo=0,qs=0,Cs=0,Mw=1e3,Bc,$s,Hc=0,ua=0,df=0,tl=typeof performance=="object"&&performance.now?performance:Date,Ow=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Im(){return ua||(Ow(Fj),ua=tl.now()+df)}function Fj(){ua=0}function Pc(){this._call=this._time=this._next=null}Pc.prototype=Rw.prototype={constructor:Pc,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Im():+n)+(t==null?0:+t),!this._next&&$s!==this&&($s?$s._next=this:Bc=this,$s=this),this._call=e,this._time=n,Wp()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wp())}};function Rw(e,t,n){var i=new Pc;return i.restart(e,t,n),i}function qj(){Im(),++xo;for(var e=Bc,t;e;)(t=ua-e._time)>=0&&e._call.call(void 0,t),e=e._next;--xo}function R1(){ua=(Hc=tl.now())+df,xo=qs=0;try{qj()}finally{xo=0,Vj(),ua=0}}function $j(){var e=tl.now(),t=e-Hc;t>Mw&&(df-=t,Hc=e)}function Vj(){for(var e,t=Bc,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Bc=n);$s=e,Wp(i)}function Wp(e){if(!xo){qs&&(qs=clearTimeout(qs));var t=e-ua;t>24?(e<1/0&&(qs=setTimeout(R1,e-tl.now()-df)),Cs&&(Cs=clearInterval(Cs))):(Cs||(Hc=tl.now(),Cs=setInterval($j,Mw)),xo=1,Ow(R1))}}function I1(e,t,n){var i=new Pc;return t=t==null?0:+t,i.restart(o=>{i.stop(),e(o+t)},t,n),i}var Yj=cf("start","end","cancel","interrupt"),Gj=[],Iw=0,L1=1,Qp=2,Ec=3,U1=4,Jp=5,Cc=6;function hf(e,t,n,i,o,s){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Xj(e,n,{name:t,index:i,group:o,on:Yj,tween:Gj,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Iw})}function Lm(e,t){var n=tr(e,t);if(n.state>Iw)throw new Error("too late; already scheduled");return n}function dr(e,t){var n=tr(e,t);if(n.state>Ec)throw new Error("too late; already running");return n}function tr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Xj(e,t,n){var i=e.__transition,o;i[t]=n,n.timer=Rw(s,0,n.time);function s(h){n.state=L1,n.timer.restart(l,n.delay,n.time),n.delay<=h&&l(h-n.delay)}function l(h){var m,p,g,y;if(n.state!==L1)return d();for(m in i)if(y=i[m],y.name===n.name){if(y.state===Ec)return I1(l);y.state===U1?(y.state=Cc,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete i[m]):+m<t&&(y.state=Cc,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete i[m])}if(I1(function(){n.state===Ec&&(n.state=U1,n.timer.restart(c,n.delay,n.time),c(h))}),n.state=Qp,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Qp){for(n.state=Ec,o=new Array(g=n.tween.length),m=0,p=-1;m<g;++m)(y=n.tween[m].value.call(e,e.__data__,n.index,n.group))&&(o[++p]=y);o.length=p+1}}function c(h){for(var m=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(d),n.state=Jp,1),p=-1,g=o.length;++p<g;)o[p].call(e,m);n.state===Jp&&(n.on.call("end",e,e.__data__,n.index,n.group),d())}function d(){n.state=Cc,n.timer.stop(),delete i[t];for(var h in i)return;delete e.__transition}}function jc(e,t){var n=e.__transition,i,o,s=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((i=n[l]).name!==t){s=!1;continue}o=i.state>Qp&&i.state<Jp,i.state=Cc,i.timer.stop(),i.on.call(o?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[l]}s&&delete e.__transition}}function Zj(e){return this.each(function(){jc(this,e)})}function Kj(e,t){var n,i;return function(){var o=dr(this,e),s=o.tween;if(s!==n){i=n=s;for(var l=0,c=i.length;l<c;++l)if(i[l].name===t){i=i.slice(),i.splice(l,1);break}}o.tween=i}}function Wj(e,t,n){var i,o;if(typeof n!="function")throw new Error;return function(){var s=dr(this,e),l=s.tween;if(l!==i){o=(i=l).slice();for(var c={name:t,value:n},d=0,h=o.length;d<h;++d)if(o[d].name===t){o[d]=c;break}d===h&&o.push(c)}s.tween=o}}function Qj(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=tr(this.node(),n).tween,o=0,s=i.length,l;o<s;++o)if((l=i[o]).name===e)return l.value;return null}return this.each((t==null?Kj:Wj)(n,e,t))}function Um(e,t,n){var i=e._id;return e.each(function(){var o=dr(this,i);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return tr(o,i).value[t]}}function Lw(e,t){var n;return(typeof t=="number"?lr:t instanceof la?Uc:(n=la(t))?(t=n,Uc):Tw)(e,t)}function Jj(e){return function(){this.removeAttribute(e)}}function eN(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tN(e,t,n){var i,o=n+"",s;return function(){var l=this.getAttribute(e);return l===o?null:l===i?s:s=t(i=l,n)}}function nN(e,t,n){var i,o=n+"",s;return function(){var l=this.getAttributeNS(e.space,e.local);return l===o?null:l===i?s:s=t(i=l,n)}}function rN(e,t,n){var i,o,s;return function(){var l,c=n(this),d;return c==null?void this.removeAttribute(e):(l=this.getAttribute(e),d=c+"",l===d?null:l===i&&d===o?s:(o=d,s=t(i=l,c)))}}function iN(e,t,n){var i,o,s;return function(){var l,c=n(this),d;return c==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),d=c+"",l===d?null:l===i&&d===o?s:(o=d,s=t(i=l,c)))}}function aN(e,t){var n=ff(e),i=n==="transform"?Uj:Lw;return this.attrTween(e,typeof t=="function"?(n.local?iN:rN)(n,i,Um(this,"attr."+e,t)):t==null?(n.local?eN:Jj)(n):(n.local?nN:tN)(n,i,t))}function oN(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function sN(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function lN(e,t){var n,i;function o(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&sN(e,s)),n}return o._value=t,o}function uN(e,t){var n,i;function o(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&oN(e,s)),n}return o._value=t,o}function cN(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=ff(e);return this.tween(n,(i.local?lN:uN)(i,t))}function fN(e,t){return function(){Lm(this,e).delay=+t.apply(this,arguments)}}function dN(e,t){return t=+t,function(){Lm(this,e).delay=t}}function hN(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fN:dN)(t,e)):tr(this.node(),t).delay}function pN(e,t){return function(){dr(this,e).duration=+t.apply(this,arguments)}}function mN(e,t){return t=+t,function(){dr(this,e).duration=t}}function gN(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?pN:mN)(t,e)):tr(this.node(),t).duration}function yN(e,t){if(typeof t!="function")throw new Error;return function(){dr(this,e).ease=t}}function xN(e){var t=this._id;return arguments.length?this.each(yN(t,e)):tr(this.node(),t).ease}function vN(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;dr(this,e).ease=n}}function bN(e){if(typeof e!="function")throw new Error;return this.each(vN(this._id,e))}function wN(e){typeof e!="function"&&(e=pw(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var s=t[o],l=s.length,c=i[o]=[],d,h=0;h<l;++h)(d=s[h])&&e.call(d,d.__data__,h,s)&&c.push(d);return new Vr(i,this._parents,this._name,this._id)}function SN(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,o=n.length,s=Math.min(i,o),l=new Array(i),c=0;c<s;++c)for(var d=t[c],h=n[c],m=d.length,p=l[c]=new Array(m),g,y=0;y<m;++y)(g=d[y]||h[y])&&(p[y]=g);for(;c<i;++c)l[c]=t[c];return new Vr(l,this._parents,this._name,this._id)}function _N(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function kN(e,t,n){var i,o,s=_N(t)?Lm:dr;return function(){var l=s(this,e),c=l.on;c!==i&&(o=(i=c).copy()).on(t,n),l.on=o}}function EN(e,t){var n=this._id;return arguments.length<2?tr(this.node(),n).on.on(e):this.each(kN(n,e,t))}function CN(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function jN(){return this.on("end.remove",CN(this._id))}function NN(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zm(e));for(var i=this._groups,o=i.length,s=new Array(o),l=0;l<o;++l)for(var c=i[l],d=c.length,h=s[l]=new Array(d),m,p,g=0;g<d;++g)(m=c[g])&&(p=e.call(m,m.__data__,g,c))&&("__data__"in m&&(p.__data__=m.__data__),h[g]=p,hf(h[g],t,n,g,h,tr(m,n)));return new Vr(s,this._parents,t,n)}function AN(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hw(e));for(var i=this._groups,o=i.length,s=[],l=[],c=0;c<o;++c)for(var d=i[c],h=d.length,m,p=0;p<h;++p)if(m=d[p]){for(var g=e.call(m,m.__data__,p,d),y,w=tr(m,n),S=0,_=g.length;S<_;++S)(y=g[S])&&hf(y,t,n,S,g,w);s.push(g),l.push(m)}return new Vr(s,l,t,n)}var TN=pl.prototype.constructor;function DN(){return new TN(this._groups,this._parents)}function zN(e,t){var n,i,o;return function(){var s=yo(this,e),l=(this.style.removeProperty(e),yo(this,e));return s===l?null:s===n&&l===i?o:o=t(n=s,i=l)}}function Uw(e){return function(){this.style.removeProperty(e)}}function MN(e,t,n){var i,o=n+"",s;return function(){var l=yo(this,e);return l===o?null:l===i?s:s=t(i=l,n)}}function ON(e,t,n){var i,o,s;return function(){var l=yo(this,e),c=n(this),d=c+"";return c==null&&(d=c=(this.style.removeProperty(e),yo(this,e))),l===d?null:l===i&&d===o?s:(o=d,s=t(i=l,c))}}function RN(e,t){var n,i,o,s="style."+t,l="end."+s,c;return function(){var d=dr(this,e),h=d.on,m=d.value[s]==null?c||(c=Uw(t)):void 0;(h!==n||o!==m)&&(i=(n=h).copy()).on(l,o=m),d.on=i}}function IN(e,t,n){var i=(e+="")=="transform"?Lj:Lw;return t==null?this.styleTween(e,zN(e,i)).on("end.style."+e,Uw(e)):typeof t=="function"?this.styleTween(e,ON(e,i,Um(this,"style."+e,t))).each(RN(this._id,e)):this.styleTween(e,MN(e,i,t),n).on("end.style."+e,null)}function LN(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function UN(e,t,n){var i,o;function s(){var l=t.apply(this,arguments);return l!==o&&(i=(o=l)&&LN(e,l,n)),i}return s._value=t,s}function BN(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,UN(e,t,n??""))}function HN(e){return function(){this.textContent=e}}function PN(e){return function(){var t=e(this);this.textContent=t??""}}function FN(e){return this.tween("text",typeof e=="function"?PN(Um(this,"text",e)):HN(e==null?"":e+""))}function qN(e){return function(t){this.textContent=e.call(this,t)}}function $N(e){var t,n;function i(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&qN(o)),t}return i._value=e,i}function VN(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,$N(e))}function YN(){for(var e=this._name,t=this._id,n=Bw(),i=this._groups,o=i.length,s=0;s<o;++s)for(var l=i[s],c=l.length,d,h=0;h<c;++h)if(d=l[h]){var m=tr(d,t);hf(d,e,n,h,l,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new Vr(i,this._parents,e,n)}function GN(){var e,t,n=this,i=n._id,o=n.size();return new Promise(function(s,l){var c={value:l},d={value:function(){--o===0&&s()}};n.each(function(){var h=dr(this,i),m=h.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(c),t._.interrupt.push(c),t._.end.push(d)),h.on=t}),o===0&&s()})}var XN=0;function Vr(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Bw(){return++XN}var Rr=pl.prototype;Vr.prototype={constructor:Vr,select:NN,selectAll:AN,selectChild:Rr.selectChild,selectChildren:Rr.selectChildren,filter:wN,merge:SN,selection:DN,transition:YN,call:Rr.call,nodes:Rr.nodes,node:Rr.node,size:Rr.size,empty:Rr.empty,each:Rr.each,on:EN,attr:aN,attrTween:cN,style:IN,styleTween:BN,text:FN,textTween:VN,remove:jN,tween:Qj,delay:hN,duration:gN,ease:xN,easeVarying:bN,end:GN,[Symbol.iterator]:Rr[Symbol.iterator]};function ZN(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var KN={time:null,delay:0,duration:250,ease:ZN};function WN(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function QN(e){var t,n;e instanceof Vr?(t=e._id,e=e._name):(t=Bw(),(n=KN).time=Im(),e=e==null?null:e+"");for(var i=this._groups,o=i.length,s=0;s<o;++s)for(var l=i[s],c=l.length,d,h=0;h<c;++h)(d=l[h])&&hf(d,e,t,h,l,n||WN(d,t));return new Vr(i,this._parents,e,t)}pl.prototype.interrupt=Zj;pl.prototype.transition=QN;const rc=e=>()=>e;function JN(e,{sourceEvent:t,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function qr(e,t,n){this.k=e,this.x=t,this.y=n}qr.prototype={constructor:qr,scale:function(e){return e===1?this:new qr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new qr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var pf=new qr(1,0,0);Hw.prototype=qr.prototype;function Hw(e){for(;!e.__zoom;)if(!(e=e.parentNode))return pf;return e.__zoom}function op(e){e.stopImmediatePropagation()}function js(e){e.preventDefault(),e.stopImmediatePropagation()}function e4(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function t4(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function B1(){return this.__zoom||pf}function n4(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function r4(){return navigator.maxTouchPoints||"ontouchstart"in this}function i4(e,t,n){var i=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),l>s?(s+l)/2:Math.min(0,s)||Math.max(0,l))}function Pw(){var e=e4,t=t4,n=i4,i=n4,o=r4,s=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,d=kc,h=cf("start","zoom","end"),m,p,g,y=500,w=150,S=0,_=10;function b(N){N.property("__zoom",B1).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",$).filter(o).on("touchstart.zoom",Z).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(N,H,U,V){var X=N.selection?N.selection():N;X.property("__zoom",B1),N!==X?A(N,H,U,V):X.interrupt().each(function(){T(this,arguments).event(V).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},b.scaleBy=function(N,H,U,V){b.scaleTo(N,function(){var X=this.__zoom.k,Y=typeof H=="function"?H.apply(this,arguments):H;return X*Y},U,V)},b.scaleTo=function(N,H,U,V){b.transform(N,function(){var X=t.apply(this,arguments),Y=this.__zoom,B=U==null?j(X):typeof U=="function"?U.apply(this,arguments):U,z=Y.invert(B),I=typeof H=="function"?H.apply(this,arguments):H;return n(E(k(Y,I),B,z),X,l)},U,V)},b.translateBy=function(N,H,U,V){b.transform(N,function(){return n(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof U=="function"?U.apply(this,arguments):U),t.apply(this,arguments),l)},null,V)},b.translateTo=function(N,H,U,V,X){b.transform(N,function(){var Y=t.apply(this,arguments),B=this.__zoom,z=V==null?j(Y):typeof V=="function"?V.apply(this,arguments):V;return n(pf.translate(z[0],z[1]).scale(B.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof U=="function"?-U.apply(this,arguments):-U),Y,l)},V,X)};function k(N,H){return H=Math.max(s[0],Math.min(s[1],H)),H===N.k?N:new qr(H,N.x,N.y)}function E(N,H,U){var V=H[0]-U[0]*N.k,X=H[1]-U[1]*N.k;return V===N.x&&X===N.y?N:new qr(N.k,V,X)}function j(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function A(N,H,U,V){N.on("start.zoom",function(){T(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(V).end()}).tween("zoom",function(){var X=this,Y=arguments,B=T(X,Y).event(V),z=t.apply(X,Y),I=U==null?j(z):typeof U=="function"?U.apply(X,Y):U,O=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),Q=X.__zoom,ee=typeof H=="function"?H.apply(X,Y):H,ue=d(Q.invert(I).concat(O/Q.k),ee.invert(I).concat(O/ee.k));return function(ye){if(ye===1)ye=ee;else{var de=ue(ye),ve=O/de[2];ye=new qr(ve,I[0]-de[0]*ve,I[1]-de[1]*ve)}B.zoom(null,ye)}})}function T(N,H,U){return!U&&N.__zooming||new M(N,H)}function M(N,H){this.that=N,this.args=H,this.active=0,this.sourceEvent=null,this.extent=t.apply(N,H),this.taps=0}M.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,H){return this.mouse&&N!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var H=Cn(this.that).datum();h.call(N,this.that,new JN(N,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:h}),H)}};function P(N,...H){if(!e.apply(this,arguments))return;var U=T(this,H).event(N),V=this.__zoom,X=Math.max(s[0],Math.min(s[1],V.k*Math.pow(2,i.apply(this,arguments)))),Y=Zn(N);if(U.wheel)(U.mouse[0][0]!==Y[0]||U.mouse[0][1]!==Y[1])&&(U.mouse[1]=V.invert(U.mouse[0]=Y)),clearTimeout(U.wheel);else{if(V.k===X)return;U.mouse=[Y,V.invert(Y)],jc(this),U.start()}js(N),U.wheel=setTimeout(B,w),U.zoom("mouse",n(E(k(V,X),U.mouse[0],U.mouse[1]),U.extent,l));function B(){U.wheel=null,U.end()}}function F(N,...H){if(g||!e.apply(this,arguments))return;var U=N.currentTarget,V=T(this,H,!0).event(N),X=Cn(N.view).on("mousemove.zoom",I,!0).on("mouseup.zoom",O,!0),Y=Zn(N,U),B=N.clientX,z=N.clientY;kw(N.view),op(N),V.mouse=[Y,this.__zoom.invert(Y)],jc(this),V.start();function I(Q){if(js(Q),!V.moved){var ee=Q.clientX-B,ue=Q.clientY-z;V.moved=ee*ee+ue*ue>S}V.event(Q).zoom("mouse",n(E(V.that.__zoom,V.mouse[0]=Zn(Q,U),V.mouse[1]),V.extent,l))}function O(Q){X.on("mousemove.zoom mouseup.zoom",null),Ew(Q.view,V.moved),js(Q),V.event(Q).end()}}function $(N,...H){if(e.apply(this,arguments)){var U=this.__zoom,V=Zn(N.changedTouches?N.changedTouches[0]:N,this),X=U.invert(V),Y=U.k*(N.shiftKey?.5:2),B=n(E(k(U,Y),V,X),t.apply(this,H),l);js(N),c>0?Cn(this).transition().duration(c).call(A,B,V,N):Cn(this).call(b.transform,B,V,N)}}function Z(N,...H){if(e.apply(this,arguments)){var U=N.touches,V=U.length,X=T(this,H,N.changedTouches.length===V).event(N),Y,B,z,I;for(op(N),B=0;B<V;++B)z=U[B],I=Zn(z,this),I=[I,this.__zoom.invert(I),z.identifier],X.touch0?!X.touch1&&X.touch0[2]!==I[2]&&(X.touch1=I,X.taps=0):(X.touch0=I,Y=!0,X.taps=1+!!m);m&&(m=clearTimeout(m)),Y&&(X.taps<2&&(p=I[0],m=setTimeout(function(){m=null},y)),jc(this),X.start())}}function D(N,...H){if(this.__zooming){var U=T(this,H).event(N),V=N.changedTouches,X=V.length,Y,B,z,I;for(js(N),Y=0;Y<X;++Y)B=V[Y],z=Zn(B,this),U.touch0&&U.touch0[2]===B.identifier?U.touch0[0]=z:U.touch1&&U.touch1[2]===B.identifier&&(U.touch1[0]=z);if(B=U.that.__zoom,U.touch1){var O=U.touch0[0],Q=U.touch0[1],ee=U.touch1[0],ue=U.touch1[1],ye=(ye=ee[0]-O[0])*ye+(ye=ee[1]-O[1])*ye,de=(de=ue[0]-Q[0])*de+(de=ue[1]-Q[1])*de;B=k(B,Math.sqrt(ye/de)),z=[(O[0]+ee[0])/2,(O[1]+ee[1])/2],I=[(Q[0]+ue[0])/2,(Q[1]+ue[1])/2]}else if(U.touch0)z=U.touch0[0],I=U.touch0[1];else return;U.zoom("touch",n(E(B,z,I),U.extent,l))}}function q(N,...H){if(this.__zooming){var U=T(this,H).event(N),V=N.changedTouches,X=V.length,Y,B;for(op(N),g&&clearTimeout(g),g=setTimeout(function(){g=null},y),Y=0;Y<X;++Y)B=V[Y],U.touch0&&U.touch0[2]===B.identifier?delete U.touch0:U.touch1&&U.touch1[2]===B.identifier&&delete U.touch1;if(U.touch1&&!U.touch0&&(U.touch0=U.touch1,delete U.touch1),U.touch0)U.touch0[1]=this.__zoom.invert(U.touch0[0]);else if(U.end(),U.taps===2&&(B=Zn(B,this),Math.hypot(p[0]-B[0],p[1]-B[1])<_)){var z=Cn(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return b.wheelDelta=function(N){return arguments.length?(i=typeof N=="function"?N:rc(+N),b):i},b.filter=function(N){return arguments.length?(e=typeof N=="function"?N:rc(!!N),b):e},b.touchable=function(N){return arguments.length?(o=typeof N=="function"?N:rc(!!N),b):o},b.extent=function(N){return arguments.length?(t=typeof N=="function"?N:rc([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),b):t},b.scaleExtent=function(N){return arguments.length?(s[0]=+N[0],s[1]=+N[1],b):[s[0],s[1]]},b.translateExtent=function(N){return arguments.length?(l[0][0]=+N[0][0],l[1][0]=+N[1][0],l[0][1]=+N[0][1],l[1][1]=+N[1][1],b):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},b.constrain=function(N){return arguments.length?(n=N,b):n},b.duration=function(N){return arguments.length?(c=+N,b):c},b.interpolate=function(N){return arguments.length?(d=N,b):d},b.on=function(){var N=h.on.apply(h,arguments);return N===h?b:N},b.clickDistance=function(N){return arguments.length?(S=(N=+N)*N,b):Math.sqrt(S)},b.tapDistance=function(N){return arguments.length?(_=+N,b):_},b}const cr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},nl=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Fw=["Enter"," ","Escape"],qw={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var vo;(function(e){e.Strict="strict",e.Loose="loose"})(vo||(vo={}));var sa;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(sa||(sa={}));var rl;(function(e){e.Partial="partial",e.Full="full"})(rl||(rl={}));const $w={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Ni;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ni||(Ni={}));var Fc;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Fc||(Fc={}));var ze;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ze||(ze={}));const H1={[ze.Left]:ze.Right,[ze.Right]:ze.Left,[ze.Top]:ze.Bottom,[ze.Bottom]:ze.Top};function Vw(e){return e===null?null:e?"valid":"invalid"}const Yw=e=>"id"in e&&"source"in e&&"target"in e,a4=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Bm=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),gl=(e,t=[0,0])=>{const{width:n,height:i}=Gr(e),o=e.origin??t,s=n*o[0],l=i*o[1];return{x:e.position.x-s,y:e.position.y-l}},o4=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,o)=>{const s=typeof o=="string";let l=!t.nodeLookup&&!s?o:void 0;t.nodeLookup&&(l=s?t.nodeLookup.get(o):Bm(o)?o:t.nodeLookup.get(o.id));const c=l?qc(l,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return mf(i,c)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return gf(n)},yl=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return e.forEach(o=>{(t.filter===void 0||t.filter(o))&&(n=mf(n,qc(o)),i=!0)}),i?gf(n):{x:0,y:0,width:0,height:0}},Hm=(e,t,[n,i,o]=[0,0,1],s=!1,l=!1)=>{const c={...vl(t,[n,i,o]),width:t.width/o,height:t.height/o},d=[];for(const h of e.values()){const{measured:m,selectable:p=!0,hidden:g=!1}=h;if(l&&!p||g)continue;const y=m.width??h.width??h.initialWidth??null,w=m.height??h.height??h.initialHeight??null,S=il(c,wo(h)),_=(y??0)*(w??0),b=s&&S>0;(!h.internals.handleBounds||b||S>=_||h.dragging)&&d.push(h)}return d},s4=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function l4(e,t){const n=new Map,i=t?.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(t?.includeHiddenNodes||!o.hidden)&&(!i||i.has(o.id))&&n.set(o.id,o)}),n}async function u4({nodes:e,width:t,height:n,panZoom:i,minZoom:o,maxZoom:s},l){if(e.size===0)return Promise.resolve(!0);const c=l4(e,l),d=yl(c),h=Pm(d,t,n,l?.minZoom??o,l?.maxZoom??s,l?.padding??.1);return await i.setViewport(h,{duration:l?.duration,ease:l?.ease,interpolate:l?.interpolate}),Promise.resolve(!0)}function Gw({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:o,onError:s}){const l=n.get(e),c=l.parentId?n.get(l.parentId):void 0,{x:d,y:h}=c?c.internals.positionAbsolute:{x:0,y:0},m=l.origin??i;let p=l.extent||o;if(l.extent==="parent"&&!l.expandParent)if(!c)s?.("005",cr.error005());else{const y=c.measured.width,w=c.measured.height;y&&w&&(p=[[d,h],[d+y,h+w]])}else c&&So(l.extent)&&(p=[[l.extent[0][0]+d,l.extent[0][1]+h],[l.extent[1][0]+d,l.extent[1][1]+h]]);const g=So(p)?ca(t,p,l.measured):t;return(l.measured.width===void 0||l.measured.height===void 0)&&s?.("015",cr.error015()),{position:{x:g.x-d+(l.measured.width??0)*m[0],y:g.y-h+(l.measured.height??0)*m[1]},positionAbsolute:g}}async function c4({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:o}){const s=new Set(e.map(g=>g.id)),l=[];for(const g of n){if(g.deletable===!1)continue;const y=s.has(g.id),w=!y&&g.parentId&&l.find(S=>S.id===g.parentId);(y||w)&&l.push(g)}const c=new Set(t.map(g=>g.id)),d=i.filter(g=>g.deletable!==!1),m=s4(l,d);for(const g of d)c.has(g.id)&&!m.find(w=>w.id===g.id)&&m.push(g);if(!o)return{edges:m,nodes:l};const p=await o({nodes:l,edges:m});return typeof p=="boolean"?p?{edges:m,nodes:l}:{edges:[],nodes:[]}:p}const bo=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ca=(e={x:0,y:0},t,n)=>({x:bo(e.x,t[0][0],t[1][0]-(n?.width??0)),y:bo(e.y,t[0][1],t[1][1]-(n?.height??0))});function Xw(e,t,n){const{width:i,height:o}=Gr(n),{x:s,y:l}=n.internals.positionAbsolute;return ca(e,[[s,l],[s+i,l+o]],t)}const P1=(e,t,n)=>e<t?bo(Math.abs(e-t),1,t)/t:e>n?-bo(Math.abs(e-n),1,t)/t:0,Zw=(e,t,n=15,i=40)=>{const o=P1(e.x,i,t.width-i)*n,s=P1(e.y,i,t.height-i)*n;return[o,s]},mf=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),em=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),gf=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),wo=(e,t=[0,0])=>{const{x:n,y:i}=Bm(e)?e.internals.positionAbsolute:gl(e,t);return{x:n,y:i,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},qc=(e,t=[0,0])=>{const{x:n,y:i}=Bm(e)?e.internals.positionAbsolute:gl(e,t);return{x:n,y:i,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:i+(e.measured?.height??e.height??e.initialHeight??0)}},Kw=(e,t)=>gf(mf(em(e),em(t))),il=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},F1=e=>Qn(e.width)&&Qn(e.height)&&Qn(e.x)&&Qn(e.y),Qn=e=>!isNaN(e)&&isFinite(e),f4=(e,t)=>{},xl=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),vl=({x:e,y:t},[n,i,o],s=!1,l=[1,1])=>{const c={x:(e-n)/o,y:(t-i)/o};return s?xl(c,l):c},$c=({x:e,y:t},[n,i,o])=>({x:e*o+n,y:t*o+i});function eo(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function d4(e,t,n){if(typeof e=="string"||typeof e=="number"){const i=eo(e,n),o=eo(e,t);return{top:i,right:o,bottom:i,left:o,x:o*2,y:i*2}}if(typeof e=="object"){const i=eo(e.top??e.y??0,n),o=eo(e.bottom??e.y??0,n),s=eo(e.left??e.x??0,t),l=eo(e.right??e.x??0,t);return{top:i,right:l,bottom:o,left:s,x:s+l,y:i+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function h4(e,t,n,i,o,s){const{x:l,y:c}=$c(e,[t,n,i]),{x:d,y:h}=$c({x:e.x+e.width,y:e.y+e.height},[t,n,i]),m=o-d,p=s-h;return{left:Math.floor(l),top:Math.floor(c),right:Math.floor(m),bottom:Math.floor(p)}}const Pm=(e,t,n,i,o,s)=>{const l=d4(s,t,n),c=(t-l.x)/e.width,d=(n-l.y)/e.height,h=Math.min(c,d),m=bo(h,i,o),p=e.x+e.width/2,g=e.y+e.height/2,y=t/2-p*m,w=n/2-g*m,S=h4(e,y,w,m,t,n),_={left:Math.min(S.left-l.left,0),top:Math.min(S.top-l.top,0),right:Math.min(S.right-l.right,0),bottom:Math.min(S.bottom-l.bottom,0)};return{x:y-_.left+_.right,y:w-_.top+_.bottom,zoom:m}},al=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function So(e){return e!=null&&e!=="parent"}function Gr(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function Ww(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function Qw(e,t={width:0,height:0},n,i,o){const s={...e},l=i.get(n);if(l){const c=l.origin||o;s.x+=l.internals.positionAbsolute.x-(t.width??0)*c[0],s.y+=l.internals.positionAbsolute.y-(t.height??0)*c[1]}return s}function q1(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function p4(){let e,t;return{promise:new Promise((i,o)=>{e=i,t=o}),resolve:e,reject:t}}function m4(e){return{...qw,...e||{}}}function Gs(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:o}){const{x:s,y:l}=Jn(e),c=vl({x:s-(o?.left??0),y:l-(o?.top??0)},i),{x:d,y:h}=n?xl(c,t):c;return{xSnapped:d,ySnapped:h,...c}}const Fm=e=>({width:e.offsetWidth,height:e.offsetHeight}),Jw=e=>e?.getRootNode?.()||window?.document,g4=["INPUT","SELECT","TEXTAREA"];function e2(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:g4.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const t2=e=>"clientX"in e,Jn=(e,t)=>{const n=t2(e),i=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:i-(t?.left??0),y:o-(t?.top??0)}},$1=(e,t,n,i,o)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(l=>{const c=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),type:e,nodeId:o,position:l.getAttribute("data-handlepos"),x:(c.left-n.left)/i,y:(c.top-n.top)/i,...Fm(l)}})};function n2({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:o,sourceControlY:s,targetControlX:l,targetControlY:c}){const d=e*.125+o*.375+l*.375+n*.125,h=t*.125+s*.375+c*.375+i*.125,m=Math.abs(d-e),p=Math.abs(h-t);return[d,h,m,p]}function ic(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function V1({pos:e,x1:t,y1:n,x2:i,y2:o,c:s}){switch(e){case ze.Left:return[t-ic(t-i,s),n];case ze.Right:return[t+ic(i-t,s),n];case ze.Top:return[t,n-ic(n-o,s)];case ze.Bottom:return[t,n+ic(o-n,s)]}}function r2({sourceX:e,sourceY:t,sourcePosition:n=ze.Bottom,targetX:i,targetY:o,targetPosition:s=ze.Top,curvature:l=.25}){const[c,d]=V1({pos:n,x1:e,y1:t,x2:i,y2:o,c:l}),[h,m]=V1({pos:s,x1:i,y1:o,x2:e,y2:t,c:l}),[p,g,y,w]=n2({sourceX:e,sourceY:t,targetX:i,targetY:o,sourceControlX:c,sourceControlY:d,targetControlX:h,targetControlY:m});return[`M${e},${t} C${c},${d} ${h},${m} ${i},${o}`,p,g,y,w]}function i2({sourceX:e,sourceY:t,targetX:n,targetY:i}){const o=Math.abs(n-e)/2,s=n<e?n+o:n-o,l=Math.abs(i-t)/2,c=i<t?i+l:i-l;return[s,c,o,l]}function y4({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:o=!1,zIndexMode:s="basic"}){if(s==="manual")return i;const l=o&&n?i+1e3:i,c=Math.max(e.parentId||o&&e.selected?e.internals.z:0,t.parentId||o&&t.selected?t.internals.z:0);return l+c}function x4({sourceNode:e,targetNode:t,width:n,height:i,transform:o}){const s=mf(qc(e),qc(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const l={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:i/o[2]};return il(l,gf(s))>0}const v4=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,b4=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),a2=(e,t,n={})=>{if(!e.source||!e.target)return t;const i=n.getEdgeId||v4;let o;return Yw(e)?o={...e}:o={...e,id:i(e)},b4(o,t)?t:(o.sourceHandle===null&&delete o.sourceHandle,o.targetHandle===null&&delete o.targetHandle,t.concat(o))};function o2({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[o,s,l,c]=i2({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,o,s,l,c]}const Y1={[ze.Left]:{x:-1,y:0},[ze.Right]:{x:1,y:0},[ze.Top]:{x:0,y:-1},[ze.Bottom]:{x:0,y:1}},w4=({source:e,sourcePosition:t=ze.Bottom,target:n})=>t===ze.Left||t===ze.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},G1=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function S4({source:e,sourcePosition:t=ze.Bottom,target:n,targetPosition:i=ze.Top,center:o,offset:s,stepPosition:l}){const c=Y1[t],d=Y1[i],h={x:e.x+c.x*s,y:e.y+c.y*s},m={x:n.x+d.x*s,y:n.y+d.y*s},p=w4({source:h,sourcePosition:t,target:m}),g=p.x!==0?"x":"y",y=p[g];let w=[],S,_;const b={x:0,y:0},k={x:0,y:0},[,,E,j]=i2({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[g]*d[g]===-1){g==="x"?(S=o.x??h.x+(m.x-h.x)*l,_=o.y??(h.y+m.y)/2):(S=o.x??(h.x+m.x)/2,_=o.y??h.y+(m.y-h.y)*l);const T=[{x:S,y:h.y},{x:S,y:m.y}],M=[{x:h.x,y:_},{x:m.x,y:_}];c[g]===y?w=g==="x"?T:M:w=g==="x"?M:T}else{const T=[{x:h.x,y:m.y}],M=[{x:m.x,y:h.y}];if(g==="x"?w=c.x===y?M:T:w=c.y===y?T:M,t===i){const D=Math.abs(e[g]-n[g]);if(D<=s){const q=Math.min(s-1,s-D);c[g]===y?b[g]=(h[g]>e[g]?-1:1)*q:k[g]=(m[g]>n[g]?-1:1)*q}}if(t!==i){const D=g==="x"?"y":"x",q=c[g]===d[D],N=h[D]>m[D],H=h[D]<m[D];(c[g]===1&&(!q&&N||q&&H)||c[g]!==1&&(!q&&H||q&&N))&&(w=g==="x"?T:M)}const P={x:h.x+b.x,y:h.y+b.y},F={x:m.x+k.x,y:m.y+k.y},$=Math.max(Math.abs(P.x-w[0].x),Math.abs(F.x-w[0].x)),Z=Math.max(Math.abs(P.y-w[0].y),Math.abs(F.y-w[0].y));$>=Z?(S=(P.x+F.x)/2,_=w[0].y):(S=w[0].x,_=(P.y+F.y)/2)}return[[e,{x:h.x+b.x,y:h.y+b.y},...w,{x:m.x+k.x,y:m.y+k.y},n],S,_,E,j]}function _4(e,t,n,i){const o=Math.min(G1(e,t)/2,G1(t,n)/2,i),{x:s,y:l}=t;if(e.x===s&&s===n.x||e.y===l&&l===n.y)return`L${s} ${l}`;if(e.y===l){const h=e.x<n.x?-1:1,m=e.y<n.y?1:-1;return`L ${s+o*h},${l}Q ${s},${l} ${s},${l+o*m}`}const c=e.x<n.x?1:-1,d=e.y<n.y?-1:1;return`L ${s},${l+o*d}Q ${s},${l} ${s+o*c},${l}`}function tm({sourceX:e,sourceY:t,sourcePosition:n=ze.Bottom,targetX:i,targetY:o,targetPosition:s=ze.Top,borderRadius:l=5,centerX:c,centerY:d,offset:h=20,stepPosition:m=.5}){const[p,g,y,w,S]=S4({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:o},targetPosition:s,center:{x:c,y:d},offset:h,stepPosition:m});return[p.reduce((b,k,E)=>{let j="";return E>0&&E<p.length-1?j=_4(p[E-1],k,p[E+1],l):j=`${E===0?"M":"L"}${k.x} ${k.y}`,b+=j,b},""),g,y,w,S]}function X1(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function k4(e){const{sourceNode:t,targetNode:n}=e;if(!X1(t)||!X1(n))return null;const i=t.internals.handleBounds||Z1(t.handles),o=n.internals.handleBounds||Z1(n.handles),s=K1(i?.source??[],e.sourceHandle),l=K1(e.connectionMode===vo.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!s||!l)return e.onError?.("008",cr.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const c=s?.position||ze.Bottom,d=l?.position||ze.Top,h=fa(t,s,c),m=fa(n,l,d);return{sourceX:h.x,sourceY:h.y,targetX:m.x,targetY:m.y,sourcePosition:c,targetPosition:d}}function Z1(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function fa(e,t,n=ze.Left,i=!1){const o=(t?.x??0)+e.internals.positionAbsolute.x,s=(t?.y??0)+e.internals.positionAbsolute.y,{width:l,height:c}=t??Gr(e);if(i)return{x:o+l/2,y:s+c/2};switch(t?.position??n){case ze.Top:return{x:o+l/2,y:s};case ze.Right:return{x:o+l,y:s+c/2};case ze.Bottom:return{x:o+l/2,y:s+c};case ze.Left:return{x:o,y:s+c/2}}}function K1(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function nm(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function E4(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:o}){const s=new Set;return e.reduce((l,c)=>([c.markerStart||i,c.markerEnd||o].forEach(d=>{if(d&&typeof d=="object"){const h=nm(d,t);s.has(h)||(l.push({id:h,color:d.color||n,...d}),s.add(h))}}),l),[]).sort((l,c)=>l.id.localeCompare(c.id))}const s2=1e3,C4=10,qm={nodeOrigin:[0,0],nodeExtent:nl,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},j4={...qm,checkEquality:!0};function $m(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function N4(e,t,n){const i=$m(qm,n);for(const o of e.values())if(o.parentId)Ym(o,e,t,i);else{const s=gl(o,i.nodeOrigin),l=So(o.extent)?o.extent:i.nodeExtent,c=ca(s,l,Gr(o));o.internals.positionAbsolute=c}}function A4(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const n=[],i=[];for(const o of e.handles){const s={id:o.id,width:o.width??1,height:o.height??1,nodeId:e.id,x:o.x,y:o.y,position:o.position,type:o.type};o.type==="source"?n.push(s):o.type==="target"&&i.push(s)}return{source:n,target:i}}function Vm(e){return e==="manual"}function rm(e,t,n,i={}){const o=$m(j4,i),s={i:0},l=new Map(t),c=o?.elevateNodesOnSelect&&!Vm(o.zIndexMode)?s2:0;let d=e.length>0;t.clear(),n.clear();for(const h of e){let m=l.get(h.id);if(o.checkEquality&&h===m?.internals.userNode)t.set(h.id,m);else{const p=gl(h,o.nodeOrigin),g=So(h.extent)?h.extent:o.nodeExtent,y=ca(p,g,Gr(h));m={...o.defaults,...h,measured:{width:h.measured?.width,height:h.measured?.height},internals:{positionAbsolute:y,handleBounds:A4(h,m),z:l2(h,c,o.zIndexMode),userNode:h}},t.set(h.id,m)}(m.measured===void 0||m.measured.width===void 0||m.measured.height===void 0)&&!m.hidden&&(d=!1),h.parentId&&Ym(m,t,n,i,s)}return d}function T4(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Ym(e,t,n,i,o){const{elevateNodesOnSelect:s,nodeOrigin:l,nodeExtent:c,zIndexMode:d}=$m(qm,i),h=e.parentId,m=t.get(h);if(!m){console.warn(`Parent node ${h} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}T4(e,n),o&&!m.parentId&&m.internals.rootParentIndex===void 0&&d==="auto"&&(m.internals.rootParentIndex=++o.i,m.internals.z=m.internals.z+o.i*C4),o&&m.internals.rootParentIndex!==void 0&&(o.i=m.internals.rootParentIndex);const p=s&&!Vm(d)?s2:0,{x:g,y,z:w}=D4(e,m,l,c,p,d),{positionAbsolute:S}=e.internals,_=g!==S.x||y!==S.y;(_||w!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:_?{x:g,y}:S,z:w}})}function l2(e,t,n){const i=Qn(e.zIndex)?e.zIndex:0;return Vm(n)?i:i+(e.selected?t:0)}function D4(e,t,n,i,o,s){const{x:l,y:c}=t.internals.positionAbsolute,d=Gr(e),h=gl(e,n),m=So(e.extent)?ca(h,e.extent,d):h;let p=ca({x:l+m.x,y:c+m.y},i,d);e.extent==="parent"&&(p=Xw(p,d,t));const g=l2(e,o,s),y=t.internals.z??0;return{x:p.x,y:p.y,z:y>=g?y+1:g}}function Gm(e,t,n,i=[0,0]){const o=[],s=new Map;for(const l of e){const c=t.get(l.parentId);if(!c)continue;const d=s.get(l.parentId)?.expandedRect??wo(c),h=Kw(d,l.rect);s.set(l.parentId,{expandedRect:h,parent:c})}return s.size>0&&s.forEach(({expandedRect:l,parent:c},d)=>{const h=c.internals.positionAbsolute,m=Gr(c),p=c.origin??i,g=l.x<h.x?Math.round(Math.abs(h.x-l.x)):0,y=l.y<h.y?Math.round(Math.abs(h.y-l.y)):0,w=Math.max(m.width,Math.round(l.width)),S=Math.max(m.height,Math.round(l.height)),_=(w-m.width)*p[0],b=(S-m.height)*p[1];(g>0||y>0||_||b)&&(o.push({id:d,type:"position",position:{x:c.position.x-g+_,y:c.position.y-y+b}}),n.get(d)?.forEach(k=>{e.some(E=>E.id===k.id)||o.push({id:k.id,type:"position",position:{x:k.position.x+g,y:k.position.y+y}})})),(m.width<l.width||m.height<l.height||g||y)&&o.push({id:d,type:"dimensions",setAttributes:!0,dimensions:{width:w+(g?p[0]*g-_:0),height:S+(y?p[1]*y-b:0)}})}),o}function z4(e,t,n,i,o,s,l){const c=i?.querySelector(".xyflow__viewport");let d=!1;if(!c)return{changes:[],updatedInternals:d};const h=[],m=window.getComputedStyle(c),{m22:p}=new window.DOMMatrixReadOnly(m.transform),g=[];for(const y of e.values()){const w=t.get(y.id);if(!w)continue;if(w.hidden){t.set(w.id,{...w,internals:{...w.internals,handleBounds:void 0}}),d=!0;continue}const S=Fm(y.nodeElement),_=w.measured.width!==S.width||w.measured.height!==S.height;if(!!(S.width&&S.height&&(_||!w.internals.handleBounds||y.force))){const k=y.nodeElement.getBoundingClientRect(),E=So(w.extent)?w.extent:s;let{positionAbsolute:j}=w.internals;w.parentId&&w.extent==="parent"?j=Xw(j,S,t.get(w.parentId)):E&&(j=ca(j,E,S));const A={...w,measured:S,internals:{...w.internals,positionAbsolute:j,handleBounds:{source:$1("source",y.nodeElement,k,p,w.id),target:$1("target",y.nodeElement,k,p,w.id)}}};t.set(w.id,A),w.parentId&&Ym(A,t,n,{nodeOrigin:o,zIndexMode:l}),d=!0,_&&(h.push({id:w.id,type:"dimensions",dimensions:S}),w.expandParent&&w.parentId&&g.push({id:w.id,parentId:w.parentId,rect:wo(A,o)}))}}if(g.length>0){const y=Gm(g,t,n,o);h.push(...y)}return{changes:h,updatedInternals:d}}async function M4({delta:e,panZoom:t,transform:n,translateExtent:i,width:o,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const l=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,s]],i),c=!!l&&(l.x!==n[0]||l.y!==n[1]||l.k!==n[2]);return Promise.resolve(c)}function W1(e,t,n,i,o,s){let l=o;const c=i.get(l)||new Map;i.set(l,c.set(n,t)),l=`${o}-${e}`;const d=i.get(l)||new Map;if(i.set(l,d.set(n,t)),s){l=`${o}-${e}-${s}`;const h=i.get(l)||new Map;i.set(l,h.set(n,t))}}function u2(e,t,n){e.clear(),t.clear();for(const i of n){const{source:o,target:s,sourceHandle:l=null,targetHandle:c=null}=i,d={edgeId:i.id,source:o,target:s,sourceHandle:l,targetHandle:c},h=`${o}-${l}--${s}-${c}`,m=`${s}-${c}--${o}-${l}`;W1("source",d,m,e,o,l),W1("target",d,h,e,s,c),t.set(i.id,i)}}function c2(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:c2(n,t):!1}function Q1(e,t,n){let i=e;do{if(i?.matches?.(t))return!0;if(i===n)return!1;i=i?.parentElement}while(i);return!1}function O4(e,t,n,i){const o=new Map;for(const[s,l]of e)if((l.selected||l.id===i)&&(!l.parentId||!c2(l,e))&&(l.draggable||t&&typeof l.draggable>"u")){const c=e.get(s);c&&o.set(s,{id:s,position:c.position||{x:0,y:0},distance:{x:n.x-c.internals.positionAbsolute.x,y:n.y-c.internals.positionAbsolute.y},extent:c.extent,parentId:c.parentId,origin:c.origin,expandParent:c.expandParent,internals:{positionAbsolute:c.internals.positionAbsolute||{x:0,y:0}},measured:{width:c.measured.width??0,height:c.measured.height??0}})}return o}function sp({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){const o=[];for(const[l,c]of t){const d=n.get(l)?.internals.userNode;d&&o.push({...d,position:c.position,dragging:i})}if(!e)return[o[0],o];const s=n.get(e)?.internals.userNode;return[s?{...s,position:t.get(e)?.position||s.position,dragging:i}:o[0],o]}function R4({dragItems:e,snapGrid:t,x:n,y:i}){const o=e.values().next().value;if(!o)return null;const s={x:n-o.distance.x,y:i-o.distance.y},l=xl(s,t);return{x:l.x-s.x,y:l.y-s.y}}function I4({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:o}){let s={x:null,y:null},l=0,c=new Map,d=!1,h={x:0,y:0},m=null,p=!1,g=null,y=!1,w=!1,S=null;function _({noDragClassName:k,handleSelector:E,domNode:j,isSelectable:A,nodeId:T,nodeClickDistance:M=0}){g=Cn(j);function P({x:D,y:q}){const{nodeLookup:N,nodeExtent:H,snapGrid:U,snapToGrid:V,nodeOrigin:X,onNodeDrag:Y,onSelectionDrag:B,onError:z,updateNodePositions:I}=t();s={x:D,y:q};let O=!1;const Q=c.size>1,ee=Q&&H?em(yl(c)):null,ue=Q&&V?R4({dragItems:c,snapGrid:U,x:D,y:q}):null;for(const[ye,de]of c){if(!N.has(ye))continue;let ve={x:D-de.distance.x,y:q-de.distance.y};V&&(ve=ue?{x:Math.round(ve.x+ue.x),y:Math.round(ve.y+ue.y)}:xl(ve,U));let Ae=null;if(Q&&H&&!de.extent&&ee){const{positionAbsolute:De}=de.internals,L=De.x-ee.x+H[0][0],te=De.x+de.measured.width-ee.x2+H[1][0],re=De.y-ee.y+H[0][1],W=De.y+de.measured.height-ee.y2+H[1][1];Ae=[[L,re],[te,W]]}const{position:je,positionAbsolute:Te}=Gw({nodeId:ye,nextPosition:ve,nodeLookup:N,nodeExtent:Ae||H,nodeOrigin:X,onError:z});O=O||de.position.x!==je.x||de.position.y!==je.y,de.position=je,de.internals.positionAbsolute=Te}if(w=w||O,!!O&&(I(c,!0),S&&(i||Y||!T&&B))){const[ye,de]=sp({nodeId:T,dragItems:c,nodeLookup:N});i?.(S,c,ye,de),Y?.(S,ye,de),T||B?.(S,de)}}async function F(){if(!m)return;const{transform:D,panBy:q,autoPanSpeed:N,autoPanOnNodeDrag:H}=t();if(!H){d=!1,cancelAnimationFrame(l);return}const[U,V]=Zw(h,m,N);(U!==0||V!==0)&&(s.x=(s.x??0)-U/D[2],s.y=(s.y??0)-V/D[2],await q({x:U,y:V})&&P(s)),l=requestAnimationFrame(F)}function $(D){const{nodeLookup:q,multiSelectionActive:N,nodesDraggable:H,transform:U,snapGrid:V,snapToGrid:X,selectNodesOnDrag:Y,onNodeDragStart:B,onSelectionDragStart:z,unselectNodesAndEdges:I}=t();p=!0,(!Y||!A)&&!N&&T&&(q.get(T)?.selected||I()),A&&Y&&T&&e?.(T);const O=Gs(D.sourceEvent,{transform:U,snapGrid:V,snapToGrid:X,containerBounds:m});if(s=O,c=O4(q,H,O,T),c.size>0&&(n||B||!T&&z)){const[Q,ee]=sp({nodeId:T,dragItems:c,nodeLookup:q});n?.(D.sourceEvent,c,Q,ee),B?.(D.sourceEvent,Q,ee),T||z?.(D.sourceEvent,ee)}}const Z=Cw().clickDistance(M).on("start",D=>{const{domNode:q,nodeDragThreshold:N,transform:H,snapGrid:U,snapToGrid:V}=t();m=q?.getBoundingClientRect()||null,y=!1,w=!1,S=D.sourceEvent,N===0&&$(D),s=Gs(D.sourceEvent,{transform:H,snapGrid:U,snapToGrid:V,containerBounds:m}),h=Jn(D.sourceEvent,m)}).on("drag",D=>{const{autoPanOnNodeDrag:q,transform:N,snapGrid:H,snapToGrid:U,nodeDragThreshold:V,nodeLookup:X}=t(),Y=Gs(D.sourceEvent,{transform:N,snapGrid:H,snapToGrid:U,containerBounds:m});if(S=D.sourceEvent,(D.sourceEvent.type==="touchmove"&&D.sourceEvent.touches.length>1||T&&!X.has(T))&&(y=!0),!y){if(!d&&q&&p&&(d=!0,F()),!p){const B=Jn(D.sourceEvent,m),z=B.x-h.x,I=B.y-h.y;Math.sqrt(z*z+I*I)>V&&$(D)}(s.x!==Y.xSnapped||s.y!==Y.ySnapped)&&c&&p&&(h=Jn(D.sourceEvent,m),P(Y))}}).on("end",D=>{if(!(!p||y)&&(d=!1,p=!1,cancelAnimationFrame(l),c.size>0)){const{nodeLookup:q,updateNodePositions:N,onNodeDragStop:H,onSelectionDragStop:U}=t();if(w&&(N(c,!1),w=!1),o||H||!T&&U){const[V,X]=sp({nodeId:T,dragItems:c,nodeLookup:q,dragging:!1});o?.(D.sourceEvent,c,V,X),H?.(D.sourceEvent,V,X),T||U?.(D.sourceEvent,X)}}}).filter(D=>{const q=D.target;return!D.button&&(!k||!Q1(q,`.${k}`,j))&&(!E||Q1(q,E,j))});g.call(Z)}function b(){g?.on(".drag",null)}return{update:_,destroy:b}}function L4(e,t,n){const i=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())il(o,wo(s))>0&&i.push(s);return i}const U4=250;function B4(e,t,n,i){let o=[],s=1/0;const l=L4(e,n,t+U4);for(const c of l){const d=[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]];for(const h of d){if(i.nodeId===h.nodeId&&i.type===h.type&&i.id===h.id)continue;const{x:m,y:p}=fa(c,h,h.position,!0),g=Math.sqrt(Math.pow(m-e.x,2)+Math.pow(p-e.y,2));g>t||(g<s?(o=[{...h,x:m,y:p}],s=g):g===s&&o.push({...h,x:m,y:p}))}}if(!o.length)return null;if(o.length>1){const c=i.type==="source"?"target":"source";return o.find(d=>d.type===c)??o[0]}return o[0]}function f2(e,t,n,i,o,s=!1){const l=i.get(e);if(!l)return null;const c=o==="strict"?l.internals.handleBounds?.[t]:[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]],d=(n?c?.find(h=>h.id===n):c?.[0])??null;return d&&s?{...d,...fa(l,d,d.position,!0)}:d}function d2(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function H4(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const h2=()=>!0;function P4(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:o,edgeUpdaterType:s,isTarget:l,domNode:c,nodeLookup:d,lib:h,autoPanOnConnect:m,flowId:p,panBy:g,cancelConnection:y,onConnectStart:w,onConnect:S,onConnectEnd:_,isValidConnection:b=h2,onReconnectEnd:k,updateConnection:E,getTransform:j,getFromHandle:A,autoPanSpeed:T,dragThreshold:M=1,handleDomNode:P}){const F=Jw(e.target);let $=0,Z;const{x:D,y:q}=Jn(e),N=d2(s,P),H=c?.getBoundingClientRect();let U=!1;if(!H||!N)return;const V=f2(o,N,i,d,t);if(!V)return;let X=Jn(e,H),Y=!1,B=null,z=!1,I=null;function O(){if(!m||!H)return;const[je,Te]=Zw(X,H,T);g({x:je,y:Te}),$=requestAnimationFrame(O)}const Q={...V,nodeId:o,type:N,position:V.position},ee=d.get(o);let ye={inProgress:!0,isValid:null,from:fa(ee,Q,ze.Left,!0),fromHandle:Q,fromPosition:Q.position,fromNode:ee,to:X,toHandle:null,toPosition:H1[Q.position],toNode:null,pointer:X};function de(){U=!0,E(ye),w?.(e,{nodeId:o,handleId:i,handleType:N})}M===0&&de();function ve(je){if(!U){const{x:W,y:K}=Jn(je),ie=W-D,pe=K-q;if(!(ie*ie+pe*pe>M*M))return;de()}if(!A()||!Q){Ae(je);return}const Te=j();X=Jn(je,H),Z=B4(vl(X,Te,!1,[1,1]),n,d,Q),Y||(O(),Y=!0);const De=p2(je,{handle:Z,connectionMode:t,fromNodeId:o,fromHandleId:i,fromType:l?"target":"source",isValidConnection:b,doc:F,lib:h,flowId:p,nodeLookup:d});I=De.handleDomNode,B=De.connection,z=H4(!!Z,De.isValid);const L=d.get(o),te=L?fa(L,Q,ze.Left,!0):ye.from,re={...ye,from:te,isValid:z,to:De.toHandle&&z?$c({x:De.toHandle.x,y:De.toHandle.y},Te):X,toHandle:De.toHandle,toPosition:z&&De.toHandle?De.toHandle.position:H1[Q.position],toNode:De.toHandle?d.get(De.toHandle.nodeId):null,pointer:X};E(re),ye=re}function Ae(je){if(!("touches"in je&&je.touches.length>0)){if(U){(Z||I)&&B&&z&&S?.(B);const{inProgress:Te,...De}=ye,L={...De,toPosition:ye.toHandle?ye.toPosition:null};_?.(je,L),s&&k?.(je,L)}y(),cancelAnimationFrame($),Y=!1,z=!1,B=null,I=null,F.removeEventListener("mousemove",ve),F.removeEventListener("mouseup",Ae),F.removeEventListener("touchmove",ve),F.removeEventListener("touchend",Ae)}}F.addEventListener("mousemove",ve),F.addEventListener("mouseup",Ae),F.addEventListener("touchmove",ve),F.addEventListener("touchend",Ae)}function p2(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:s,doc:l,lib:c,flowId:d,isValidConnection:h=h2,nodeLookup:m}){const p=s==="target",g=t?l.querySelector(`.${c}-flow__handle[data-id="${d}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:y,y:w}=Jn(e),S=l.elementFromPoint(y,w),_=S?.classList.contains(`${c}-flow__handle`)?S:g,b={handleDomNode:_,isValid:!1,connection:null,toHandle:null};if(_){const k=d2(void 0,_),E=_.getAttribute("data-nodeid"),j=_.getAttribute("data-handleid"),A=_.classList.contains("connectable"),T=_.classList.contains("connectableend");if(!E||!k)return b;const M={source:p?E:i,sourceHandle:p?j:o,target:p?i:E,targetHandle:p?o:j};b.connection=M;const F=A&&T&&(n===vo.Strict?p&&k==="source"||!p&&k==="target":E!==i||j!==o);b.isValid=F&&h(M),b.toHandle=f2(E,k,j,m,n,!0)}return b}const im={onPointerDown:P4,isValid:p2};function F4({domNode:e,panZoom:t,getTransform:n,getViewScale:i}){const o=Cn(e);function s({translateExtent:c,width:d,height:h,zoomStep:m=1,pannable:p=!0,zoomable:g=!0,inversePan:y=!1}){const w=E=>{if(E.sourceEvent.type!=="wheel"||!t)return;const j=n(),A=E.sourceEvent.ctrlKey&&al()?10:1,T=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*m,M=j[2]*Math.pow(2,T*A);t.scaleTo(M)};let S=[0,0];const _=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(S=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},b=E=>{const j=n();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!t)return;const A=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],T=[A[0]-S[0],A[1]-S[1]];S=A;const M=i()*Math.max(j[2],Math.log(j[2]))*(y?-1:1),P={x:j[0]-T[0]*M,y:j[1]-T[1]*M},F=[[0,0],[d,h]];t.setViewportConstrained({x:P.x,y:P.y,zoom:j[2]},F,c)},k=Pw().on("start",_).on("zoom",p?b:null).on("zoom.wheel",g?w:null);o.call(k,{})}function l(){o.on("zoom",null)}return{update:s,destroy:l,pointer:Zn}}const yf=e=>({x:e.x,y:e.y,zoom:e.k}),lp=({x:e,y:t,zoom:n})=>pf.translate(e,t).scale(n),uo=(e,t)=>e.target.closest(`.${t}`),m2=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),q4=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,up=(e,t=0,n=q4,i=()=>{})=>{const o=typeof t=="number"&&t>0;return o||i(),o?e.transition().duration(t).ease(n).on("end",i):e},g2=e=>{const t=e.ctrlKey&&al()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function $4({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:s,zoomOnPinch:l,onPanZoomStart:c,onPanZoom:d,onPanZoomEnd:h}){return m=>{if(uo(m,t))return m.ctrlKey&&m.preventDefault(),!1;m.preventDefault(),m.stopImmediatePropagation();const p=n.property("__zoom").k||1;if(m.ctrlKey&&l){const _=Zn(m),b=g2(m),k=p*Math.pow(2,b);i.scaleTo(n,k,_,m);return}const g=m.deltaMode===1?20:1;let y=o===sa.Vertical?0:m.deltaX*g,w=o===sa.Horizontal?0:m.deltaY*g;!al()&&m.shiftKey&&o!==sa.Vertical&&(y=m.deltaY*g,w=0),i.translateBy(n,-(y/p)*s,-(w/p)*s,{internal:!0});const S=yf(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(d?.(m,S),e.panScrollTimeout=setTimeout(()=>{h?.(m,S),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,c?.(m,S))}}function V4({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,o){const s=i.type==="wheel",l=!t&&s&&!i.ctrlKey,c=uo(i,e);if(i.ctrlKey&&s&&c&&i.preventDefault(),l||c)return null;i.preventDefault(),n.call(this,i,o)}}function Y4({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{if(i.sourceEvent?.internal)return;const o=yf(i.transform);e.mouseButton=i.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,i.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(i.sourceEvent,o)}}function G4({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:o}){return s=>{e.usedRightMouseButton=!!(n&&m2(t,e.mouseButton??0)),s.sourceEvent?.sync||i([s.transform.x,s.transform.y,s.transform.k]),o&&!s.sourceEvent?.internal&&o?.(s.sourceEvent,yf(s.transform))}}function X4({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:s}){return l=>{if(!l.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,s&&m2(t,e.mouseButton??0)&&!e.usedRightMouseButton&&l.sourceEvent&&s(l.sourceEvent),e.usedRightMouseButton=!1,i(!1),o)){const c=yf(l.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(l.sourceEvent,c)},n?150:0)}}}function Z4({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:s,userSelectionActive:l,noWheelClassName:c,noPanClassName:d,lib:h,connectionInProgress:m}){return p=>{const g=e||t,y=n&&p.ctrlKey,w=p.type==="wheel";if(p.button===1&&p.type==="mousedown"&&(uo(p,`${h}-flow__node`)||uo(p,`${h}-flow__edge`)))return!0;if(!i&&!g&&!o&&!s&&!n||l||m&&!w||uo(p,c)&&w||uo(p,d)&&(!w||o&&w&&!e)||!n&&p.ctrlKey&&w)return!1;if(!n&&p.type==="touchstart"&&p.touches?.length>1)return p.preventDefault(),!1;if(!g&&!o&&!y&&w||!i&&(p.type==="mousedown"||p.type==="touchstart")||Array.isArray(i)&&!i.includes(p.button)&&p.type==="mousedown")return!1;const S=Array.isArray(i)&&i.includes(p.button)||!p.button||p.button<=1;return(!p.ctrlKey||w)&&S}}function K4({domNode:e,minZoom:t,maxZoom:n,translateExtent:i,viewport:o,onPanZoom:s,onPanZoomStart:l,onPanZoomEnd:c,onDraggingChange:d}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},m=e.getBoundingClientRect(),p=Pw().scaleExtent([t,n]).translateExtent(i),g=Cn(e).call(p);k({x:o.x,y:o.y,zoom:bo(o.zoom,t,n)},[[0,0],[m.width,m.height]],i);const y=g.on("wheel.zoom"),w=g.on("dblclick.zoom");p.wheelDelta(g2);function S(Z,D){return g?new Promise(q=>{p?.interpolate(D?.interpolate==="linear"?Ys:kc).transform(up(g,D?.duration,D?.ease,()=>q(!0)),Z)}):Promise.resolve(!1)}function _({noWheelClassName:Z,noPanClassName:D,onPaneContextMenu:q,userSelectionActive:N,panOnScroll:H,panOnDrag:U,panOnScrollMode:V,panOnScrollSpeed:X,preventScrolling:Y,zoomOnPinch:B,zoomOnScroll:z,zoomOnDoubleClick:I,zoomActivationKeyPressed:O,lib:Q,onTransformChange:ee,connectionInProgress:ue,paneClickDistance:ye,selectionOnDrag:de}){N&&!h.isZoomingOrPanning&&b();const ve=H&&!O&&!N;p.clickDistance(de?1/0:!Qn(ye)||ye<0?0:ye);const Ae=ve?$4({zoomPanValues:h,noWheelClassName:Z,d3Selection:g,d3Zoom:p,panOnScrollMode:V,panOnScrollSpeed:X,zoomOnPinch:B,onPanZoomStart:l,onPanZoom:s,onPanZoomEnd:c}):V4({noWheelClassName:Z,preventScrolling:Y,d3ZoomHandler:y});if(g.on("wheel.zoom",Ae,{passive:!1}),!N){const Te=Y4({zoomPanValues:h,onDraggingChange:d,onPanZoomStart:l});p.on("start",Te);const De=G4({zoomPanValues:h,panOnDrag:U,onPaneContextMenu:!!q,onPanZoom:s,onTransformChange:ee});p.on("zoom",De);const L=X4({zoomPanValues:h,panOnDrag:U,panOnScroll:H,onPaneContextMenu:q,onPanZoomEnd:c,onDraggingChange:d});p.on("end",L)}const je=Z4({zoomActivationKeyPressed:O,panOnDrag:U,zoomOnScroll:z,panOnScroll:H,zoomOnDoubleClick:I,zoomOnPinch:B,userSelectionActive:N,noPanClassName:D,noWheelClassName:Z,lib:Q,connectionInProgress:ue});p.filter(je),I?g.on("dblclick.zoom",w):g.on("dblclick.zoom",null)}function b(){p.on("zoom",null)}async function k(Z,D,q){const N=lp(Z),H=p?.constrain()(N,D,q);return H&&await S(H),new Promise(U=>U(H))}async function E(Z,D){const q=lp(Z);return await S(q,D),new Promise(N=>N(q))}function j(Z){if(g){const D=lp(Z),q=g.property("__zoom");(q.k!==Z.zoom||q.x!==Z.x||q.y!==Z.y)&&p?.transform(g,D,null,{sync:!0})}}function A(){const Z=g?Hw(g.node()):{x:0,y:0,k:1};return{x:Z.x,y:Z.y,zoom:Z.k}}function T(Z,D){return g?new Promise(q=>{p?.interpolate(D?.interpolate==="linear"?Ys:kc).scaleTo(up(g,D?.duration,D?.ease,()=>q(!0)),Z)}):Promise.resolve(!1)}function M(Z,D){return g?new Promise(q=>{p?.interpolate(D?.interpolate==="linear"?Ys:kc).scaleBy(up(g,D?.duration,D?.ease,()=>q(!0)),Z)}):Promise.resolve(!1)}function P(Z){p?.scaleExtent(Z)}function F(Z){p?.translateExtent(Z)}function $(Z){const D=!Qn(Z)||Z<0?0:Z;p?.clickDistance(D)}return{update:_,destroy:b,setViewport:E,setViewportConstrained:k,getViewport:A,scaleTo:T,scaleBy:M,setScaleExtent:P,setTranslateExtent:F,syncViewport:j,setClickDistance:$}}var _o;(function(e){e.Line="line",e.Handle="handle"})(_o||(_o={}));function W4({width:e,prevWidth:t,height:n,prevHeight:i,affectsX:o,affectsY:s}){const l=e-t,c=n-i,d=[l>0?1:l<0?-1:0,c>0?1:c<0?-1:0];return l&&o&&(d[0]=d[0]*-1),c&&s&&(d[1]=d[1]*-1),d}function J1(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),i=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:i,affectsY:o}}function ki(e,t){return Math.max(0,t-e)}function Ei(e,t){return Math.max(0,e-t)}function ac(e,t,n){return Math.max(0,t-e,e-n)}function ev(e,t){return e?!t:t}function Q4(e,t,n,i,o,s,l,c){let{affectsX:d,affectsY:h}=t;const{isHorizontal:m,isVertical:p}=t,g=m&&p,{xSnapped:y,ySnapped:w}=n,{minWidth:S,maxWidth:_,minHeight:b,maxHeight:k}=i,{x:E,y:j,width:A,height:T,aspectRatio:M}=e;let P=Math.floor(m?y-e.pointerX:0),F=Math.floor(p?w-e.pointerY:0);const $=A+(d?-P:P),Z=T+(h?-F:F),D=-s[0]*A,q=-s[1]*T;let N=ac($,S,_),H=ac(Z,b,k);if(l){let X=0,Y=0;d&&P<0?X=ki(E+P+D,l[0][0]):!d&&P>0&&(X=Ei(E+$+D,l[1][0])),h&&F<0?Y=ki(j+F+q,l[0][1]):!h&&F>0&&(Y=Ei(j+Z+q,l[1][1])),N=Math.max(N,X),H=Math.max(H,Y)}if(c){let X=0,Y=0;d&&P>0?X=Ei(E+P,c[0][0]):!d&&P<0&&(X=ki(E+$,c[1][0])),h&&F>0?Y=Ei(j+F,c[0][1]):!h&&F<0&&(Y=ki(j+Z,c[1][1])),N=Math.max(N,X),H=Math.max(H,Y)}if(o){if(m){const X=ac($/M,b,k)*M;if(N=Math.max(N,X),l){let Y=0;!d&&!h||d&&!h&&g?Y=Ei(j+q+$/M,l[1][1])*M:Y=ki(j+q+(d?P:-P)/M,l[0][1])*M,N=Math.max(N,Y)}if(c){let Y=0;!d&&!h||d&&!h&&g?Y=ki(j+$/M,c[1][1])*M:Y=Ei(j+(d?P:-P)/M,c[0][1])*M,N=Math.max(N,Y)}}if(p){const X=ac(Z*M,S,_)/M;if(H=Math.max(H,X),l){let Y=0;!d&&!h||h&&!d&&g?Y=Ei(E+Z*M+D,l[1][0])/M:Y=ki(E+(h?F:-F)*M+D,l[0][0])/M,H=Math.max(H,Y)}if(c){let Y=0;!d&&!h||h&&!d&&g?Y=ki(E+Z*M,c[1][0])/M:Y=Ei(E+(h?F:-F)*M,c[0][0])/M,H=Math.max(H,Y)}}}F=F+(F<0?H:-H),P=P+(P<0?N:-N),o&&(g?$>Z*M?F=(ev(d,h)?-P:P)/M:P=(ev(d,h)?-F:F)*M:m?(F=P/M,h=d):(P=F*M,d=h));const U=d?E+P:E,V=h?j+F:j;return{width:A+(d?-P:P),height:T+(h?-F:F),x:s[0]*P*(d?-1:1)+U,y:s[1]*F*(h?-1:1)+V}}const y2={width:0,height:0,x:0,y:0},J4={...y2,pointerX:0,pointerY:0,aspectRatio:1};function eA(e){return[[0,0],[e.measured.width,e.measured.height]]}function tA(e,t,n){const i=t.position.x+e.position.x,o=t.position.y+e.position.y,s=e.measured.width??0,l=e.measured.height??0,c=n[0]*s,d=n[1]*l;return[[i-c,o-d],[i+s-c,o+l-d]]}function nA({domNode:e,nodeId:t,getStoreItems:n,onChange:i,onEnd:o}){const s=Cn(e);let l={controlDirection:J1("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function c({controlPosition:h,boundaries:m,keepAspectRatio:p,resizeDirection:g,onResizeStart:y,onResize:w,onResizeEnd:S,shouldResize:_}){let b={...y2},k={...J4};l={boundaries:m,resizeDirection:g,keepAspectRatio:p,controlDirection:J1(h)};let E,j=null,A=[],T,M,P,F=!1;const $=Cw().on("start",Z=>{const{nodeLookup:D,transform:q,snapGrid:N,snapToGrid:H,nodeOrigin:U,paneDomNode:V}=n();if(E=D.get(t),!E)return;j=V?.getBoundingClientRect()??null;const{xSnapped:X,ySnapped:Y}=Gs(Z.sourceEvent,{transform:q,snapGrid:N,snapToGrid:H,containerBounds:j});b={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},k={...b,pointerX:X,pointerY:Y,aspectRatio:b.width/b.height},T=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(T=D.get(E.parentId),M=T&&E.extent==="parent"?eA(T):void 0),A=[],P=void 0;for(const[B,z]of D)if(z.parentId===t&&(A.push({id:B,position:{...z.position},extent:z.extent}),z.extent==="parent"||z.expandParent)){const I=tA(z,E,z.origin??U);P?P=[[Math.min(I[0][0],P[0][0]),Math.min(I[0][1],P[0][1])],[Math.max(I[1][0],P[1][0]),Math.max(I[1][1],P[1][1])]]:P=I}y?.(Z,{...b})}).on("drag",Z=>{const{transform:D,snapGrid:q,snapToGrid:N,nodeOrigin:H}=n(),U=Gs(Z.sourceEvent,{transform:D,snapGrid:q,snapToGrid:N,containerBounds:j}),V=[];if(!E)return;const{x:X,y:Y,width:B,height:z}=b,I={},O=E.origin??H,{width:Q,height:ee,x:ue,y:ye}=Q4(k,l.controlDirection,U,l.boundaries,l.keepAspectRatio,O,M,P),de=Q!==B,ve=ee!==z,Ae=ue!==X&&de,je=ye!==Y&&ve;if(!Ae&&!je&&!de&&!ve)return;if((Ae||je||O[0]===1||O[1]===1)&&(I.x=Ae?ue:b.x,I.y=je?ye:b.y,b.x=I.x,b.y=I.y,A.length>0)){const te=ue-X,re=ye-Y;for(const W of A)W.position={x:W.position.x-te+O[0]*(Q-B),y:W.position.y-re+O[1]*(ee-z)},V.push(W)}if((de||ve)&&(I.width=de&&(!l.resizeDirection||l.resizeDirection==="horizontal")?Q:b.width,I.height=ve&&(!l.resizeDirection||l.resizeDirection==="vertical")?ee:b.height,b.width=I.width,b.height=I.height),T&&E.expandParent){const te=O[0]*(I.width??0);I.x&&I.x<te&&(b.x=te,k.x=k.x-(I.x-te));const re=O[1]*(I.height??0);I.y&&I.y<re&&(b.y=re,k.y=k.y-(I.y-re))}const Te=W4({width:b.width,prevWidth:B,height:b.height,prevHeight:z,affectsX:l.controlDirection.affectsX,affectsY:l.controlDirection.affectsY}),De={...b,direction:Te};_?.(Z,De)!==!1&&(F=!0,w?.(Z,De),i(I,V))}).on("end",Z=>{F&&(S?.(Z,{...b}),o?.({...b}),F=!1)});s.call($)}function d(){s.on(".drag",null)}return{update:c,destroy:d}}var cp={exports:{}},fp={},dp={exports:{}},hp={};var tv;function rA(){if(tv)return hp;tv=1;var e=hl();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:t,i=e.useState,o=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function c(p,g){var y=g(),w=i({inst:{value:y,getSnapshot:g}}),S=w[0].inst,_=w[1];return s(function(){S.value=y,S.getSnapshot=g,d(S)&&_({inst:S})},[p,y,g]),o(function(){return d(S)&&_({inst:S}),p(function(){d(S)&&_({inst:S})})},[p]),l(y),y}function d(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!n(p,y)}catch{return!0}}function h(p,g){return g()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return hp.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,hp}var nv;function iA(){return nv||(nv=1,dp.exports=rA()),dp.exports}var rv;function aA(){if(rv)return fp;rv=1;var e=hl(),t=iA();function n(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var i=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,c=e.useMemo,d=e.useDebugValue;return fp.useSyncExternalStoreWithSelector=function(h,m,p,g,y){var w=s(null);if(w.current===null){var S={hasValue:!1,value:null};w.current=S}else S=w.current;w=c(function(){function b(T){if(!k){if(k=!0,E=T,T=g(T),y!==void 0&&S.hasValue){var M=S.value;if(y(M,T))return j=M}return j=T}if(M=j,i(E,T))return M;var P=g(T);return y!==void 0&&y(M,P)?(E=T,M):(E=T,j=P)}var k=!1,E,j,A=p===void 0?null:p;return[function(){return b(m())},A===null?void 0:function(){return b(A())}]},[m,p,g,y]);var _=o(h,w[0],w[1]);return l(function(){S.hasValue=!0,S.value=_},[_]),d(_),_},fp}var iv;function oA(){return iv||(iv=1,cp.exports=aA()),cp.exports}var sA=oA();const lA=jo(sA),uA={},av=e=>{let t;const n=new Set,i=(m,p)=>{const g=typeof m=="function"?m(t):m;if(!Object.is(g,t)){const y=t;t=p??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(w=>w(t,y))}},o=()=>t,d={setState:i,getState:o,getInitialState:()=>h,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(uA?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=t=e(i,o,d);return d},cA=e=>e?av(e):av,{useDebugValue:fA}=Fs,{useSyncExternalStoreWithSelector:dA}=lA,hA=e=>e;function x2(e,t=hA,n){const i=dA(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return fA(i),i}const ov=(e,t)=>{const n=cA(e),i=(o,s=t)=>x2(n,o,s);return Object.assign(i,n),i},pA=(e,t)=>e?ov(e,t):ov;function xt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,o]of e)if(!Object.is(o,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}fw();const xf=J.createContext(null),mA=xf.Provider,v2=cr.error001();function We(e,t){const n=J.useContext(xf);if(n===null)throw new Error(v2);return x2(n,e,t)}function vt(){const e=J.useContext(xf);if(e===null)throw new Error(v2);return J.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const sv={display:"none"},gA={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},b2="react-flow__node-desc",w2="react-flow__edge-desc",yA="react-flow__aria-live",xA=e=>e.ariaLiveMessage,vA=e=>e.ariaLabelConfig;function bA({rfId:e}){const t=We(xA);return x.jsx("div",{id:`${yA}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:gA,children:t})}function wA({rfId:e,disableKeyboardA11y:t}){const n=We(vA);return x.jsxs(x.Fragment,{children:[x.jsx("div",{id:`${b2}-${e}`,style:sv,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),x.jsx("div",{id:`${w2}-${e}`,style:sv,children:n["edge.a11yDescription.default"]}),!t&&x.jsx(bA,{rfId:e})]})}const vf=J.forwardRef(({position:e="top-left",children:t,className:n,style:i,...o},s)=>{const l=`${e}`.split("-");return x.jsx("div",{className:Ot(["react-flow__panel",n,...l]),style:i,ref:s,...o,children:t})});vf.displayName="Panel";function SA({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:x.jsx(vf,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:x.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const _A=e=>{const t=[],n=[];for(const[,i]of e.nodeLookup)i.selected&&t.push(i.internals.userNode);for(const[,i]of e.edgeLookup)i.selected&&n.push(i);return{selectedNodes:t,selectedEdges:n}},oc=e=>e.id;function kA(e,t){return xt(e.selectedNodes.map(oc),t.selectedNodes.map(oc))&&xt(e.selectedEdges.map(oc),t.selectedEdges.map(oc))}function EA({onSelectionChange:e}){const t=vt(),{selectedNodes:n,selectedEdges:i}=We(_A,kA);return J.useEffect(()=>{const o={nodes:n,edges:i};e?.(o),t.getState().onSelectionChangeHandlers.forEach(s=>s(o))},[n,i,e]),null}const CA=e=>!!e.onSelectionChangeHandlers;function jA({onSelectionChange:e}){const t=We(CA);return e||t?x.jsx(EA,{onSelectionChange:e}):null}const S2=[0,0],NA={x:0,y:0,zoom:1},AA=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],lv=[...AA,"rfId"],TA=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),uv={translateExtent:nl,nodeOrigin:S2,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function DA(e){const{setNodes:t,setEdges:n,setMinZoom:i,setMaxZoom:o,setTranslateExtent:s,setNodeExtent:l,reset:c,setDefaultNodesAndEdges:d}=We(TA,xt),h=vt();J.useEffect(()=>(d(e.defaultNodes,e.defaultEdges),()=>{m.current=uv,c()}),[]);const m=J.useRef(uv);return J.useEffect(()=>{for(const p of lv){const g=e[p],y=m.current[p];g!==y&&(typeof e[p]>"u"||(p==="nodes"?t(g):p==="edges"?n(g):p==="minZoom"?i(g):p==="maxZoom"?o(g):p==="translateExtent"?s(g):p==="nodeExtent"?l(g):p==="ariaLabelConfig"?h.setState({ariaLabelConfig:m4(g)}):p==="fitView"?h.setState({fitViewQueued:g}):p==="fitViewOptions"?h.setState({fitViewOptions:g}):h.setState({[p]:g})))}m.current=e},lv.map(p=>e[p])),null}function cv(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function zA(e){const[t,n]=J.useState(e==="system"?null:e);return J.useEffect(()=>{if(e!=="system"){n(e);return}const i=cv(),o=()=>n(i?.matches?"dark":"light");return o(),i?.addEventListener("change",o),()=>{i?.removeEventListener("change",o)}},[e]),t!==null?t:cv()?.matches?"dark":"light"}const fv=typeof document<"u"?document:null;function ol(e=null,t={target:fv,actInsideInputWithModifier:!0}){const[n,i]=J.useState(!1),o=J.useRef(!1),s=J.useRef(new Set([])),[l,c]=J.useMemo(()=>{if(e!==null){const h=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.replace("+",`
`).replace(`

`,`
+`).split(`
`)),m=h.reduce((p,g)=>p.concat(...g),[]);return[h,m]}return[[],[]]},[e]);return J.useEffect(()=>{const d=t?.target??fv,h=t?.actInsideInputWithModifier??!0;if(e!==null){const m=y=>{if(o.current=y.ctrlKey||y.metaKey||y.shiftKey||y.altKey,(!o.current||o.current&&!h)&&e2(y))return!1;const S=hv(y.code,c);if(s.current.add(y[S]),dv(l,s.current,!1)){const _=y.composedPath?.()?.[0]||y.target,b=_?.nodeName==="BUTTON"||_?.nodeName==="A";t.preventDefault!==!1&&(o.current||!b)&&y.preventDefault(),i(!0)}},p=y=>{const w=hv(y.code,c);dv(l,s.current,!0)?(i(!1),s.current.clear()):s.current.delete(y[w]),y.key==="Meta"&&s.current.clear(),o.current=!1},g=()=>{s.current.clear(),i(!1)};return d?.addEventListener("keydown",m),d?.addEventListener("keyup",p),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{d?.removeEventListener("keydown",m),d?.removeEventListener("keyup",p),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[e,i]),n}function dv(e,t,n){return e.filter(i=>n||i.length===t.size).some(i=>i.every(o=>t.has(o)))}function hv(e,t){return t.includes(e)?"code":"key"}const MA=()=>{const e=vt();return J.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:i}=e.getState();return i?i.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[i,o,s],panZoom:l}=e.getState();return l?(await l.setViewport({x:t.x??i,y:t.y??o,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,i]=e.getState().transform;return{x:t,y:n,zoom:i}},setCenter:async(t,n,i)=>e.getState().setCenter(t,n,i),fitBounds:async(t,n)=>{const{width:i,height:o,minZoom:s,maxZoom:l,panZoom:c}=e.getState(),d=Pm(t,i,o,s,l,n?.padding??.1);return c?(await c.setViewport(d,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:i,snapGrid:o,snapToGrid:s,domNode:l}=e.getState();if(!l)return t;const{x:c,y:d}=l.getBoundingClientRect(),h={x:t.x-c,y:t.y-d},m=n.snapGrid??o,p=n.snapToGrid??s;return vl(h,i,p,m)},flowToScreenPosition:t=>{const{transform:n,domNode:i}=e.getState();if(!i)return t;const{x:o,y:s}=i.getBoundingClientRect(),l=$c(t,n);return{x:l.x+o,y:l.y+s}}}),[])};function _2(e,t){const n=[],i=new Map,o=[];for(const s of e)if(s.type==="add"){o.push(s);continue}else if(s.type==="remove"||s.type==="replace")i.set(s.id,[s]);else{const l=i.get(s.id);l?l.push(s):i.set(s.id,[s])}for(const s of t){const l=i.get(s.id);if(!l){n.push(s);continue}if(l[0].type==="remove")continue;if(l[0].type==="replace"){n.push({...l[0].item});continue}const c={...s};for(const d of l)OA(d,c);n.push(c)}return o.length&&o.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function OA(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function k2(e,t){return _2(e,t)}function E2(e,t){return _2(e,t)}function ia(e,t){return{id:e,type:"select",selected:t}}function co(e,t=new Set,n=!1){const i=[];for(const[o,s]of e){const l=t.has(o);!(s.selected===void 0&&!l)&&s.selected!==l&&(n&&(s.selected=l),i.push(ia(s.id,l)))}return i}function pv({items:e=[],lookup:t}){const n=[],i=new Map(e.map(o=>[o.id,o]));for(const[o,s]of e.entries()){const l=t.get(s.id),c=l?.internals?.userNode??l;c!==void 0&&c!==s&&n.push({id:s.id,item:s,type:"replace"}),c===void 0&&n.push({item:s,type:"add",index:o})}for(const[o]of t)i.get(o)===void 0&&n.push({id:o,type:"remove"});return n}function mv(e){return{id:e.id,type:"remove"}}const gv=e=>a4(e),RA=e=>Yw(e);function C2(e){return J.forwardRef(e)}const IA=typeof window<"u"?J.useLayoutEffect:J.useEffect;function yv(e){const[t,n]=J.useState(BigInt(0)),[i]=J.useState(()=>LA(()=>n(o=>o+BigInt(1))));return IA(()=>{const o=i.get();o.length&&(e(o),i.reset())},[t]),i}function LA(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const j2=J.createContext(null);function UA({children:e}){const t=vt(),n=J.useCallback(c=>{const{nodes:d=[],setNodes:h,hasDefaultNodes:m,onNodesChange:p,nodeLookup:g,fitViewQueued:y,onNodesChangeMiddlewareMap:w}=t.getState();let S=d;for(const b of c)S=typeof b=="function"?b(S):b;let _=pv({items:S,lookup:g});for(const b of w.values())_=b(_);m&&h(S),_.length>0?p?.(_):y&&window.requestAnimationFrame(()=>{const{fitViewQueued:b,nodes:k,setNodes:E}=t.getState();b&&E(k)})},[]),i=yv(n),o=J.useCallback(c=>{const{edges:d=[],setEdges:h,hasDefaultEdges:m,onEdgesChange:p,edgeLookup:g}=t.getState();let y=d;for(const w of c)y=typeof w=="function"?w(y):w;m?h(y):p&&p(pv({items:y,lookup:g}))},[]),s=yv(o),l=J.useMemo(()=>({nodeQueue:i,edgeQueue:s}),[]);return x.jsx(j2.Provider,{value:l,children:e})}function BA(){const e=J.useContext(j2);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const HA=e=>!!e.panZoom;function bl(){const e=MA(),t=vt(),n=BA(),i=We(HA),o=J.useMemo(()=>{const s=p=>t.getState().nodeLookup.get(p),l=p=>{n.nodeQueue.push(p)},c=p=>{n.edgeQueue.push(p)},d=p=>{const{nodeLookup:g,nodeOrigin:y}=t.getState(),w=gv(p)?p:g.get(p.id),S=w.parentId?Qw(w.position,w.measured,w.parentId,g,y):w.position,_={...w,position:S,width:w.measured?.width??w.width,height:w.measured?.height??w.height};return wo(_)},h=(p,g,y={replace:!1})=>{l(w=>w.map(S=>{if(S.id===p){const _=typeof g=="function"?g(S):g;return y.replace&&gv(_)?_:{...S,..._}}return S}))},m=(p,g,y={replace:!1})=>{c(w=>w.map(S=>{if(S.id===p){const _=typeof g=="function"?g(S):g;return y.replace&&RA(_)?_:{...S,..._}}return S}))};return{getNodes:()=>t.getState().nodes.map(p=>({...p})),getNode:p=>s(p)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:p=[]}=t.getState();return p.map(g=>({...g}))},getEdge:p=>t.getState().edgeLookup.get(p),setNodes:l,setEdges:c,addNodes:p=>{const g=Array.isArray(p)?p:[p];n.nodeQueue.push(y=>[...y,...g])},addEdges:p=>{const g=Array.isArray(p)?p:[p];n.edgeQueue.push(y=>[...y,...g])},toObject:()=>{const{nodes:p=[],edges:g=[],transform:y}=t.getState(),[w,S,_]=y;return{nodes:p.map(b=>({...b})),edges:g.map(b=>({...b})),viewport:{x:w,y:S,zoom:_}}},deleteElements:async({nodes:p=[],edges:g=[]})=>{const{nodes:y,edges:w,onNodesDelete:S,onEdgesDelete:_,triggerNodeChanges:b,triggerEdgeChanges:k,onDelete:E,onBeforeDelete:j}=t.getState(),{nodes:A,edges:T}=await c4({nodesToRemove:p,edgesToRemove:g,nodes:y,edges:w,onBeforeDelete:j}),M=T.length>0,P=A.length>0;if(M){const F=T.map(mv);_?.(T),k(F)}if(P){const F=A.map(mv);S?.(A),b(F)}return(P||M)&&E?.({nodes:A,edges:T}),{deletedNodes:A,deletedEdges:T}},getIntersectingNodes:(p,g=!0,y)=>{const w=F1(p),S=w?p:d(p),_=y!==void 0;return S?(y||t.getState().nodes).filter(b=>{const k=t.getState().nodeLookup.get(b.id);if(k&&!w&&(b.id===p.id||!k.internals.positionAbsolute))return!1;const E=wo(_?b:k),j=il(E,S);return g&&j>0||j>=E.width*E.height||j>=S.width*S.height}):[]},isNodeIntersecting:(p,g,y=!0)=>{const S=F1(p)?p:d(p);if(!S)return!1;const _=il(S,g);return y&&_>0||_>=g.width*g.height||_>=S.width*S.height},updateNode:h,updateNodeData:(p,g,y={replace:!1})=>{h(p,w=>{const S=typeof g=="function"?g(w):g;return y.replace?{...w,data:S}:{...w,data:{...w.data,...S}}},y)},updateEdge:m,updateEdgeData:(p,g,y={replace:!1})=>{m(p,w=>{const S=typeof g=="function"?g(w):g;return y.replace?{...w,data:S}:{...w,data:{...w.data,...S}}},y)},getNodesBounds:p=>{const{nodeLookup:g,nodeOrigin:y}=t.getState();return o4(p,{nodeLookup:g,nodeOrigin:y})},getHandleConnections:({type:p,id:g,nodeId:y})=>Array.from(t.getState().connectionLookup.get(`${y}-${p}${g?`-${g}`:""}`)?.values()??[]),getNodeConnections:({type:p,handleId:g,nodeId:y})=>Array.from(t.getState().connectionLookup.get(`${y}${p?g?`-${p}-${g}`:`-${p}`:""}`)?.values()??[]),fitView:async p=>{const g=t.getState().fitViewResolver??p4();return t.setState({fitViewQueued:!0,fitViewOptions:p,fitViewResolver:g}),n.nodeQueue.push(y=>[...y]),g.promise}}},[]);return J.useMemo(()=>({...o,...e,viewportInitialized:i}),[i])}const xv=e=>e.selected,PA=typeof window<"u"?window:void 0;function FA({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=vt(),{deleteElements:i}=bl(),o=ol(e,{actInsideInputWithModifier:!1}),s=ol(t,{target:PA});J.useEffect(()=>{if(o){const{edges:l,nodes:c}=n.getState();i({nodes:c.filter(xv),edges:l.filter(xv)}),n.setState({nodesSelectionActive:!1})}},[o]),J.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function qA(e){const t=vt();J.useEffect(()=>{const n=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const i=Fm(e.current);(i.height===0||i.width===0)&&t.getState().onError?.("004",cr.error004()),t.setState({width:i.width||500,height:i.height||500})};if(e.current){n(),window.addEventListener("resize",n);const i=new ResizeObserver(()=>n());return i.observe(e.current),()=>{window.removeEventListener("resize",n),i&&e.current&&i.unobserve(e.current)}}},[])}const bf={position:"absolute",width:"100%",height:"100%",top:0,left:0},$A=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function VA({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:s=sa.Free,zoomOnDoubleClick:l=!0,panOnDrag:c=!0,defaultViewport:d,translateExtent:h,minZoom:m,maxZoom:p,zoomActivationKeyCode:g,preventScrolling:y=!0,children:w,noWheelClassName:S,noPanClassName:_,onViewportChange:b,isControlledViewport:k,paneClickDistance:E,selectionOnDrag:j}){const A=vt(),T=J.useRef(null),{userSelectionActive:M,lib:P,connectionInProgress:F}=We($A,xt),$=ol(g),Z=J.useRef();qA(T);const D=J.useCallback(q=>{b?.({x:q[0],y:q[1],zoom:q[2]}),k||A.setState({transform:q})},[b,k]);return J.useEffect(()=>{if(T.current){Z.current=K4({domNode:T.current,minZoom:m,maxZoom:p,translateExtent:h,viewport:d,onDraggingChange:U=>A.setState({paneDragging:U}),onPanZoomStart:(U,V)=>{const{onViewportChangeStart:X,onMoveStart:Y}=A.getState();Y?.(U,V),X?.(V)},onPanZoom:(U,V)=>{const{onViewportChange:X,onMove:Y}=A.getState();Y?.(U,V),X?.(V)},onPanZoomEnd:(U,V)=>{const{onViewportChangeEnd:X,onMoveEnd:Y}=A.getState();Y?.(U,V),X?.(V)}});const{x:q,y:N,zoom:H}=Z.current.getViewport();return A.setState({panZoom:Z.current,transform:[q,N,H],domNode:T.current.closest(".react-flow")}),()=>{Z.current?.destroy()}}},[]),J.useEffect(()=>{Z.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:i,panOnScrollSpeed:o,panOnScrollMode:s,zoomOnDoubleClick:l,panOnDrag:c,zoomActivationKeyPressed:$,preventScrolling:y,noPanClassName:_,userSelectionActive:M,noWheelClassName:S,lib:P,onTransformChange:D,connectionInProgress:F,selectionOnDrag:j,paneClickDistance:E})},[e,t,n,i,o,s,l,c,$,y,_,M,S,P,D,F,j,E]),x.jsx("div",{className:"react-flow__renderer",ref:T,style:bf,children:w})}const YA=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function GA(){const{userSelectionActive:e,userSelectionRect:t}=We(YA,xt);return e&&t?x.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const pp=(e,t)=>n=>{n.target===t.current&&e?.(n)},XA=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function ZA({isSelecting:e,selectionKeyPressed:t,selectionMode:n=rl.Full,panOnDrag:i,paneClickDistance:o,selectionOnDrag:s,onSelectionStart:l,onSelectionEnd:c,onPaneClick:d,onPaneContextMenu:h,onPaneScroll:m,onPaneMouseEnter:p,onPaneMouseMove:g,onPaneMouseLeave:y,children:w}){const S=vt(),{userSelectionActive:_,elementsSelectable:b,dragging:k,connectionInProgress:E}=We(XA,xt),j=b&&(e||_),A=J.useRef(null),T=J.useRef(),M=J.useRef(new Set),P=J.useRef(new Set),F=J.useRef(!1),$=X=>{if(F.current||E){F.current=!1;return}d?.(X),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1})},Z=X=>{if(Array.isArray(i)&&i?.includes(2)){X.preventDefault();return}h?.(X)},D=m?X=>m(X):void 0,q=X=>{F.current&&(X.stopPropagation(),F.current=!1)},N=X=>{const{domNode:Y}=S.getState();if(T.current=Y?.getBoundingClientRect(),!T.current)return;const B=X.target===A.current;if(!B&&!!X.target.closest(".nokey")||!e||!(s&&B||t)||X.button!==0||!X.isPrimary)return;X.target?.setPointerCapture?.(X.pointerId),F.current=!1;const{x:O,y:Q}=Jn(X.nativeEvent,T.current);S.setState({userSelectionRect:{width:0,height:0,startX:O,startY:Q,x:O,y:Q}}),B||(X.stopPropagation(),X.preventDefault())},H=X=>{const{userSelectionRect:Y,transform:B,nodeLookup:z,edgeLookup:I,connectionLookup:O,triggerNodeChanges:Q,triggerEdgeChanges:ee,defaultEdgeOptions:ue,resetSelectedElements:ye}=S.getState();if(!T.current||!Y)return;const{x:de,y:ve}=Jn(X.nativeEvent,T.current),{startX:Ae,startY:je}=Y;if(!F.current){const re=t?0:o;if(Math.hypot(de-Ae,ve-je)<=re)return;ye(),l?.(X)}F.current=!0;const Te={startX:Ae,startY:je,x:de<Ae?de:Ae,y:ve<je?ve:je,width:Math.abs(de-Ae),height:Math.abs(ve-je)},De=M.current,L=P.current;M.current=new Set(Hm(z,Te,B,n===rl.Partial,!0).map(re=>re.id)),P.current=new Set;const te=ue?.selectable??!0;for(const re of M.current){const W=O.get(re);if(W)for(const{edgeId:K}of W.values()){const ie=I.get(K);ie&&(ie.selectable??te)&&P.current.add(K)}}if(!q1(De,M.current)){const re=co(z,M.current,!0);Q(re)}if(!q1(L,P.current)){const re=co(I,P.current);ee(re)}S.setState({userSelectionRect:Te,userSelectionActive:!0,nodesSelectionActive:!1})},U=X=>{X.button===0&&(X.target?.releasePointerCapture?.(X.pointerId),!_&&X.target===A.current&&S.getState().userSelectionRect&&$?.(X),S.setState({userSelectionActive:!1,userSelectionRect:null}),F.current&&(c?.(X),S.setState({nodesSelectionActive:M.current.size>0})))},V=i===!0||Array.isArray(i)&&i.includes(0);return x.jsxs("div",{className:Ot(["react-flow__pane",{draggable:V,dragging:k,selection:e}]),onClick:j?void 0:pp($,A),onContextMenu:pp(Z,A),onWheel:pp(D,A),onPointerEnter:j?void 0:p,onPointerMove:j?H:g,onPointerUp:j?U:void 0,onPointerDownCapture:j?N:void 0,onClickCapture:j?q:void 0,onPointerLeave:y,ref:A,style:bf,children:[w,x.jsx(GA,{})]})}function am({id:e,store:t,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:o,unselectNodesAndEdges:s,multiSelectionActive:l,nodeLookup:c,onError:d}=t.getState(),h=c.get(e);if(!h){d?.("012",cr.error012(e));return}t.setState({nodesSelectionActive:!1}),h.selected?(n||h.selected&&l)&&(s({nodes:[h],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):o([e])}function N2({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:i,nodeId:o,isSelectable:s,nodeClickDistance:l}){const c=vt(),[d,h]=J.useState(!1),m=J.useRef();return J.useEffect(()=>{m.current=I4({getStoreItems:()=>c.getState(),onNodeMouseDown:p=>{am({id:p,store:c,nodeRef:e})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),J.useEffect(()=>{if(t)m.current?.destroy();else if(e.current)return m.current?.update({noDragClassName:n,handleSelector:i,domNode:e.current,isSelectable:s,nodeId:o,nodeClickDistance:l}),()=>{m.current?.destroy()}},[n,i,t,s,e,o]),d}const KA=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function A2(){const e=vt();return J.useCallback(n=>{const{nodeExtent:i,snapToGrid:o,snapGrid:s,nodesDraggable:l,onError:c,updateNodePositions:d,nodeLookup:h,nodeOrigin:m}=e.getState(),p=new Map,g=KA(l),y=o?s[0]:5,w=o?s[1]:5,S=n.direction.x*y*n.factor,_=n.direction.y*w*n.factor;for(const[,b]of h){if(!g(b))continue;let k={x:b.internals.positionAbsolute.x+S,y:b.internals.positionAbsolute.y+_};o&&(k=xl(k,s));const{position:E,positionAbsolute:j}=Gw({nodeId:b.id,nextPosition:k,nodeLookup:h,nodeExtent:i,nodeOrigin:m,onError:c});b.position=E,b.internals.positionAbsolute=j,p.set(b.id,b)}d(p)},[])}const Xm=J.createContext(null),WA=Xm.Provider;Xm.Consumer;const T2=()=>J.useContext(Xm),QA=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),JA=(e,t,n)=>i=>{const{connectionClickStartHandle:o,connectionMode:s,connection:l}=i,{fromHandle:c,toHandle:d,isValid:h}=l,m=d?.nodeId===e&&d?.id===t&&d?.type===n;return{connectingFrom:c?.nodeId===e&&c?.id===t&&c?.type===n,connectingTo:m,clickConnecting:o?.nodeId===e&&o?.id===t&&o?.type===n,isPossibleEndHandle:s===vo.Strict?c?.type!==n:e!==c?.nodeId||t!==c?.id,connectionInProcess:!!c,clickConnectionInProcess:!!o,valid:m&&h}};function eT({type:e="source",position:t=ze.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:o=!0,isConnectableEnd:s=!0,id:l,onConnect:c,children:d,className:h,onMouseDown:m,onTouchStart:p,...g},y){const w=l||null,S=e==="target",_=vt(),b=T2(),{connectOnClick:k,noPanClassName:E,rfId:j}=We(QA,xt),{connectingFrom:A,connectingTo:T,clickConnecting:M,isPossibleEndHandle:P,connectionInProcess:F,clickConnectionInProcess:$,valid:Z}=We(JA(b,w,e),xt);b||_.getState().onError?.("010",cr.error010());const D=H=>{const{defaultEdgeOptions:U,onConnect:V,hasDefaultEdges:X}=_.getState(),Y={...U,...H};if(X){const{edges:B,setEdges:z}=_.getState();z(a2(Y,B))}V?.(Y),c?.(Y)},q=H=>{if(!b)return;const U=t2(H.nativeEvent);if(o&&(U&&H.button===0||!U)){const V=_.getState();im.onPointerDown(H.nativeEvent,{handleDomNode:H.currentTarget,autoPanOnConnect:V.autoPanOnConnect,connectionMode:V.connectionMode,connectionRadius:V.connectionRadius,domNode:V.domNode,nodeLookup:V.nodeLookup,lib:V.lib,isTarget:S,handleId:w,nodeId:b,flowId:V.rfId,panBy:V.panBy,cancelConnection:V.cancelConnection,onConnectStart:V.onConnectStart,onConnectEnd:V.onConnectEnd,updateConnection:V.updateConnection,onConnect:D,isValidConnection:n||V.isValidConnection,getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle,autoPanSpeed:V.autoPanSpeed,dragThreshold:V.connectionDragThreshold})}U?m?.(H):p?.(H)},N=H=>{const{onClickConnectStart:U,onClickConnectEnd:V,connectionClickStartHandle:X,connectionMode:Y,isValidConnection:B,lib:z,rfId:I,nodeLookup:O,connection:Q}=_.getState();if(!b||!X&&!o)return;if(!X){U?.(H.nativeEvent,{nodeId:b,handleId:w,handleType:e}),_.setState({connectionClickStartHandle:{nodeId:b,type:e,id:w}});return}const ee=Jw(H.target),ue=n||B,{connection:ye,isValid:de}=im.isValid(H.nativeEvent,{handle:{nodeId:b,id:w,type:e},connectionMode:Y,fromNodeId:X.nodeId,fromHandleId:X.id||null,fromType:X.type,isValidConnection:ue,flowId:I,doc:ee,lib:z,nodeLookup:O});de&&ye&&D(ye);const ve=structuredClone(Q);delete ve.inProgress,ve.toPosition=ve.toHandle?ve.toHandle.position:null,V?.(H,ve),_.setState({connectionClickStartHandle:null})};return x.jsx("div",{"data-handleid":w,"data-nodeid":b,"data-handlepos":t,"data-id":`${j}-${b}-${w}-${e}`,className:Ot(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",E,h,{source:!S,target:S,connectable:i,connectablestart:o,connectableend:s,clickconnecting:M,connectingfrom:A,connectingto:T,valid:Z,connectionindicator:i&&(!F||P)&&(F||$?s:o)}]),onMouseDown:q,onTouchStart:q,onClick:k?N:void 0,ref:y,...g,children:d})}const Vt=J.memo(C2(eT));function tT({data:e,isConnectable:t,sourcePosition:n=ze.Bottom}){return x.jsxs(x.Fragment,{children:[e?.label,x.jsx(Vt,{type:"source",position:n,isConnectable:t})]})}function nT({data:e,isConnectable:t,targetPosition:n=ze.Top,sourcePosition:i=ze.Bottom}){return x.jsxs(x.Fragment,{children:[x.jsx(Vt,{type:"target",position:n,isConnectable:t}),e?.label,x.jsx(Vt,{type:"source",position:i,isConnectable:t})]})}function rT(){return null}function iT({data:e,isConnectable:t,targetPosition:n=ze.Top}){return x.jsxs(x.Fragment,{children:[x.jsx(Vt,{type:"target",position:n,isConnectable:t}),e?.label]})}const Vc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},vv={input:tT,default:nT,output:iT,group:rT};function aT(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const oT=e=>{const{width:t,height:n,x:i,y:o}=yl(e.nodeLookup,{filter:s=>!!s.selected});return{width:Qn(t)?t:null,height:Qn(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${i}px,${o}px)`}};function sT({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=vt(),{width:o,height:s,transformString:l,userSelectionActive:c}=We(oT,xt),d=A2(),h=J.useRef(null);if(J.useEffect(()=>{n||h.current?.focus({preventScroll:!0})},[n]),N2({nodeRef:h}),c||!o||!s)return null;const m=e?g=>{const y=i.getState().nodes.filter(w=>w.selected);e(g,y)}:void 0,p=g=>{Object.prototype.hasOwnProperty.call(Vc,g.key)&&(g.preventDefault(),d({direction:Vc[g.key],factor:g.shiftKey?4:1}))};return x.jsx("div",{className:Ot(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l},children:x.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:o,height:s}})})}const bv=typeof window<"u"?window:void 0,lT=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function D2({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:l,paneClickDistance:c,deleteKeyCode:d,selectionKeyCode:h,selectionOnDrag:m,selectionMode:p,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:w,panActivationKeyCode:S,zoomActivationKeyCode:_,elementsSelectable:b,zoomOnScroll:k,zoomOnPinch:E,panOnScroll:j,panOnScrollSpeed:A,panOnScrollMode:T,zoomOnDoubleClick:M,panOnDrag:P,defaultViewport:F,translateExtent:$,minZoom:Z,maxZoom:D,preventScrolling:q,onSelectionContextMenu:N,noWheelClassName:H,noPanClassName:U,disableKeyboardA11y:V,onViewportChange:X,isControlledViewport:Y}){const{nodesSelectionActive:B,userSelectionActive:z}=We(lT,xt),I=ol(h,{target:bv}),O=ol(S,{target:bv}),Q=O||P,ee=O||j,ue=m&&Q!==!0,ye=I||z||ue;return FA({deleteKeyCode:d,multiSelectionKeyCode:w}),x.jsx(VA,{onPaneContextMenu:s,elementsSelectable:b,zoomOnScroll:k,zoomOnPinch:E,panOnScroll:ee,panOnScrollSpeed:A,panOnScrollMode:T,zoomOnDoubleClick:M,panOnDrag:!I&&Q,defaultViewport:F,translateExtent:$,minZoom:Z,maxZoom:D,zoomActivationKeyCode:_,preventScrolling:q,noWheelClassName:H,noPanClassName:U,onViewportChange:X,isControlledViewport:Y,paneClickDistance:c,selectionOnDrag:ue,children:x.jsxs(ZA,{onSelectionStart:g,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:l,panOnDrag:Q,isSelecting:!!ye,selectionMode:p,selectionKeyPressed:I,paneClickDistance:c,selectionOnDrag:ue,children:[e,B&&x.jsx(sT,{onSelectionContextMenu:N,noPanClassName:U,disableKeyboardA11y:V})]})})}D2.displayName="FlowRenderer";const uT=J.memo(D2),cT=e=>t=>e?Hm(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function fT(e){return We(J.useCallback(cT(e),[e]),xt)}const dT=e=>e.updateNodeInternals;function hT(){const e=We(dT),[t]=J.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const i=new Map;n.forEach(o=>{const s=o.target.getAttribute("data-id");i.set(s,{id:s,nodeElement:o.target,force:!0})}),e(i)}));return J.useEffect(()=>()=>{t?.disconnect()},[t]),t}function pT({node:e,nodeType:t,hasDimensions:n,resizeObserver:i}){const o=vt(),s=J.useRef(null),l=J.useRef(null),c=J.useRef(e.sourcePosition),d=J.useRef(e.targetPosition),h=J.useRef(t),m=n&&!!e.internals.handleBounds;return J.useEffect(()=>{s.current&&!e.hidden&&(!m||l.current!==s.current)&&(l.current&&i?.unobserve(l.current),i?.observe(s.current),l.current=s.current)},[m,e.hidden]),J.useEffect(()=>()=>{l.current&&(i?.unobserve(l.current),l.current=null)},[]),J.useEffect(()=>{if(s.current){const p=h.current!==t,g=c.current!==e.sourcePosition,y=d.current!==e.targetPosition;(p||g||y)&&(h.current=t,c.current=e.sourcePosition,d.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function mT({id:e,onClick:t,onMouseEnter:n,onMouseMove:i,onMouseLeave:o,onContextMenu:s,onDoubleClick:l,nodesDraggable:c,elementsSelectable:d,nodesConnectable:h,nodesFocusable:m,resizeObserver:p,noDragClassName:g,noPanClassName:y,disableKeyboardA11y:w,rfId:S,nodeTypes:_,nodeClickDistance:b,onError:k}){const{node:E,internals:j,isParent:A}=We(de=>{const ve=de.nodeLookup.get(e),Ae=de.parentLookup.has(e);return{node:ve,internals:ve.internals,isParent:Ae}},xt);let T=E.type||"default",M=_?.[T]||vv[T];M===void 0&&(k?.("003",cr.error003(T)),T="default",M=_?.default||vv.default);const P=!!(E.draggable||c&&typeof E.draggable>"u"),F=!!(E.selectable||d&&typeof E.selectable>"u"),$=!!(E.connectable||h&&typeof E.connectable>"u"),Z=!!(E.focusable||m&&typeof E.focusable>"u"),D=vt(),q=Ww(E),N=pT({node:E,nodeType:T,hasDimensions:q,resizeObserver:p}),H=N2({nodeRef:N,disabled:E.hidden||!P,noDragClassName:g,handleSelector:E.dragHandle,nodeId:e,isSelectable:F,nodeClickDistance:b}),U=A2();if(E.hidden)return null;const V=Gr(E),X=aT(E),Y=F||P||t||n||i||o,B=n?de=>n(de,{...j.userNode}):void 0,z=i?de=>i(de,{...j.userNode}):void 0,I=o?de=>o(de,{...j.userNode}):void 0,O=s?de=>s(de,{...j.userNode}):void 0,Q=l?de=>l(de,{...j.userNode}):void 0,ee=de=>{const{selectNodesOnDrag:ve,nodeDragThreshold:Ae}=D.getState();F&&(!ve||!P||Ae>0)&&am({id:e,store:D,nodeRef:N}),t&&t(de,{...j.userNode})},ue=de=>{if(!(e2(de.nativeEvent)||w)){if(Fw.includes(de.key)&&F){const ve=de.key==="Escape";am({id:e,store:D,unselect:ve,nodeRef:N})}else if(P&&E.selected&&Object.prototype.hasOwnProperty.call(Vc,de.key)){de.preventDefault();const{ariaLabelConfig:ve}=D.getState();D.setState({ariaLiveMessage:ve["node.a11yDescription.ariaLiveMessage"]({direction:de.key.replace("Arrow","").toLowerCase(),x:~~j.positionAbsolute.x,y:~~j.positionAbsolute.y})}),U({direction:Vc[de.key],factor:de.shiftKey?4:1})}}},ye=()=>{if(w||!N.current?.matches(":focus-visible"))return;const{transform:de,width:ve,height:Ae,autoPanOnNodeFocus:je,setCenter:Te}=D.getState();if(!je)return;Hm(new Map([[e,E]]),{x:0,y:0,width:ve,height:Ae},de,!0).length>0||Te(E.position.x+V.width/2,E.position.y+V.height/2,{zoom:de[2]})};return x.jsx("div",{className:Ot(["react-flow__node",`react-flow__node-${T}`,{[y]:P},E.className,{selected:E.selected,selectable:F,parent:A,draggable:P,dragging:H}]),ref:N,style:{zIndex:j.z,transform:`translate(${j.positionAbsolute.x}px,${j.positionAbsolute.y}px)`,pointerEvents:Y?"all":"none",visibility:q?"visible":"hidden",...E.style,...X},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:B,onMouseMove:z,onMouseLeave:I,onContextMenu:O,onClick:ee,onDoubleClick:Q,onKeyDown:Z?ue:void 0,tabIndex:Z?0:void 0,onFocus:Z?ye:void 0,role:E.ariaRole??(Z?"group":void 0),"aria-roledescription":"node","aria-describedby":w?void 0:`${b2}-${S}`,"aria-label":E.ariaLabel,...E.domAttributes,children:x.jsx(WA,{value:e,children:x.jsx(M,{id:e,data:E.data,type:T,positionAbsoluteX:j.positionAbsolute.x,positionAbsoluteY:j.positionAbsolute.y,selected:E.selected??!1,selectable:F,draggable:P,deletable:E.deletable??!0,isConnectable:$,sourcePosition:E.sourcePosition,targetPosition:E.targetPosition,dragging:H,dragHandle:E.dragHandle,zIndex:j.z,parentId:E.parentId,...V})})})}var gT=J.memo(mT);const yT=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function z2(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:o,onError:s}=We(yT,xt),l=fT(e.onlyRenderVisibleElements),c=hT();return x.jsx("div",{className:"react-flow__nodes",style:bf,children:l.map(d=>x.jsx(gT,{id:d,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:s},d))})}z2.displayName="NodeRenderer";const xT=J.memo(z2);function vT(e){return We(J.useCallback(n=>{if(!e)return n.edges.map(o=>o.id);const i=[];if(n.width&&n.height)for(const o of n.edges){const s=n.nodeLookup.get(o.source),l=n.nodeLookup.get(o.target);s&&l&&x4({sourceNode:s,targetNode:l,width:n.width,height:n.height,transform:n.transform})&&i.push(o.id)}return i},[e]),xt)}const bT=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return x.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},wT=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return x.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},wv={[Fc.Arrow]:bT,[Fc.ArrowClosed]:wT};function ST(e){const t=vt();return J.useMemo(()=>Object.prototype.hasOwnProperty.call(wv,e)?wv[e]:(t.getState().onError?.("009",cr.error009(e)),null),[e])}const _T=({id:e,type:t,color:n,width:i=12.5,height:o=12.5,markerUnits:s="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"})=>{const d=ST(t);return d?x.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:c,refX:"0",refY:"0",children:x.jsx(d,{color:n,strokeWidth:l})}):null},M2=({defaultColor:e,rfId:t})=>{const n=We(s=>s.edges),i=We(s=>s.defaultEdgeOptions),o=J.useMemo(()=>E4(n,{id:t,defaultColor:e,defaultMarkerStart:i?.markerStart,defaultMarkerEnd:i?.markerEnd}),[n,i,t,e]);return o.length?x.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:x.jsx("defs",{children:o.map(s=>x.jsx(_T,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};M2.displayName="MarkerDefinitions";var kT=J.memo(M2);function O2({x:e,y:t,label:n,labelStyle:i,labelShowBg:o=!0,labelBgStyle:s,labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:d,className:h,...m}){const[p,g]=J.useState({x:1,y:0,width:0,height:0}),y=Ot(["react-flow__edge-textwrapper",h]),w=J.useRef(null);return J.useEffect(()=>{if(w.current){const S=w.current.getBBox();g({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),n?x.jsxs("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:y,visibility:p.width?"visible":"hidden",...m,children:[o&&x.jsx("rect",{width:p.width+2*l[0],x:-l[0],y:-l[1],height:p.height+2*l[1],className:"react-flow__edge-textbg",style:s,rx:c,ry:c}),x.jsx("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:w,style:i,children:n}),d]}):null}O2.displayName="EdgeText";const ET=J.memo(O2);function wf({path:e,labelX:t,labelY:n,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,interactionWidth:h=20,...m}){return x.jsxs(x.Fragment,{children:[x.jsx("path",{...m,d:e,fill:"none",className:Ot(["react-flow__edge-path",m.className])}),h?x.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}):null,i&&Qn(t)&&Qn(n)?x.jsx(ET,{x:t,y:n,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d}):null]})}function Sv({pos:e,x1:t,y1:n,x2:i,y2:o}){return e===ze.Left||e===ze.Right?[.5*(t+i),n]:[t,.5*(n+o)]}function R2({sourceX:e,sourceY:t,sourcePosition:n=ze.Bottom,targetX:i,targetY:o,targetPosition:s=ze.Top}){const[l,c]=Sv({pos:n,x1:e,y1:t,x2:i,y2:o}),[d,h]=Sv({pos:s,x1:i,y1:o,x2:e,y2:t}),[m,p,g,y]=n2({sourceX:e,sourceY:t,targetX:i,targetY:o,sourceControlX:l,sourceControlY:c,targetControlX:d,targetControlY:h});return[`M${e},${t} C${l},${c} ${d},${h} ${i},${o}`,m,p,g,y]}function I2(e){return J.memo(({id:t,sourceX:n,sourceY:i,targetX:o,targetY:s,sourcePosition:l,targetPosition:c,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:w,markerEnd:S,markerStart:_,interactionWidth:b})=>{const[k,E,j]=R2({sourceX:n,sourceY:i,sourcePosition:l,targetX:o,targetY:s,targetPosition:c}),A=e.isInternal?void 0:t;return x.jsx(wf,{id:A,path:k,labelX:E,labelY:j,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:w,markerEnd:S,markerStart:_,interactionWidth:b})})}const CT=I2({isInternal:!1}),L2=I2({isInternal:!0});CT.displayName="SimpleBezierEdge";L2.displayName="SimpleBezierEdgeInternal";function U2(e){return J.memo(({id:t,sourceX:n,sourceY:i,targetX:o,targetY:s,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:p,style:g,sourcePosition:y=ze.Bottom,targetPosition:w=ze.Top,markerEnd:S,markerStart:_,pathOptions:b,interactionWidth:k})=>{const[E,j,A]=tm({sourceX:n,sourceY:i,sourcePosition:y,targetX:o,targetY:s,targetPosition:w,borderRadius:b?.borderRadius,offset:b?.offset,stepPosition:b?.stepPosition}),T=e.isInternal?void 0:t;return x.jsx(wf,{id:T,path:E,labelX:j,labelY:A,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:p,style:g,markerEnd:S,markerStart:_,interactionWidth:k})})}const B2=U2({isInternal:!1}),H2=U2({isInternal:!0});B2.displayName="SmoothStepEdge";H2.displayName="SmoothStepEdgeInternal";function P2(e){return J.memo(({id:t,...n})=>{const i=e.isInternal?void 0:t;return x.jsx(B2,{...n,id:i,pathOptions:J.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const jT=P2({isInternal:!1}),F2=P2({isInternal:!0});jT.displayName="StepEdge";F2.displayName="StepEdgeInternal";function q2(e){return J.memo(({id:t,sourceX:n,sourceY:i,targetX:o,targetY:s,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:p,style:g,markerEnd:y,markerStart:w,interactionWidth:S})=>{const[_,b,k]=o2({sourceX:n,sourceY:i,targetX:o,targetY:s}),E=e.isInternal?void 0:t;return x.jsx(wf,{id:E,path:_,labelX:b,labelY:k,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:p,style:g,markerEnd:y,markerStart:w,interactionWidth:S})})}const NT=q2({isInternal:!1}),$2=q2({isInternal:!0});NT.displayName="StraightEdge";$2.displayName="StraightEdgeInternal";function V2(e){return J.memo(({id:t,sourceX:n,sourceY:i,targetX:o,targetY:s,sourcePosition:l=ze.Bottom,targetPosition:c=ze.Top,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:w,markerEnd:S,markerStart:_,pathOptions:b,interactionWidth:k})=>{const[E,j,A]=r2({sourceX:n,sourceY:i,sourcePosition:l,targetX:o,targetY:s,targetPosition:c,curvature:b?.curvature}),T=e.isInternal?void 0:t;return x.jsx(wf,{id:T,path:E,labelX:j,labelY:A,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:w,markerEnd:S,markerStart:_,interactionWidth:k})})}const AT=V2({isInternal:!1}),Y2=V2({isInternal:!0});AT.displayName="BezierEdge";Y2.displayName="BezierEdgeInternal";const _v={default:Y2,straight:$2,step:F2,smoothstep:H2,simplebezier:L2},kv={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},TT=(e,t,n)=>n===ze.Left?e-t:n===ze.Right?e+t:e,DT=(e,t,n)=>n===ze.Top?e-t:n===ze.Bottom?e+t:e,Ev="react-flow__edgeupdater";function Cv({position:e,centerX:t,centerY:n,radius:i=10,onMouseDown:o,onMouseEnter:s,onMouseOut:l,type:c}){return x.jsx("circle",{onMouseDown:o,onMouseEnter:s,onMouseOut:l,className:Ot([Ev,`${Ev}-${c}`]),cx:TT(t,i,e),cy:DT(n,i,e),r:i,stroke:"transparent",fill:"transparent"})}function zT({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:i,sourceY:o,targetX:s,targetY:l,sourcePosition:c,targetPosition:d,onReconnect:h,onReconnectStart:m,onReconnectEnd:p,setReconnecting:g,setUpdateHover:y}){const w=vt(),S=(j,A)=>{if(j.button!==0)return;const{autoPanOnConnect:T,domNode:M,isValidConnection:P,connectionMode:F,connectionRadius:$,lib:Z,onConnectStart:D,onConnectEnd:q,cancelConnection:N,nodeLookup:H,rfId:U,panBy:V,updateConnection:X}=w.getState(),Y=A.type==="target",B=(O,Q)=>{g(!1),p?.(O,n,A.type,Q)},z=O=>h?.(n,O),I=(O,Q)=>{g(!0),m?.(j,n,A.type),D?.(O,Q)};im.onPointerDown(j.nativeEvent,{autoPanOnConnect:T,connectionMode:F,connectionRadius:$,domNode:M,handleId:A.id,nodeId:A.nodeId,nodeLookup:H,isTarget:Y,edgeUpdaterType:A.type,lib:Z,flowId:U,cancelConnection:N,panBy:V,isValidConnection:P,onConnect:z,onConnectStart:I,onConnectEnd:q,onReconnectEnd:B,updateConnection:X,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,dragThreshold:w.getState().connectionDragThreshold,handleDomNode:j.currentTarget})},_=j=>S(j,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),b=j=>S(j,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),k=()=>y(!0),E=()=>y(!1);return x.jsxs(x.Fragment,{children:[(e===!0||e==="source")&&x.jsx(Cv,{position:c,centerX:i,centerY:o,radius:t,onMouseDown:_,onMouseEnter:k,onMouseOut:E,type:"source"}),(e===!0||e==="target")&&x.jsx(Cv,{position:d,centerX:s,centerY:l,radius:t,onMouseDown:b,onMouseEnter:k,onMouseOut:E,type:"target"})]})}function MT({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:i,onClick:o,onDoubleClick:s,onContextMenu:l,onMouseEnter:c,onMouseMove:d,onMouseLeave:h,reconnectRadius:m,onReconnect:p,onReconnectStart:g,onReconnectEnd:y,rfId:w,edgeTypes:S,noPanClassName:_,onError:b,disableKeyboardA11y:k}){let E=We(Te=>Te.edgeLookup.get(e));const j=We(Te=>Te.defaultEdgeOptions);E=j?{...j,...E}:E;let A=E.type||"default",T=S?.[A]||_v[A];T===void 0&&(b?.("011",cr.error011(A)),A="default",T=S?.default||_v.default);const M=!!(E.focusable||t&&typeof E.focusable>"u"),P=typeof p<"u"&&(E.reconnectable||n&&typeof E.reconnectable>"u"),F=!!(E.selectable||i&&typeof E.selectable>"u"),$=J.useRef(null),[Z,D]=J.useState(!1),[q,N]=J.useState(!1),H=vt(),{zIndex:U,sourceX:V,sourceY:X,targetX:Y,targetY:B,sourcePosition:z,targetPosition:I}=We(J.useCallback(Te=>{const De=Te.nodeLookup.get(E.source),L=Te.nodeLookup.get(E.target);if(!De||!L)return{zIndex:E.zIndex,...kv};const te=k4({id:e,sourceNode:De,targetNode:L,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:Te.connectionMode,onError:b});return{zIndex:y4({selected:E.selected,zIndex:E.zIndex,sourceNode:De,targetNode:L,elevateOnSelect:Te.elevateEdgesOnSelect,zIndexMode:Te.zIndexMode}),...te||kv}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),xt),O=J.useMemo(()=>E.markerStart?`url('#${nm(E.markerStart,w)}')`:void 0,[E.markerStart,w]),Q=J.useMemo(()=>E.markerEnd?`url('#${nm(E.markerEnd,w)}')`:void 0,[E.markerEnd,w]);if(E.hidden||V===null||X===null||Y===null||B===null)return null;const ee=Te=>{const{addSelectedEdges:De,unselectNodesAndEdges:L,multiSelectionActive:te}=H.getState();F&&(H.setState({nodesSelectionActive:!1}),E.selected&&te?(L({nodes:[],edges:[E]}),$.current?.blur()):De([e])),o&&o(Te,E)},ue=s?Te=>{s(Te,{...E})}:void 0,ye=l?Te=>{l(Te,{...E})}:void 0,de=c?Te=>{c(Te,{...E})}:void 0,ve=d?Te=>{d(Te,{...E})}:void 0,Ae=h?Te=>{h(Te,{...E})}:void 0,je=Te=>{if(!k&&Fw.includes(Te.key)&&F){const{unselectNodesAndEdges:De,addSelectedEdges:L}=H.getState();Te.key==="Escape"?($.current?.blur(),De({edges:[E]})):L([e])}};return x.jsx("svg",{style:{zIndex:U},children:x.jsxs("g",{className:Ot(["react-flow__edge",`react-flow__edge-${A}`,E.className,_,{selected:E.selected,animated:E.animated,inactive:!F&&!o,updating:Z,selectable:F}]),onClick:ee,onDoubleClick:ue,onContextMenu:ye,onMouseEnter:de,onMouseMove:ve,onMouseLeave:Ae,onKeyDown:M?je:void 0,tabIndex:M?0:void 0,role:E.ariaRole??(M?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":E.ariaLabel===null?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":M?`${w2}-${w}`:void 0,ref:$,...E.domAttributes,children:[!q&&x.jsx(T,{id:e,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:F,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:V,sourceY:X,targetX:Y,targetY:B,sourcePosition:z,targetPosition:I,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:O,markerEnd:Q,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),P&&x.jsx(zT,{edge:E,isReconnectable:P,reconnectRadius:m,onReconnect:p,onReconnectStart:g,onReconnectEnd:y,sourceX:V,sourceY:X,targetX:Y,targetY:B,sourcePosition:z,targetPosition:I,setUpdateHover:D,setReconnecting:N})]})})}var OT=J.memo(MT);const RT=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function G2({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:i,noPanClassName:o,onReconnect:s,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:d,onEdgeMouseLeave:h,onEdgeClick:m,reconnectRadius:p,onEdgeDoubleClick:g,onReconnectStart:y,onReconnectEnd:w,disableKeyboardA11y:S}){const{edgesFocusable:_,edgesReconnectable:b,elementsSelectable:k,onError:E}=We(RT,xt),j=vT(t);return x.jsxs("div",{className:"react-flow__edges",children:[x.jsx(kT,{defaultColor:e,rfId:n}),j.map(A=>x.jsx(OT,{id:A,edgesFocusable:_,edgesReconnectable:b,elementsSelectable:k,noPanClassName:o,onReconnect:s,onContextMenu:l,onMouseEnter:c,onMouseMove:d,onMouseLeave:h,onClick:m,reconnectRadius:p,onDoubleClick:g,onReconnectStart:y,onReconnectEnd:w,rfId:n,onError:E,edgeTypes:i,disableKeyboardA11y:S},A))]})}G2.displayName="EdgeRenderer";const IT=J.memo(G2),LT=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function UT({children:e}){const t=We(LT);return x.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function BT(e){const t=bl(),n=J.useRef(!1);J.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const HT=e=>e.panZoom?.syncViewport;function PT(e){const t=We(HT),n=vt();return J.useEffect(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function FT(e){return e.connection.inProgress?{...e.connection,to:vl(e.connection.to,e.transform)}:{...e.connection}}function qT(e){return FT}function $T(e){const t=qT();return We(t,xt)}const VT=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function YT({containerStyle:e,style:t,type:n,component:i}){const{nodesConnectable:o,width:s,height:l,isValid:c,inProgress:d}=We(VT,xt);return!(s&&o&&d)?null:x.jsx("svg",{style:e,width:s,height:l,className:"react-flow__connectionline react-flow__container",children:x.jsx("g",{className:Ot(["react-flow__connection",Vw(c)]),children:x.jsx(X2,{style:t,type:n,CustomComponent:i,isValid:c})})})}const X2=({style:e,type:t=Ni.Bezier,CustomComponent:n,isValid:i})=>{const{inProgress:o,from:s,fromNode:l,fromHandle:c,fromPosition:d,to:h,toNode:m,toHandle:p,toPosition:g,pointer:y}=$T();if(!o)return;if(n)return x.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:l,fromHandle:c,fromX:s.x,fromY:s.y,toX:h.x,toY:h.y,fromPosition:d,toPosition:g,connectionStatus:Vw(i),toNode:m,toHandle:p,pointer:y});let w="";const S={sourceX:s.x,sourceY:s.y,sourcePosition:d,targetX:h.x,targetY:h.y,targetPosition:g};switch(t){case Ni.Bezier:[w]=r2(S);break;case Ni.SimpleBezier:[w]=R2(S);break;case Ni.Step:[w]=tm({...S,borderRadius:0});break;case Ni.SmoothStep:[w]=tm(S);break;default:[w]=o2(S)}return x.jsx("path",{d:w,fill:"none",className:"react-flow__connection-path",style:e})};X2.displayName="ConnectionLine";const GT={};function jv(e=GT){J.useRef(e),vt(),J.useEffect(()=>{},[e])}function XT(){vt(),J.useRef(!1),J.useEffect(()=>{},[])}function Z2({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:s,onEdgeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:m,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:y,connectionLineType:w,connectionLineStyle:S,connectionLineComponent:_,connectionLineContainerStyle:b,selectionKeyCode:k,selectionOnDrag:E,selectionMode:j,multiSelectionKeyCode:A,panActivationKeyCode:T,zoomActivationKeyCode:M,deleteKeyCode:P,onlyRenderVisibleElements:F,elementsSelectable:$,defaultViewport:Z,translateExtent:D,minZoom:q,maxZoom:N,preventScrolling:H,defaultMarkerColor:U,zoomOnScroll:V,zoomOnPinch:X,panOnScroll:Y,panOnScrollSpeed:B,panOnScrollMode:z,zoomOnDoubleClick:I,panOnDrag:O,onPaneClick:Q,onPaneMouseEnter:ee,onPaneMouseMove:ue,onPaneMouseLeave:ye,onPaneScroll:de,onPaneContextMenu:ve,paneClickDistance:Ae,nodeClickDistance:je,onEdgeContextMenu:Te,onEdgeMouseEnter:De,onEdgeMouseMove:L,onEdgeMouseLeave:te,reconnectRadius:re,onReconnect:W,onReconnectStart:K,onReconnectEnd:ie,noDragClassName:pe,noWheelClassName:ge,noPanClassName:oe,disableKeyboardA11y:_e,nodeExtent:Ce,rfId:ke,viewport:se,onViewportChange:we}){return jv(e),jv(t),XT(),BT(n),PT(se),x.jsx(uT,{onPaneClick:Q,onPaneMouseEnter:ee,onPaneMouseMove:ue,onPaneMouseLeave:ye,onPaneContextMenu:ve,onPaneScroll:de,paneClickDistance:Ae,deleteKeyCode:P,selectionKeyCode:k,selectionOnDrag:E,selectionMode:j,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:A,panActivationKeyCode:T,zoomActivationKeyCode:M,elementsSelectable:$,zoomOnScroll:V,zoomOnPinch:X,zoomOnDoubleClick:I,panOnScroll:Y,panOnScrollSpeed:B,panOnScrollMode:z,panOnDrag:O,defaultViewport:Z,translateExtent:D,minZoom:q,maxZoom:N,onSelectionContextMenu:p,preventScrolling:H,noDragClassName:pe,noWheelClassName:ge,noPanClassName:oe,disableKeyboardA11y:_e,onViewportChange:we,isControlledViewport:!!se,children:x.jsxs(UT,{children:[x.jsx(IT,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:l,onReconnect:W,onReconnectStart:K,onReconnectEnd:ie,onlyRenderVisibleElements:F,onEdgeContextMenu:Te,onEdgeMouseEnter:De,onEdgeMouseMove:L,onEdgeMouseLeave:te,reconnectRadius:re,defaultMarkerColor:U,noPanClassName:oe,disableKeyboardA11y:_e,rfId:ke}),x.jsx(YT,{style:S,type:w,component:_,containerStyle:b}),x.jsx("div",{className:"react-flow__edgelabel-renderer"}),x.jsx(xT,{nodeTypes:e,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:m,nodeClickDistance:je,onlyRenderVisibleElements:F,noPanClassName:oe,noDragClassName:pe,disableKeyboardA11y:_e,nodeExtent:Ce,rfId:ke}),x.jsx("div",{className:"react-flow__viewport-portal"})]})})}Z2.displayName="GraphView";const ZT=J.memo(Z2),Nv=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:o,height:s,fitView:l,fitViewOptions:c,minZoom:d=.5,maxZoom:h=2,nodeOrigin:m,nodeExtent:p,zIndexMode:g="basic"}={})=>{const y=new Map,w=new Map,S=new Map,_=new Map,b=i??t??[],k=n??e??[],E=m??[0,0],j=p??nl;u2(S,_,b);const A=rm(k,y,w,{nodeOrigin:E,nodeExtent:j,zIndexMode:g});let T=[0,0,1];if(l&&o&&s){const M=yl(y,{filter:Z=>!!((Z.width||Z.initialWidth)&&(Z.height||Z.initialHeight))}),{x:P,y:F,zoom:$}=Pm(M,o,s,d,h,c?.padding??.1);T=[P,F,$]}return{rfId:"1",width:o??0,height:s??0,transform:T,nodes:k,nodesInitialized:A,nodeLookup:y,parentLookup:w,edges:b,edgeLookup:_,connectionLookup:S,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:d,maxZoom:h,translateExtent:nl,nodeExtent:j,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:vo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:E,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:l??!1,fitViewOptions:c,fitViewResolver:null,connection:{...$w},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:f4,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:qw,zIndexMode:g,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},KT=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:o,height:s,fitView:l,fitViewOptions:c,minZoom:d,maxZoom:h,nodeOrigin:m,nodeExtent:p,zIndexMode:g})=>pA((y,w)=>{async function S(){const{nodeLookup:_,panZoom:b,fitViewOptions:k,fitViewResolver:E,width:j,height:A,minZoom:T,maxZoom:M}=w();b&&(await u4({nodes:_,width:j,height:A,panZoom:b,minZoom:T,maxZoom:M},k),E?.resolve(!0),y({fitViewResolver:null}))}return{...Nv({nodes:e,edges:t,width:o,height:s,fitView:l,fitViewOptions:c,minZoom:d,maxZoom:h,nodeOrigin:m,nodeExtent:p,defaultNodes:n,defaultEdges:i,zIndexMode:g}),setNodes:_=>{const{nodeLookup:b,parentLookup:k,nodeOrigin:E,elevateNodesOnSelect:j,fitViewQueued:A,zIndexMode:T}=w(),M=rm(_,b,k,{nodeOrigin:E,nodeExtent:p,elevateNodesOnSelect:j,checkEquality:!0,zIndexMode:T});A&&M?(S(),y({nodes:_,nodesInitialized:M,fitViewQueued:!1,fitViewOptions:void 0})):y({nodes:_,nodesInitialized:M})},setEdges:_=>{const{connectionLookup:b,edgeLookup:k}=w();u2(b,k,_),y({edges:_})},setDefaultNodesAndEdges:(_,b)=>{if(_){const{setNodes:k}=w();k(_),y({hasDefaultNodes:!0})}if(b){const{setEdges:k}=w();k(b),y({hasDefaultEdges:!0})}},updateNodeInternals:_=>{const{triggerNodeChanges:b,nodeLookup:k,parentLookup:E,domNode:j,nodeOrigin:A,nodeExtent:T,debug:M,fitViewQueued:P,zIndexMode:F}=w(),{changes:$,updatedInternals:Z}=z4(_,k,E,j,A,T,F);Z&&(N4(k,E,{nodeOrigin:A,nodeExtent:T,zIndexMode:F}),P?(S(),y({fitViewQueued:!1,fitViewOptions:void 0})):y({}),$?.length>0&&(M&&console.log("React Flow: trigger node changes",$),b?.($)))},updateNodePositions:(_,b=!1)=>{const k=[];let E=[];const{nodeLookup:j,triggerNodeChanges:A,connection:T,updateConnection:M,onNodesChangeMiddlewareMap:P}=w();for(const[F,$]of _){const Z=j.get(F),D=!!(Z?.expandParent&&Z?.parentId&&$?.position),q={id:F,type:"position",position:D?{x:Math.max(0,$.position.x),y:Math.max(0,$.position.y)}:$.position,dragging:b};if(Z&&T.inProgress&&T.fromNode.id===Z.id){const N=fa(Z,T.fromHandle,ze.Left,!0);M({...T,from:N})}D&&Z.parentId&&k.push({id:F,parentId:Z.parentId,rect:{...$.internals.positionAbsolute,width:$.measured.width??0,height:$.measured.height??0}}),E.push(q)}if(k.length>0){const{parentLookup:F,nodeOrigin:$}=w(),Z=Gm(k,j,F,$);E.push(...Z)}for(const F of P.values())E=F(E);A(E)},triggerNodeChanges:_=>{const{onNodesChange:b,setNodes:k,nodes:E,hasDefaultNodes:j,debug:A}=w();if(_?.length){if(j){const T=k2(_,E);k(T)}A&&console.log("React Flow: trigger node changes",_),b?.(_)}},triggerEdgeChanges:_=>{const{onEdgesChange:b,setEdges:k,edges:E,hasDefaultEdges:j,debug:A}=w();if(_?.length){if(j){const T=E2(_,E);k(T)}A&&console.log("React Flow: trigger edge changes",_),b?.(_)}},addSelectedNodes:_=>{const{multiSelectionActive:b,edgeLookup:k,nodeLookup:E,triggerNodeChanges:j,triggerEdgeChanges:A}=w();if(b){const T=_.map(M=>ia(M,!0));j(T);return}j(co(E,new Set([..._]),!0)),A(co(k))},addSelectedEdges:_=>{const{multiSelectionActive:b,edgeLookup:k,nodeLookup:E,triggerNodeChanges:j,triggerEdgeChanges:A}=w();if(b){const T=_.map(M=>ia(M,!0));A(T);return}A(co(k,new Set([..._]))),j(co(E,new Set,!0))},unselectNodesAndEdges:({nodes:_,edges:b}={})=>{const{edges:k,nodes:E,nodeLookup:j,triggerNodeChanges:A,triggerEdgeChanges:T}=w(),M=_||E,P=b||k,F=M.map(Z=>{const D=j.get(Z.id);return D&&(D.selected=!1),ia(Z.id,!1)}),$=P.map(Z=>ia(Z.id,!1));A(F),T($)},setMinZoom:_=>{const{panZoom:b,maxZoom:k}=w();b?.setScaleExtent([_,k]),y({minZoom:_})},setMaxZoom:_=>{const{panZoom:b,minZoom:k}=w();b?.setScaleExtent([k,_]),y({maxZoom:_})},setTranslateExtent:_=>{w().panZoom?.setTranslateExtent(_),y({translateExtent:_})},resetSelectedElements:()=>{const{edges:_,nodes:b,triggerNodeChanges:k,triggerEdgeChanges:E,elementsSelectable:j}=w();if(!j)return;const A=b.reduce((M,P)=>P.selected?[...M,ia(P.id,!1)]:M,[]),T=_.reduce((M,P)=>P.selected?[...M,ia(P.id,!1)]:M,[]);k(A),E(T)},setNodeExtent:_=>{const{nodes:b,nodeLookup:k,parentLookup:E,nodeOrigin:j,elevateNodesOnSelect:A,nodeExtent:T,zIndexMode:M}=w();_[0][0]===T[0][0]&&_[0][1]===T[0][1]&&_[1][0]===T[1][0]&&_[1][1]===T[1][1]||(rm(b,k,E,{nodeOrigin:j,nodeExtent:_,elevateNodesOnSelect:A,checkEquality:!1,zIndexMode:M}),y({nodeExtent:_}))},panBy:_=>{const{transform:b,width:k,height:E,panZoom:j,translateExtent:A}=w();return M4({delta:_,panZoom:j,transform:b,translateExtent:A,width:k,height:E})},setCenter:async(_,b,k)=>{const{width:E,height:j,maxZoom:A,panZoom:T}=w();if(!T)return Promise.resolve(!1);const M=typeof k?.zoom<"u"?k.zoom:A;return await T.setViewport({x:E/2-_*M,y:j/2-b*M,zoom:M},{duration:k?.duration,ease:k?.ease,interpolate:k?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{y({connection:{...$w}})},updateConnection:_=>{y({connection:_})},reset:()=>y({...Nv()})}},Object.is);function K2({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:i,initialWidth:o,initialHeight:s,initialMinZoom:l,initialMaxZoom:c,initialFitViewOptions:d,fitView:h,nodeOrigin:m,nodeExtent:p,zIndexMode:g,children:y}){const[w]=J.useState(()=>KT({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:o,height:s,fitView:h,minZoom:l,maxZoom:c,fitViewOptions:d,nodeOrigin:m,nodeExtent:p,zIndexMode:g}));return x.jsx(mA,{value:w,children:x.jsx(UA,{children:y})})}function WT({children:e,nodes:t,edges:n,defaultNodes:i,defaultEdges:o,width:s,height:l,fitView:c,fitViewOptions:d,minZoom:h,maxZoom:m,nodeOrigin:p,nodeExtent:g,zIndexMode:y}){return J.useContext(xf)?x.jsx(x.Fragment,{children:e}):x.jsx(K2,{initialNodes:t,initialEdges:n,defaultNodes:i,defaultEdges:o,initialWidth:s,initialHeight:l,fitView:c,initialFitViewOptions:d,initialMinZoom:h,initialMaxZoom:m,nodeOrigin:p,nodeExtent:g,zIndexMode:y,children:e})}const QT={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function JT({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:o,nodeTypes:s,edgeTypes:l,onNodeClick:c,onEdgeClick:d,onInit:h,onMove:m,onMoveStart:p,onMoveEnd:g,onConnect:y,onConnectStart:w,onConnectEnd:S,onClickConnectStart:_,onClickConnectEnd:b,onNodeMouseEnter:k,onNodeMouseMove:E,onNodeMouseLeave:j,onNodeContextMenu:A,onNodeDoubleClick:T,onNodeDragStart:M,onNodeDrag:P,onNodeDragStop:F,onNodesDelete:$,onEdgesDelete:Z,onDelete:D,onSelectionChange:q,onSelectionDragStart:N,onSelectionDrag:H,onSelectionDragStop:U,onSelectionContextMenu:V,onSelectionStart:X,onSelectionEnd:Y,onBeforeDelete:B,connectionMode:z,connectionLineType:I=Ni.Bezier,connectionLineStyle:O,connectionLineComponent:Q,connectionLineContainerStyle:ee,deleteKeyCode:ue="Backspace",selectionKeyCode:ye="Shift",selectionOnDrag:de=!1,selectionMode:ve=rl.Full,panActivationKeyCode:Ae="Space",multiSelectionKeyCode:je=al()?"Meta":"Control",zoomActivationKeyCode:Te=al()?"Meta":"Control",snapToGrid:De,snapGrid:L,onlyRenderVisibleElements:te=!1,selectNodesOnDrag:re,nodesDraggable:W,autoPanOnNodeFocus:K,nodesConnectable:ie,nodesFocusable:pe,nodeOrigin:ge=S2,edgesFocusable:oe,edgesReconnectable:_e,elementsSelectable:Ce=!0,defaultViewport:ke=NA,minZoom:se=.5,maxZoom:we=2,translateExtent:Ne=nl,preventScrolling:Ie=!0,nodeExtent:qe,defaultMarkerColor:dt="#b1b1b7",zoomOnScroll:Bt=!0,zoomOnPinch:$e=!0,panOnScroll:ht=!1,panOnScrollSpeed:jt=.5,panOnScrollMode:Ve=sa.Free,zoomOnDoubleClick:mn=!0,panOnDrag:Kt=!0,onPaneClick:To,onPaneMouseEnter:Zr,onPaneMouseMove:pr,onPaneMouseLeave:Tn,onPaneScroll:tn,onPaneContextMenu:ya,paneClickDistance:Oi=1,nodeClickDistance:Hf=0,children:Al,onReconnect:Do,onReconnectStart:Ri,onReconnectEnd:Pf,onEdgeContextMenu:Tl,onEdgeDoubleClick:Dl,onEdgeMouseEnter:zl,onEdgeMouseMove:zo,onEdgeMouseLeave:Mo,reconnectRadius:Ml=10,onNodesChange:Ol,onEdgesChange:nr,noDragClassName:Rt="nodrag",noWheelClassName:Yt="nowheel",noPanClassName:mr="nopan",fitView:xa,fitViewOptions:Rl,connectOnClick:Ff,attributionPosition:Il,proOptions:Ii,defaultEdgeOptions:Oo,elevateNodesOnSelect:Kr=!0,elevateEdgesOnSelect:Wr=!1,disableKeyboardA11y:Qr=!1,autoPanOnConnect:Jr,autoPanOnNodeDrag:Nt,autoPanSpeed:Ll,connectionRadius:Ul,isValidConnection:gr,onError:ei,style:qf,id:Ro,nodeDragThreshold:Bl,connectionDragThreshold:$f,viewport:va,onViewportChange:ba,width:qn,height:nn,colorMode:Hl="light",debug:Vf,onScroll:wa,ariaLabelConfig:Pl,zIndexMode:Li="basic",...Yf},rn){const Ui=Ro||"1",Fl=zA(Hl),Io=J.useCallback(yr=>{yr.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),wa?.(yr)},[wa]);return x.jsx("div",{"data-testid":"rf__wrapper",...Yf,onScroll:Io,style:{...qf,...QT},ref:rn,className:Ot(["react-flow",o,Fl]),id:Ro,role:"application",children:x.jsxs(WT,{nodes:e,edges:t,width:qn,height:nn,fitView:xa,fitViewOptions:Rl,minZoom:se,maxZoom:we,nodeOrigin:ge,nodeExtent:qe,zIndexMode:Li,children:[x.jsx(ZT,{onInit:h,onNodeClick:c,onEdgeClick:d,onNodeMouseEnter:k,onNodeMouseMove:E,onNodeMouseLeave:j,onNodeContextMenu:A,onNodeDoubleClick:T,nodeTypes:s,edgeTypes:l,connectionLineType:I,connectionLineStyle:O,connectionLineComponent:Q,connectionLineContainerStyle:ee,selectionKeyCode:ye,selectionOnDrag:de,selectionMode:ve,deleteKeyCode:ue,multiSelectionKeyCode:je,panActivationKeyCode:Ae,zoomActivationKeyCode:Te,onlyRenderVisibleElements:te,defaultViewport:ke,translateExtent:Ne,minZoom:se,maxZoom:we,preventScrolling:Ie,zoomOnScroll:Bt,zoomOnPinch:$e,zoomOnDoubleClick:mn,panOnScroll:ht,panOnScrollSpeed:jt,panOnScrollMode:Ve,panOnDrag:Kt,onPaneClick:To,onPaneMouseEnter:Zr,onPaneMouseMove:pr,onPaneMouseLeave:Tn,onPaneScroll:tn,onPaneContextMenu:ya,paneClickDistance:Oi,nodeClickDistance:Hf,onSelectionContextMenu:V,onSelectionStart:X,onSelectionEnd:Y,onReconnect:Do,onReconnectStart:Ri,onReconnectEnd:Pf,onEdgeContextMenu:Tl,onEdgeDoubleClick:Dl,onEdgeMouseEnter:zl,onEdgeMouseMove:zo,onEdgeMouseLeave:Mo,reconnectRadius:Ml,defaultMarkerColor:dt,noDragClassName:Rt,noWheelClassName:Yt,noPanClassName:mr,rfId:Ui,disableKeyboardA11y:Qr,nodeExtent:qe,viewport:va,onViewportChange:ba}),x.jsx(DA,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:y,onConnectStart:w,onConnectEnd:S,onClickConnectStart:_,onClickConnectEnd:b,nodesDraggable:W,autoPanOnNodeFocus:K,nodesConnectable:ie,nodesFocusable:pe,edgesFocusable:oe,edgesReconnectable:_e,elementsSelectable:Ce,elevateNodesOnSelect:Kr,elevateEdgesOnSelect:Wr,minZoom:se,maxZoom:we,nodeExtent:qe,onNodesChange:Ol,onEdgesChange:nr,snapToGrid:De,snapGrid:L,connectionMode:z,translateExtent:Ne,connectOnClick:Ff,defaultEdgeOptions:Oo,fitView:xa,fitViewOptions:Rl,onNodesDelete:$,onEdgesDelete:Z,onDelete:D,onNodeDragStart:M,onNodeDrag:P,onNodeDragStop:F,onSelectionDrag:H,onSelectionDragStart:N,onSelectionDragStop:U,onMove:m,onMoveStart:p,onMoveEnd:g,noPanClassName:mr,nodeOrigin:ge,rfId:Ui,autoPanOnConnect:Jr,autoPanOnNodeDrag:Nt,autoPanSpeed:Ll,onError:ei,connectionRadius:Ul,isValidConnection:gr,selectNodesOnDrag:re,nodeDragThreshold:Bl,connectionDragThreshold:$f,onBeforeDelete:B,debug:Vf,ariaLabelConfig:Pl,zIndexMode:Li}),x.jsx(jA,{onSelectionChange:q}),Al,x.jsx(SA,{proOptions:Ii,position:Il}),x.jsx(wA,{rfId:Ui,disableKeyboardA11y:Qr})]})})}var e5=C2(JT);function t5(){const e=vt();return J.useCallback(t=>{const{domNode:n,updateNodeInternals:i}=e.getState(),o=Array.isArray(t)?t:[t],s=new Map;o.forEach(l=>{const c=n?.querySelector(`.react-flow__node[data-id="${l}"]`);c&&s.set(l,{id:l,nodeElement:c,force:!0})}),requestAnimationFrame(()=>i(s,{triggerFitView:!1}))},[])}const n5=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function r5(){return We(n5,xt)}function i5({dimensions:e,lineWidth:t,variant:n,className:i}){return x.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Ot(["react-flow__background-pattern",n,i])})}function a5({radius:e,className:t}){return x.jsx("circle",{cx:e,cy:e,r:e,className:Ot(["react-flow__background-pattern","dots",t])})}var $r;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})($r||($r={}));const o5={[$r.Dots]:1,[$r.Lines]:1,[$r.Cross]:6},s5=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function W2({id:e,variant:t=$r.Dots,gap:n=20,size:i,lineWidth:o=1,offset:s=0,color:l,bgColor:c,style:d,className:h,patternClassName:m}){const p=J.useRef(null),{transform:g,patternId:y}=We(s5,xt),w=i||o5[t],S=t===$r.Dots,_=t===$r.Cross,b=Array.isArray(n)?n:[n,n],k=[b[0]*g[2]||1,b[1]*g[2]||1],E=w*g[2],j=Array.isArray(s)?s:[s,s],A=_?[E,E]:k,T=[j[0]*g[2]||1+A[0]/2,j[1]*g[2]||1+A[1]/2],M=`${y}${e||""}`;return x.jsxs("svg",{className:Ot(["react-flow__background",h]),style:{...d,...bf,"--xy-background-color-props":c,"--xy-background-pattern-color-props":l},ref:p,"data-testid":"rf__background",children:[x.jsx("pattern",{id:M,x:g[0]%k[0],y:g[1]%k[1],width:k[0],height:k[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${T[0]},-${T[1]})`,children:S?x.jsx(a5,{radius:E/2,className:m}):x.jsx(i5,{dimensions:A,lineWidth:o,variant:t,className:m})}),x.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${M})`})]})}W2.displayName="Background";const l5=J.memo(W2);function u5(){return x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:x.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function c5(){return x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:x.jsx("path",{d:"M0 0h32v4.2H0z"})})}function f5(){return x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:x.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function d5(){return x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:x.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function h5(){return x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:x.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function sc({children:e,className:t,...n}){return x.jsx("button",{type:"button",className:Ot(["react-flow__controls-button",t]),...n,children:e})}const p5=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Q2({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:o,onZoomIn:s,onZoomOut:l,onFitView:c,onInteractiveChange:d,className:h,children:m,position:p="bottom-left",orientation:g="vertical","aria-label":y}){const w=vt(),{isInteractive:S,minZoomReached:_,maxZoomReached:b,ariaLabelConfig:k}=We(p5,xt),{zoomIn:E,zoomOut:j,fitView:A}=bl(),T=()=>{E(),s?.()},M=()=>{j(),l?.()},P=()=>{A(o),c?.()},F=()=>{w.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),d?.(!S)},$=g==="horizontal"?"horizontal":"vertical";return x.jsxs(vf,{className:Ot(["react-flow__controls",$,h]),position:p,style:e,"data-testid":"rf__controls","aria-label":y??k["controls.ariaLabel"],children:[t&&x.jsxs(x.Fragment,{children:[x.jsx(sc,{onClick:T,className:"react-flow__controls-zoomin",title:k["controls.zoomIn.ariaLabel"],"aria-label":k["controls.zoomIn.ariaLabel"],disabled:b,children:x.jsx(u5,{})}),x.jsx(sc,{onClick:M,className:"react-flow__controls-zoomout",title:k["controls.zoomOut.ariaLabel"],"aria-label":k["controls.zoomOut.ariaLabel"],disabled:_,children:x.jsx(c5,{})})]}),n&&x.jsx(sc,{className:"react-flow__controls-fitview",onClick:P,title:k["controls.fitView.ariaLabel"],"aria-label":k["controls.fitView.ariaLabel"],children:x.jsx(f5,{})}),i&&x.jsx(sc,{className:"react-flow__controls-interactive",onClick:F,title:k["controls.interactive.ariaLabel"],"aria-label":k["controls.interactive.ariaLabel"],children:S?x.jsx(h5,{}):x.jsx(d5,{})}),m]})}Q2.displayName="Controls";J.memo(Q2);function m5({id:e,x:t,y:n,width:i,height:o,style:s,color:l,strokeColor:c,strokeWidth:d,className:h,borderRadius:m,shapeRendering:p,selected:g,onClick:y}){const{background:w,backgroundColor:S}=s||{},_=l||w||S;return x.jsx("rect",{className:Ot(["react-flow__minimap-node",{selected:g},h]),x:t,y:n,rx:m,ry:m,width:i,height:o,style:{fill:_,stroke:c,strokeWidth:d},shapeRendering:p,onClick:y?b=>y(b,e):void 0})}const g5=J.memo(m5),y5=e=>e.nodes.map(t=>t.id),mp=e=>e instanceof Function?e:()=>e;function x5({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:i=5,nodeStrokeWidth:o,nodeComponent:s=g5,onClick:l}){const c=We(y5,xt),d=mp(t),h=mp(e),m=mp(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return x.jsx(x.Fragment,{children:c.map(g=>x.jsx(b5,{id:g,nodeColorFunc:d,nodeStrokeColorFunc:h,nodeClassNameFunc:m,nodeBorderRadius:i,nodeStrokeWidth:o,NodeComponent:s,onClick:l,shapeRendering:p},g))})}function v5({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:i,nodeBorderRadius:o,nodeStrokeWidth:s,shapeRendering:l,NodeComponent:c,onClick:d}){const{node:h,x:m,y:p,width:g,height:y}=We(w=>{const{internals:S}=w.nodeLookup.get(e),_=S.userNode,{x:b,y:k}=S.positionAbsolute,{width:E,height:j}=Gr(_);return{node:_,x:b,y:k,width:E,height:j}},xt);return!h||h.hidden||!Ww(h)?null:x.jsx(c,{x:m,y:p,width:g,height:y,style:h.style,selected:!!h.selected,className:i(h),color:t(h),borderRadius:o,strokeColor:n(h),strokeWidth:s,shapeRendering:l,onClick:d,id:h.id})}const b5=J.memo(v5);var w5=J.memo(x5);const S5=200,_5=150,k5=e=>!e.hidden,E5=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Kw(yl(e.nodeLookup,{filter:k5}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},C5="react-flow__minimap-desc";function J2({style:e,className:t,nodeStrokeColor:n,nodeColor:i,nodeClassName:o="",nodeBorderRadius:s=5,nodeStrokeWidth:l,nodeComponent:c,bgColor:d,maskColor:h,maskStrokeColor:m,maskStrokeWidth:p,position:g="bottom-right",onClick:y,onNodeClick:w,pannable:S=!1,zoomable:_=!1,ariaLabel:b,inversePan:k,zoomStep:E=1,offsetScale:j=5}){const A=vt(),T=J.useRef(null),{boundingRect:M,viewBB:P,rfId:F,panZoom:$,translateExtent:Z,flowWidth:D,flowHeight:q,ariaLabelConfig:N}=We(E5,xt),H=e?.width??S5,U=e?.height??_5,V=M.width/H,X=M.height/U,Y=Math.max(V,X),B=Y*H,z=Y*U,I=j*Y,O=M.x-(B-M.width)/2-I,Q=M.y-(z-M.height)/2-I,ee=B+I*2,ue=z+I*2,ye=`${C5}-${F}`,de=J.useRef(0),ve=J.useRef();de.current=Y,J.useEffect(()=>{if(T.current&&$)return ve.current=F4({domNode:T.current,panZoom:$,getTransform:()=>A.getState().transform,getViewScale:()=>de.current}),()=>{ve.current?.destroy()}},[$]),J.useEffect(()=>{ve.current?.update({translateExtent:Z,width:D,height:q,inversePan:k,pannable:S,zoomStep:E,zoomable:_})},[S,_,k,E,Z,D,q]);const Ae=y?De=>{const[L,te]=ve.current?.pointer(De)||[0,0];y(De,{x:L,y:te})}:void 0,je=w?J.useCallback((De,L)=>{const te=A.getState().nodeLookup.get(L).internals.userNode;w(De,te)},[]):void 0,Te=b??N["minimap.ariaLabel"];return x.jsx(vf,{position:g,style:{...e,"--xy-minimap-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-width-props":typeof p=="number"?p*Y:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof l=="number"?l:void 0},className:Ot(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:x.jsxs("svg",{width:H,height:U,viewBox:`${O} ${Q} ${ee} ${ue}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ye,ref:T,onClick:Ae,children:[Te&&x.jsx("title",{id:ye,children:Te}),x.jsx(w5,{onClick:je,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:o,nodeStrokeWidth:l,nodeComponent:c}),x.jsx("path",{className:"react-flow__minimap-mask",d:`M${O-I},${Q-I}h${ee+I*2}v${ue+I*2}h${-ee-I*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}J2.displayName="MiniMap";const j5=J.memo(J2),N5=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,A5={[_o.Line]:"right",[_o.Handle]:"bottom-right"};function T5({nodeId:e,position:t,variant:n=_o.Handle,className:i,style:o=void 0,children:s,color:l,minWidth:c=10,minHeight:d=10,maxWidth:h=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:p=!1,resizeDirection:g,autoScale:y=!0,shouldResize:w,onResizeStart:S,onResize:_,onResizeEnd:b}){const k=T2(),E=typeof e=="string"?e:k,j=vt(),A=J.useRef(null),T=n===_o.Handle,M=We(J.useCallback(N5(T&&y),[T,y]),xt),P=J.useRef(null),F=t??A5[n];J.useEffect(()=>{if(!(!A.current||!E))return P.current||(P.current=nA({domNode:A.current,nodeId:E,getStoreItems:()=>{const{nodeLookup:Z,transform:D,snapGrid:q,snapToGrid:N,nodeOrigin:H,domNode:U}=j.getState();return{nodeLookup:Z,transform:D,snapGrid:q,snapToGrid:N,nodeOrigin:H,paneDomNode:U}},onChange:(Z,D)=>{const{triggerNodeChanges:q,nodeLookup:N,parentLookup:H,nodeOrigin:U}=j.getState(),V=[],X={x:Z.x,y:Z.y},Y=N.get(E);if(Y&&Y.expandParent&&Y.parentId){const B=Y.origin??U,z=Z.width??Y.measured.width??0,I=Z.height??Y.measured.height??0,O={id:Y.id,parentId:Y.parentId,rect:{width:z,height:I,...Qw({x:Z.x??Y.position.x,y:Z.y??Y.position.y},{width:z,height:I},Y.parentId,N,B)}},Q=Gm([O],N,H,U);V.push(...Q),X.x=Z.x?Math.max(B[0]*z,Z.x):void 0,X.y=Z.y?Math.max(B[1]*I,Z.y):void 0}if(X.x!==void 0&&X.y!==void 0){const B={id:E,type:"position",position:{...X}};V.push(B)}if(Z.width!==void 0&&Z.height!==void 0){const z={id:E,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:Z.width,height:Z.height}};V.push(z)}for(const B of D){const z={...B,type:"position"};V.push(z)}q(V)},onEnd:({width:Z,height:D})=>{const q={id:E,type:"dimensions",resizing:!1,dimensions:{width:Z,height:D}};j.getState().triggerNodeChanges([q])}})),P.current.update({controlPosition:F,boundaries:{minWidth:c,minHeight:d,maxWidth:h,maxHeight:m},keepAspectRatio:p,resizeDirection:g,onResizeStart:S,onResize:_,onResizeEnd:b,shouldResize:w}),()=>{P.current?.destroy()}},[F,c,d,h,m,p,S,_,b,w]);const $=F.split("-");return x.jsx("div",{className:Ot(["react-flow__resize-control","nodrag",...$,n,i]),ref:A,style:{...o,scale:M,...l&&{[T?"backgroundColor":"borderColor"]:l}},children:s})}J.memo(T5);const Av=e=>{let t;const n=new Set,i=(h,m)=>{const p=typeof h=="function"?h(t):h;if(!Object.is(p,t)){const g=t;t=m??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(y=>y(t,g))}},o=()=>t,c={setState:i,getState:o,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h))},d=t=e(i,o,c);return c},D5=(e=>e?Av(e):Av),z5=e=>e;function M5(e,t=z5){const n=Fs.useSyncExternalStore(e.subscribe,Fs.useCallback(()=>t(e.getState()),[e,t]),Fs.useCallback(()=>t(e.getInitialState()),[e,t]));return Fs.useDebugValue(n),n}const Tv=e=>{const t=D5(e),n=i=>M5(t,i);return Object.assign(n,t),n},Di=(e=>e?Tv(e):Tv);var eS=Symbol.for("immer-nothing"),Dv=Symbol.for("immer-draftable"),Jt=Symbol.for("immer-state");function Wn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var jn=Object,ko=jn.getPrototypeOf,Yc="constructor",Sf="prototype",om="configurable",Gc="enumerable",Nc="writable",sl="value",Ti=e=>!!e&&!!e[Jt];function Yr(e){return e?tS(e)||kf(e)||!!e[Dv]||!!e[Yc]?.[Dv]||Ef(e)||Cf(e):!1}var O5=jn[Sf][Yc].toString(),zv=new WeakMap;function tS(e){if(!e||!Zm(e))return!1;const t=ko(e);if(t===null||t===jn[Sf])return!0;const n=jn.hasOwnProperty.call(t,Yc)&&t[Yc];if(n===Object)return!0;if(!so(n))return!1;let i=zv.get(n);return i===void 0&&(i=Function.toString.call(n),zv.set(n,i)),i===O5}function _f(e,t,n=!0){wl(e)===0?(n?Reflect.ownKeys(e):jn.keys(e)).forEach(o=>{t(o,e[o],e)}):e.forEach((i,o)=>t(o,i,e))}function wl(e){const t=e[Jt];return t?t.type_:kf(e)?1:Ef(e)?2:Cf(e)?3:0}var Mv=(e,t,n=wl(e))=>n===2?e.has(t):jn[Sf].hasOwnProperty.call(e,t),sm=(e,t,n=wl(e))=>n===2?e.get(t):e[t],Xc=(e,t,n,i=wl(e))=>{i===2?e.set(t,n):i===3?e.add(n):e[t]=n};function R5(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var kf=Array.isArray,Ef=e=>e instanceof Map,Cf=e=>e instanceof Set,Zm=e=>typeof e=="object",so=e=>typeof e=="function",gp=e=>typeof e=="boolean";function I5(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Hr=e=>e.copy_||e.base_,Km=e=>e.modified_?e.copy_:e.base_;function lm(e,t){if(Ef(e))return new Map(e);if(Cf(e))return new Set(e);if(kf(e))return Array[Sf].slice.call(e);const n=tS(e);if(t===!0||t==="class_only"&&!n){const i=jn.getOwnPropertyDescriptors(e);delete i[Jt];let o=Reflect.ownKeys(i);for(let s=0;s<o.length;s++){const l=o[s],c=i[l];c[Nc]===!1&&(c[Nc]=!0,c[om]=!0),(c.get||c.set)&&(i[l]={[om]:!0,[Nc]:!0,[Gc]:c[Gc],[sl]:e[l]})}return jn.create(ko(e),i)}else{const i=ko(e);if(i!==null&&n)return{...e};const o=jn.create(i);return jn.assign(o,e)}}function Wm(e,t=!1){return jf(e)||Ti(e)||!Yr(e)||(wl(e)>1&&jn.defineProperties(e,{set:lc,add:lc,clear:lc,delete:lc}),jn.freeze(e),t&&_f(e,(n,i)=>{Wm(i,!0)},!1)),e}function L5(){Wn(2)}var lc={[sl]:L5};function jf(e){return e===null||!Zm(e)?!0:jn.isFrozen(e)}var Zc="MapSet",um="Patches",Ov="ArrayMethods",nS={};function da(e){const t=nS[e];return t||Wn(0,e),t}var Rv=e=>!!nS[e],ll,rS=()=>ll,U5=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Rv(Zc)?da(Zc):void 0,arrayMethodsPlugin_:Rv(Ov)?da(Ov):void 0});function Iv(e,t){t&&(e.patchPlugin_=da(um),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function cm(e){fm(e),e.drafts_.forEach(B5),e.drafts_=null}function fm(e){e===ll&&(ll=e.parent_)}var Lv=e=>ll=U5(ll,e);function B5(e){const t=e[Jt];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Uv(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Jt].modified_&&(cm(t),Wn(4)),Yr(e)&&(e=Bv(t,e));const{patchPlugin_:o}=t;o&&o.generateReplacementPatches_(n[Jt].base_,e,t)}else e=Bv(t,n);return H5(t,e,!0),cm(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==eS?e:void 0}function Bv(e,t){if(jf(t))return t;const n=t[Jt];if(!n)return Kc(t,e.handledSet_,e);if(!Nf(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:i}=n;if(i)for(;i.length>0;)i.pop()(e);oS(n,e)}return n.copy_}function H5(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Wm(t,n)}function iS(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Nf=(e,t)=>e.scope_===t,P5=[];function aS(e,t,n,i){const o=Hr(e),s=e.type_;if(i!==void 0&&sm(o,i,s)===t){Xc(o,i,n,s);return}if(!e.draftLocations_){const c=e.draftLocations_=new Map;_f(o,(d,h)=>{if(Ti(h)){const m=c.get(h)||[];m.push(d),c.set(h,m)}})}const l=e.draftLocations_.get(t)??P5;for(const c of l)Xc(o,c,n,s)}function F5(e,t,n){e.callbacks_.push(function(o){const s=t;if(!s||!Nf(s,o))return;o.mapSetPlugin_?.fixSetContents(s);const l=Km(s);aS(e,s.draft_??s,l,n),oS(s,o)})}function oS(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:i}=t;if(i){const o=i.getPath(e);o&&i.generatePatches_(e,o,t)}iS(e)}}function q5(e,t,n){const{scope_:i}=e;if(Ti(n)){const o=n[Jt];Nf(o,i)&&o.callbacks_.push(function(){Ac(e);const l=Km(o);aS(e,n,l,t)})}else Yr(n)&&e.callbacks_.push(function(){const s=Hr(e);e.type_===3?s.has(n)&&Kc(n,i.handledSet_,i):sm(s,t,e.type_)===n&&i.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Kc(sm(e.copy_,t,e.type_),i.handledSet_,i)})}function Kc(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ti(e)||t.has(e)||!Yr(e)||jf(e)||(t.add(e),_f(e,(i,o)=>{if(Ti(o)){const s=o[Jt];if(Nf(s,n)){const l=Km(s);Xc(e,i,l,e.type_),iS(s)}}else Yr(o)&&Kc(o,t,n)})),e}function $5(e,t){const n=kf(e),i={type_:n?1:0,scope_:t?t.scope_:rS(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let o=i,s=Wc;n&&(o=[i],s=ul);const{revoke:l,proxy:c}=Proxy.revocable(o,s);return i.draft_=c,i.revoke_=l,[c,i]}var Wc={get(e,t){if(t===Jt)return e;let n=e.scope_.arrayMethodsPlugin_;const i=e.type_===1&&typeof t=="string";if(i&&n?.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const o=Hr(e);if(!Mv(o,t,e.type_))return V5(e,o,t);const s=o[t];if(e.finalized_||!Yr(s)||i&&e.operationMethod&&n?.isMutatingArrayMethod(e.operationMethod)&&I5(t))return s;if(s===yp(e.base_,t)){Ac(e);const l=e.type_===1?+t:t,c=hm(e.scope_,s,e,l);return e.copy_[l]=c}return s},has(e,t){return t in Hr(e)},ownKeys(e){return Reflect.ownKeys(Hr(e))},set(e,t,n){const i=sS(Hr(e),t);if(i?.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const o=yp(Hr(e),t),s=o?.[Jt];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(R5(n,o)&&(n!==void 0||Mv(e.base_,t,e.type_)))return!0;Ac(e),dm(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),q5(e,t,n)),!0},deleteProperty(e,t){return Ac(e),yp(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),dm(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Hr(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{[Nc]:!0,[om]:e.type_!==1||t!=="length",[Gc]:i[Gc],[sl]:n[t]}},defineProperty(){Wn(11)},getPrototypeOf(e){return ko(e.base_)},setPrototypeOf(){Wn(12)}},ul={};for(let e in Wc){let t=Wc[e];ul[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}}ul.deleteProperty=function(e,t){return ul.set.call(this,e,t,void 0)};ul.set=function(e,t,n){return Wc.set.call(this,e[0],t,n,e[0])};function yp(e,t){const n=e[Jt];return(n?Hr(n):e)[t]}function V5(e,t,n){const i=sS(t,n);return i?sl in i?i[sl]:i.get?.call(e.draft_):void 0}function sS(e,t){if(!(t in e))return;let n=ko(e);for(;n;){const i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=ko(n)}}function dm(e){e.modified_||(e.modified_=!0,e.parent_&&dm(e.parent_))}function Ac(e){e.copy_||(e.assigned_=new Map,e.copy_=lm(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Y5=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,i)=>{if(so(t)&&!so(n)){const s=n;n=t;const l=this;return function(d=s,...h){return l.produce(d,m=>n.call(this,m,...h))}}so(n)||Wn(6),i!==void 0&&!so(i)&&Wn(7);let o;if(Yr(t)){const s=Lv(this),l=hm(s,t,void 0);let c=!0;try{o=n(l),c=!1}finally{c?cm(s):fm(s)}return Iv(s,i),Uv(o,s)}else if(!t||!Zm(t)){if(o=n(t),o===void 0&&(o=t),o===eS&&(o=void 0),this.autoFreeze_&&Wm(o,!0),i){const s=[],l=[];da(um).generateReplacementPatches_(t,o,{patches_:s,inversePatches_:l}),i(s,l)}return o}else Wn(1,t)},this.produceWithPatches=(t,n)=>{if(so(t))return(l,...c)=>this.produceWithPatches(l,d=>t(d,...c));let i,o;return[this.produce(t,n,(l,c)=>{i=l,o=c}),i,o]},gp(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),gp(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),gp(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Yr(e)||Wn(8),Ti(e)&&(e=G5(e));const t=Lv(this),n=hm(t,e,void 0);return n[Jt].isManual_=!0,fm(t),n}finishDraft(e,t){const n=e&&e[Jt];(!n||!n.isManual_)&&Wn(9);const{scope_:i}=n;return Iv(i,t),Uv(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const o=t[n];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}n>-1&&(t=t.slice(n+1));const i=da(um).applyPatches_;return Ti(e)?i(e,t):this.produce(e,o=>i(o,t))}};function hm(e,t,n,i){const[o,s]=Ef(t)?da(Zc).proxyMap_(t,n):Cf(t)?da(Zc).proxySet_(t,n):$5(t,n);return(n?.scope_??rS()).drafts_.push(o),s.callbacks_=n?.callbacks_??[],s.key_=i,n&&i!==void 0?F5(n,s,i):s.callbacks_.push(function(d){d.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:h}=d;s.modified_&&h&&h.generatePatches_(s,[],d)}),o}function G5(e){return Ti(e)||Wn(10,e),lS(e)}function lS(e){if(!Yr(e)||jf(e))return e;const t=e[Jt];let n,i=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=lm(e,t.scope_.immer_.useStrictShallowCopy_),i=t.scope_.immer_.shouldUseStrictIteration()}else n=lm(e,!0);return _f(n,(o,s)=>{Xc(n,o,lS(s))},i),t&&(t.finalized_=!1),n}var X5=new Y5,Z5=X5.produce;const K5=e=>(t,n,i)=>(i.setState=(o,s,...l)=>{const c=typeof o=="function"?Z5(o):o;return t(c,s,...l)},e(i.setState,n,i)),Af=K5,Hv=["#6366f1","#8b5cf6","#ec4899","#f59e0b","#10b981","#06b6d4","#f97316","#84cc16"];let uc=0;const Lt=Di()(Af((e,t)=>({groups:[],isolatedGroupId:null,createGroup:(n,i)=>{if(n.length<2)return"";const o=t();for(const c of n)o.removeNodeFromAllGroups(c);uc++;const s=`group-${Date.now()}-${uc}`,l=(uc-1)%Hv.length;return e(c=>{c.groups.push({id:s,name:i||`Group ${uc}`,nodeIds:[...n],color:Hv[l]})}),s},dissolveGroup:n=>{e(i=>{i.groups=i.groups.filter(o=>o.id!==n),i.isolatedGroupId===n&&(i.isolatedGroupId=null)})},renameGroup:(n,i)=>{e(o=>{const s=o.groups.find(l=>l.id===n);s&&(s.name=i)})},getGroupForNode:n=>{const{groups:i}=t();return i.find(o=>o.nodeIds.includes(n))||null},getNodesInSameGroup:n=>{const{groups:i}=t(),o=i.find(s=>s.nodeIds.includes(n));return o?o.nodeIds:[]},removeNodeFromAllGroups:n=>{e(i=>{for(const o of i.groups)o.nodeIds=o.nodeIds.filter(s=>s!==n);i.groups=i.groups.filter(o=>o.nodeIds.length>=2)})},setGroups:n=>{e(i=>{i.groups=n,i.isolatedGroupId&&!n.some(o=>o.id===i.isolatedGroupId)&&(i.isolatedGroupId=null)})},isolateGroup:n=>{e(i=>{i.isolatedGroupId=n})}}))),uS=e=>{const t=Date.now().toString(36),n=Math.random().toString(36).substring(2,6);return`${e}-${t}-${n}`},W5=[{id:"character-1",type:"character",position:{x:50,y:100},data:{label:"Character",name:"Mira Chen",description:"Tall woman, short black hair, cybernetic left eye, worn leather jacket, confident stance"}},{id:"setting-1",type:"setting",position:{x:50,y:320},data:{label:"Setting",name:"The Undercity",description:"Crowded underground market, neon signs in foreign scripts, steam vents, perpetual rain"}},{id:"style-1",type:"style",position:{x:50,y:540},data:{label:"Style",name:"Noir",description:"Noir comic art, high contrast, heavy black inks, muted colors with neon accents, dramatic shadows"}},{id:"shot-1",type:"shot",position:{x:350,y:100},data:{label:"Shot",name:"Dramatic Angle",preset:"low-angle",description:"Looking up at subject, emphasizing power"}},{id:"action-1",type:"action",position:{x:350,y:320},data:{label:"Action",content:"Mira walks through the crowded market, her cybernetic eye scanning the crowd. Rain drips from her jacket."}},{id:"output-1",type:"output",position:{x:650,y:200},data:{label:"Output",promptPreview:"",status:"idle"}}],Q5=[{id:"e-char-action",source:"character-1",target:"action-1"},{id:"e-setting-action",source:"setting-1",target:"action-1"},{id:"e-shot-output",source:"shot-1",target:"output-1"},{id:"e-action-output",source:"action-1",target:"output-1"},{id:"e-style-output",source:"style-1",target:"output-1"}];let cc=0;function J5(e,t){const n=Lt.getState(),i=e.filter(l=>l.type==="position"&&"position"in l&&l.position!=null);if(i.length===0)return e;const o=[],s=new Set;for(const l of i){const c=l.id;if(s.has(c))continue;const d=n.getNodesInSameGroup(c);if(d.length<=1)continue;const h=t.find(g=>g.id===c);if(!h)continue;const m=l.position.x-h.position.x,p=l.position.y-h.position.y;for(const g of d){if(s.add(g),g===c)continue;const y=t.find(w=>w.id===g);y&&o.push({type:"position",id:g,position:{x:y.position.x+m,y:y.position.y+p},dragging:l.dragging})}}return[...e,...o]}const et=Di()(Af((e,t)=>({nodes:W5,edges:Q5,isDirty:!1,clipboard:null,onNodesChange:n=>{e(i=>{const o=J5(n,i.nodes);i.nodes=k2(o,i.nodes),i.isDirty=!0})},onEdgesChange:n=>{e(i=>{i.edges=E2(n,i.edges),i.isDirty=!0})},onConnect:n=>{e(i=>{const o=i.nodes.find(p=>p.id===n.source),s=i.nodes.find(p=>p.id===n.target);if(!o||!s)return;let l=n.targetHandle;const c=["parameters","negative","timeperiod"],d=["reference","output"],h=["character","setting","prop","style","extras","shot","outfit","camera","action"],m=["output","intercept"];if(m.includes(s.type)){const p=n.targetHandle;if(h.includes(o.type)&&(p==="reference"||p==="config")||c.includes(o.type)&&p==="reference"||d.includes(o.type)&&p==="config")return}c.includes(o.type)&&m.includes(s.type)&&(l="config"),d.includes(o.type)&&m.includes(s.type)&&(l="reference"),i.edges=a2({...n,targetHandle:l,id:`e-${n.source}-${n.target}-${l||"default"}`},i.edges),i.isDirty=!0})},addNode:n=>{e(i=>{i.nodes.push(n),i.isDirty=!0})},updateNodeData:(n,i)=>{e(o=>{const s=o.nodes.find(l=>l.id===n);s&&(s.data={...s.data,...i},o.isDirty=!0)})},deleteNode:n=>{e(i=>{i.nodes=i.nodes.filter(o=>o.id!==n),i.edges=i.edges.filter(o=>o.source!==n&&o.target!==n),i.isDirty=!0}),Lt.getState().removeNodeFromAllGroups(n)},setNodes:n=>{e(i=>{i.nodes=n})},setEdges:n=>{e(i=>{i.edges=n})},setDirty:n=>{e(i=>{i.isDirty=n})},copyNodes:n=>{e(i=>{if(n.length===0)return;const o=i.nodes.filter(c=>n.includes(c.id)),s=new Set(n),l=i.edges.filter(c=>s.has(c.source)&&s.has(c.target));i.clipboard={nodes:JSON.parse(JSON.stringify(o)),edges:JSON.parse(JSON.stringify(l))}})},pasteNodes:()=>{const{clipboard:n}=t();if(!n||n.nodes.length===0)return;cc++;const i=50*cc,o=new Map;n.nodes.forEach(c=>{const d=`${c.type}-paste-${cc}-${c.id}`;o.set(c.id,d)});const s=n.nodes.map(c=>({...JSON.parse(JSON.stringify(c)),id:o.get(c.id),position:{x:c.position.x+i,y:c.position.y+i},selected:!0})),l=n.edges.map(c=>({...JSON.parse(JSON.stringify(c)),id:`e-paste-${cc}-${c.id}`,source:o.get(c.source),target:o.get(c.target)}));e(c=>{c.nodes.forEach(d=>{d.selected=!1}),c.nodes.push(...s),c.edges.push(...l),c.isDirty=!0})}}))),Qc=Di()(Af((e,t)=>({selectedNodeId:null,sidebarOpen:!0,propertiesPanelOpen:!0,collapsedNodes:{},showMinimap:!0,selectNode:n=>{e(i=>{i.selectedNodeId=n,n&&(i.propertiesPanelOpen=!0)})},toggleSidebar:()=>{e(n=>{n.sidebarOpen=!n.sidebarOpen})},togglePropertiesPanel:()=>{e(n=>{n.propertiesPanelOpen=!n.propertiesPanelOpen})},setSidebarOpen:n=>{e(i=>{i.sidebarOpen=n})},setPropertiesPanelOpen:n=>{e(i=>{i.propertiesPanelOpen=n})},toggleNodeCollapsed:n=>{e(i=>{i.collapsedNodes[n]=!i.collapsedNodes[n]})},isNodeCollapsed:n=>!!t().collapsedNodes[n],toggleMinimap:()=>{e(n=>{n.showMinimap=!n.showMinimap})}}))),Qm={establishing:"Establishing Shot",wide:"Wide Shot",medium:"Medium Shot","close-up":"Close-up","extreme-close-up":"Extreme Close-up","over-the-shoulder":"Over-the-Shoulder","two-shot":"Two-Shot","low-angle":"Low Angle","high-angle":"High Angle","dutch-angle":"Dutch Angle",pov:"POV Shot","birds-eye":"Bird's Eye",tracking:"Tracking Shot"},Jm={deep:"Deep Focus",shallow:"Shallow DoF","very-shallow":"Very Shallow DoF"},Jc={standard:"Standard 50mm",wide:"Wide 24mm","ultra-wide":"Ultra-Wide 14mm","fisheye-180":"Fisheye 180",telephoto:"Telephoto 85mm+",anamorphic:"Anamorphic","tilt-shift":"Tilt-Shift"},cS={locked:"Locked/Tripod",handheld:"Handheld",steadicam:"Steadicam"},eg={digital:"Digital Clean","35mm":"35mm Film","16mm":"16mm Vintage","large-format":"Large Format"},fS={balanced:"Balanced","high-key":"High Key","low-key":"Low Key"},tg={none:"None",light:"Light Vignette",heavy:"Heavy Vignette"},eD={"after-shot":"After Shot","after-subject":"After Subject","before-style":"Before Style"},ng={speech:"Speech Balloon",thought:"Thought Bubble",caption:"Caption Box",title:"Title",sfx:"Sound Effect",whisper:"Whisper",shout:"Shout",sign:"Sign/Label",subtitle:"Subtitle"},tD={render:"Render Text","reserve-space":"Reserve Space"},rg={custom:"Custom",prehistoric:"Prehistoric","ancient-egypt":"Ancient Egypt","ancient-greece":"Ancient Greece","ancient-rome":"Ancient Rome",medieval:"Medieval (500-1400)",renaissance:"Renaissance (1400-1600)",colonial:"Colonial (1600-1800)",victorian:"Victorian (1837-1901)",edwardian:"Edwardian (1901-1910)","roaring-20s":"Roaring 20s (1920-1929)","1930s-40s":"1930s-40s","1950s":"1950s","1960s":"1960s","1970s":"1970s","1980s":"1980s","1990s":"1990s","2000s":"2000s","2010s":"2010s",contemporary:"Contemporary (2020s)","near-future":"Near Future","far-future":"Far Future"},dS={custom:[],prehistoric:["metal tools","clothing","buildings","domesticated animals","pottery","written text","modern elements"],"ancient-egypt":["modern clothing","glass windows","firearms","printed text","electric lights","modern architecture","plastic"],"ancient-greece":["medieval armor","firearms","printed books","modern clothing","electric lights","glass windows","concrete buildings"],"ancient-rome":["medieval elements","firearms","printed text","modern materials","electric lighting","contemporary fashion"],medieval:["firearms","printed books","glass windows","modern clothing","electric lights","concrete","plastic","refined sugar","potatoes","tomatoes","accurate maps"],renaissance:["electric lights","modern weapons","industrial machinery","photography","modern clothing","cars","plastic"],colonial:["electric lights","automobiles","modern weapons","photography","industrial factories","modern clothing","plastic"],victorian:["electric lights","automobiles","airplanes","modern weapons","color photography","plastic","modern clothing","computers"],edwardian:["modern cars","airplanes","plastic","modern electronics","contemporary fashion","color photography","television"],"roaring-20s":["television","plastic","jet aircraft","modern cars","color photography","computers","contemporary fashion","post-1930 vehicles","air conditioning"],"1930s-40s":["television","plastic consumer goods","jet aircraft","modern cars","color photography","computers","contemporary fashion","smartphones"],"1950s":["modern computers","smartphones","flat screen TV","modern cars","contemporary fashion","internet","digital displays","LED lighting"],"1960s":["personal computers","smartphones","flat screens","modern cars","contemporary fashion","internet","digital cameras","LED lighting"],"1970s":["personal computers","smartphones","flat screen TV","modern cars","contemporary fashion","internet","digital cameras","CDs","DVDs"],"1980s":["smartphones","flat screen TV","modern laptops","LCD monitors","contemporary fashion","streaming","Wi-Fi","hybrid cars"],"1990s":["smartphones","flat screen TV","social media","streaming services","contemporary fashion","modern laptops","hybrid cars","LED lighting"],"2000s":["modern smartphones post-2010","contemporary 2020s fashion","streaming dominance","social media saturation","electric vehicles"],"2010s":["contemporary 2020s fashion","AI assistants","modern electric vehicles","TikTok-era social media","current streaming interfaces","foldable phones"],contemporary:["futuristic technology","sci-fi elements","holographic displays","flying cars","robot servants","space colonies"],"near-future":["historical elements","outdated technology","vintage aesthetics"],"far-future":["contemporary technology","current fashion","present-day vehicles","modern architecture","today's electronics"]},hS={linear:"Linear","ease-in":"Ease In","ease-out":"Ease Out","ease-in-out":"Ease In-Out",spring:"Spring"},pS=[12,24,30,60],ct={character:"#3b82f6",setting:"#10b981",prop:"#f59e0b",style:"#d946ef",extras:"#64748b",shot:"#ec4899",outfit:"#06b6d4",camera:"#6366f1",action:"#f97316",text:"#84cc16",negative:"#f43f5e",parameters:"#14b8a6",timeperiod:"#eab308",edit:"#6b7280",intercept:"#f59e0b",reference:"#8b5cf6",output:"#ef4444",page:"#0ea5e9",transform:"#f472b6",comp:"#22c55e",timeline:"#a855f7",scene:"#8b5cf6"},ef={character:"Character",setting:"Setting",prop:"Prop",style:"Style",extras:"Extras",shot:"Shot",outfit:"Outfit",camera:"Camera",action:"Action",text:"Text",negative:"Negative",parameters:"Parameters",timeperiod:"Time Period",edit:"Edit",intercept:"Intercept",reference:"Reference",output:"Output",page:"Page",transform:"Transform",comp:"Comp",timeline:"Timeline",scene:"Scene"},nD={full:"Full Page","2-up-h":"2-Up Horizontal","2-up-v":"2-Up Vertical","3-up-left":"3-Up (Large Left)","3-up-right":"3-Up (Large Right)","3-up-top":"3-Up (Large Top)","3-up-bottom":"3-Up (Large Bottom)","4-up":"4-Up Grid","6-up":"6-Up Grid","manga-3":"Manga 3-Panel","manga-4":"Manga 4-Panel",inset:"Inset Panel"},rD={full:1,"2-up-h":2,"2-up-v":2,"3-up-left":3,"3-up-right":3,"3-up-top":3,"3-up-bottom":3,"4-up":4,"6-up":6,"manga-3":3,"manga-4":4,inset:2};function mS({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"}),x.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}function gS({size:e=24,className:t=""}){return x.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:x.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"})})}function yS({size:e=24,className:t=""}){return x.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:x.jsx("path",{d:"M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"})})}function xS({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M12 19l7-7 3 3-7 7-3-3z"}),x.jsx("path",{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"})]})}function vS({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z"}),x.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}function bS({size:e=24,className:t=""}){return x.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:x.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})})}function ig({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),x.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),x.jsx("path",{d:"M21 15l-5-5L5 21"})]})}function iD({size:e=24,className:t=""}){return x.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:x.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})}function aD({size:e=24,className:t=""}){return x.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:x.jsx("path",{d:"M21 12a9 9 0 11-6.219-8.56"})})}function wS({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),x.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}function ag({size:e=24,className:t=""}){return x.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:x.jsx("path",{d:"M6 9l6 6 6-6"})})}function tf({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),x.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}function oD({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("circle",{cx:"11",cy:"11",r:"8"}),x.jsx("path",{d:"M21 21l-4.35-4.35"})]})}function SS({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"}),x.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),x.jsx("polyline",{points:"7 3 7 8 15 8"})]})}function Sl({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"}),x.jsx("polyline",{points:"7 10 12 15 17 10"}),x.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}function _S({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),x.jsx("polyline",{points:"2 17 12 22 22 17"}),x.jsx("polyline",{points:"2 12 12 17 22 12"})]})}function Pv({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),x.jsx("path",{d:"M9 3v18"})]})}function pm({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),x.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),x.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),x.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),x.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),x.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),x.jsx("line",{x1:"1",y1:"14",x2:"7",y2:"14"}),x.jsx("line",{x1:"9",y1:"8",x2:"15",y2:"8"}),x.jsx("line",{x1:"17",y1:"16",x2:"23",y2:"16"})]})}function kS({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("circle",{cx:"12",cy:"12",r:"10"}),x.jsx("line",{x1:"4.93",y1:"4.93",x2:"19.07",y2:"19.07"})]})}function ES({size:e=24,className:t=""}){return x.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:x.jsx("path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"})})}function CS({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M16 21v-2a4 4 0 00-4-4H6a4 4 0 00-4 4v2"}),x.jsx("circle",{cx:"9",cy:"7",r:"4"}),x.jsx("path",{d:"M22 21v-2a4 4 0 00-3-3.87"}),x.jsx("path",{d:"M16 3.13a4 4 0 010 7.75"})]})}function og({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),x.jsx("path",{d:"m15 5 4 4"})]})}function sD({size:e=24,className:t=""}){return x.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:x.jsx("path",{d:"M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"})})}function lD({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M12.22 2h-.44a2 2 0 00-2 2v.18a2 2 0 01-1 1.73l-.43.25a2 2 0 01-2 0l-.15-.08a2 2 0 00-2.73.73l-.22.38a2 2 0 00.73 2.73l.15.1a2 2 0 011 1.72v.51a2 2 0 01-1 1.74l-.15.09a2 2 0 00-.73 2.73l.22.38a2 2 0 002.73.73l.15-.08a2 2 0 012 0l.43.25a2 2 0 011 1.73V20a2 2 0 002 2h.44a2 2 0 002-2v-.18a2 2 0 011-1.73l.43-.25a2 2 0 012 0l.15.08a2 2 0 002.73-.73l.22-.39a2 2 0 00-.73-2.73l-.15-.08a2 2 0 01-1-1.74v-.5a2 2 0 011-1.74l.15-.09a2 2 0 00.73-2.73l-.22-.38a2 2 0 00-2.73-.73l-.15.08a2 2 0 01-2 0l-.43-.25a2 2 0 01-1-1.73V4a2 2 0 00-2-2z"}),x.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function jS({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"}),x.jsx("polyline",{points:"17 8 12 3 7 8"}),x.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})}function Tf({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("polyline",{points:"3 6 5 6 21 6"}),x.jsx("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"}),x.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),x.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}function nf({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),x.jsx("polyline",{points:"14 2 14 8 20 8"})]})}function uD({size:e=24,className:t=""}){return x.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:x.jsx("polyline",{points:"20 6 9 17 4 12"})})}function NS({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),x.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function cD({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"}),x.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]})}function AS({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),x.jsx("path",{d:"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"})]})}function fD({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),x.jsx("path",{d:"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"}),x.jsx("path",{d:"M12 18l2 2 4-4"})]})}function dD({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),x.jsx("path",{d:"M3 3v5h5"}),x.jsx("path",{d:"M12 7v5l4 2"})]})}function hD({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),x.jsx("circle",{cx:"9",cy:"9",r:"2"}),x.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]})}function TS({size:e=24,className:t="",style:n}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,style:n,children:[x.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),x.jsx("path",{d:"M3 9h18"}),x.jsx("path",{d:"M9 21V9"})]})}function DS({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M15 3h6v6"}),x.jsx("path",{d:"M9 21H3v-6"}),x.jsx("path",{d:"M21 3l-7 7"}),x.jsx("path",{d:"M3 21l7-7"})]})}function zS({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("circle",{cx:"12",cy:"12",r:"10"}),x.jsx("path",{d:"m14.31 8 5.74 9.94"}),x.jsx("path",{d:"M9.69 8h11.48"}),x.jsx("path",{d:"m7.38 12 5.74-9.94"}),x.jsx("path",{d:"M9.69 16 3.95 6.06"}),x.jsx("path",{d:"M14.31 16H2.83"}),x.jsx("path",{d:"m16.62 12-5.74 9.94"})]})}function MS({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"}),x.jsx("path",{d:"M16 2v4"}),x.jsx("path",{d:"M8 2v4"}),x.jsx("path",{d:"M3 10h5"}),x.jsx("path",{d:"M17.5 17.5 16 16.3V14"}),x.jsx("circle",{cx:"16",cy:"16",r:"6"})]})}function mm({size:e=24,className:t=""}){return x.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:x.jsx("path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"})})}function pD({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),x.jsx("path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}),x.jsx("path",{d:"M7 3v4a1 1 0 0 0 1 1h7"})]})}function OS({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M3 12h18"}),x.jsx("path",{d:"M3 6h18"}),x.jsx("path",{d:"M3 18h18"}),x.jsx("circle",{cx:"6",cy:"6",r:"1.5",fill:"currentColor"}),x.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"}),x.jsx("circle",{cx:"18",cy:"18",r:"1.5",fill:"currentColor"})]})}function mD({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"m17 2 4 4-4 4"}),x.jsx("path",{d:"M3 11v-1a4 4 0 0 1 4-4h14"}),x.jsx("path",{d:"m7 22-4-4 4-4"}),x.jsx("path",{d:"M21 13v1a4 4 0 0 1-4 4H3"})]})}function RS({size:e=24,className:t=""}){return x.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:x.jsx("path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"})})}function gD({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),x.jsx("path",{d:"M15 3v18"})]})}function gm({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),x.jsx("polyline",{points:"3.29 7 12 12 20.71 7"}),x.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"12"})]})}function yD({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),x.jsx("path",{d:"M21 3v5h-5"}),x.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),x.jsx("path",{d:"M8 16H3v5"})]})}function xD({size:e=24,className:t=""}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),x.jsx("polyline",{points:"15 3 21 3 21 9"}),x.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})}const vD="modulepreload",bD=function(e){return"/flowboard-demo/app/"+e},Fv={},qv=function(t,n,i){let o=Promise.resolve();if(n&&n.length>0){let h=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};var l=h;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");o=h(n.map(m=>{if(m=bD(m),m in Fv)return;Fv[m]=!0;const p=m.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":vD,p||(y.as="script"),y.crossOrigin="",y.href=m,d&&y.setAttribute("nonce",d),document.head.appendChild(y),p)return new Promise((w,S)=>{y.addEventListener("load",w),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${m}`)))})}))}function s(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&s(d.reason);return t().catch(s)})},$v={apiKeys:{},defaults:{model:"mock",aspectRatio:"1:1"},autoSaveEnabled:!0,autoSaveToFileEnabled:!0,autoSaveIntervalMs:3e4},wD="flowboard-images",SD=1,fr="images";let fc=null;function Df(){return fc||(fc=new Promise((e,t)=>{const n=indexedDB.open(wD,SD);n.onerror=()=>{console.error("Failed to open IndexedDB:",n.error),t(n.error)},n.onsuccess=()=>{e(n.result)},n.onupgradeneeded=i=>{const o=i.target.result;if(!o.objectStoreNames.contains(fr)){const s=o.createObjectStore(fr,{keyPath:"id"});s.createIndex("projectId","projectId",{unique:!1}),s.createIndex("nodeId","nodeId",{unique:!1})}}}),fc)}function _D(e,t,n=0){return`${e}:${t}:${n}`}async function Fn(e,t,n,i=0){const o=await Df(),s=_D(e,t,i);return new Promise((l,c)=>{const h=o.transaction(fr,"readwrite").objectStore(fr),m={id:s,projectId:e,nodeId:t,imageData:n,createdAt:Date.now()},p=h.put(m);p.onsuccess=()=>l(s),p.onerror=()=>c(p.error)})}async function mo(e){const t=await Df();return new Promise((n,i)=>{const l=t.transaction(fr,"readonly").objectStore(fr).get(e);l.onsuccess=()=>{const c=l.result;n(c?.imageData||null)},l.onerror=()=>i(l.error)})}async function IS(e){const t=await Df();return new Promise((n,i)=>{const s=t.transaction(fr,"readwrite").objectStore(fr),c=s.index("projectId").getAllKeys(e);c.onsuccess=()=>{c.result.forEach(h=>s.delete(h)),n()},c.onerror=()=>i(c.error)})}async function kD(e){const t=await Df();return new Promise((n,i)=>{const c=t.transaction(fr,"readonly").objectStore(fr).index("projectId").getAll(e);c.onsuccess=()=>n(c.result||[]),c.onerror=()=>i(c.error)})}const Eo={PROJECTS:"flowboard:projects",CURRENT_PROJECT_ID:"flowboard:currentProjectId",SETTINGS:"flowboard:settings"},sg="1.0.0";async function Ur(e){const t=_l(),n=t.findIndex(l=>l.id===e.id),i=await Promise.all(e.nodes.map(async l=>{if(l.type==="output"&&l.data){const c=l.data,d=[];if(c.generatedImages&&c.generatedImages.length>0)for(let S=0;S<c.generatedImages.length;S++){const _=c.generatedImages[S];if(_.imageUrl&&_.imageUrl.startsWith("data:")){const b=await Fn(e.id,l.id,_.imageUrl,S);d.push(b)}}else if(c.generatedImageUrl&&c.generatedImageUrl.startsWith("data:")){const S=await Fn(e.id,l.id,c.generatedImageUrl,0);d.push(S)}const{generatedImageUrl:h,generatedImages:m,_imageRefs:p,_hasImages:g,...y}=c,w=d.length>0?d:p;return{...l,data:{...y,_imageRefs:w,_hasImages:w&&w.length>0}}}if(l.type==="page"&&l.data){const c=l.data,d=[];if(c.panelImages)for(let y=0;y<c.panelImages.length;y++){const w=c.panelImages[y];if(w&&w.startsWith("data:")){const S=await Fn(e.id,l.id,w,y);d.push(S)}else d.push(null)}const{panelImages:h,_panelImageRefs:m,...p}=c,g=d.length>0?d:m;return{...l,data:{...p,_panelImageRefs:g}}}if(l.type==="reference"&&l.data){const c=l.data;if(c.imageUrl&&c.imageUrl.startsWith("data:")){const d=await Fn(e.id,l.id,c.imageUrl,0),{imageUrl:h,...m}=c;return{...l,data:{...m,_imageRef:d}}}}return l})),o=Lt.getState(),s={...e,nodes:i,groups:o.groups,updatedAt:Date.now()};n>=0?t[n]=s:t.push(s);try{localStorage.setItem(Eo.PROJECTS,JSON.stringify(t))}catch(l){throw l instanceof DOMException&&(l.name==="QuotaExceededError"||l.code===22)?(console.error("localStorage quota exceeded. Consider clearing old projects or using file-based workflow."),new Error("Storage quota exceeded - localStorage is full")):(console.error("Failed to save project:",l),new Error("Failed to save project to storage"))}}async function Tc(e){const n=_l().find(s=>s.id===e);if(!n)return null;const i=await Promise.all(n.nodes.map(async s=>{if(s.type==="output"&&s.data){const l=s.data;if(l._imageRefs&&l._imageRefs.length>0){const c=[];for(const p of l._imageRefs){const g=await mo(p);g&&c.push({imageUrl:g})}const{_imageRefs:d,_hasImages:h,...m}=l;return{...s,data:{...m,generatedImages:c,generatedImageUrl:c[0]?.imageUrl,selectedImageIndex:0,status:c.length>0?"complete":"idle"}}}if(l.status==="generating")return{...s,data:{...l,status:"idle"}}}if(s.type==="page"&&s.data){const l=s.data;if(l._panelImageRefs){const c=[];for(const m of l._panelImageRefs)if(m){const p=await mo(m);c.push(p)}else c.push(null);const{_panelImageRefs:d,...h}=l;return{...s,data:{...h,panelImages:c}}}}if(s.type==="reference"&&s.data){const l=s.data;if(l._imageRef){const c=await mo(l._imageRef),{_imageRef:d,...h}=l;return{...s,data:{...h,imageUrl:c||void 0}}}}return s}));return Lt.getState().setGroups(n.groups||[]),{...n,nodes:i}}function fo(e){return _l().find(n=>n.id===e)||null}async function ED(e){const t=await Promise.all(e.nodes.map(async n=>{if(n.type==="output"&&n.data){const i=n.data;if(i._imageRefs&&i._imageRefs.length>0){const o=[];for(const d of i._imageRefs){const h=await mo(d);h&&o.push({imageUrl:h})}const{_imageRefs:s,_hasImages:l,...c}=i;return{...n,data:{...c,generatedImages:o,generatedImageUrl:o[0]?.imageUrl,selectedImageIndex:0,status:o.length>0?"complete":"idle"}}}if(i.status==="generating")return{...n,data:{...i,status:"idle"}}}if(n.type==="page"&&n.data){const i=n.data;if(i._panelImageRefs){const o=[];for(const c of i._panelImageRefs)if(c){const d=await mo(c);o.push(d)}else o.push(null);const{_panelImageRefs:s,...l}=i;return{...n,data:{...l,panelImages:o}}}}if(n.type==="reference"&&n.data){const i=n.data;if(i._imageRef){const o=await mo(i._imageRef),{_imageRef:s,...l}=i;return{...n,data:{...l,imageUrl:o||void 0}}}}return n}));return{...e,nodes:t}}async function LS(e){const t=_l().filter(n=>n.id!==e);localStorage.setItem(Eo.PROJECTS,JSON.stringify(t)),await IS(e),zf()===e&&Br(null)}function _l(){const e=localStorage.getItem(Eo.PROJECTS);if(!e)return[];try{return JSON.parse(e)}catch{return[]}}function kn(){return _l().map(e=>({id:e.id,name:e.name,createdAt:e.createdAt,updatedAt:e.updatedAt,nodeCount:e.nodes.length}))}function zf(){return localStorage.getItem(Eo.CURRENT_PROJECT_ID)}function Br(e){e?localStorage.setItem(Eo.CURRENT_PROJECT_ID,e):localStorage.removeItem(Eo.CURRENT_PROJECT_ID)}async function US(e){const t=await kD(e.id),n=new Map(t.map(o=>[o.id,o.imageData])),i=e.nodes.map(o=>{if(o.type==="output"&&o.data){const s=o.data;if(s._imageRefs){const l=s._imageRefs.map(m=>n.get(m)).filter(Boolean).map(m=>({imageUrl:m})),{_imageRefs:c,_hasImages:d,...h}=s;return{...o,data:{...h,generatedImages:l,generatedImageUrl:l[0]?.imageUrl,status:l.length>0?"complete":"idle"}}}}if(o.type==="page"&&o.data){const s=o.data;if(s._panelImageRefs){const l=s._panelImageRefs.map(h=>h&&n.get(h)||null),{_panelImageRefs:c,...d}=s;return{...o,data:{...d,panelImages:l}}}}if(o.type==="reference"&&o.data){const s=o.data;if(s._imageRef){const l=n.get(s._imageRef),{_imageRef:c,...d}=s;return{...o,data:{...d,imageUrl:l}}}}return o});return{version:sg,project:{...e,nodes:i},exportedAt:Date.now()}}async function rf(e){const t=await US(e);return JSON.stringify(t,null,2)}async function BS(e){console.log("[importProjectFromJson] Starting, json length:",e.length);try{let t;try{t=JSON.parse(e),console.log("[importProjectFromJson] JSON parsed successfully")}catch(o){return console.error("[importProjectFromJson] JSON parse error:",o),null}if(!t.project&&t.id&&t.nodes&&(t={version:sg,project:t,exportedAt:Date.now()}),!t.project||!t.project.nodes)return console.error("Import validation failed - missing project or nodes",{hasProject:!!t.project,hasNodes:!!t.project?.nodes,keys:Object.keys(t)}),null;t.project.id||(t.project.id=cl());const n=cl(),i=await Promise.all(t.project.nodes.map(async o=>{if(o.type==="output"&&o.data){const s=o.data,l=[];if(s.generatedImages)for(let m=0;m<s.generatedImages.length;m++){const p=s.generatedImages[m];if(p.imageUrl){const g=await Fn(n,o.id,p.imageUrl,m);l.push(g)}}else if(s.generatedImageUrl){const m=await Fn(n,o.id,s.generatedImageUrl,0);l.push(m)}const{generatedImageUrl:c,generatedImages:d,...h}=s;return{...o,data:{...h,status:s.status==="generating"?"idle":s.status,_imageRefs:l.length>0?l:void 0}}}if(o.type==="page"&&o.data){const s=o.data;if(s.panelImages){const l=[];for(let h=0;h<s.panelImages.length;h++){const m=s.panelImages[h];if(m){const p=await Fn(n,o.id,m,h);l.push(p)}else l.push(null)}const{panelImages:c,...d}=s;return{...o,data:{...d,_panelImageRefs:l}}}}if(o.type==="reference"&&o.data){const s=o.data;if(s.imageUrl){const l=await Fn(n,o.id,s.imageUrl,0),{imageUrl:c,...d}=s;return{...o,data:{...d,_imageRef:l}}}}return o}));return{...t.project,id:n,name:`${t.project.name} (Imported)`,nodes:i,createdAt:Date.now(),updatedAt:Date.now()}}catch(t){return console.error("Import failed:",t),null}}async function HS(e){console.log("[openProjectFromFile] Starting, json length:",e.length);try{let t;try{t=JSON.parse(e),console.log("[openProjectFromFile] JSON parsed successfully")}catch(l){return console.error("[openProjectFromFile] JSON parse error:",l),null}if(!t.project&&t.nodes&&(t={version:sg,project:t,exportedAt:Date.now()}),console.log("[openProjectFromFile] Checking data structure:",{hasProject:!!t.project,hasNodes:!!t.project?.nodes,nodeCount:t.project?.nodes?.length,keys:Object.keys(t)}),!t.project||!t.project.nodes)return console.error("[openProjectFromFile] Validation failed - missing project or nodes"),null;t.project.id||(t.project.id=cl());const n=t.project.id;console.log("[openProjectFromFile] Project ID:",n,"Name:",t.project.name),fo(n)&&(console.log("[openProjectFromFile] Deleting existing project images"),await IS(n)),console.log("[openProjectFromFile] Starting to process",t.project.nodes.length,"nodes");const o=await Promise.all(t.project.nodes.map(async(l,c)=>{try{if(console.log(`[openProjectFromFile] Processing node ${c}/${t.project.nodes.length}: type=${l.type}, id=${l.id}`),l.type==="output"&&l.data){const d=l.data,h=[];if(d.generatedImages)for(let y=0;y<d.generatedImages.length;y++){const w=d.generatedImages[y];if(w.imageUrl){const S=await Fn(n,l.id,w.imageUrl,y);h.push(S)}}else if(d.generatedImageUrl){const y=await Fn(n,l.id,d.generatedImageUrl,0);h.push(y)}const{generatedImageUrl:m,generatedImages:p,...g}=d;return{...l,data:{...g,status:d.status==="generating"?"idle":d.status,_imageRefs:h.length>0?h:void 0}}}if(l.type==="page"&&l.data){const d=l.data;if(d.panelImages){const h=[];for(let g=0;g<d.panelImages.length;g++){const y=d.panelImages[g];if(y){const w=await Fn(n,l.id,y,g);h.push(w)}else h.push(null)}const{panelImages:m,...p}=d;return{...l,data:{...p,_panelImageRefs:h}}}}if(l.type==="reference"&&l.data){const d=l.data;if(d.imageUrl){const h=await Fn(n,l.id,d.imageUrl,0),{imageUrl:m,...p}=d;return{...l,data:{...p,_imageRef:h}}}}return l}catch(d){return console.error(`[openProjectFromFile] Error processing node ${c}:`,d),l}}));console.log("[openProjectFromFile] Processed",o.length,"nodes successfully");const s={...t.project,id:n,nodes:o,createdAt:t.project.createdAt||Date.now(),updatedAt:Date.now()};return console.log("[openProjectFromFile] Returning project:",s.name,"with",s.nodes.length,"nodes"),s}catch(t){return console.error("[openProjectFromFile] Open failed:",t),null}}async function PS(e){const t=await rf(e),n=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=`${e.name.replace(/[^a-z0-9]/gi,"-").toLowerCase()}.flowboard.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)}function cl(){return`project-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}function ym(e="Untitled Project"){const t=Date.now();return{id:cl(),name:e,nodes:[],edges:[],createdAt:t,updatedAt:t}}const Vv=Object.freeze(Object.defineProperty({__proto__:null,createNewProject:ym,deleteProject:LS,downloadProjectAsFile:PS,exportProject:US,exportProjectAsJson:rf,generateProjectId:cl,getCurrentProjectId:zf,getProjectMetadataList:kn,hydrateProjectImages:ED,importProjectFromJson:BS,loadProject:Tc,loadProjectSync:fo,openProjectFromFile:HS,saveProject:Ur,setCurrentProjectId:Br},Symbol.toStringTag,{value:"Module"}));function lg(){return"showOpenFilePicker"in window&&"showSaveFilePicker"in window}async function CD(){if(!lg())return console.warn("File System Access API not supported"),null;try{const[e]=await window.showOpenFilePicker({types:[{description:"FlowBoard Project",accept:{"application/json":[".flowboard.json",".json"]}}],multiple:!1}),t=await e.getFile(),n=await t.text();return{handle:e,content:n,fileName:t.name,lastModified:t.lastModified}}catch(e){if(e.name==="AbortError")return null;throw console.error("Error opening file:",e),e}}async function jD(e,t){try{if(await e.queryPermission({mode:"readwrite"})!=="granted"&&await e.requestPermission({mode:"readwrite"})!=="granted")throw new Error("Permission denied");const i=await e.createWritable();return await i.write(t),await i.close(),{success:!0,lastModified:(await e.getFile()).lastModified}}catch(n){throw console.error("Error saving file:",n),n}}async function ND(e,t){if(!lg())return console.warn("File System Access API not supported"),null;try{const n=await window.showSaveFilePicker({suggestedName:t.endsWith(".flowboard.json")?t:`${t}.flowboard.json`,types:[{description:"FlowBoard Project",accept:{"application/json":[".flowboard.json"]}}]}),i=await n.createWritable();await i.write(e),await i.close();const o=await n.getFile();return{handle:n,lastModified:o.lastModified}}catch(n){if(n.name==="AbortError")return null;throw console.error("Error in Save As:",n),n}}async function AD(e,t){try{return(await e.getFile()).lastModified>t}catch(n){return console.error("Error checking file modification:",n),!1}}const Pr=Di(e=>({fileHandle:null,fileName:null,lastSavedAt:null,lastFileModified:null,isFileBacked:!1,setFileHandle:(t,n,i)=>e({fileHandle:t,fileName:n,lastFileModified:i,lastSavedAt:Date.now(),isFileBacked:!0}),clearFileHandle:()=>e({fileHandle:null,fileName:null,lastSavedAt:null,lastFileModified:null,isFileBacked:!1}),updateLastSaved:(t,n)=>e({lastSavedAt:t,lastFileModified:n})})),Fr=Di()((e,t)=>({currentProjectId:zf(),projectList:kn(),isLoading:!1,refreshProjectList:()=>{e({projectList:kn()})},createProject:async(n="Untitled Project")=>{const i=ym(n),o=et.getState(),s=Lt.getState(),l=Pr.getState();return await Ur(i),Br(i.id),o.setNodes([]),o.setEdges([]),o.setDirty(!1),s.setGroups([]),l.clearFileHandle(),e({currentProjectId:i.id,projectList:kn()}),i.id},loadProject:async n=>{e({isLoading:!0});try{const i=await Tc(n);if(!i)return e({isLoading:!1}),!1;const o=et.getState(),s=Pr.getState();return o.setNodes(i.nodes),o.setEdges(i.edges),o.setDirty(!1),s.clearFileHandle(),Br(n),e({currentProjectId:n,projectList:kn(),isLoading:!1}),!0}catch(i){return console.error("Failed to load project:",i),e({isLoading:!1}),!1}},saveCurrentProject:async()=>{const{currentProjectId:n}=t(),i=et.getState();if(!n){const l=ym();l.nodes=i.nodes,l.edges=i.edges,await Ur(l),Br(l.id),e({currentProjectId:l.id,projectList:kn()}),i.setDirty(!1);return}const o=fo(n),s={id:n,name:o?.name||"Untitled Project",nodes:i.nodes,edges:i.edges,createdAt:o?.createdAt||Date.now(),updatedAt:Date.now()};await Ur(s),i.setDirty(!1),e({projectList:kn()})},deleteProject:async n=>{const{currentProjectId:i}=t();if(await LS(n),i===n){const o=et.getState(),s=Pr.getState();o.setNodes([]),o.setEdges([]),o.setDirty(!1),s.clearFileHandle(),e({currentProjectId:null})}e({projectList:kn()})},renameProject:async(n,i)=>{const o=fo(n);o&&(o.name=i,await Ur(o),e({projectList:kn()}))},exportProject:async n=>{const i=await Tc(n);i&&await PS(i)},importProject:async n=>{const i=await BS(n);if(!i)return null;try{await Ur(i),e({projectList:kn()})}catch{console.warn("Could not save imported project to localStorage (quota exceeded). Loading directly.")}const o=et.getState(),s=Lt.getState(),{hydrateProjectImages:l}=await qv(async()=>{const{hydrateProjectImages:d}=await Promise.resolve().then(()=>Vv);return{hydrateProjectImages:d}},void 0),c=await l(i);return console.log("[importProject] Hydrated project:",{nodeCount:c.nodes.length,edgeCount:c.edges.length,groupCount:c.groups?.length??0}),o.setNodes(c.nodes),o.setEdges(c.edges),o.setDirty(!1),s.setGroups(c.groups||[]),Br(i.id),e({currentProjectId:i.id,isLoading:!1}),i.id},newUnsavedProject:()=>{const n=et.getState(),i=Lt.getState();n.setNodes([]),n.setEdges([]),n.setDirty(!1),i.setGroups([]),Br(null),e({currentProjectId:null})},isFileSystemSupported:()=>lg(),openFromFile:async()=>{const n=await CD();if(!n)return null;e({isLoading:!0});try{console.log("Opening file:",n.fileName,"size:",n.content.length);const i=await HS(n.content);if(!i)return e({isLoading:!1}),alert("Failed to parse project file. Make sure this is a valid FlowBoard project file."),null;console.log("Parsed project:",i.id,"nodes:",i.nodes.length);try{await Ur(i)}catch(d){console.warn("Could not save to localStorage (quota exceeded?), continuing with file-only mode:",d)}Pr.getState().setFileHandle(n.handle,n.fileName,n.lastModified);let s=await Tc(i.id);if(!s){console.log("localStorage load failed, hydrating directly from IndexedDB");const{hydrateProjectImages:d}=await qv(async()=>{const{hydrateProjectImages:h}=await Promise.resolve().then(()=>Vv);return{hydrateProjectImages:h}},void 0);s=await d(i)}const l=et.getState();return l.setNodes(s.nodes),l.setEdges(s.edges),l.setDirty(!1),Lt.getState().setGroups(s.groups||i.groups||[]),Br(i.id),e({currentProjectId:i.id,projectList:kn(),isLoading:!1}),i.id}catch(i){return console.error("Failed to open from file:",i),e({isLoading:!1}),alert(`Failed to open file: ${i instanceof Error?i.message:"Unknown error"}`),null}},saveCurrentToFile:async()=>{const{currentProjectId:n}=t(),i=Pr.getState();if(!n||!i.fileHandle)return console.warn("No file handle to save to"),!1;try{if(i.lastFileModified&&await AD(i.fileHandle,i.lastFileModified)&&!confirm("The file has been modified externally. Overwrite with your changes?"))return!1;const o=et.getState(),s=Lt.getState(),l=fo(n),c={id:n,name:l?.name||"Untitled Project",nodes:o.nodes,edges:o.edges,groups:s.groups,createdAt:l?.createdAt||Date.now(),updatedAt:Date.now()},d=await rf(c),h=await jD(i.fileHandle,d);return i.updateLastSaved(Date.now(),h.lastModified),await Ur(c),o.setDirty(!1),e({projectList:kn()}),!0}catch(o){return console.error("Failed to save to file:",o),await t().saveCurrentProject(),!1}},saveCurrentAsFile:async()=>{const{currentProjectId:n}=t(),i=et.getState(),o=Lt.getState(),s=n?fo(n):null,l={id:n||`project-${Date.now()}`,name:s?.name||"Untitled Project",nodes:i.nodes,edges:i.edges,groups:o.groups,createdAt:s?.createdAt||Date.now(),updatedAt:Date.now()};try{const c=await rf(l),d=l.name.replace(/[^a-z0-9]/gi,"-").toLowerCase(),h=await ND(c,d);return h?(Pr.getState().setFileHandle(h.handle,d+".flowboard.json",h.lastModified),await Ur(l),Br(l.id),i.setDirty(!1),e({currentProjectId:l.id,projectList:kn()}),!0):!1}catch(c){return console.error("Failed to Save As:",c),!1}}}));function TD(){const e=J.useRef(null),[t,n]=J.useState(null),[i,o]=J.useState(""),{currentProjectId:s,projectList:l,createProject:c,loadProject:d,saveCurrentProject:h,deleteProject:m,renameProject:p,exportProject:g,importProject:y,openFromFile:w,saveCurrentToFile:S,saveCurrentAsFile:_,isFileSystemSupported:b}=Fr(),k=et(X=>X.isDirty),{isFileBacked:E,fileName:j}=Pr(),A=()=>{k&&!confirm("You have unsaved changes. Create a new project anyway?")||c()},T=X=>{k&&s!==X&&!confirm("You have unsaved changes. Load this project anyway?")||d(X)},M=async()=>{E?await S()||console.log("Saved to localStorage as fallback"):await h()},P=async()=>{if(!(k&&!confirm("You have unsaved changes. Open a file anyway?")))try{const X=await w();X?console.log("Opened project from file:",X):console.log("Open returned null - user may have cancelled or file parse failed")}catch(X){console.error("Error opening file:",X),alert(`Failed to open file: ${X instanceof Error?X.message:"Unknown error"}`)}},F=async()=>{await _()&&console.log("Project saved to new file")},$=(X,Y)=>{Y.stopPropagation(),confirm(E&&s===X?"Remove from browser? (The file on disk will NOT be deleted)":"Remove this project from browser storage?")&&m(X)},Z=(X,Y)=>{Y.stopPropagation(),g(X)},D=()=>{e.current?.click()},q=async X=>{const Y=X.target.files?.[0];if(!Y)return;X.target.value="",console.log("Importing file:",Y.name,"size:",Y.size);let B;try{B=await Y.text()}catch(z){console.error("Failed to read file:",z),alert("Failed to read file");return}console.log("File content length:",B.length);try{const z=await y(B);console.log("Import result, projectId:",z),z?console.log("Project imported and loaded successfully"):alert("Invalid project file format. Make sure this is a FlowBoard project file.")}catch(z){console.error("Import error:",z),alert(`Import failed: ${z instanceof Error?z.message:"Unknown error"}`)}},N=(X,Y,B)=>{B.stopPropagation(),n(X),o(Y)},H=()=>{t&&i.trim()&&p(t,i.trim()),n(null)},U=X=>new Date(X).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),V=b();return x.jsxs("div",{className:"px-4 pt-2 pb-5 space-y-5",children:[E&&j&&x.jsxs("div",{className:"flex items-center gap-2 px-3 py-3 rounded-lg text-xs",style:{background:"var(--color-bg-elevated)",border:"1px solid var(--color-node-setting)"},children:[x.jsx(nf,{size:12,className:"text-green-400 flex-shrink-0"}),x.jsx("span",{className:"text-muted truncate",title:j,children:j})]}),x.jsxs("div",{className:"flex items-center justify-start gap-1",children:[x.jsx("button",{onClick:A,className:"w-8 h-8 flex items-center justify-center rounded-md text-muted hover:text-primary hover:bg-white/5 transition-colors",title:"New empty project",children:x.jsx(tf,{size:18})}),x.jsx("div",{className:"w-px h-5 bg-white/10 mx-1"}),V&&x.jsx("button",{onClick:P,className:"w-8 h-8 flex items-center justify-center rounded-md text-muted hover:text-primary hover:bg-white/5 transition-colors",title:"Open file (O) - load and link to file on disk",children:x.jsx(mm,{size:18})}),x.jsx("button",{onClick:M,disabled:!k,className:"w-8 h-8 flex items-center justify-center rounded-md transition-colors disabled:opacity-30",style:{color:k?"var(--color-node-setting)":"var(--color-text-muted)"},title:E?"Save to file (S)":"Save to browser (S)",children:x.jsx(SS,{size:18})}),V&&x.jsx("button",{onClick:F,className:"w-8 h-8 flex items-center justify-center rounded-md text-muted hover:text-primary hover:bg-white/5 transition-colors",title:"Save As (S) - save to new file on disk",children:x.jsx(pD,{size:18})}),x.jsx("button",{onClick:D,className:"w-8 h-8 flex items-center justify-center rounded-md text-muted hover:text-primary hover:bg-white/5 transition-colors",title:"Import - load copy from .json file",children:x.jsx(jS,{size:18})})]}),x.jsx("input",{ref:e,type:"file",accept:".json,.flowboard.json",onChange:q,className:"hidden"}),x.jsx("div",{className:"space-y-1",children:l.length===0?x.jsx("div",{className:"text-xs text-muted py-4 text-center",children:"No saved projects yet"}):l.sort((X,Y)=>Y.updatedAt-X.updatedAt).map(X=>x.jsxs("div",{onClick:()=>T(X.id),className:`group flex items-center gap-3 px-3 py-3 rounded-lg transition-colors cursor-pointer ${s===X.id?"bg-bg-hover":"hover:bg-bg-hover"}`,style:{border:s===X.id?"1px solid var(--color-border-medium)":"1px solid transparent"},children:[x.jsx(nf,{size:14,className:s===X.id?"text-primary":"text-muted"}),x.jsxs("div",{className:"flex-1 min-w-0 py-2",children:[t===X.id?x.jsx("input",{type:"text",value:i,onChange:Y=>o(Y.target.value),onBlur:H,onKeyDown:Y=>{Y.key==="Enter"&&H(),Y.key==="Escape"&&n(null)},onClick:Y=>Y.stopPropagation(),autoFocus:!0,className:"w-full text-xs font-medium text-primary bg-transparent border-none outline-none"}):x.jsx("div",{className:"text-xs font-medium text-primary truncate",onDoubleClick:Y=>N(X.id,X.name,Y),children:X.name}),x.jsxs("div",{className:"text-[10px] text-muted",children:[U(X.updatedAt),"  ",X.nodeCount," nodes"]})]}),x.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[x.jsx("button",{onClick:Y=>Z(X.id,Y),className:"w-6 h-6 rounded flex items-center justify-center text-muted hover:text-primary hover:bg-bg-hover",title:"Export",children:x.jsx(Sl,{size:12})}),x.jsx("button",{onClick:Y=>$(X.id,Y),className:"w-6 h-6 rounded flex items-center justify-center text-muted hover:text-error hover:bg-bg-hover",title:"Delete",children:x.jsx(Tf,{size:12})})]})]},X.id))})]})}function DD(e,t){let n;try{n=e()}catch{return}return{getItem:o=>{var s;const l=d=>d===null?null:JSON.parse(d,void 0),c=(s=n.getItem(o))!=null?s:null;return c instanceof Promise?c.then(l):l(c)},setItem:(o,s)=>n.setItem(o,JSON.stringify(s,void 0)),removeItem:o=>n.removeItem(o)}}const xm=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(i){return xm(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return xm(i)(n)}}}},zD=(e,t)=>(n,i,o)=>{let s={storage:DD(()=>localStorage),partialize:_=>_,version:0,merge:(_,b)=>({...b,..._}),...t},l=!1,c=0;const d=new Set,h=new Set;let m=s.storage;if(!m)return e((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(..._)},i,o);const p=()=>{const _=s.partialize({...i()});return m.setItem(s.name,{state:_,version:s.version})},g=o.setState;o.setState=(_,b)=>(g(_,b),p());const y=e((..._)=>(n(..._),p()),i,o);o.getInitialState=()=>y;let w;const S=()=>{var _,b;if(!m)return;const k=++c;l=!1,d.forEach(j=>{var A;return j((A=i())!=null?A:y)});const E=((b=s.onRehydrateStorage)==null?void 0:b.call(s,(_=i())!=null?_:y))||void 0;return xm(m.getItem.bind(m))(s.name).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==s.version){if(s.migrate){const A=s.migrate(j.state,j.version);return A instanceof Promise?A.then(T=>[!0,T]):[!0,A]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,j.state];return[!1,void 0]}).then(j=>{var A;if(k!==c)return;const[T,M]=j;if(w=s.merge(M,(A=i())!=null?A:y),n(w,!0),T)return p()}).then(()=>{k===c&&(E?.(w,void 0),w=i(),l=!0,h.forEach(j=>j(w)))}).catch(j=>{k===c&&E?.(void 0,j)})};return o.persist={setOptions:_=>{s={...s,..._},_.storage&&(m=_.storage)},clearStorage:()=>{m?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>S(),hasHydrated:()=>l,onHydrate:_=>(d.add(_),()=>{d.delete(_)}),onFinishHydration:_=>(h.add(_),()=>{h.delete(_)})},s.skipHydration||S(),w||y},FS=zD,$t=Di()(FS(e=>({...$v,setApiKey:(t,n)=>e(i=>({apiKeys:{...i.apiKeys,[t]:n}})),clearApiKey:t=>e(n=>{const{[t]:i,...o}=n.apiKeys;return{apiKeys:o}}),setDefaults:t=>e(n=>({defaults:{...n.defaults,...t}})),setAutoSaveEnabled:t=>e({autoSaveEnabled:t}),setAutoSaveToFileEnabled:t=>e({autoSaveToFileEnabled:t}),setAutoSaveInterval:t=>e({autoSaveIntervalMs:t}),resetSettings:()=>e($v)}),{name:"flowboard:settings",partialize:e=>({apiKeys:e.apiKeys,defaults:e.defaults,autoSaveEnabled:e.autoSaveEnabled,autoSaveToFileEnabled:e.autoSaveToFileEnabled,autoSaveIntervalMs:e.autoSaveIntervalMs})})),MD=[{value:"mock",label:"Mock",provider:"No API"},{value:"gemini-pro",label:"Gemini 3 Pro",provider:"Google"},{value:"gemini-flash",label:"Gemini 2.5 Flash",provider:"Google"},{value:"sd3-large",label:"SD3 Large",provider:"Stability AI"},{value:"sd3-large-turbo",label:"SD3 Large Turbo",provider:"Stability AI"},{value:"sd3-medium",label:"SD3 Medium",provider:"Stability AI"},{value:"sdxl-1.0",label:"SDXL 1.0",provider:"Stability AI"},{value:"flux-schnell",label:"Flux Schnell",provider:"fal.ai"},{value:"flux-dev",label:"Flux Dev",provider:"fal.ai"},{value:"turbo",label:"Turbo",provider:"fal.ai"},{value:"sdxl-turbo",label:"SDXL Turbo",provider:"fal.ai"}],OD=[{value:"1:1",label:"1:1 Square"},{value:"16:9",label:"16:9 Landscape"},{value:"9:16",label:"9:16 Portrait"},{value:"2:3",label:"2:3 Portrait"},{value:"3:2",label:"3:2 Landscape"}];function RD(){const[e,t]=J.useState(!1),[n,i]=J.useState(!1),[o,s]=J.useState(!1),l=$t(w=>w.apiKeys),c=$t(w=>w.defaults),d=$t(w=>w.autoSaveEnabled),h=$t(w=>w.autoSaveToFileEnabled),m=$t(w=>w.setApiKey),p=$t(w=>w.setDefaults),g=$t(w=>w.setAutoSaveEnabled),y=$t(w=>w.setAutoSaveToFileEnabled);return x.jsxs("div",{style:{padding:"0 16px 16px 16px"},children:[x.jsx(xp,{children:"API Keys"}),x.jsxs("div",{className:"space-y-5 mb-6",children:[x.jsx(vp,{label:"Gemini",value:l.gemini||"",onChange:w=>m("gemini",w),show:e,onToggleShow:()=>t(!e),placeholder:"Paste your API key",helpText:"Google AI Studio",helpUrl:"https://aistudio.google.com/apikey"}),x.jsx(vp,{label:"Stability AI",value:l.stability||"",onChange:w=>m("stability",w),show:n,onToggleShow:()=>i(!n),placeholder:"Paste your API key",helpText:"Stability AI Platform",helpUrl:"https://platform.stability.ai/account/keys"}),x.jsx(vp,{label:"fal.ai",value:l.fal||"",onChange:w=>m("fal",w),show:o,onToggleShow:()=>s(!o),placeholder:"Paste your API key",helpText:"fal.ai Dashboard",helpUrl:"https://fal.ai/dashboard/keys"})]}),x.jsx(xp,{children:"Generation Defaults"}),x.jsxs("div",{className:"space-y-4 mb-6",children:[x.jsx(Yv,{label:"Model",children:x.jsx(Gv,{value:c.model,onChange:w=>p({model:w}),options:MD.map(w=>({value:w.value,label:`${w.label} (${w.provider})`}))})}),x.jsx(Yv,{label:"Aspect Ratio",children:x.jsx(Gv,{value:c.aspectRatio,onChange:w=>p({aspectRatio:w}),options:OD})})]}),x.jsx(xp,{children:"Auto-save"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("label",{className:"flex items-center justify-between cursor-pointer py-1",children:[x.jsxs("div",{children:[x.jsx("span",{className:"text-sm text-secondary",children:"Browser backup"}),x.jsx("p",{className:"text-xs text-muted",children:"Save to localStorage every 2s"})]}),x.jsx(Xv,{checked:d,onChange:g})]}),x.jsxs("label",{className:"flex items-center justify-between cursor-pointer py-1",children:[x.jsxs("div",{children:[x.jsx("span",{className:"text-sm text-secondary",children:"File sync"}),x.jsx("p",{className:"text-xs text-muted",children:"Also write to open file"})]}),x.jsx(Xv,{checked:h,onChange:y})]})]})]})}function xp({children:e}){return x.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wider mb-3 mt-1",style:{color:"var(--color-text-muted)"},children:e})}function vp({label:e,value:t,onChange:n,show:i,onToggleShow:o,placeholder:s,helpText:l,helpUrl:c}){const d=t.length>0;return x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("span",{className:"text-sm font-medium text-primary",children:e}),d&&x.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-medium text-emerald-400",children:[x.jsx(uD,{size:12}),"Connected"]})]}),x.jsxs("div",{className:"flex items-center rounded-lg overflow-hidden",style:{background:"var(--color-bg-elevated)",border:d?"1px solid rgba(52, 211, 153, 0.4)":"1px solid var(--color-border-subtle)"},children:[x.jsx("input",{type:i?"text":"password",value:t,onChange:h=>n(h.target.value),placeholder:s,className:"flex-1 px-4 py-3 bg-transparent border-none outline-none text-sm text-primary font-mono placeholder:text-muted"}),x.jsx("button",{onClick:o,className:"px-4 py-3 text-muted hover:text-primary transition-colors",type:"button",children:i?x.jsx(cD,{size:18}):x.jsx(NS,{size:18})})]}),x.jsxs("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 mt-2 text-xs text-muted hover:text-primary transition-colors",children:["Get key from",x.jsx("span",{className:"underline underline-offset-2",children:l}),x.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"}),x.jsx("polyline",{points:"15 3 21 3 21 9"}),x.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]})}function Yv({label:e,children:t}){return x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-secondary mb-2",children:e}),t]})}function Gv({value:e,onChange:t,options:n}){return x.jsxs("div",{className:"relative",children:[x.jsx("select",{value:e,onChange:i=>t(i.target.value),className:"w-full rounded-lg text-sm text-primary outline-none cursor-pointer appearance-none",style:{background:"var(--color-bg-elevated)",border:"1px solid var(--color-border-subtle)",padding:"12px 44px 12px 16px"},children:n.map(i=>x.jsx("option",{value:i.value,children:i.label},i.value))}),x.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-muted",children:x.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:x.jsx("path",{d:"M6 9l6 6 6-6"})})})]})}function Xv({checked:e,onChange:t}){return x.jsx("button",{type:"button",role:"switch","aria-checked":e,onClick:()=>t(!e),className:"relative inline-flex h-6 w-11 flex-shrink-0 items-center rounded-full transition-colors duration-200",style:{background:e?"linear-gradient(135deg, #10b981, #059669)":"var(--color-bg-elevated)",border:e?"none":"1px solid var(--color-border-subtle)"},children:x.jsx("span",{className:"inline-block h-4 w-4 rounded-full bg-white shadow transition-transform duration-200",style:{transform:e?"translateX(22px)":"translateX(4px)"}})})}const Dc=Di()(FS(e=>({entries:[],maxEntries:50,addEntry:t=>e(n=>({entries:[{...t,id:crypto.randomUUID(),timestamp:Date.now()},...n.entries].slice(0,n.maxEntries)})),removeEntry:t=>e(n=>({entries:n.entries.filter(i=>i.id!==t)})),clearHistory:()=>e({entries:[]})}),{name:"flowboard-history"})),ID={mock:"Mock","gemini-pro":"Gemini 3 Pro","gemini-flash":"Gemini 2.5 Flash","flux-schnell":"Flux Schnell","flux-dev":"Flux Dev",turbo:"Turbo","sdxl-turbo":"SDXL Turbo"};function LD(){const e=Dc(s=>s.entries),t=Dc(s=>s.removeEntry),n=Dc(s=>s.clearHistory),i=async s=>{try{await navigator.clipboard.writeText(s)}catch(l){console.error("Failed to copy:",l)}},o=s=>new Date(s).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.length===0?x.jsx("div",{style:{padding:"0 16px 16px 16px"},children:x.jsx("p",{className:"text-sm text-muted italic",children:"No generations yet. Images will appear here after you generate them."})}):x.jsxs("div",{style:{padding:"0 16px 16px 16px"},children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsxs("span",{className:"text-[10px] font-semibold uppercase tracking-wider text-muted",children:[e.length," generation",e.length!==1?"s":""]}),x.jsx("button",{onClick:n,className:"text-[10px] text-muted hover:text-error transition-colors",children:"Clear All"})]}),x.jsx("div",{className:"space-y-3",children:e.slice(0,10).map(s=>x.jsx(UD,{entry:s,onCopyPrompt:()=>i(s.prompt),onDelete:()=>t(s.id),formatTime:o},s.id))}),e.length>10&&x.jsxs("p",{className:"text-[10px] text-muted mt-3 text-center",children:["+ ",e.length-10," more in history"]})]})}function UD({entry:e,onCopyPrompt:t,onDelete:n,formatTime:i}){return x.jsxs("div",{className:"rounded-lg overflow-hidden",style:{background:"var(--color-bg-elevated)",border:"1px solid var(--color-border-subtle)"},children:[x.jsxs("div",{className:"relative aspect-video",children:[x.jsx("img",{src:e.imageUrl,alt:"Generated",className:"w-full h-full object-cover"}),x.jsxs("div",{className:"absolute inset-0 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center gap-2",style:{background:"rgba(0, 0, 0, 0.6)"},children:[x.jsx("button",{onClick:t,className:"p-2 rounded-md bg-white/10 hover:bg-white/20 transition-colors",title:"Copy prompt",children:x.jsx(AS,{size:14,className:"text-white"})}),x.jsx("button",{onClick:n,className:"p-2 rounded-md bg-white/10 hover:bg-red-500/50 transition-colors",title:"Delete",children:x.jsx(Tf,{size:14,className:"text-white"})})]})]}),x.jsxs("div",{className:"p-2",children:[x.jsxs("div",{className:"flex items-center justify-between mb-1",children:[x.jsx("span",{className:"text-[10px] font-medium text-secondary",children:ID[e.model]||e.model}),x.jsx("span",{className:"text-[10px] text-muted",children:i(e.timestamp)})]}),e.seed!==void 0&&x.jsxs("span",{className:"text-[10px] text-muted font-mono",children:["seed: ",e.seed]}),x.jsx("p",{className:"text-[10px] text-muted mt-1 line-clamp-2",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.prompt})]})]})}const BD=[{type:"character",icon:x.jsx(mS,{size:14}),defaultData:{label:"Character",name:"New Character",description:"Character description..."}},{type:"setting",icon:x.jsx(gS,{size:14}),defaultData:{label:"Setting",name:"New Setting",description:"Setting description..."}},{type:"prop",icon:x.jsx(yS,{size:14}),defaultData:{label:"Prop",name:"New Prop",description:"Prop description..."}},{type:"style",icon:x.jsx(xS,{size:14}),defaultData:{label:"Style",name:"New Style",description:"Style description..."}},{type:"extras",icon:x.jsx(CS,{size:14}),defaultData:{label:"Extras",name:"Background Extras",description:"Crowd of people, busy street..."}},{type:"shot",icon:x.jsx(vS,{size:14}),defaultData:{label:"Shot",name:"New Shot",preset:"medium",description:""}},{type:"outfit",icon:x.jsx(ES,{size:14}),defaultData:{label:"Outfit",name:"New Outfit",description:"Outfit description..."}},{type:"camera",icon:x.jsx(zS,{size:14}),defaultData:{label:"Camera",name:"Camera Settings",depthOfField:"deep",lensType:"standard",cameraFeel:"locked",filmStock:"digital",exposure:"balanced",vignette:"none",promptPosition:"after-shot"}},{type:"action",icon:x.jsx(bS,{size:14}),defaultData:{label:"Action",content:"Describe the action..."}},{type:"text",icon:x.jsx(RS,{size:14}),defaultData:{label:"Text",name:"New Text",textType:"speech",mode:"render",content:"",speaker:"",position:""}},{type:"negative",icon:x.jsx(kS,{size:14}),defaultData:{label:"Negative",name:"Negative Prompt",content:"blurry, low quality, distorted..."}},{type:"parameters",icon:x.jsx(pm,{size:14}),defaultData:{label:"Parameters",model:"mock",aspectRatio:"1:1",seed:void 0}},{type:"timeperiod",icon:x.jsx(MS,{size:14}),defaultData:{label:"Time Period",name:"New Era",eraPreset:"custom",customEra:"",region:"",description:"",useAutoNegatives:!0,customNegatives:""}},{type:"edit",icon:x.jsx(og,{size:14}),defaultData:{label:"Edit",refinement:"Make the colors more vibrant..."}},{type:"intercept",icon:x.jsx(pm,{size:14}),defaultData:{label:"Intercept",name:"Intercept",assembledPrompt:"",editedPrompt:"",isEdited:!1,assembledNegative:"",editedNegative:"",isNegativeEdited:!1}},{type:"reference",icon:x.jsx(hD,{size:14}),defaultData:{label:"Reference",name:"Reference Image",imageType:"image",imageUrl:void 0}},{type:"output",icon:x.jsx(ig,{size:14}),defaultData:{label:"Output",promptPreview:"",status:"idle"}},{type:"page",icon:x.jsx(TS,{size:14}),defaultData:{label:"Page",name:"Page Layout",layout:"4-up",gutter:8,backgroundColor:"#ffffff",panelImages:[],outputWidth:1200,outputHeight:1600}},{type:"transform",icon:x.jsx(DS,{size:14}),defaultData:{label:"Transform",name:"Transform",scale:1,offsetX:0,offsetY:0,rotation:0,flipH:!1,flipV:!1,alignment:"center"}},{type:"comp",icon:x.jsx(_S,{size:14}),defaultData:{label:"Comp",name:"Composition",outputWidth:1920,outputHeight:1080,backgroundColor:"#000000",layers:{back:{scale:1,offsetX:0,offsetY:0,rotation:0,flipH:!1,flipV:!1,opacity:100},mid:{scale:1,offsetX:0,offsetY:0,rotation:0,flipH:!1,flipV:!1,opacity:100},fore:{scale:1,offsetX:0,offsetY:0,rotation:0,flipH:!1,flipV:!1,opacity:100},ext:{scale:1,offsetX:0,offsetY:0,rotation:0,flipH:!1,flipV:!1,opacity:100}}}},{type:"timeline",icon:x.jsx(OS,{size:14}),defaultData:{label:"Timeline",name:"Timeline",fps:24,duration:2,keyframes:[],loop:!0,easing:"ease-in-out",currentTime:0,isPlaying:!1,playDirection:1}},{type:"scene",icon:x.jsx(gm,{size:14}),defaultData:{label:"Scene",name:"Scene",mode:"scene",resolution:{width:1024,height:768},ideConnected:!1}}];function HD(){const[e,t]=J.useState(!1),[n,i]=J.useState(new Set(["nodes","properties","projects"])),[o,s]=J.useState(""),{nodes:l,addNode:c,updateNodeData:d}=et(),{selectedNodeId:h,selectNode:m}=Qc(),p=bl(),g=h?l.find(k=>k.id===h):null,y=k=>{i(E=>{const j=new Set(E);return j.has(k)?j.delete(k):j.add(k),j})},w=J.useCallback(()=>{const k=document.querySelector(".react-flow");if(!k)return{x:250,y:150};const E=k.getBoundingClientRect(),j=E.width/2,A=E.height/2;return p.screenToFlowPosition({x:E.left+j,y:E.top+A})},[p]),S=k=>{const E=w(),j=(Math.random()-.5)*50,A={id:uS(k.type),type:k.type,position:{x:E.x+j,y:E.y+j},data:{...k.defaultData}};c(A)},_=(k,E)=>{h&&d(h,{[k]:E})},b=BD.filter(k=>ef[k.type].toLowerCase().includes(o.toLowerCase()));return e?x.jsx("div",{className:"h-full flex flex-col items-center py-4",style:{width:"52px",background:"var(--color-bg-panel)",borderRight:"1px solid var(--color-border-subtle)"},children:x.jsx("button",{onClick:()=>t(!1),className:"w-10 h-10 rounded-lg flex items-center justify-center text-muted hover:text-primary hover:bg-bg-hover transition-colors",title:"Expand panel",children:x.jsx(Pv,{size:18})})}):x.jsxs("aside",{className:"h-full flex flex-col",style:{width:"300px",background:"var(--color-bg-panel)",borderRight:"1px solid var(--color-border-subtle)"},children:[x.jsxs("div",{className:"flex items-center justify-between px-5 py-4",style:{borderBottom:"1px solid var(--color-border-subtle)"},children:[x.jsx("span",{className:"text-sm font-semibold text-secondary",children:"FlowBoard"}),x.jsx("button",{onClick:()=>t(!0),className:"w-8 h-8 rounded-lg flex items-center justify-center text-muted hover:text-primary hover:bg-bg-hover transition-colors",title:"Collapse panel",children:x.jsx(Pv,{size:16})})]}),x.jsxs("div",{className:"flex-1 overflow-y-auto",children:[x.jsx(Ns,{title:"Projects",isExpanded:n.has("projects"),onToggle:()=>y("projects"),icon:x.jsx(sD,{size:14}),children:x.jsx(TD,{})}),x.jsx(Ns,{title:"Add Nodes",isExpanded:n.has("nodes"),onToggle:()=>y("nodes"),children:x.jsxs("div",{className:"px-4 pb-5",children:[x.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-lg mb-4",style:{background:"var(--color-bg-elevated)",border:"1px solid var(--color-border-subtle)"},children:[x.jsx(oD,{size:14,className:"text-muted"}),x.jsx("input",{type:"text",placeholder:"Search nodes...",value:o,onChange:k=>s(k.target.value),className:"flex-1 bg-transparent border-none outline-none text-sm text-primary"})]}),x.jsxs("div",{className:"space-y-6",children:[x.jsx(to,{label:"Assets",configs:b.filter(k=>["character","setting","prop","style","extras"].includes(k.type)),onAddNode:S}),x.jsx(to,{label:"Modifiers",configs:b.filter(k=>["shot","outfit","camera"].includes(k.type)),onAddNode:S}),x.jsx(to,{label:"Scene",configs:b.filter(k=>["action","text","negative","parameters","timeperiod","edit","intercept","reference"].includes(k.type)),onAddNode:S}),x.jsx(to,{label:"Output",configs:b.filter(k=>["output","page","comp"].includes(k.type)),onAddNode:S}),x.jsx(to,{label:"Animation",configs:b.filter(k=>["transform","timeline"].includes(k.type)),onAddNode:S}),x.jsx(to,{label:"3D / IDE",configs:b.filter(k=>["scene"].includes(k.type)),onAddNode:S})]})]})}),g&&x.jsx(Ns,{title:"Properties",subtitle:ef[g.type],color:ct[g.type],isExpanded:n.has("properties"),onToggle:()=>y("properties"),onClose:()=>m(null),children:x.jsx("div",{className:"px-4 pb-5",children:PD(g.type,g.data,_)})}),x.jsx(Ns,{title:"History",isExpanded:n.has("history"),onToggle:()=>y("history"),icon:x.jsx(dD,{size:14}),children:x.jsx(LD,{})}),x.jsx(Ns,{title:"Settings",isExpanded:n.has("settings"),onToggle:()=>y("settings"),icon:x.jsx(lD,{size:14}),children:x.jsx(RD,{})})]})]})}function Ns({title:e,subtitle:t,color:n,icon:i,isExpanded:o,onToggle:s,onClose:l,children:c}){return x.jsxs("div",{style:{borderBottom:"1px solid var(--color-border-subtle)"},children:[x.jsxs("button",{onClick:s,className:"w-full flex items-center gap-3 px-5 py-4 hover:bg-bg-hover transition-colors text-left",children:[x.jsx(ag,{size:14,className:`text-muted transition-transform ${o?"":"-rotate-90"}`}),i&&x.jsx("span",{className:"text-muted",children:i}),x.jsx("span",{className:"text-sm font-semibold text-secondary flex-1",children:e}),t&&x.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-md",style:{background:n?`${n}20`:"var(--color-bg-elevated)",color:n||"var(--color-text-muted)"},children:t}),l&&x.jsx("span",{role:"button",tabIndex:0,onClick:d=>{d.stopPropagation(),l()},onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&(d.stopPropagation(),l())},className:"w-6 h-6 rounded-md flex items-center justify-center text-muted hover:text-primary hover:bg-bg-hover cursor-pointer",children:x.jsx(wS,{size:14})})]}),o&&c]})}function to({label:e,configs:t,onAddNode:n}){return t.length===0?null:x.jsxs("div",{children:[x.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wider text-muted mb-3",style:{paddingLeft:"4px"},children:e}),x.jsx("div",{className:"space-y-2",children:t.map(i=>x.jsxs("button",{onClick:()=>n(i),className:"w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors hover:bg-bg-hover text-left",style:{background:"rgba(255,255,255,0.02)"},children:[x.jsx("div",{className:"w-8 h-8 rounded-md flex items-center justify-center",style:{background:`${ct[i.type]}20`,color:ct[i.type]},children:i.icon}),x.jsx("span",{className:"text-sm font-medium text-primary flex-1",children:ef[i.type]}),x.jsx(tf,{size:12,className:"text-muted opacity-50"})]},i.type))})]})}function PD(e,t,n){switch(e){case"character":case"setting":case"prop":case"style":case"extras":return x.jsxs("div",{className:"space-y-6",children:[x.jsx(yt,{label:"Name",value:t.name||"",onChange:i=>n("name",i)}),x.jsx(Gn,{label:"Description",value:t.description||"",onChange:i=>n("description",i),placeholder:"Enter description..."})]});case"shot":return x.jsxs("div",{className:"space-y-6",children:[x.jsx(yt,{label:"Name",value:t.name||"",onChange:i=>n("name",i)}),x.jsx(Ct,{label:"Shot Type",value:t.preset||"medium",options:Object.entries(Qm).map(([i,o])=>({value:i,label:o})),onChange:i=>n("preset",i)}),x.jsx(Gn,{label:"Notes",value:t.description||"",onChange:i=>n("description",i),placeholder:"Additional framing notes...",rows:2})]});case"action":return x.jsx(Gn,{label:"Action",value:t.content||"",onChange:i=>n("content",i),placeholder:"Describe what's happening...",rows:5});case"text":return x.jsxs("div",{className:"space-y-6",children:[x.jsx(yt,{label:"Name",value:t.name||"",onChange:i=>n("name",i)}),x.jsx(Ct,{label:"Text Type",value:t.textType||"speech",options:Object.entries(ng).map(([i,o])=>({value:i,label:o})),onChange:i=>n("textType",i)}),x.jsx(Ct,{label:"Mode",value:t.mode||"render",options:Object.entries(tD).map(([i,o])=>({value:i,label:o})),onChange:i=>n("mode",i)}),x.jsx(Gn,{label:"Content",value:t.content||"",onChange:i=>n("content",i),placeholder:"Enter the text content...",rows:4}),x.jsx(yt,{label:"Speaker (optional)",value:t.speaker||"",onChange:i=>n("speaker",i),placeholder:"Character name..."}),x.jsx(yt,{label:"Position (optional)",value:t.position||"",onChange:i=>n("position",i),placeholder:"e.g., top left, center..."})]});case"outfit":return x.jsxs("div",{className:"space-y-6",children:[x.jsx(yt,{label:"Name",value:t.name||"",onChange:i=>n("name",i)}),x.jsx(Gn,{label:"Description",value:t.description||"",onChange:i=>n("description",i),placeholder:"Describe the outfit..."})]});case"camera":return x.jsxs("div",{className:"space-y-6",children:[x.jsx(yt,{label:"Name",value:t.name||"",onChange:i=>n("name",i)}),x.jsx(Ct,{label:"Lens Type",value:t.lensType||"standard",options:Object.entries(Jc).map(([i,o])=>({value:i,label:o})),onChange:i=>n("lensType",i)}),x.jsx(Ct,{label:"Depth of Field",value:t.depthOfField||"deep",options:Object.entries(Jm).map(([i,o])=>({value:i,label:o})),onChange:i=>n("depthOfField",i)}),x.jsx(Ct,{label:"Camera Feel",value:t.cameraFeel||"locked",options:Object.entries(cS).map(([i,o])=>({value:i,label:o})),onChange:i=>n("cameraFeel",i)}),x.jsx(Ct,{label:"Film Stock",value:t.filmStock||"digital",options:Object.entries(eg).map(([i,o])=>({value:i,label:o})),onChange:i=>n("filmStock",i)}),x.jsx(Ct,{label:"Exposure",value:t.exposure||"balanced",options:Object.entries(fS).map(([i,o])=>({value:i,label:o})),onChange:i=>n("exposure",i)}),x.jsx(Ct,{label:"Vignette",value:t.vignette||"none",options:Object.entries(tg).map(([i,o])=>({value:i,label:o})),onChange:i=>n("vignette",i)}),x.jsx(Ct,{label:"Prompt Position",value:t.promptPosition||"after-shot",options:Object.entries(eD).map(([i,o])=>({value:i,label:o})),onChange:i=>n("promptPosition",i)})]});case"negative":return x.jsxs("div",{className:"space-y-6",children:[x.jsx(yt,{label:"Name",value:t.name||"",onChange:i=>n("name",i)}),x.jsx(Gn,{label:"Negative Prompts",value:t.content||"",onChange:i=>n("content",i),placeholder:"blurry, low quality, distorted...",rows:4})]});case"parameters":return x.jsxs("div",{className:"space-y-6",children:[x.jsx(Ct,{label:"Model",value:t.model||"mock",options:[{value:"mock",label:"Mock (No API)"},{value:"gemini-pro",label:"Gemini 3 Pro"},{value:"gemini-flash",label:"Gemini 2.5 Flash"},{value:"sd3-large",label:"SD3 Large (Stability)"},{value:"sd3-large-turbo",label:"SD3 Large Turbo (Stability)"},{value:"sd3-medium",label:"SD3 Medium (Stability)"},{value:"sdxl-1.0",label:"SDXL 1.0 (Stability)"},{value:"flux-schnell",label:"Flux Schnell (fal.ai)"},{value:"flux-dev",label:"Flux Dev (fal.ai)"},{value:"turbo",label:"Turbo (fal.ai)"},{value:"sdxl-turbo",label:"SDXL Turbo (fal.ai)"}],onChange:i=>n("model",i)}),x.jsx(Ct,{label:"Aspect Ratio",value:t.aspectRatio||"1:1",options:[{value:"1:1",label:"1:1 Square"},{value:"16:9",label:"16:9 Landscape"},{value:"9:16",label:"9:16 Portrait"},{value:"2:3",label:"2:3 Portrait"},{value:"3:2",label:"3:2 Landscape"}],onChange:i=>n("aspectRatio",i)}),x.jsx(Ct,{label:"Resolution",value:t.resolution||"1K",options:[{value:"1K",label:"1K (1024px)"},{value:"2K",label:"2K (2048px)"},{value:"4K",label:"4K (4096px)"}],onChange:i=>n("resolution",i)}),x.jsx(Ci,{label:"Temperature",value:t.temperature??1,min:0,max:2,step:.1,onChange:i=>n("temperature",i),showHints:!0}),x.jsx(yt,{label:"Seed (optional)",value:t.seed?.toString()||"",onChange:i=>n("seed",i?parseInt(i,10):""),placeholder:"Random seed for reproducibility"}),x.jsx(Ct,{label:"Number of Images",value:String(t.numberOfImages||1),options:[{value:"1",label:"1 image"},{value:"2",label:"2 images"},{value:"3",label:"3 images"},{value:"4",label:"4 images"}],onChange:i=>n("numberOfImages",parseInt(i,10))})]});case"edit":return x.jsx(Gn,{label:"Refinement Instructions",value:t.refinement||"",onChange:i=>n("refinement",i),placeholder:"Make the colors more vibrant...",rows:4});case"timeperiod":return x.jsxs("div",{className:"space-y-6",children:[x.jsx(yt,{label:"Name",value:t.name||"",onChange:i=>n("name",i)}),x.jsx(Ct,{label:"Era Preset",value:t.eraPreset||"custom",options:Object.entries(rg).map(([i,o])=>({value:i,label:o})),onChange:i=>n("eraPreset",i)}),t.eraPreset==="custom"&&x.jsx(yt,{label:"Custom Era",value:t.customEra||"",onChange:i=>n("customEra",i),placeholder:"e.g., 1920s Prohibition-era"}),x.jsx(yt,{label:"Region",value:t.region||"",onChange:i=>n("region",i),placeholder:"e.g., United States, Victorian England"}),x.jsx(Gn,{label:"Period Notes",value:t.description||"",onChange:i=>n("description",i),placeholder:"Additional context about the era...",rows:2}),x.jsx(As,{label:"Use Auto-Negatives",checked:t.useAutoNegatives??!0,onChange:i=>n("useAutoNegatives",i)}),t.eraPreset!=="custom"&&t.useAutoNegatives&&x.jsxs("div",{className:"p-3 rounded-lg text-[11px] text-muted",style:{background:"var(--color-bg-elevated)",border:"1px solid var(--color-border-subtle)"},children:[x.jsx("div",{className:"font-semibold text-secondary mb-1",children:"Auto-excluded:"}),x.jsx("div",{className:"line-clamp-3",children:dS[t.eraPreset]?.join(", ")||"None"})]}),x.jsx(Gn,{label:"Custom Negatives",value:t.customNegatives||"",onChange:i=>n("customNegatives",i),placeholder:"Additional things to avoid...",rows:2})]});case"reference":return x.jsxs("div",{className:"space-y-6",children:[x.jsx(yt,{label:"Name",value:t.name||"",onChange:i=>n("name",i)}),x.jsx(Ct,{label:"Reference Type",value:t.imageType||"image",options:[{value:"image",label:"Image"},{value:"character",label:"Character"},{value:"setting",label:"Setting / Environment"},{value:"prop",label:"Prop / Object"},{value:"style",label:"Style / Aesthetic"},{value:"scene",label:"Scene / Composition"},{value:"mood",label:"Mood / Atmosphere"}],onChange:i=>n("imageType",i)}),x.jsx(Gn,{label:"Description (optional)",value:t.description||"",onChange:i=>n("description",i),placeholder:"Describe what this reference shows...",rows:2})]});case"output":return x.jsx("div",{className:"text-sm text-muted leading-relaxed",children:"Connect nodes to build your prompt. Click Generate on the node to create an image."});case"page":return x.jsxs("div",{className:"space-y-6",children:[x.jsx(yt,{label:"Name",value:t.name||"",onChange:i=>n("name",i),placeholder:"Page Layout"}),x.jsx(As,{label:"Use Num Grid",checked:t.useNumGrid||!1,onChange:i=>n("useNumGrid",i)}),t.useNumGrid?x.jsx(yt,{label:"Number of Panels",value:String(t.numPanels||4),onChange:i=>{const o=parseInt(i,10);!isNaN(o)&&o>=1&&o<=16&&n("numPanels",o)},placeholder:"4"}):x.jsx(Ct,{label:"Layout",value:t.layout||"4-up",options:Object.entries(nD).map(([i,o])=>({value:i,label:o})),onChange:i=>n("layout",i)}),x.jsx(Ci,{label:"Gutter (px)",value:t.gutter??8,min:0,max:32,step:2,onChange:i=>n("gutter",i)}),x.jsx(yt,{label:"Background Color",value:t.backgroundColor||"#ffffff",onChange:i=>n("backgroundColor",i),placeholder:"#ffffff"}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsx(yt,{label:"Width (px)",value:String(t.outputWidth||1200),onChange:i=>n("outputWidth",parseInt(i,10)||1200),placeholder:"1200"}),x.jsx(yt,{label:"Height (px)",value:String(t.outputHeight||1600),onChange:i=>n("outputHeight",parseInt(i,10)||1600),placeholder:"1600"})]})]});case"transform":return x.jsxs("div",{className:"space-y-6",children:[x.jsx(yt,{label:"Name",value:t.name||"",onChange:i=>n("name",i),placeholder:"Transform"}),x.jsx(Ci,{label:"Scale",value:t.scale??1,min:.1,max:3,step:.1,onChange:i=>n("scale",i)}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsx(Ci,{label:"Offset X",value:t.offsetX??0,min:-100,max:100,step:5,onChange:i=>n("offsetX",i)}),x.jsx(Ci,{label:"Offset Y",value:t.offsetY??0,min:-100,max:100,step:5,onChange:i=>n("offsetY",i)})]}),x.jsx(Ci,{label:"Rotation",value:t.rotation??0,min:0,max:360,step:15,onChange:i=>n("rotation",i)}),x.jsx(Ct,{label:"Alignment",value:t.alignment||"center",options:[{value:"center",label:"Center"},{value:"top",label:"Top"},{value:"bottom",label:"Bottom"},{value:"left",label:"Left"},{value:"right",label:"Right"},{value:"top-left",label:"Top Left"},{value:"top-right",label:"Top Right"},{value:"bottom-left",label:"Bottom Left"},{value:"bottom-right",label:"Bottom Right"}],onChange:i=>n("alignment",i)}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx(As,{label:"Flip Horizontal",checked:t.flipH||!1,onChange:i=>n("flipH",i)}),x.jsx(As,{label:"Flip Vertical",checked:t.flipV||!1,onChange:i=>n("flipV",i)})]}),x.jsx(Ci,{label:"Opacity",value:t.opacity??100,min:0,max:100,step:5,onChange:i=>n("opacity",i)})]});case"comp":return x.jsxs("div",{className:"space-y-6",children:[x.jsx(yt,{label:"Name",value:t.name||"",onChange:i=>n("name",i),placeholder:"Composition"}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsx(yt,{label:"Width (px)",value:String(t.outputWidth||1920),onChange:i=>n("outputWidth",parseInt(i,10)||1920),placeholder:"1920"}),x.jsx(yt,{label:"Height (px)",value:String(t.outputHeight||1080),onChange:i=>n("outputHeight",parseInt(i,10)||1080),placeholder:"1080"})]}),x.jsx(yt,{label:"Background Color",value:t.backgroundColor||"#000000",onChange:i=>n("backgroundColor",i),placeholder:"#000000"}),x.jsxs("div",{className:"text-xs text-muted mt-2 leading-relaxed",children:["Connect images to layer inputs:",x.jsx("br",{}),x.jsx("span",{className:"text-secondary",children:"Ext"})," (top)  ",x.jsx("span",{className:"text-secondary",children:"Back"})," (bottom)"]})]});case"timeline":return x.jsxs("div",{className:"space-y-6",children:[x.jsx(yt,{label:"Name",value:t.name||"",onChange:i=>n("name",i),placeholder:"Timeline"}),x.jsx(Ct,{label:"FPS",value:String(t.fps||24),options:pS.map(i=>({value:String(i),label:`${i} fps`})),onChange:i=>n("fps",parseInt(i,10))}),x.jsx(Ci,{label:"Duration (sec)",value:t.duration??2,min:.1,max:30,step:.1,onChange:i=>n("duration",i)}),x.jsx(Ct,{label:"Default Easing",value:t.easing||"ease-in-out",options:Object.entries(hS).map(([i,o])=>({value:i,label:o})),onChange:i=>n("easing",i)}),x.jsx(As,{label:"Loop Animation",checked:t.loop??!0,onChange:i=>n("loop",i)}),x.jsxs("div",{className:"text-xs text-muted leading-relaxed",children:[x.jsx("span",{className:"text-secondary",children:t.keyframes?.length||0})," keyframes "," ",x.jsx("span",{className:"text-secondary",children:Math.ceil((t.fps||24)*(t.duration||2))})," frames"]})]});case"scene":return x.jsxs("div",{className:"space-y-6",children:[x.jsx(yt,{label:"Name",value:t.name||"",onChange:i=>n("name",i),placeholder:"Scene"}),x.jsx(Ct,{label:"Mode",value:t.mode||"scene",options:[{value:"scene",label:"3D Reference"},{value:"shader",label:"Shader FX"}],onChange:i=>n("mode",i)}),t.sceneDescription&&x.jsx(Gn,{label:"Scene Description",value:t.sceneDescription||"",onChange:i=>n("sceneDescription",i),placeholder:"Description from IDE...",rows:3}),x.jsx("div",{className:"text-xs text-muted leading-relaxed",children:"Open the Three.js IDE and click Capture to import a 3D scene view as reference."})]});default:return x.jsx("div",{className:"text-sm text-muted",children:"No properties available."})}}function yt({label:e,value:t,onChange:n,placeholder:i}){return x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-muted",style:{marginBottom:"10px",marginLeft:"4px"},children:e}),x.jsx("input",{type:"text",value:t,onChange:o=>n(o.target.value),placeholder:i,className:"w-full rounded-lg text-sm text-primary outline-none transition-all",style:{background:"var(--color-bg-elevated)",border:"1px solid var(--color-border-subtle)",padding:"14px 16px"}})]})}function Gn({label:e,value:t,onChange:n,placeholder:i,rows:o=3}){return x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-muted",style:{marginBottom:"10px",marginLeft:"4px"},children:e}),x.jsx("textarea",{value:t,onChange:s=>n(s.target.value),placeholder:i,rows:o,className:"w-full rounded-lg text-sm font-mono text-primary outline-none resize-y transition-all",style:{background:"var(--color-bg-elevated)",border:"1px solid var(--color-border-subtle)",padding:"14px 16px",lineHeight:1.6}})]})}function Ct({label:e,value:t,options:n,onChange:i}){return x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-muted",style:{marginBottom:"10px",marginLeft:"4px"},children:e}),x.jsx("select",{value:t,onChange:o=>i(o.target.value),className:"w-full rounded-lg text-sm text-primary outline-none cursor-pointer appearance-none transition-all",style:{background:"var(--color-bg-elevated)",border:"1px solid var(--color-border-subtle)",padding:"14px 16px",paddingRight:"44px",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 16px center"},children:n.map(o=>x.jsx("option",{value:o.value,children:o.label},o.value))})]})}function Ci({label:e,value:t,min:n,max:i,step:o,onChange:s,showHints:l=!1}){const[c,d]=J.useState(!1),[h,m]=J.useState(!1),p=(t-n)/(i-n)*100,g=o/10,y=c?g:o;J.useEffect(()=>{if(!h)return;const _=k=>{k.key==="Shift"&&d(!0)},b=k=>{k.key==="Shift"&&d(!1)};return window.addEventListener("keydown",_),window.addEventListener("keyup",b),()=>{window.removeEventListener("keydown",_),window.removeEventListener("keyup",b)}},[h]);const w=_=>{_.key==="Shift"&&d(!0)},S=_=>{_.key==="Shift"&&d(!1)};return x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between",style:{marginBottom:"12px",marginLeft:"4px",marginRight:"4px"},children:[x.jsxs("label",{className:"text-xs font-semibold uppercase tracking-wide text-muted",children:[e,c&&x.jsx("span",{className:"ml-1 text-[9px] text-secondary",children:"(fine)"})]}),x.jsx("span",{className:"text-xs font-mono text-secondary",children:t.toFixed(c?2:1)})]}),x.jsxs("div",{className:"relative h-10 flex items-center",style:{marginLeft:"4px",marginRight:"4px"},children:[x.jsx("div",{className:"absolute w-full h-2 rounded-full",style:{background:"var(--color-bg-elevated)"}}),x.jsx("div",{className:"absolute h-2 rounded-full",style:{background:"var(--color-node-parameters)",width:`${p}%`}}),x.jsx("input",{type:"range",value:t,min:n,max:i,step:y,onChange:_=>s(parseFloat(_.target.value)),onKeyDown:w,onKeyUp:S,onFocus:()=>m(!0),onBlur:()=>{m(!1),d(!1)},className:"absolute w-full h-8 opacity-0 cursor-pointer",style:{zIndex:2}}),x.jsx("div",{className:"absolute w-4 h-4 rounded-full border-2 pointer-events-none",style:{background:"var(--color-bg-panel)",borderColor:"var(--color-node-parameters)",left:`calc(${p}% - 8px)`,boxShadow:"0 2px 4px rgba(0,0,0,0.3)"}})]}),l&&x.jsxs("div",{className:"flex justify-between text-[10px] text-muted",style:{marginTop:"8px",marginLeft:"4px",marginRight:"4px"},children:[x.jsx("span",{children:"Precise"}),x.jsx("span",{children:"Creative"})]})]})}function As({label:e,checked:t,onChange:n}){return x.jsx("div",{children:x.jsxs("div",{className:"flex items-center gap-3 rounded-lg cursor-pointer transition-colors hover:opacity-80",style:{background:t?"rgba(14, 165, 233, 0.15)":"var(--color-bg-elevated)",border:`1px solid ${t?"var(--color-node-page)":"var(--color-border-subtle)"}`,padding:"14px 16px"},onClick:()=>n(!t),children:[x.jsx("div",{className:"w-5 h-5 rounded flex items-center justify-center transition-colors flex-shrink-0",style:{background:t?"var(--color-node-page)":"transparent",border:`2px solid ${t?"var(--color-node-page)":"var(--color-text-muted)"}`},children:t&&x.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",children:x.jsx("polyline",{points:"20 6 9 17 4 12"})})}),x.jsx("span",{className:"text-sm text-primary",children:e})]})})}function FD(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const qD=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,$D=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,VD={};function Zv(e,t){return(VD.jsx?$D:qD).test(e)}const YD=/[ \t\n\f\r]/g;function GD(e){return typeof e=="object"?e.type==="text"?Kv(e.value):!1:Kv(e)}function Kv(e){return e.replace(YD,"")===""}class kl{constructor(t,n,i){this.normal=n,this.property=t,i&&(this.space=i)}}kl.prototype.normal={};kl.prototype.property={};kl.prototype.space=void 0;function qS(e,t){const n={},i={};for(const o of e)Object.assign(n,o.property),Object.assign(i,o.normal);return new kl(n,i,t)}function vm(e){return e.toLowerCase()}class pn{constructor(t,n){this.attribute=n,this.property=t}}pn.prototype.attribute="";pn.prototype.booleanish=!1;pn.prototype.boolean=!1;pn.prototype.commaOrSpaceSeparated=!1;pn.prototype.commaSeparated=!1;pn.prototype.defined=!1;pn.prototype.mustUseProperty=!1;pn.prototype.number=!1;pn.prototype.overloadedBoolean=!1;pn.prototype.property="";pn.prototype.spaceSeparated=!1;pn.prototype.space=void 0;let XD=0;const Fe=pa(),Mt=pa(),bm=pa(),Ee=pa(),pt=pa(),go=pa(),En=pa();function pa(){return 2**++XD}const wm=Object.freeze(Object.defineProperty({__proto__:null,boolean:Fe,booleanish:Mt,commaOrSpaceSeparated:En,commaSeparated:go,number:Ee,overloadedBoolean:bm,spaceSeparated:pt},Symbol.toStringTag,{value:"Module"})),bp=Object.keys(wm);class ug extends pn{constructor(t,n,i,o){let s=-1;if(super(t,n),Wv(this,"space",o),typeof i=="number")for(;++s<bp.length;){const l=bp[s];Wv(this,bp[s],(i&wm[l])===wm[l])}}}ug.prototype.defined=!0;function Wv(e,t,n){n&&(e[t]=n)}function No(e){const t={},n={};for(const[i,o]of Object.entries(e.properties)){const s=new ug(i,e.transform(e.attributes||{},i),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),t[i]=s,n[vm(i)]=i,n[vm(s.attribute)]=i}return new kl(t,n,e.space)}const $S=No({properties:{ariaActiveDescendant:null,ariaAtomic:Mt,ariaAutoComplete:null,ariaBusy:Mt,ariaChecked:Mt,ariaColCount:Ee,ariaColIndex:Ee,ariaColSpan:Ee,ariaControls:pt,ariaCurrent:null,ariaDescribedBy:pt,ariaDetails:null,ariaDisabled:Mt,ariaDropEffect:pt,ariaErrorMessage:null,ariaExpanded:Mt,ariaFlowTo:pt,ariaGrabbed:Mt,ariaHasPopup:null,ariaHidden:Mt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:pt,ariaLevel:Ee,ariaLive:null,ariaModal:Mt,ariaMultiLine:Mt,ariaMultiSelectable:Mt,ariaOrientation:null,ariaOwns:pt,ariaPlaceholder:null,ariaPosInSet:Ee,ariaPressed:Mt,ariaReadOnly:Mt,ariaRelevant:null,ariaRequired:Mt,ariaRoleDescription:pt,ariaRowCount:Ee,ariaRowIndex:Ee,ariaRowSpan:Ee,ariaSelected:Mt,ariaSetSize:Ee,ariaSort:null,ariaValueMax:Ee,ariaValueMin:Ee,ariaValueNow:Ee,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function VS(e,t){return t in e?e[t]:t}function YS(e,t){return VS(e,t.toLowerCase())}const ZD=No({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:go,acceptCharset:pt,accessKey:pt,action:null,allow:null,allowFullScreen:Fe,allowPaymentRequest:Fe,allowUserMedia:Fe,alt:null,as:null,async:Fe,autoCapitalize:null,autoComplete:pt,autoFocus:Fe,autoPlay:Fe,blocking:pt,capture:null,charSet:null,checked:Fe,cite:null,className:pt,cols:Ee,colSpan:null,content:null,contentEditable:Mt,controls:Fe,controlsList:pt,coords:Ee|go,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Fe,defer:Fe,dir:null,dirName:null,disabled:Fe,download:bm,draggable:Mt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Fe,formTarget:null,headers:pt,height:Ee,hidden:bm,high:Ee,href:null,hrefLang:null,htmlFor:pt,httpEquiv:pt,id:null,imageSizes:null,imageSrcSet:null,inert:Fe,inputMode:null,integrity:null,is:null,isMap:Fe,itemId:null,itemProp:pt,itemRef:pt,itemScope:Fe,itemType:pt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Fe,low:Ee,manifest:null,max:null,maxLength:Ee,media:null,method:null,min:null,minLength:Ee,multiple:Fe,muted:Fe,name:null,nonce:null,noModule:Fe,noValidate:Fe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Fe,optimum:Ee,pattern:null,ping:pt,placeholder:null,playsInline:Fe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Fe,referrerPolicy:null,rel:pt,required:Fe,reversed:Fe,rows:Ee,rowSpan:Ee,sandbox:pt,scope:null,scoped:Fe,seamless:Fe,selected:Fe,shadowRootClonable:Fe,shadowRootDelegatesFocus:Fe,shadowRootMode:null,shape:null,size:Ee,sizes:null,slot:null,span:Ee,spellCheck:Mt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ee,step:null,style:null,tabIndex:Ee,target:null,title:null,translate:null,type:null,typeMustMatch:Fe,useMap:null,value:Mt,width:Ee,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:pt,axis:null,background:null,bgColor:null,border:Ee,borderColor:null,bottomMargin:Ee,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Fe,declare:Fe,event:null,face:null,frame:null,frameBorder:null,hSpace:Ee,leftMargin:Ee,link:null,longDesc:null,lowSrc:null,marginHeight:Ee,marginWidth:Ee,noResize:Fe,noHref:Fe,noShade:Fe,noWrap:Fe,object:null,profile:null,prompt:null,rev:null,rightMargin:Ee,rules:null,scheme:null,scrolling:Mt,standby:null,summary:null,text:null,topMargin:Ee,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ee,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Fe,disableRemotePlayback:Fe,prefix:null,property:null,results:Ee,security:null,unselectable:null},space:"html",transform:YS}),KD=No({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:En,accentHeight:Ee,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ee,amplitude:Ee,arabicForm:null,ascent:Ee,attributeName:null,attributeType:null,azimuth:Ee,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ee,by:null,calcMode:null,capHeight:Ee,className:pt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ee,diffuseConstant:Ee,direction:null,display:null,dur:null,divisor:Ee,dominantBaseline:null,download:Fe,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ee,enableBackground:null,end:null,event:null,exponent:Ee,externalResourcesRequired:null,fill:null,fillOpacity:Ee,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:go,g2:go,glyphName:go,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ee,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ee,horizOriginX:Ee,horizOriginY:Ee,id:null,ideographic:Ee,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ee,k:Ee,k1:Ee,k2:Ee,k3:Ee,k4:Ee,kernelMatrix:En,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ee,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ee,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ee,overlineThickness:Ee,paintOrder:null,panose1:null,path:null,pathLength:Ee,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:pt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ee,pointsAtY:Ee,pointsAtZ:Ee,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:En,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:En,rev:En,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:En,requiredFeatures:En,requiredFonts:En,requiredFormats:En,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ee,specularExponent:Ee,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ee,strikethroughThickness:Ee,string:null,stroke:null,strokeDashArray:En,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ee,strokeOpacity:Ee,strokeWidth:null,style:null,surfaceScale:Ee,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:En,tabIndex:Ee,tableValues:null,target:null,targetX:Ee,targetY:Ee,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:En,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ee,underlineThickness:Ee,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ee,values:null,vAlphabetic:Ee,vMathematical:Ee,vectorEffect:null,vHanging:Ee,vIdeographic:Ee,version:null,vertAdvY:Ee,vertOriginX:Ee,vertOriginY:Ee,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ee,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:VS}),GS=No({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),XS=No({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:YS}),ZS=No({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),WD={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},QD=/[A-Z]/g,Qv=/-[a-z]/g,JD=/^data[-\w.:]+$/i;function e6(e,t){const n=vm(t);let i=t,o=pn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&JD.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Qv,n6);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Qv.test(s)){let l=s.replace(QD,t6);l.charAt(0)!=="-"&&(l="-"+l),t="data"+l}}o=ug}return new o(i,t)}function t6(e){return"-"+e.toLowerCase()}function n6(e){return e.charAt(1).toUpperCase()}const r6=qS([$S,ZD,GS,XS,ZS],"html"),cg=qS([$S,KD,GS,XS,ZS],"svg");function i6(e){return e.join(" ").trim()}var no={},wp,Jv;function a6(){if(Jv)return wp;Jv=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,c=/^\s+|\s+$/g,d=`
`,h="/",m="*",p="",g="comment",y="declaration";function w(_,b){if(typeof _!="string")throw new TypeError("First argument must be a string");if(!_)return[];b=b||{};var k=1,E=1;function j(N){var H=N.match(t);H&&(k+=H.length);var U=N.lastIndexOf(d);E=~U?N.length-U:E+N.length}function A(){var N={line:k,column:E};return function(H){return H.position=new T(N),F(),H}}function T(N){this.start=N,this.end={line:k,column:E},this.source=b.source}T.prototype.content=_;function M(N){var H=new Error(b.source+":"+k+":"+E+": "+N);if(H.reason=N,H.filename=b.source,H.line=k,H.column=E,H.source=_,!b.silent)throw H}function P(N){var H=N.exec(_);if(H){var U=H[0];return j(U),_=_.slice(U.length),H}}function F(){P(n)}function $(N){var H;for(N=N||[];H=Z();)H!==!1&&N.push(H);return N}function Z(){var N=A();if(!(h!=_.charAt(0)||m!=_.charAt(1))){for(var H=2;p!=_.charAt(H)&&(m!=_.charAt(H)||h!=_.charAt(H+1));)++H;if(H+=2,p===_.charAt(H-1))return M("End of comment missing");var U=_.slice(2,H-2);return E+=2,j(U),_=_.slice(H),E+=2,N({type:g,comment:U})}}function D(){var N=A(),H=P(i);if(H){if(Z(),!P(o))return M("property missing ':'");var U=P(s),V=N({type:y,property:S(H[0].replace(e,p)),value:U?S(U[0].replace(e,p)):p});return P(l),V}}function q(){var N=[];$(N);for(var H;H=D();)H!==!1&&(N.push(H),$(N));return N}return F(),q()}function S(_){return _?_.replace(c,p):p}return wp=w,wp}var eb;function o6(){if(eb)return no;eb=1;var e=no&&no.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(no,"__esModule",{value:!0}),no.default=n;const t=e(a6());function n(i,o){let s=null;if(!i||typeof i!="string")return s;const l=(0,t.default)(i),c=typeof o=="function";return l.forEach(d=>{if(d.type!=="declaration")return;const{property:h,value:m}=d;c?o(h,m,d):m&&(s=s||{},s[h]=m)}),s}return no}var Ts={},tb;function s6(){if(tb)return Ts;tb=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,o=/^-(ms)-/,s=function(h){return!h||n.test(h)||e.test(h)},l=function(h,m){return m.toUpperCase()},c=function(h,m){return"".concat(m,"-")},d=function(h,m){return m===void 0&&(m={}),s(h)?h:(h=h.toLowerCase(),m.reactCompat?h=h.replace(o,c):h=h.replace(i,c),h.replace(t,l))};return Ts.camelCase=d,Ts}var Ds,nb;function l6(){if(nb)return Ds;nb=1;var e=Ds&&Ds.__importDefault||function(o){return o&&o.__esModule?o:{default:o}},t=e(o6()),n=s6();function i(o,s){var l={};return!o||typeof o!="string"||(0,t.default)(o,function(c,d){c&&d&&(l[(0,n.camelCase)(c,s)]=d)}),l}return i.default=i,Ds=i,Ds}var u6=l6();const c6=jo(u6),KS=WS("end"),fg=WS("start");function WS(e){return t;function t(n){const i=n&&n.position&&n.position[e]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function f6(e){const t=fg(e),n=KS(e);if(t&&n)return{start:t,end:n}}function Xs(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?rb(e.position):"start"in e||"end"in e?rb(e):"line"in e||"column"in e?Sm(e):""}function Sm(e){return ib(e&&e.line)+":"+ib(e&&e.column)}function rb(e){return Sm(e&&e.start)+"-"+Sm(e&&e.end)}function ib(e){return e&&typeof e=="number"?e:1}class Zt extends Error{constructor(t,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let o="",s={},l=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?o=t:!s.cause&&t&&(l=!0,o=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof i=="string"){const d=i.indexOf(":");d===-1?s.ruleId=i:(s.source=i.slice(0,d),s.ruleId=i.slice(d+1))}if(!s.place&&s.ancestors&&s.ancestors){const d=s.ancestors[s.ancestors.length-1];d&&(s.place=d.position)}const c=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=c?c.line:void 0,this.name=Xs(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=l&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Zt.prototype.file="";Zt.prototype.name="";Zt.prototype.reason="";Zt.prototype.message="";Zt.prototype.stack="";Zt.prototype.column=void 0;Zt.prototype.line=void 0;Zt.prototype.ancestors=void 0;Zt.prototype.cause=void 0;Zt.prototype.fatal=void 0;Zt.prototype.place=void 0;Zt.prototype.ruleId=void 0;Zt.prototype.source=void 0;const dg={}.hasOwnProperty,d6=new Map,h6=/[A-Z]/g,p6=new Set(["table","tbody","thead","tfoot","tr"]),m6=new Set(["td","th"]),QS="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function g6(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let i;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=k6(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=_6(n,t.jsx,t.jsxs)}const o={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:i,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?cg:r6,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=JS(o,e,void 0);return s&&typeof s!="string"?s:o.create(e,o.Fragment,{children:s||void 0},void 0)}function JS(e,t,n){if(t.type==="element")return y6(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return x6(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return b6(e,t,n);if(t.type==="mdxjsEsm")return v6(e,t);if(t.type==="root")return w6(e,t,n);if(t.type==="text")return S6(e,t)}function y6(e,t,n){const i=e.schema;let o=i;t.tagName.toLowerCase()==="svg"&&i.space==="html"&&(o=cg,e.schema=o),e.ancestors.push(t);const s=t_(e,t.tagName,!1),l=E6(e,t);let c=pg(e,t);return p6.has(t.tagName)&&(c=c.filter(function(d){return typeof d=="string"?!GD(d):!0})),e_(e,l,s,t),hg(l,c),e.ancestors.pop(),e.schema=i,e.create(t,s,l,n)}function x6(e,t){if(t.data&&t.data.estree&&e.evaluater){const i=t.data.estree.body[0];return i.type,e.evaluater.evaluateExpression(i.expression)}fl(e,t.position)}function v6(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);fl(e,t.position)}function b6(e,t,n){const i=e.schema;let o=i;t.name==="svg"&&i.space==="html"&&(o=cg,e.schema=o),e.ancestors.push(t);const s=t.name===null?e.Fragment:t_(e,t.name,!0),l=C6(e,t),c=pg(e,t);return e_(e,l,s,t),hg(l,c),e.ancestors.pop(),e.schema=i,e.create(t,s,l,n)}function w6(e,t,n){const i={};return hg(i,pg(e,t)),e.create(t,e.Fragment,i,n)}function S6(e,t){return t.value}function e_(e,t,n,i){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=i)}function hg(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function _6(e,t,n){return i;function i(o,s,l,c){const h=Array.isArray(l.children)?n:t;return c?h(s,l,c):h(s,l)}}function k6(e,t){return n;function n(i,o,s,l){const c=Array.isArray(s.children),d=fg(i);return t(o,s,l,c,{columnNumber:d?d.column-1:void 0,fileName:e,lineNumber:d?d.line:void 0},void 0)}}function E6(e,t){const n={};let i,o;for(o in t.properties)if(o!=="children"&&dg.call(t.properties,o)){const s=j6(e,o,t.properties[o]);if(s){const[l,c]=s;e.tableCellAlignToStyle&&l==="align"&&typeof c=="string"&&m6.has(t.tagName)?i=c:n[l]=c}}if(i){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function C6(e,t){const n={};for(const i of t.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&e.evaluater){const s=i.data.estree.body[0];s.type;const l=s.expression;l.type;const c=l.properties[0];c.type,Object.assign(n,e.evaluater.evaluateExpression(c.argument))}else fl(e,t.position);else{const o=i.name;let s;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&e.evaluater){const c=i.value.data.estree.body[0];c.type,s=e.evaluater.evaluateExpression(c.expression)}else fl(e,t.position);else s=i.value===null?!0:i.value;n[o]=s}return n}function pg(e,t){const n=[];let i=-1;const o=e.passKeys?new Map:d6;for(;++i<t.children.length;){const s=t.children[i];let l;if(e.passKeys){const d=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(d){const h=o.get(d)||0;l=d+"-"+h,o.set(d,h+1)}}const c=JS(e,s,l);c!==void 0&&n.push(c)}return n}function j6(e,t,n){const i=e6(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?FD(n):i6(n)),i.property==="style"){let o=typeof n=="object"?n:N6(e,String(n));return e.stylePropertyNameCase==="css"&&(o=A6(o)),["style",o]}return[e.elementAttributeNameCase==="react"&&i.space?WD[i.property]||i.property:i.attribute,n]}}function N6(e,t){try{return c6(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const i=n,o=new Zt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=QS+"#cannot-parse-style-attribute",o}}function t_(e,t,n){let i;if(!n)i={type:"Literal",value:t};else if(t.includes(".")){const o=t.split(".");let s=-1,l;for(;++s<o.length;){const c=Zv(o[s])?{type:"Identifier",name:o[s]}:{type:"Literal",value:o[s]};l=l?{type:"MemberExpression",object:l,property:c,computed:!!(s&&c.type==="Literal"),optional:!1}:c}i=l}else i=Zv(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(i.type==="Literal"){const o=i.value;return dg.call(e.components,o)?e.components[o]:o}if(e.evaluater)return e.evaluater.evaluateExpression(i);fl(e)}function fl(e,t){const n=new Zt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=QS+"#cannot-handle-mdx-estrees-without-createevaluater",n}function A6(e){const t={};let n;for(n in e)dg.call(e,n)&&(t[T6(n)]=e[n]);return t}function T6(e){let t=e.replace(h6,D6);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function D6(e){return"-"+e.toLowerCase()}const Sp={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},z6={};function mg(e,t){const n=z6,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,o=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return n_(e,i,o)}function n_(e,t,n){if(M6(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return ab(e.children,t,n)}return Array.isArray(e)?ab(e,t,n):""}function ab(e,t,n){const i=[];let o=-1;for(;++o<e.length;)i[o]=n_(e[o],t,n);return i.join("")}function M6(e){return!!(e&&typeof e=="object")}const ob=document.createElement("i");function gg(e){const t="&"+e+";";ob.innerHTML=t;const n=ob.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Nn(e,t,n,i){const o=e.length;let s=0,l;if(t<0?t=-t>o?0:o+t:t=t>o?o:t,n=n>0?n:0,i.length<1e4)l=Array.from(i),l.unshift(t,n),e.splice(...l);else for(n&&e.splice(t,n);s<i.length;)l=i.slice(s,s+1e4),l.unshift(t,0),e.splice(...l),s+=1e4,t+=1e4}function Pn(e,t){return e.length>0?(Nn(e,e.length,0,t),e):t}const sb={}.hasOwnProperty;function r_(e){const t={};let n=-1;for(;++n<e.length;)O6(t,e[n]);return t}function O6(e,t){let n;for(n in t){const o=(sb.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let l;if(s)for(l in s){sb.call(o,l)||(o[l]=[]);const c=s[l];R6(o[l],Array.isArray(c)?c:c?[c]:[])}}}function R6(e,t){let n=-1;const i=[];for(;++n<t.length;)(t[n].add==="after"?e:i).push(t[n]);Nn(e,0,0,i)}function i_(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function er(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Qt=zi(/[A-Za-z]/),Xt=zi(/[\dA-Za-z]/),I6=zi(/[#-'*+\--9=?A-Z^-~]/);function af(e){return e!==null&&(e<32||e===127)}const _m=zi(/\d/),L6=zi(/[\dA-Fa-f]/),U6=zi(/[!-/:-@[-`{-~]/);function Le(e){return e!==null&&e<-2}function ft(e){return e!==null&&(e<0||e===32)}function Xe(e){return e===-2||e===-1||e===32}const Mf=zi(new RegExp("\\p{P}|\\p{S}","u")),ha=zi(/\s/);function zi(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Ao(e){const t=[];let n=-1,i=0,o=0;for(;++n<e.length;){const s=e.charCodeAt(n);let l="";if(s===37&&Xt(e.charCodeAt(n+1))&&Xt(e.charCodeAt(n+2)))o=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(l=String.fromCharCode(s));else if(s>55295&&s<57344){const c=e.charCodeAt(n+1);s<56320&&c>56319&&c<57344?(l=String.fromCharCode(s,c),o=1):l=""}else l=String.fromCharCode(s);l&&(t.push(e.slice(i,n),encodeURIComponent(l)),i=n+o+1,l=""),o&&(n+=o,o=0)}return t.join("")+e.slice(i)}function Je(e,t,n,i){const o=i?i-1:Number.POSITIVE_INFINITY;let s=0;return l;function l(d){return Xe(d)?(e.enter(n),c(d)):t(d)}function c(d){return Xe(d)&&s++<o?(e.consume(d),c):(e.exit(n),t(d))}}const B6={tokenize:H6};function H6(e){const t=e.attempt(this.parser.constructs.contentInitial,i,o);let n;return t;function i(c){if(c===null){e.consume(c);return}return e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),Je(e,t,"linePrefix")}function o(c){return e.enter("paragraph"),s(c)}function s(c){const d=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=d),n=d,l(c)}function l(c){if(c===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(c);return}return Le(c)?(e.consume(c),e.exit("chunkText"),s):(e.consume(c),l)}}const P6={tokenize:F6},lb={tokenize:q6};function F6(e){const t=this,n=[];let i=0,o,s,l;return c;function c(E){if(i<n.length){const j=n[i];return t.containerState=j[1],e.attempt(j[0].continuation,d,h)(E)}return h(E)}function d(E){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,o&&k();const j=t.events.length;let A=j,T;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){T=t.events[A][1].end;break}b(i);let M=j;for(;M<t.events.length;)t.events[M][1].end={...T},M++;return Nn(t.events,A+1,0,t.events.slice(j)),t.events.length=M,h(E)}return c(E)}function h(E){if(i===n.length){if(!o)return g(E);if(o.currentConstruct&&o.currentConstruct.concrete)return w(E);t.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(lb,m,p)(E)}function m(E){return o&&k(),b(i),g(E)}function p(E){return t.parser.lazy[t.now().line]=i!==n.length,l=t.now().offset,w(E)}function g(E){return t.containerState={},e.attempt(lb,y,w)(E)}function y(E){return i++,n.push([t.currentConstruct,t.containerState]),g(E)}function w(E){if(E===null){o&&k(),b(0),e.consume(E);return}return o=o||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:s}),S(E)}function S(E){if(E===null){_(e.exit("chunkFlow"),!0),b(0),e.consume(E);return}return Le(E)?(e.consume(E),_(e.exit("chunkFlow")),i=0,t.interrupt=void 0,c):(e.consume(E),S)}function _(E,j){const A=t.sliceStream(E);if(j&&A.push(null),E.previous=s,s&&(s.next=E),s=E,o.defineSkip(E.start),o.write(A),t.parser.lazy[E.start.line]){let T=o.events.length;for(;T--;)if(o.events[T][1].start.offset<l&&(!o.events[T][1].end||o.events[T][1].end.offset>l))return;const M=t.events.length;let P=M,F,$;for(;P--;)if(t.events[P][0]==="exit"&&t.events[P][1].type==="chunkFlow"){if(F){$=t.events[P][1].end;break}F=!0}for(b(i),T=M;T<t.events.length;)t.events[T][1].end={...$},T++;Nn(t.events,P+1,0,t.events.slice(M)),t.events.length=T}}function b(E){let j=n.length;for(;j-- >E;){const A=n[j];t.containerState=A[1],A[0].exit.call(t,e)}n.length=E}function k(){o.write([null]),s=void 0,o=void 0,t.containerState._closeFlow=void 0}}function q6(e,t,n){return Je(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Co(e){if(e===null||ft(e)||ha(e))return 1;if(Mf(e))return 2}function Of(e,t,n){const i=[];let o=-1;for(;++o<e.length;){const s=e[o].resolveAll;s&&!i.includes(s)&&(t=s(t,n),i.push(s))}return t}const km={name:"attention",resolveAll:$6,tokenize:V6};function $6(e,t){let n=-1,i,o,s,l,c,d,h,m;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(i=n;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&t.sliceSerialize(e[i][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[i][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;d=e[i][1].end.offset-e[i][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const p={...e[i][1].end},g={...e[n][1].start};ub(p,-d),ub(g,d),l={type:d>1?"strongSequence":"emphasisSequence",start:p,end:{...e[i][1].end}},c={type:d>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:g},s={type:d>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[n][1].start}},o={type:d>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},e[i][1].end={...l.start},e[n][1].start={...c.end},h=[],e[i][1].end.offset-e[i][1].start.offset&&(h=Pn(h,[["enter",e[i][1],t],["exit",e[i][1],t]])),h=Pn(h,[["enter",o,t],["enter",l,t],["exit",l,t],["enter",s,t]]),h=Pn(h,Of(t.parser.constructs.insideSpan.null,e.slice(i+1,n),t)),h=Pn(h,[["exit",s,t],["enter",c,t],["exit",c,t],["exit",o,t]]),e[n][1].end.offset-e[n][1].start.offset?(m=2,h=Pn(h,[["enter",e[n][1],t],["exit",e[n][1],t]])):m=0,Nn(e,i-1,n-i+3,h),n=i+h.length-m-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function V6(e,t){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,o=Co(i);let s;return l;function l(d){return s=d,e.enter("attentionSequence"),c(d)}function c(d){if(d===s)return e.consume(d),c;const h=e.exit("attentionSequence"),m=Co(d),p=!m||m===2&&o||n.includes(d),g=!o||o===2&&m||n.includes(i);return h._open=!!(s===42?p:p&&(o||!g)),h._close=!!(s===42?g:g&&(m||!p)),t(d)}}function ub(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Y6={name:"autolink",tokenize:G6};function G6(e,t,n){let i=0;return o;function o(y){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(y){return Qt(y)?(e.consume(y),l):y===64?n(y):h(y)}function l(y){return y===43||y===45||y===46||Xt(y)?(i=1,c(y)):h(y)}function c(y){return y===58?(e.consume(y),i=0,d):(y===43||y===45||y===46||Xt(y))&&i++<32?(e.consume(y),c):(i=0,h(y))}function d(y){return y===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.exit("autolink"),t):y===null||y===32||y===60||af(y)?n(y):(e.consume(y),d)}function h(y){return y===64?(e.consume(y),m):I6(y)?(e.consume(y),h):n(y)}function m(y){return Xt(y)?p(y):n(y)}function p(y){return y===46?(e.consume(y),i=0,m):y===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.exit("autolink"),t):g(y)}function g(y){if((y===45||Xt(y))&&i++<63){const w=y===45?g:p;return e.consume(y),w}return n(y)}}const El={partial:!0,tokenize:X6};function X6(e,t,n){return i;function i(s){return Xe(s)?Je(e,o,"linePrefix")(s):o(s)}function o(s){return s===null||Le(s)?t(s):n(s)}}const a_={continuation:{tokenize:K6},exit:W6,name:"blockQuote",tokenize:Z6};function Z6(e,t,n){const i=this;return o;function o(l){if(l===62){const c=i.containerState;return c.open||(e.enter("blockQuote",{_container:!0}),c.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),s}return n(l)}function s(l){return Xe(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(l))}}function K6(e,t,n){const i=this;return o;function o(l){return Xe(l)?Je(e,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):s(l)}function s(l){return e.attempt(a_,t,n)(l)}}function W6(e){e.exit("blockQuote")}const o_={name:"characterEscape",tokenize:Q6};function Q6(e,t,n){return i;function i(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),o}function o(s){return U6(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const s_={name:"characterReference",tokenize:J6};function J6(e,t,n){const i=this;let o=0,s,l;return c;function c(p){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),d}function d(p){return p===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(p),e.exit("characterReferenceMarkerNumeric"),h):(e.enter("characterReferenceValue"),s=31,l=Xt,m(p))}function h(p){return p===88||p===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(p),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,l=L6,m):(e.enter("characterReferenceValue"),s=7,l=_m,m(p))}function m(p){if(p===59&&o){const g=e.exit("characterReferenceValue");return l===Xt&&!gg(i.sliceSerialize(g))?n(p):(e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return l(p)&&o++<s?(e.consume(p),m):n(p)}}const cb={partial:!0,tokenize:tz},fb={concrete:!0,name:"codeFenced",tokenize:ez};function ez(e,t,n){const i=this,o={partial:!0,tokenize:A};let s=0,l=0,c;return d;function d(T){return h(T)}function h(T){const M=i.events[i.events.length-1];return s=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,c=T,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),m(T)}function m(T){return T===c?(l++,e.consume(T),m):l<3?n(T):(e.exit("codeFencedFenceSequence"),Xe(T)?Je(e,p,"whitespace")(T):p(T))}function p(T){return T===null||Le(T)?(e.exit("codeFencedFence"),i.interrupt?t(T):e.check(cb,S,j)(T)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(T))}function g(T){return T===null||Le(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),p(T)):Xe(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Je(e,y,"whitespace")(T)):T===96&&T===c?n(T):(e.consume(T),g)}function y(T){return T===null||Le(T)?p(T):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),w(T))}function w(T){return T===null||Le(T)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(T)):T===96&&T===c?n(T):(e.consume(T),w)}function S(T){return e.attempt(o,j,_)(T)}function _(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),b}function b(T){return s>0&&Xe(T)?Je(e,k,"linePrefix",s+1)(T):k(T)}function k(T){return T===null||Le(T)?e.check(cb,S,j)(T):(e.enter("codeFlowValue"),E(T))}function E(T){return T===null||Le(T)?(e.exit("codeFlowValue"),k(T)):(e.consume(T),E)}function j(T){return e.exit("codeFenced"),t(T)}function A(T,M,P){let F=0;return $;function $(H){return T.enter("lineEnding"),T.consume(H),T.exit("lineEnding"),Z}function Z(H){return T.enter("codeFencedFence"),Xe(H)?Je(T,D,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):D(H)}function D(H){return H===c?(T.enter("codeFencedFenceSequence"),q(H)):P(H)}function q(H){return H===c?(F++,T.consume(H),q):F>=l?(T.exit("codeFencedFenceSequence"),Xe(H)?Je(T,N,"whitespace")(H):N(H)):P(H)}function N(H){return H===null||Le(H)?(T.exit("codeFencedFence"),M(H)):P(H)}}}function tz(e,t,n){const i=this;return o;function o(l){return l===null?n(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),s)}function s(l){return i.parser.lazy[i.now().line]?n(l):t(l)}}const _p={name:"codeIndented",tokenize:rz},nz={partial:!0,tokenize:iz};function rz(e,t,n){const i=this;return o;function o(h){return e.enter("codeIndented"),Je(e,s,"linePrefix",5)(h)}function s(h){const m=i.events[i.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?l(h):n(h)}function l(h){return h===null?d(h):Le(h)?e.attempt(nz,l,d)(h):(e.enter("codeFlowValue"),c(h))}function c(h){return h===null||Le(h)?(e.exit("codeFlowValue"),l(h)):(e.consume(h),c)}function d(h){return e.exit("codeIndented"),t(h)}}function iz(e,t,n){const i=this;return o;function o(l){return i.parser.lazy[i.now().line]?n(l):Le(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o):Je(e,s,"linePrefix",5)(l)}function s(l){const c=i.events[i.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(l):Le(l)?o(l):n(l)}}const az={name:"codeText",previous:sz,resolve:oz,tokenize:lz};function oz(e){let t=e.length-4,n=3,i,o;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(i=n;++i<t;)if(e[i][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(i=n-1,t++;++i<=t;)o===void 0?i!==t&&e[i][1].type!=="lineEnding"&&(o=i):(i===t||e[i][1].type==="lineEnding")&&(e[o][1].type="codeTextData",i!==o+2&&(e[o][1].end=e[i-1][1].end,e.splice(o+2,i-o-2),t-=i-o-2,i=o+2),o=void 0);return e}function sz(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function lz(e,t,n){let i=0,o,s;return l;function l(p){return e.enter("codeText"),e.enter("codeTextSequence"),c(p)}function c(p){return p===96?(e.consume(p),i++,c):(e.exit("codeTextSequence"),d(p))}function d(p){return p===null?n(p):p===32?(e.enter("space"),e.consume(p),e.exit("space"),d):p===96?(s=e.enter("codeTextSequence"),o=0,m(p)):Le(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),d):(e.enter("codeTextData"),h(p))}function h(p){return p===null||p===32||p===96||Le(p)?(e.exit("codeTextData"),d(p)):(e.consume(p),h)}function m(p){return p===96?(e.consume(p),o++,m):o===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(p)):(s.type="codeTextData",h(p))}}class uz{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(t,i):t>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(t,n,i){const o=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return i&&zs(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),zs(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),zs(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);zs(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);zs(this.left,n.reverse())}}}function zs(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function l_(e){const t={};let n=-1,i,o,s,l,c,d,h;const m=new uz(e);for(;++n<m.length;){for(;n in t;)n=t[n];if(i=m.get(n),n&&i[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(d=i[1]._tokenizer.events,s=0,s<d.length&&d[s][1].type==="lineEndingBlank"&&(s+=2),s<d.length&&d[s][1].type==="content"))for(;++s<d.length&&d[s][1].type!=="content";)d[s][1].type==="chunkText"&&(d[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(t,cz(m,n)),n=t[n],h=!0);else if(i[1]._container){for(s=n,o=void 0;s--;)if(l=m.get(s),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(o&&(m.get(o)[1].type="lineEndingBlank"),l[1].type="lineEnding",o=s);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;o&&(i[1].end={...m.get(o)[1].start},c=m.slice(o,n),c.unshift(i),m.splice(o,n-o+1,c))}}return Nn(e,0,Number.POSITIVE_INFINITY,m.slice(0)),!h}function cz(e,t){const n=e.get(t)[1],i=e.get(t)[2];let o=t-1;const s=[];let l=n._tokenizer;l||(l=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,d=[],h={};let m,p,g=-1,y=n,w=0,S=0;const _=[S];for(;y;){for(;e.get(++o)[1]!==y;);s.push(o),y._tokenizer||(m=i.sliceStream(y),y.next||m.push(null),p&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(m),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=n;++g<c.length;)c[g][0]==="exit"&&c[g-1][0]==="enter"&&c[g][1].type===c[g-1][1].type&&c[g][1].start.line!==c[g][1].end.line&&(S=g+1,_.push(S),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):_.pop(),g=_.length;g--;){const b=c.slice(_[g],_[g+1]),k=s.pop();d.push([k,k+b.length-1]),e.splice(k,2,b)}for(d.reverse(),g=-1;++g<d.length;)h[w+d[g][0]]=w+d[g][1],w+=d[g][1]-d[g][0]-1;return h}const fz={resolve:hz,tokenize:pz},dz={partial:!0,tokenize:mz};function hz(e){return l_(e),e}function pz(e,t){let n;return i;function i(c){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),o(c)}function o(c){return c===null?s(c):Le(c)?e.check(dz,l,s)(c):(e.consume(c),o)}function s(c){return e.exit("chunkContent"),e.exit("content"),t(c)}function l(c){return e.consume(c),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}function mz(e,t,n){const i=this;return o;function o(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Je(e,s,"linePrefix")}function s(l){if(l===null||Le(l))return n(l);const c=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(l):e.interrupt(i.parser.constructs.flow,n,t)(l)}}function u_(e,t,n,i,o,s,l,c,d){const h=d||Number.POSITIVE_INFINITY;let m=0;return p;function p(b){return b===60?(e.enter(i),e.enter(o),e.enter(s),e.consume(b),e.exit(s),g):b===null||b===32||b===41||af(b)?n(b):(e.enter(i),e.enter(l),e.enter(c),e.enter("chunkString",{contentType:"string"}),S(b))}function g(b){return b===62?(e.enter(s),e.consume(b),e.exit(s),e.exit(o),e.exit(i),t):(e.enter(c),e.enter("chunkString",{contentType:"string"}),y(b))}function y(b){return b===62?(e.exit("chunkString"),e.exit(c),g(b)):b===null||b===60||Le(b)?n(b):(e.consume(b),b===92?w:y)}function w(b){return b===60||b===62||b===92?(e.consume(b),y):y(b)}function S(b){return!m&&(b===null||b===41||ft(b))?(e.exit("chunkString"),e.exit(c),e.exit(l),e.exit(i),t(b)):m<h&&b===40?(e.consume(b),m++,S):b===41?(e.consume(b),m--,S):b===null||b===32||b===40||af(b)?n(b):(e.consume(b),b===92?_:S)}function _(b){return b===40||b===41||b===92?(e.consume(b),S):S(b)}}function c_(e,t,n,i,o,s){const l=this;let c=0,d;return h;function h(y){return e.enter(i),e.enter(o),e.consume(y),e.exit(o),e.enter(s),m}function m(y){return c>999||y===null||y===91||y===93&&!d||y===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(e.exit(s),e.enter(o),e.consume(y),e.exit(o),e.exit(i),t):Le(y)?(e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),m):(e.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||Le(y)||c++>999?(e.exit("chunkString"),m(y)):(e.consume(y),d||(d=!Xe(y)),y===92?g:p)}function g(y){return y===91||y===92||y===93?(e.consume(y),c++,p):p(y)}}function f_(e,t,n,i,o,s){let l;return c;function c(g){return g===34||g===39||g===40?(e.enter(i),e.enter(o),e.consume(g),e.exit(o),l=g===40?41:g,d):n(g)}function d(g){return g===l?(e.enter(o),e.consume(g),e.exit(o),e.exit(i),t):(e.enter(s),h(g))}function h(g){return g===l?(e.exit(s),d(l)):g===null?n(g):Le(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),Je(e,h,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),m(g))}function m(g){return g===l||g===null||Le(g)?(e.exit("chunkString"),h(g)):(e.consume(g),g===92?p:m)}function p(g){return g===l||g===92?(e.consume(g),m):m(g)}}function Zs(e,t){let n;return i;function i(o){return Le(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n=!0,i):Xe(o)?Je(e,i,n?"linePrefix":"lineSuffix")(o):t(o)}}const gz={name:"definition",tokenize:xz},yz={partial:!0,tokenize:vz};function xz(e,t,n){const i=this;let o;return s;function s(y){return e.enter("definition"),l(y)}function l(y){return c_.call(i,e,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function c(y){return o=er(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),d):n(y)}function d(y){return ft(y)?Zs(e,h)(y):h(y)}function h(y){return u_(e,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function m(y){return e.attempt(yz,p,p)(y)}function p(y){return Xe(y)?Je(e,g,"whitespace")(y):g(y)}function g(y){return y===null||Le(y)?(e.exit("definition"),i.parser.defined.push(o),t(y)):n(y)}}function vz(e,t,n){return i;function i(c){return ft(c)?Zs(e,o)(c):n(c)}function o(c){return f_(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function s(c){return Xe(c)?Je(e,l,"whitespace")(c):l(c)}function l(c){return c===null||Le(c)?t(c):n(c)}}const bz={name:"hardBreakEscape",tokenize:wz};function wz(e,t,n){return i;function i(s){return e.enter("hardBreakEscape"),e.consume(s),o}function o(s){return Le(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const Sz={name:"headingAtx",resolve:_z,tokenize:kz};function _z(e,t){let n=e.length-2,i=3,o,s;return e[i][1].type==="whitespace"&&(i+=2),n-2>i&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&e[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(o={type:"atxHeadingText",start:e[i][1].start,end:e[n][1].end},s={type:"chunkText",start:e[i][1].start,end:e[n][1].end,contentType:"text"},Nn(e,i,n-i+1,[["enter",o,t],["enter",s,t],["exit",s,t],["exit",o,t]])),e}function kz(e,t,n){let i=0;return o;function o(m){return e.enter("atxHeading"),s(m)}function s(m){return e.enter("atxHeadingSequence"),l(m)}function l(m){return m===35&&i++<6?(e.consume(m),l):m===null||ft(m)?(e.exit("atxHeadingSequence"),c(m)):n(m)}function c(m){return m===35?(e.enter("atxHeadingSequence"),d(m)):m===null||Le(m)?(e.exit("atxHeading"),t(m)):Xe(m)?Je(e,c,"whitespace")(m):(e.enter("atxHeadingText"),h(m))}function d(m){return m===35?(e.consume(m),d):(e.exit("atxHeadingSequence"),c(m))}function h(m){return m===null||m===35||ft(m)?(e.exit("atxHeadingText"),c(m)):(e.consume(m),h)}}const Ez=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],db=["pre","script","style","textarea"],Cz={concrete:!0,name:"htmlFlow",resolveTo:Az,tokenize:Tz},jz={partial:!0,tokenize:zz},Nz={partial:!0,tokenize:Dz};function Az(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Tz(e,t,n){const i=this;let o,s,l,c,d;return h;function h(O){return m(O)}function m(O){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(O),p}function p(O){return O===33?(e.consume(O),g):O===47?(e.consume(O),s=!0,S):O===63?(e.consume(O),o=3,i.interrupt?t:B):Qt(O)?(e.consume(O),l=String.fromCharCode(O),_):n(O)}function g(O){return O===45?(e.consume(O),o=2,y):O===91?(e.consume(O),o=5,c=0,w):Qt(O)?(e.consume(O),o=4,i.interrupt?t:B):n(O)}function y(O){return O===45?(e.consume(O),i.interrupt?t:B):n(O)}function w(O){const Q="CDATA[";return O===Q.charCodeAt(c++)?(e.consume(O),c===Q.length?i.interrupt?t:D:w):n(O)}function S(O){return Qt(O)?(e.consume(O),l=String.fromCharCode(O),_):n(O)}function _(O){if(O===null||O===47||O===62||ft(O)){const Q=O===47,ee=l.toLowerCase();return!Q&&!s&&db.includes(ee)?(o=1,i.interrupt?t(O):D(O)):Ez.includes(l.toLowerCase())?(o=6,Q?(e.consume(O),b):i.interrupt?t(O):D(O)):(o=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(O):s?k(O):E(O))}return O===45||Xt(O)?(e.consume(O),l+=String.fromCharCode(O),_):n(O)}function b(O){return O===62?(e.consume(O),i.interrupt?t:D):n(O)}function k(O){return Xe(O)?(e.consume(O),k):$(O)}function E(O){return O===47?(e.consume(O),$):O===58||O===95||Qt(O)?(e.consume(O),j):Xe(O)?(e.consume(O),E):$(O)}function j(O){return O===45||O===46||O===58||O===95||Xt(O)?(e.consume(O),j):A(O)}function A(O){return O===61?(e.consume(O),T):Xe(O)?(e.consume(O),A):E(O)}function T(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(e.consume(O),d=O,M):Xe(O)?(e.consume(O),T):P(O)}function M(O){return O===d?(e.consume(O),d=null,F):O===null||Le(O)?n(O):(e.consume(O),M)}function P(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||ft(O)?A(O):(e.consume(O),P)}function F(O){return O===47||O===62||Xe(O)?E(O):n(O)}function $(O){return O===62?(e.consume(O),Z):n(O)}function Z(O){return O===null||Le(O)?D(O):Xe(O)?(e.consume(O),Z):n(O)}function D(O){return O===45&&o===2?(e.consume(O),U):O===60&&o===1?(e.consume(O),V):O===62&&o===4?(e.consume(O),z):O===63&&o===3?(e.consume(O),B):O===93&&o===5?(e.consume(O),Y):Le(O)&&(o===6||o===7)?(e.exit("htmlFlowData"),e.check(jz,I,q)(O)):O===null||Le(O)?(e.exit("htmlFlowData"),q(O)):(e.consume(O),D)}function q(O){return e.check(Nz,N,I)(O)}function N(O){return e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),H}function H(O){return O===null||Le(O)?q(O):(e.enter("htmlFlowData"),D(O))}function U(O){return O===45?(e.consume(O),B):D(O)}function V(O){return O===47?(e.consume(O),l="",X):D(O)}function X(O){if(O===62){const Q=l.toLowerCase();return db.includes(Q)?(e.consume(O),z):D(O)}return Qt(O)&&l.length<8?(e.consume(O),l+=String.fromCharCode(O),X):D(O)}function Y(O){return O===93?(e.consume(O),B):D(O)}function B(O){return O===62?(e.consume(O),z):O===45&&o===2?(e.consume(O),B):D(O)}function z(O){return O===null||Le(O)?(e.exit("htmlFlowData"),I(O)):(e.consume(O),z)}function I(O){return e.exit("htmlFlow"),t(O)}}function Dz(e,t,n){const i=this;return o;function o(l){return Le(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),s):n(l)}function s(l){return i.parser.lazy[i.now().line]?n(l):t(l)}}function zz(e,t,n){return i;function i(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),e.attempt(El,t,n)}}const Mz={name:"htmlText",tokenize:Oz};function Oz(e,t,n){const i=this;let o,s,l;return c;function c(B){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(B),d}function d(B){return B===33?(e.consume(B),h):B===47?(e.consume(B),A):B===63?(e.consume(B),E):Qt(B)?(e.consume(B),P):n(B)}function h(B){return B===45?(e.consume(B),m):B===91?(e.consume(B),s=0,w):Qt(B)?(e.consume(B),k):n(B)}function m(B){return B===45?(e.consume(B),y):n(B)}function p(B){return B===null?n(B):B===45?(e.consume(B),g):Le(B)?(l=p,V(B)):(e.consume(B),p)}function g(B){return B===45?(e.consume(B),y):p(B)}function y(B){return B===62?U(B):B===45?g(B):p(B)}function w(B){const z="CDATA[";return B===z.charCodeAt(s++)?(e.consume(B),s===z.length?S:w):n(B)}function S(B){return B===null?n(B):B===93?(e.consume(B),_):Le(B)?(l=S,V(B)):(e.consume(B),S)}function _(B){return B===93?(e.consume(B),b):S(B)}function b(B){return B===62?U(B):B===93?(e.consume(B),b):S(B)}function k(B){return B===null||B===62?U(B):Le(B)?(l=k,V(B)):(e.consume(B),k)}function E(B){return B===null?n(B):B===63?(e.consume(B),j):Le(B)?(l=E,V(B)):(e.consume(B),E)}function j(B){return B===62?U(B):E(B)}function A(B){return Qt(B)?(e.consume(B),T):n(B)}function T(B){return B===45||Xt(B)?(e.consume(B),T):M(B)}function M(B){return Le(B)?(l=M,V(B)):Xe(B)?(e.consume(B),M):U(B)}function P(B){return B===45||Xt(B)?(e.consume(B),P):B===47||B===62||ft(B)?F(B):n(B)}function F(B){return B===47?(e.consume(B),U):B===58||B===95||Qt(B)?(e.consume(B),$):Le(B)?(l=F,V(B)):Xe(B)?(e.consume(B),F):U(B)}function $(B){return B===45||B===46||B===58||B===95||Xt(B)?(e.consume(B),$):Z(B)}function Z(B){return B===61?(e.consume(B),D):Le(B)?(l=Z,V(B)):Xe(B)?(e.consume(B),Z):F(B)}function D(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(e.consume(B),o=B,q):Le(B)?(l=D,V(B)):Xe(B)?(e.consume(B),D):(e.consume(B),N)}function q(B){return B===o?(e.consume(B),o=void 0,H):B===null?n(B):Le(B)?(l=q,V(B)):(e.consume(B),q)}function N(B){return B===null||B===34||B===39||B===60||B===61||B===96?n(B):B===47||B===62||ft(B)?F(B):(e.consume(B),N)}function H(B){return B===47||B===62||ft(B)?F(B):n(B)}function U(B){return B===62?(e.consume(B),e.exit("htmlTextData"),e.exit("htmlText"),t):n(B)}function V(B){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),X}function X(B){return Xe(B)?Je(e,Y,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):Y(B)}function Y(B){return e.enter("htmlTextData"),l(B)}}const yg={name:"labelEnd",resolveAll:Uz,resolveTo:Bz,tokenize:Hz},Rz={tokenize:Pz},Iz={tokenize:Fz},Lz={tokenize:qz};function Uz(e){let t=-1;const n=[];for(;++t<e.length;){const i=e[t][1];if(n.push(e[t]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const o=i.type==="labelImage"?4:2;i.type="data",t+=o}}return e.length!==n.length&&Nn(e,0,e.length,n),e}function Bz(e,t){let n=e.length,i=0,o,s,l,c;for(;n--;)if(o=e[n][1],s){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;e[n][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(l){if(e[n][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(s=n,o.type!=="labelLink")){i=2;break}}else o.type==="labelEnd"&&(l=n);const d={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},h={type:"label",start:{...e[s][1].start},end:{...e[l][1].end}},m={type:"labelText",start:{...e[s+i+2][1].end},end:{...e[l-2][1].start}};return c=[["enter",d,t],["enter",h,t]],c=Pn(c,e.slice(s+1,s+i+3)),c=Pn(c,[["enter",m,t]]),c=Pn(c,Of(t.parser.constructs.insideSpan.null,e.slice(s+i+4,l-3),t)),c=Pn(c,[["exit",m,t],e[l-2],e[l-1],["exit",h,t]]),c=Pn(c,e.slice(l+1)),c=Pn(c,[["exit",d,t]]),Nn(e,s,e.length,c),e}function Hz(e,t,n){const i=this;let o=i.events.length,s,l;for(;o--;)if((i.events[o][1].type==="labelImage"||i.events[o][1].type==="labelLink")&&!i.events[o][1]._balanced){s=i.events[o][1];break}return c;function c(g){return s?s._inactive?p(g):(l=i.parser.defined.includes(er(i.sliceSerialize({start:s.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),d):n(g)}function d(g){return g===40?e.attempt(Rz,m,l?m:p)(g):g===91?e.attempt(Iz,m,l?h:p)(g):l?m(g):p(g)}function h(g){return e.attempt(Lz,m,p)(g)}function m(g){return t(g)}function p(g){return s._balanced=!0,n(g)}}function Pz(e,t,n){return i;function i(p){return e.enter("resource"),e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),o}function o(p){return ft(p)?Zs(e,s)(p):s(p)}function s(p){return p===41?m(p):u_(e,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return ft(p)?Zs(e,d)(p):m(p)}function c(p){return n(p)}function d(p){return p===34||p===39||p===40?f_(e,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):m(p)}function h(p){return ft(p)?Zs(e,m)(p):m(p)}function m(p){return p===41?(e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),e.exit("resource"),t):n(p)}}function Fz(e,t,n){const i=this;return o;function o(c){return c_.call(i,e,s,l,"reference","referenceMarker","referenceString")(c)}function s(c){return i.parser.defined.includes(er(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?t(c):n(c)}function l(c){return n(c)}}function qz(e,t,n){return i;function i(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),o}function o(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const $z={name:"labelStartImage",resolveAll:yg.resolveAll,tokenize:Vz};function Vz(e,t,n){const i=this;return o;function o(c){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(c),e.exit("labelImageMarker"),s}function s(c){return c===91?(e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelImage"),l):n(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(c):t(c)}}const Yz={name:"labelStartLink",resolveAll:yg.resolveAll,tokenize:Gz};function Gz(e,t,n){const i=this;return o;function o(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),s}function s(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(l):t(l)}}const kp={name:"lineEnding",tokenize:Xz};function Xz(e,t){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),Je(e,t,"linePrefix")}}const zc={name:"thematicBreak",tokenize:Zz};function Zz(e,t,n){let i=0,o;return s;function s(h){return e.enter("thematicBreak"),l(h)}function l(h){return o=h,c(h)}function c(h){return h===o?(e.enter("thematicBreakSequence"),d(h)):i>=3&&(h===null||Le(h))?(e.exit("thematicBreak"),t(h)):n(h)}function d(h){return h===o?(e.consume(h),i++,d):(e.exit("thematicBreakSequence"),Xe(h)?Je(e,c,"whitespace")(h):c(h))}}const fn={continuation:{tokenize:Jz},exit:tM,name:"list",tokenize:Qz},Kz={partial:!0,tokenize:nM},Wz={partial:!0,tokenize:eM};function Qz(e,t,n){const i=this,o=i.events[i.events.length-1];let s=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,l=0;return c;function c(y){const w=i.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!i.containerState.marker||y===i.containerState.marker:_m(y)){if(i.containerState.type||(i.containerState.type=w,e.enter(w,{_container:!0})),w==="listUnordered")return e.enter("listItemPrefix"),y===42||y===45?e.check(zc,n,h)(y):h(y);if(!i.interrupt||y===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(y)}return n(y)}function d(y){return _m(y)&&++l<10?(e.consume(y),d):(!i.interrupt||l<2)&&(i.containerState.marker?y===i.containerState.marker:y===41||y===46)?(e.exit("listItemValue"),h(y)):n(y)}function h(y){return e.enter("listItemMarker"),e.consume(y),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||y,e.check(El,i.interrupt?n:m,e.attempt(Kz,g,p))}function m(y){return i.containerState.initialBlankLine=!0,s++,g(y)}function p(y){return Xe(y)?(e.enter("listItemPrefixWhitespace"),e.consume(y),e.exit("listItemPrefixWhitespace"),g):n(y)}function g(y){return i.containerState.size=s+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(y)}}function Jz(e,t,n){const i=this;return i.containerState._closeFlow=void 0,e.check(El,o,s);function o(c){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Je(e,t,"listItemIndent",i.containerState.size+1)(c)}function s(c){return i.containerState.furtherBlankLines||!Xe(c)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,l(c)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(Wz,t,l)(c))}function l(c){return i.containerState._closeFlow=!0,i.interrupt=void 0,Je(e,e.attempt(fn,t,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function eM(e,t,n){const i=this;return Je(e,o,"listItemIndent",i.containerState.size+1);function o(s){const l=i.events[i.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===i.containerState.size?t(s):n(s)}}function tM(e){e.exit(this.containerState.type)}function nM(e,t,n){const i=this;return Je(e,o,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(s){const l=i.events[i.events.length-1];return!Xe(s)&&l&&l[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const hb={name:"setextUnderline",resolveTo:rM,tokenize:iM};function rM(e,t){let n=e.length,i,o,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){i=n;break}e[n][1].type==="paragraph"&&(o=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const l={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[o][1].type="setextHeadingText",s?(e.splice(o,0,["enter",l,t]),e.splice(s+1,0,["exit",e[i][1],t]),e[i][1].end={...e[s][1].end}):e[i][1]=l,e.push(["exit",l,t]),e}function iM(e,t,n){const i=this;let o;return s;function s(h){let m=i.events.length,p;for(;m--;)if(i.events[m][1].type!=="lineEnding"&&i.events[m][1].type!=="linePrefix"&&i.events[m][1].type!=="content"){p=i.events[m][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||p)?(e.enter("setextHeadingLine"),o=h,l(h)):n(h)}function l(h){return e.enter("setextHeadingLineSequence"),c(h)}function c(h){return h===o?(e.consume(h),c):(e.exit("setextHeadingLineSequence"),Xe(h)?Je(e,d,"lineSuffix")(h):d(h))}function d(h){return h===null||Le(h)?(e.exit("setextHeadingLine"),t(h)):n(h)}}const aM={tokenize:oM};function oM(e){const t=this,n=e.attempt(El,i,e.attempt(this.parser.constructs.flowInitial,o,Je(e,e.attempt(this.parser.constructs.flow,o,e.attempt(fz,o)),"linePrefix")));return n;function i(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function o(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const sM={resolveAll:h_()},lM=d_("string"),uM=d_("text");function d_(e){return{resolveAll:h_(e==="text"?cM:void 0),tokenize:t};function t(n){const i=this,o=this.parser.constructs[e],s=n.attempt(o,l,c);return l;function l(m){return h(m)?s(m):c(m)}function c(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),d}function d(m){return h(m)?(n.exit("data"),s(m)):(n.consume(m),d)}function h(m){if(m===null)return!0;const p=o[m];let g=-1;if(p)for(;++g<p.length;){const y=p[g];if(!y.previous||y.previous.call(i,i.previous))return!0}return!1}}}function h_(e){return t;function t(n,i){let o=-1,s;for(;++o<=n.length;)s===void 0?n[o]&&n[o][1].type==="data"&&(s=o,o++):(!n[o]||n[o][1].type!=="data")&&(o!==s+2&&(n[s][1].end=n[o-1][1].end,n.splice(s+2,o-s-2),o=s+2),s=void 0);return e?e(n,i):n}}function cM(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const i=e[n-1][1],o=t.sliceStream(i);let s=o.length,l=-1,c=0,d;for(;s--;){const h=o[s];if(typeof h=="string"){for(l=h.length;h.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(h===-2)d=!0,c++;else if(h!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(c=0),c){const h={type:n===e.length||d||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?l:i.start._bufferIndex+l,_index:i.start._index+s,line:i.end.line,column:i.end.column-c,offset:i.end.offset-c},end:{...i.end}};i.end={...h.start},i.start.offset===i.end.offset?Object.assign(i,h):(e.splice(n,0,["enter",h,t],["exit",h,t]),n+=2)}n++}return e}const fM={42:fn,43:fn,45:fn,48:fn,49:fn,50:fn,51:fn,52:fn,53:fn,54:fn,55:fn,56:fn,57:fn,62:a_},dM={91:gz},hM={[-2]:_p,[-1]:_p,32:_p},pM={35:Sz,42:zc,45:[hb,zc],60:Cz,61:hb,95:zc,96:fb,126:fb},mM={38:s_,92:o_},gM={[-5]:kp,[-4]:kp,[-3]:kp,33:$z,38:s_,42:km,60:[Y6,Mz],91:Yz,92:[bz,o_],93:yg,95:km,96:az},yM={null:[km,sM]},xM={null:[42,95]},vM={null:[]},bM=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:xM,contentInitial:dM,disable:vM,document:fM,flow:pM,flowInitial:hM,insideSpan:yM,string:mM,text:gM},Symbol.toStringTag,{value:"Module"}));function wM(e,t,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const o={},s=[];let l=[],c=[];const d={attempt:M(A),check:M(T),consume:k,enter:E,exit:j,interrupt:M(T,{interrupt:!0})},h={code:null,containerState:{},defineSkip:S,events:[],now:w,parser:e,previous:null,sliceSerialize:g,sliceStream:y,write:p};let m=t.tokenize.call(h,d);return t.resolveAll&&s.push(t),h;function p(Z){return l=Pn(l,Z),_(),l[l.length-1]!==null?[]:(P(t,0),h.events=Of(s,h.events,h),h.events)}function g(Z,D){return _M(y(Z),D)}function y(Z){return SM(l,Z)}function w(){const{_bufferIndex:Z,_index:D,line:q,column:N,offset:H}=i;return{_bufferIndex:Z,_index:D,line:q,column:N,offset:H}}function S(Z){o[Z.line]=Z.column,$()}function _(){let Z;for(;i._index<l.length;){const D=l[i._index];if(typeof D=="string")for(Z=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===Z&&i._bufferIndex<D.length;)b(D.charCodeAt(i._bufferIndex));else b(D)}}function b(Z){m=m(Z)}function k(Z){Le(Z)?(i.line++,i.column=1,i.offset+=Z===-3?2:1,$()):Z!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===l[i._index].length&&(i._bufferIndex=-1,i._index++)),h.previous=Z}function E(Z,D){const q=D||{};return q.type=Z,q.start=w(),h.events.push(["enter",q,h]),c.push(q),q}function j(Z){const D=c.pop();return D.end=w(),h.events.push(["exit",D,h]),D}function A(Z,D){P(Z,D.from)}function T(Z,D){D.restore()}function M(Z,D){return q;function q(N,H,U){let V,X,Y,B;return Array.isArray(N)?I(N):"tokenize"in N?I([N]):z(N);function z(ue){return ye;function ye(de){const ve=de!==null&&ue[de],Ae=de!==null&&ue.null,je=[...Array.isArray(ve)?ve:ve?[ve]:[],...Array.isArray(Ae)?Ae:Ae?[Ae]:[]];return I(je)(de)}}function I(ue){return V=ue,X=0,ue.length===0?U:O(ue[X])}function O(ue){return ye;function ye(de){return B=F(),Y=ue,ue.partial||(h.currentConstruct=ue),ue.name&&h.parser.constructs.disable.null.includes(ue.name)?ee():ue.tokenize.call(D?Object.assign(Object.create(h),D):h,d,Q,ee)(de)}}function Q(ue){return Z(Y,B),H}function ee(ue){return B.restore(),++X<V.length?O(V[X]):U}}}function P(Z,D){Z.resolveAll&&!s.includes(Z)&&s.push(Z),Z.resolve&&Nn(h.events,D,h.events.length-D,Z.resolve(h.events.slice(D),h)),Z.resolveTo&&(h.events=Z.resolveTo(h.events,h))}function F(){const Z=w(),D=h.previous,q=h.currentConstruct,N=h.events.length,H=Array.from(c);return{from:N,restore:U};function U(){i=Z,h.previous=D,h.currentConstruct=q,h.events.length=N,c=H,$()}}function $(){i.line in o&&i.column<2&&(i.column=o[i.line],i.offset+=o[i.line]-1)}}function SM(e,t){const n=t.start._index,i=t.start._bufferIndex,o=t.end._index,s=t.end._bufferIndex;let l;if(n===o)l=[e[n].slice(i,s)];else{if(l=e.slice(n,o),i>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(i):l.shift()}s>0&&l.push(e[o].slice(0,s))}return l}function _M(e,t){let n=-1;const i=[];let o;for(;++n<e.length;){const s=e[n];let l;if(typeof s=="string")l=s;else switch(s){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=t?" ":"	";break}case-1:{if(!t&&o)continue;l=" ";break}default:l=String.fromCharCode(s)}o=s===-2,i.push(l)}return i.join("")}function kM(e){const i={constructs:r_([bM,...(e||{}).extensions||[]]),content:o(B6),defined:[],document:o(P6),flow:o(aM),lazy:{},string:o(lM),text:o(uM)};return i;function o(s){return l;function l(c){return wM(i,s,c)}}}function EM(e){for(;!l_(e););return e}const pb=/[\0\t\n\r]/g;function CM(){let e=1,t="",n=!0,i;return o;function o(s,l,c){const d=[];let h,m,p,g,y;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(l||void 0).decode(s)),p=0,t="",n&&(s.charCodeAt(0)===65279&&p++,n=void 0);p<s.length;){if(pb.lastIndex=p,h=pb.exec(s),g=h&&h.index!==void 0?h.index:s.length,y=s.charCodeAt(g),!h){t=s.slice(p);break}if(y===10&&p===g&&i)d.push(-3),i=void 0;else switch(i&&(d.push(-5),i=void 0),p<g&&(d.push(s.slice(p,g)),e+=g-p),y){case 0:{d.push(65533),e++;break}case 9:{for(m=Math.ceil(e/4)*4,d.push(-2);e++<m;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:i=!0,e=1}p=g+1}return c&&(i&&d.push(-5),t&&d.push(t),d.push(null)),d}}const jM=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function NM(e){return e.replace(jM,AM)}function AM(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const o=n.charCodeAt(1),s=o===120||o===88;return i_(n.slice(s?2:1),s?16:10)}return gg(n)||e}const p_={}.hasOwnProperty;function TM(e,t,n){return typeof t!="string"&&(n=t,t=void 0),DM(n)(EM(kM(n).document().write(CM()(e,t,!0))))}function DM(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ie),autolinkProtocol:F,autolinkEmail:F,atxHeading:s(te),blockQuote:s(Ae),characterEscape:F,characterReference:F,codeFenced:s(je),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:s(je,l),codeText:s(Te,l),codeTextData:F,data:F,codeFlowValue:F,definition:s(De),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:s(L),hardBreakEscape:s(re),hardBreakTrailing:s(re),htmlFlow:s(W,l),htmlFlowData:F,htmlText:s(W,l),htmlTextData:F,image:s(K),label:l,link:s(ie),listItem:s(ge),listItemValue:g,listOrdered:s(pe,p),listUnordered:s(pe),paragraph:s(oe),reference:O,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:s(te),strong:s(_e),thematicBreak:s(ke)},exit:{atxHeading:d(),atxHeadingSequence:A,autolink:d(),autolinkEmail:ve,autolinkProtocol:de,blockQuote:d(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:ee,characterReferenceMarkerNumeric:ee,characterReferenceValue:ue,characterReference:ye,codeFenced:d(_),codeFencedFence:S,codeFencedFenceInfo:y,codeFencedFenceMeta:w,codeFlowValue:$,codeIndented:d(b),codeText:d(H),codeTextData:$,data:$,definition:d(),definitionDestinationString:j,definitionLabelString:k,definitionTitleString:E,emphasis:d(),hardBreakEscape:d(D),hardBreakTrailing:d(D),htmlFlow:d(q),htmlFlowData:$,htmlText:d(N),htmlTextData:$,image:d(V),label:Y,labelText:X,lineEnding:Z,link:d(U),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:Q,resourceDestinationString:B,resourceTitleString:z,resource:I,setextHeading:d(P),setextHeadingLineSequence:M,setextHeadingText:T,strong:d(),thematicBreak:d()}};m_(t,(e||{}).mdastExtensions||[]);const n={};return i;function i(se){let we={type:"root",children:[]};const Ne={stack:[we],tokenStack:[],config:t,enter:c,exit:h,buffer:l,resume:m,data:n},Ie=[];let qe=-1;for(;++qe<se.length;)if(se[qe][1].type==="listOrdered"||se[qe][1].type==="listUnordered")if(se[qe][0]==="enter")Ie.push(qe);else{const dt=Ie.pop();qe=o(se,dt,qe)}for(qe=-1;++qe<se.length;){const dt=t[se[qe][0]];p_.call(dt,se[qe][1].type)&&dt[se[qe][1].type].call(Object.assign({sliceSerialize:se[qe][2].sliceSerialize},Ne),se[qe][1])}if(Ne.tokenStack.length>0){const dt=Ne.tokenStack[Ne.tokenStack.length-1];(dt[1]||mb).call(Ne,void 0,dt[0])}for(we.position={start:ji(se.length>0?se[0][1].start:{line:1,column:1,offset:0}),end:ji(se.length>0?se[se.length-2][1].end:{line:1,column:1,offset:0})},qe=-1;++qe<t.transforms.length;)we=t.transforms[qe](we)||we;return we}function o(se,we,Ne){let Ie=we-1,qe=-1,dt=!1,Bt,$e,ht,jt;for(;++Ie<=Ne;){const Ve=se[Ie];switch(Ve[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ve[0]==="enter"?qe++:qe--,jt=void 0;break}case"lineEndingBlank":{Ve[0]==="enter"&&(Bt&&!jt&&!qe&&!ht&&(ht=Ie),jt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:jt=void 0}if(!qe&&Ve[0]==="enter"&&Ve[1].type==="listItemPrefix"||qe===-1&&Ve[0]==="exit"&&(Ve[1].type==="listUnordered"||Ve[1].type==="listOrdered")){if(Bt){let mn=Ie;for($e=void 0;mn--;){const Kt=se[mn];if(Kt[1].type==="lineEnding"||Kt[1].type==="lineEndingBlank"){if(Kt[0]==="exit")continue;$e&&(se[$e][1].type="lineEndingBlank",dt=!0),Kt[1].type="lineEnding",$e=mn}else if(!(Kt[1].type==="linePrefix"||Kt[1].type==="blockQuotePrefix"||Kt[1].type==="blockQuotePrefixWhitespace"||Kt[1].type==="blockQuoteMarker"||Kt[1].type==="listItemIndent"))break}ht&&(!$e||ht<$e)&&(Bt._spread=!0),Bt.end=Object.assign({},$e?se[$e][1].start:Ve[1].end),se.splice($e||Ie,0,["exit",Bt,Ve[2]]),Ie++,Ne++}if(Ve[1].type==="listItemPrefix"){const mn={type:"listItem",_spread:!1,start:Object.assign({},Ve[1].start),end:void 0};Bt=mn,se.splice(Ie,0,["enter",mn,Ve[2]]),Ie++,Ne++,ht=void 0,jt=!0}}}return se[we][1]._spread=dt,Ne}function s(se,we){return Ne;function Ne(Ie){c.call(this,se(Ie),Ie),we&&we.call(this,Ie)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(se,we,Ne){this.stack[this.stack.length-1].children.push(se),this.stack.push(se),this.tokenStack.push([we,Ne||void 0]),se.position={start:ji(we.start),end:void 0}}function d(se){return we;function we(Ne){se&&se.call(this,Ne),h.call(this,Ne)}}function h(se,we){const Ne=this.stack.pop(),Ie=this.tokenStack.pop();if(Ie)Ie[0].type!==se.type&&(we?we.call(this,se,Ie[0]):(Ie[1]||mb).call(this,se,Ie[0]));else throw new Error("Cannot close `"+se.type+"` ("+Xs({start:se.start,end:se.end})+"): its not open");Ne.position.end=ji(se.end)}function m(){return mg(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function g(se){if(this.data.expectingFirstListItemValue){const we=this.stack[this.stack.length-2];we.start=Number.parseInt(this.sliceSerialize(se),10),this.data.expectingFirstListItemValue=void 0}}function y(){const se=this.resume(),we=this.stack[this.stack.length-1];we.lang=se}function w(){const se=this.resume(),we=this.stack[this.stack.length-1];we.meta=se}function S(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function _(){const se=this.resume(),we=this.stack[this.stack.length-1];we.value=se.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const se=this.resume(),we=this.stack[this.stack.length-1];we.value=se.replace(/(\r?\n|\r)$/g,"")}function k(se){const we=this.resume(),Ne=this.stack[this.stack.length-1];Ne.label=we,Ne.identifier=er(this.sliceSerialize(se)).toLowerCase()}function E(){const se=this.resume(),we=this.stack[this.stack.length-1];we.title=se}function j(){const se=this.resume(),we=this.stack[this.stack.length-1];we.url=se}function A(se){const we=this.stack[this.stack.length-1];if(!we.depth){const Ne=this.sliceSerialize(se).length;we.depth=Ne}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function M(se){const we=this.stack[this.stack.length-1];we.depth=this.sliceSerialize(se).codePointAt(0)===61?1:2}function P(){this.data.setextHeadingSlurpLineEnding=void 0}function F(se){const Ne=this.stack[this.stack.length-1].children;let Ie=Ne[Ne.length-1];(!Ie||Ie.type!=="text")&&(Ie=Ce(),Ie.position={start:ji(se.start),end:void 0},Ne.push(Ie)),this.stack.push(Ie)}function $(se){const we=this.stack.pop();we.value+=this.sliceSerialize(se),we.position.end=ji(se.end)}function Z(se){const we=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ne=we.children[we.children.length-1];Ne.position.end=ji(se.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(we.type)&&(F.call(this,se),$.call(this,se))}function D(){this.data.atHardBreak=!0}function q(){const se=this.resume(),we=this.stack[this.stack.length-1];we.value=se}function N(){const se=this.resume(),we=this.stack[this.stack.length-1];we.value=se}function H(){const se=this.resume(),we=this.stack[this.stack.length-1];we.value=se}function U(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const we=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=we,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function V(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const we=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=we,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function X(se){const we=this.sliceSerialize(se),Ne=this.stack[this.stack.length-2];Ne.label=NM(we),Ne.identifier=er(we).toLowerCase()}function Y(){const se=this.stack[this.stack.length-1],we=this.resume(),Ne=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ne.type==="link"){const Ie=se.children;Ne.children=Ie}else Ne.alt=we}function B(){const se=this.resume(),we=this.stack[this.stack.length-1];we.url=se}function z(){const se=this.resume(),we=this.stack[this.stack.length-1];we.title=se}function I(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function Q(se){const we=this.resume(),Ne=this.stack[this.stack.length-1];Ne.label=we,Ne.identifier=er(this.sliceSerialize(se)).toLowerCase(),this.data.referenceType="full"}function ee(se){this.data.characterReferenceType=se.type}function ue(se){const we=this.sliceSerialize(se),Ne=this.data.characterReferenceType;let Ie;Ne?(Ie=i_(we,Ne==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ie=gg(we);const qe=this.stack[this.stack.length-1];qe.value+=Ie}function ye(se){const we=this.stack.pop();we.position.end=ji(se.end)}function de(se){$.call(this,se);const we=this.stack[this.stack.length-1];we.url=this.sliceSerialize(se)}function ve(se){$.call(this,se);const we=this.stack[this.stack.length-1];we.url="mailto:"+this.sliceSerialize(se)}function Ae(){return{type:"blockquote",children:[]}}function je(){return{type:"code",lang:null,meta:null,value:""}}function Te(){return{type:"inlineCode",value:""}}function De(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function L(){return{type:"emphasis",children:[]}}function te(){return{type:"heading",depth:0,children:[]}}function re(){return{type:"break"}}function W(){return{type:"html",value:""}}function K(){return{type:"image",title:null,url:"",alt:null}}function ie(){return{type:"link",title:null,url:"",children:[]}}function pe(se){return{type:"list",ordered:se.type==="listOrdered",start:null,spread:se._spread,children:[]}}function ge(se){return{type:"listItem",spread:se._spread,checked:null,children:[]}}function oe(){return{type:"paragraph",children:[]}}function _e(){return{type:"strong",children:[]}}function Ce(){return{type:"text",value:""}}function ke(){return{type:"thematicBreak"}}}function ji(e){return{line:e.line,column:e.column,offset:e.offset}}function m_(e,t){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?m_(e,i):zM(e,i)}}function zM(e,t){let n;for(n in t)if(p_.call(t,n))switch(n){case"canContainEols":{const i=t[n];i&&e[n].push(...i);break}case"transforms":{const i=t[n];i&&e[n].push(...i);break}case"enter":case"exit":{const i=t[n];i&&Object.assign(e[n],i);break}}}function mb(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Xs({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Xs({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Xs({start:t.start,end:t.end})+") is still open")}function MM(e){const t=this;t.parser=n;function n(i){return TM(i,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function OM(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function RM(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function IM(e,t){const n=t.value?t.value+`
`:"",i={},o=t.lang?t.lang.split(/\s+/):[];o.length>0&&(i.className=["language-"+o[0]]);let s={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function LM(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function UM(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function BM(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),o=Ao(i.toLowerCase()),s=e.footnoteOrder.indexOf(i);let l,c=e.footnoteCounts.get(i);c===void 0?(c=0,e.footnoteOrder.push(i),l=e.footnoteOrder.length):l=s+1,c+=1,e.footnoteCounts.set(i,c);const d={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+o,id:n+"fnref-"+o+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(t,d);const h={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(t,h),e.applyData(t,h)}function HM(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function PM(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function g_(e,t){const n=t.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+i}];const o=e.all(t),s=o[0];s&&s.type==="text"?s.value="["+s.value:o.unshift({type:"text",value:"["});const l=o[o.length-1];return l&&l.type==="text"?l.value+=i:o.push({type:"text",value:i}),o}function FM(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return g_(e,t);const o={src:Ao(i.url||""),alt:t.alt};i.title!==null&&i.title!==void 0&&(o.title=i.title);const s={type:"element",tagName:"img",properties:o,children:[]};return e.patch(t,s),e.applyData(t,s)}function qM(e,t){const n={src:Ao(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,i),e.applyData(t,i)}function $M(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,i),e.applyData(t,i)}function VM(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return g_(e,t);const o={href:Ao(i.url||"")};i.title!==null&&i.title!==void 0&&(o.title=i.title);const s={type:"element",tagName:"a",properties:o,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function YM(e,t){const n={href:Ao(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function GM(e,t,n){const i=e.all(t),o=n?XM(n):y_(t),s={},l=[];if(typeof t.checked=="boolean"){const m=i[0];let p;m&&m.type==="element"&&m.tagName==="p"?p=m:(p={type:"element",tagName:"p",properties:{},children:[]},i.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let c=-1;for(;++c<i.length;){const m=i[c];(o||c!==0||m.type!=="element"||m.tagName!=="p")&&l.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!o?l.push(...m.children):l.push(m)}const d=i[i.length-1];d&&(o||d.type!=="element"||d.tagName!=="p")&&l.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:s,children:l};return e.patch(t,h),e.applyData(t,h)}function XM(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let i=-1;for(;!t&&++i<n.length;)t=y_(n[i])}return t}function y_(e){const t=e.spread;return t??e.children.length>1}function ZM(e,t){const n={},i=e.all(t);let o=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++o<i.length;){const l=i[o];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function KM(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function WM(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function QM(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function JM(e,t){const n=e.all(t),i=n.shift(),o=[];if(i){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(t.children[0],l),o.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},c=fg(t.children[1]),d=KS(t.children[t.children.length-1]);c&&d&&(l.position={start:c,end:d}),o.push(l)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(o,!0)};return e.patch(t,s),e.applyData(t,s)}function eO(e,t,n){const i=n?n.children:void 0,s=(i?i.indexOf(t):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,c=l?l.length:t.children.length;let d=-1;const h=[];for(;++d<c;){const p=t.children[d],g={},y=l?l[d]:void 0;y&&(g.align=y);let w={type:"element",tagName:s,properties:g,children:[]};p&&(w.children=e.all(p),e.patch(p,w),w=e.applyData(p,w)),h.push(w)}const m={type:"element",tagName:"tr",properties:{},children:e.wrap(h,!0)};return e.patch(t,m),e.applyData(t,m)}function tO(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const gb=9,yb=32;function nO(e){const t=String(e),n=/\r?\n|\r/g;let i=n.exec(t),o=0;const s=[];for(;i;)s.push(xb(t.slice(o,i.index),o>0,!0),i[0]),o=i.index+i[0].length,i=n.exec(t);return s.push(xb(t.slice(o),o>0,!1)),s.join("")}function xb(e,t,n){let i=0,o=e.length;if(t){let s=e.codePointAt(i);for(;s===gb||s===yb;)i++,s=e.codePointAt(i)}if(n){let s=e.codePointAt(o-1);for(;s===gb||s===yb;)o--,s=e.codePointAt(o-1)}return o>i?e.slice(i,o):""}function rO(e,t){const n={type:"text",value:nO(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function iO(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const aO={blockquote:OM,break:RM,code:IM,delete:LM,emphasis:UM,footnoteReference:BM,heading:HM,html:PM,imageReference:FM,image:qM,inlineCode:$M,linkReference:VM,link:YM,listItem:GM,list:ZM,paragraph:KM,root:WM,strong:QM,table:JM,tableCell:tO,tableRow:eO,text:rO,thematicBreak:iO,toml:dc,yaml:dc,definition:dc,footnoteDefinition:dc};function dc(){}const x_=-1,Rf=0,Ks=1,of=2,xg=3,vg=4,bg=5,wg=6,v_=7,b_=8,vb=typeof self=="object"?self:globalThis,oO=(e,t)=>{const n=(o,s)=>(e.set(s,o),o),i=o=>{if(e.has(o))return e.get(o);const[s,l]=t[o];switch(s){case Rf:case x_:return n(l,o);case Ks:{const c=n([],o);for(const d of l)c.push(i(d));return c}case of:{const c=n({},o);for(const[d,h]of l)c[i(d)]=i(h);return c}case xg:return n(new Date(l),o);case vg:{const{source:c,flags:d}=l;return n(new RegExp(c,d),o)}case bg:{const c=n(new Map,o);for(const[d,h]of l)c.set(i(d),i(h));return c}case wg:{const c=n(new Set,o);for(const d of l)c.add(i(d));return c}case v_:{const{name:c,message:d}=l;return n(new vb[c](d),o)}case b_:return n(BigInt(l),o);case"BigInt":return n(Object(BigInt(l)),o);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:c}=new Uint8Array(l);return n(new DataView(c),l)}}return n(new vb[s](l),o)};return i},bb=e=>oO(new Map,e)(0),ro="",{toString:sO}={},{keys:lO}=Object,Ms=e=>{const t=typeof e;if(t!=="object"||!e)return[Rf,t];const n=sO.call(e).slice(8,-1);switch(n){case"Array":return[Ks,ro];case"Object":return[of,ro];case"Date":return[xg,ro];case"RegExp":return[vg,ro];case"Map":return[bg,ro];case"Set":return[wg,ro];case"DataView":return[Ks,n]}return n.includes("Array")?[Ks,n]:n.includes("Error")?[v_,n]:[of,n]},hc=([e,t])=>e===Rf&&(t==="function"||t==="symbol"),uO=(e,t,n,i)=>{const o=(l,c)=>{const d=i.push(l)-1;return n.set(c,d),d},s=l=>{if(n.has(l))return n.get(l);let[c,d]=Ms(l);switch(c){case Rf:{let m=l;switch(d){case"bigint":c=b_,m=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+d);m=null;break;case"undefined":return o([x_],l)}return o([c,m],l)}case Ks:{if(d){let g=l;return d==="DataView"?g=new Uint8Array(l.buffer):d==="ArrayBuffer"&&(g=new Uint8Array(l)),o([d,[...g]],l)}const m=[],p=o([c,m],l);for(const g of l)m.push(s(g));return p}case of:{if(d)switch(d){case"BigInt":return o([d,l.toString()],l);case"Boolean":case"Number":case"String":return o([d,l.valueOf()],l)}if(t&&"toJSON"in l)return s(l.toJSON());const m=[],p=o([c,m],l);for(const g of lO(l))(e||!hc(Ms(l[g])))&&m.push([s(g),s(l[g])]);return p}case xg:return o([c,l.toISOString()],l);case vg:{const{source:m,flags:p}=l;return o([c,{source:m,flags:p}],l)}case bg:{const m=[],p=o([c,m],l);for(const[g,y]of l)(e||!(hc(Ms(g))||hc(Ms(y))))&&m.push([s(g),s(y)]);return p}case wg:{const m=[],p=o([c,m],l);for(const g of l)(e||!hc(Ms(g)))&&m.push(s(g));return p}}const{message:h}=l;return o([c,{name:d,message:h}],l)};return s},wb=(e,{json:t,lossy:n}={})=>{const i=[];return uO(!(t||n),!!t,new Map,i)(e),i},sf=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?bb(wb(e,t)):structuredClone(e):(e,t)=>bb(wb(e,t));function cO(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function fO(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function dO(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||cO,i=e.options.footnoteBackLabel||fO,o=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let d=-1;for(;++d<e.footnoteOrder.length;){const h=e.footnoteById.get(e.footnoteOrder[d]);if(!h)continue;const m=e.all(h),p=String(h.identifier).toUpperCase(),g=Ao(p.toLowerCase());let y=0;const w=[],S=e.footnoteCounts.get(p);for(;S!==void 0&&++y<=S;){w.length>0&&w.push({type:"text",value:" "});let k=typeof n=="string"?n:n(d,y);typeof k=="string"&&(k={type:"text",value:k}),w.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+g+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(d,y),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const _=m[m.length-1];if(_&&_.type==="element"&&_.tagName==="p"){const k=_.children[_.children.length-1];k&&k.type==="text"?k.value+=" ":_.children.push({type:"text",value:" "}),_.children.push(...w)}else m.push(...w);const b={type:"element",tagName:"li",properties:{id:t+"fn-"+g},children:e.wrap(m,!0)};e.patch(h,b),c.push(b)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...sf(l),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(c,!0)},{type:"text",value:`
`}]}}const If=(function(e){if(e==null)return gO;if(typeof e=="function")return Lf(e);if(typeof e=="object")return Array.isArray(e)?hO(e):pO(e);if(typeof e=="string")return mO(e);throw new Error("Expected function, string, or object as test")});function hO(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=If(e[n]);return Lf(i);function i(...o){let s=-1;for(;++s<t.length;)if(t[s].apply(this,o))return!0;return!1}}function pO(e){const t=e;return Lf(n);function n(i){const o=i;let s;for(s in e)if(o[s]!==t[s])return!1;return!0}}function mO(e){return Lf(t);function t(n){return n&&n.type===e}}function Lf(e){return t;function t(n,i,o){return!!(yO(n)&&e.call(this,n,typeof i=="number"?i:void 0,o||void 0))}}function gO(){return!0}function yO(e){return e!==null&&typeof e=="object"&&"type"in e}const w_=[],xO=!0,Em=!1,vO="skip";function S_(e,t,n,i){let o;typeof t=="function"&&typeof n!="function"?(i=n,n=t):o=t;const s=If(o),l=i?-1:1;c(e,void 0,[])();function c(d,h,m){const p=d&&typeof d=="object"?d:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(d.type+(y?"<"+y+">":""))+")"})}return g;function g(){let y=w_,w,S,_;if((!t||s(d,h,m[m.length-1]||void 0))&&(y=bO(n(d,m)),y[0]===Em))return y;if("children"in d&&d.children){const b=d;if(b.children&&y[0]!==vO)for(S=(i?b.children.length:-1)+l,_=m.concat(b);S>-1&&S<b.children.length;){const k=b.children[S];if(w=c(k,S,_)(),w[0]===Em)return w;S=typeof w[1]=="number"?w[1]:S+l}}return y}}}function bO(e){return Array.isArray(e)?e:typeof e=="number"?[xO,e]:e==null?w_:[e]}function Sg(e,t,n,i){let o,s,l;typeof t=="function"&&typeof n!="function"?(s=void 0,l=t,o=n):(s=t,l=n,o=i),S_(e,s,c,o);function c(d,h){const m=h[h.length-1],p=m?m.children.indexOf(d):void 0;return l(d,p,m)}}const Cm={}.hasOwnProperty,wO={};function SO(e,t){const n=t||wO,i=new Map,o=new Map,s=new Map,l={...aO,...n.handlers},c={all:h,applyData:kO,definitionById:i,footnoteById:o,footnoteCounts:s,footnoteOrder:[],handlers:l,one:d,options:n,patch:_O,wrap:CO};return Sg(e,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const p=m.type==="definition"?i:o,g=String(m.identifier).toUpperCase();p.has(g)||p.set(g,m)}}),c;function d(m,p){const g=m.type,y=c.handlers[g];if(Cm.call(c.handlers,g)&&y)return y(c,m,p);if(c.options.passThrough&&c.options.passThrough.includes(g)){if("children"in m){const{children:S,..._}=m,b=sf(_);return b.children=c.all(m),b}return sf(m)}return(c.options.unknownHandler||EO)(c,m,p)}function h(m){const p=[];if("children"in m){const g=m.children;let y=-1;for(;++y<g.length;){const w=c.one(g[y],m);if(w){if(y&&g[y-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=Sb(w.value)),!Array.isArray(w)&&w.type==="element")){const S=w.children[0];S&&S.type==="text"&&(S.value=Sb(S.value))}Array.isArray(w)?p.push(...w):p.push(w)}}}return p}}function _O(e,t){e.position&&(t.position=f6(e))}function kO(e,t){let n=t;if(e&&e.data){const i=e.data.hName,o=e.data.hChildren,s=e.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const l="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:l}}n.type==="element"&&s&&Object.assign(n.properties,sf(s)),"children"in n&&n.children&&o!==null&&o!==void 0&&(n.children=o)}return n}function EO(e,t){const n=t.data||{},i="value"in t&&!(Cm.call(n,"hProperties")||Cm.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function CO(e,t){const n=[];let i=-1;for(t&&n.push({type:"text",value:`
`});++i<e.length;)i&&n.push({type:"text",value:`
`}),n.push(e[i]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Sb(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function _b(e,t){const n=SO(e,t),i=n.one(e,void 0),o=dO(n),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return o&&s.children.push({type:"text",value:`
`},o),s}function jO(e,t){return e&&"run"in e?async function(n,i){const o=_b(n,{file:i,...t});await e.run(o,i)}:function(n,i){return _b(n,{file:i,...e||t})}}function kb(e){if(e)throw e}var Ep,Eb;function NO(){if(Eb)return Ep;Eb=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=function(h){return typeof Array.isArray=="function"?Array.isArray(h):t.call(h)==="[object Array]"},s=function(h){if(!h||t.call(h)!=="[object Object]")return!1;var m=e.call(h,"constructor"),p=h.constructor&&h.constructor.prototype&&e.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!m&&!p)return!1;var g;for(g in h);return typeof g>"u"||e.call(h,g)},l=function(h,m){n&&m.name==="__proto__"?n(h,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):h[m.name]=m.newValue},c=function(h,m){if(m==="__proto__")if(e.call(h,m)){if(i)return i(h,m).value}else return;return h[m]};return Ep=function d(){var h,m,p,g,y,w,S=arguments[0],_=1,b=arguments.length,k=!1;for(typeof S=="boolean"&&(k=S,S=arguments[1]||{},_=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});_<b;++_)if(h=arguments[_],h!=null)for(m in h)p=c(S,m),g=c(h,m),S!==g&&(k&&g&&(s(g)||(y=o(g)))?(y?(y=!1,w=p&&o(p)?p:[]):w=p&&s(p)?p:{},l(S,{name:m,newValue:d(k,w,g)})):typeof g<"u"&&l(S,{name:m,newValue:g}));return S},Ep}var AO=NO();const Cp=jo(AO);function jm(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function TO(){const e=[],t={run:n,use:i};return t;function n(...o){let s=-1;const l=o.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...o);function c(d,...h){const m=e[++s];let p=-1;if(d){l(d);return}for(;++p<o.length;)(h[p]===null||h[p]===void 0)&&(h[p]=o[p]);o=h,m?DO(m,c)(...h):l(null,...h)}}function i(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return e.push(o),t}}function DO(e,t){let n;return i;function i(...l){const c=e.length>l.length;let d;c&&l.push(o);try{d=e.apply(this,l)}catch(h){const m=h;if(c&&n)throw m;return o(m)}c||(d&&d.then&&typeof d.then=="function"?d.then(s,o):d instanceof Error?o(d):s(d))}function o(l,...c){n||(n=!0,t(l,...c))}function s(l){o(null,l)}}const sr={basename:zO,dirname:MO,extname:OO,join:RO,sep:"/"};function zO(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Cl(e);let n=0,i=-1,o=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;o--;)if(e.codePointAt(o)===47){if(s){n=o+1;break}}else i<0&&(s=!0,i=o+1);return i<0?"":e.slice(n,i)}if(t===e)return"";let l=-1,c=t.length-1;for(;o--;)if(e.codePointAt(o)===47){if(s){n=o+1;break}}else l<0&&(s=!0,l=o+1),c>-1&&(e.codePointAt(o)===t.codePointAt(c--)?c<0&&(i=o):(c=-1,i=l));return n===i?i=l:i<0&&(i=e.length),e.slice(n,i)}function MO(e){if(Cl(e),e.length===0)return".";let t=-1,n=e.length,i;for(;--n;)if(e.codePointAt(n)===47){if(i){t=n;break}}else i||(i=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function OO(e){Cl(e);let t=e.length,n=-1,i=0,o=-1,s=0,l;for(;t--;){const c=e.codePointAt(t);if(c===47){if(l){i=t+1;break}continue}n<0&&(l=!0,n=t+1),c===46?o<0?o=t:s!==1&&(s=1):o>-1&&(s=-1)}return o<0||n<0||s===0||s===1&&o===n-1&&o===i+1?"":e.slice(o,n)}function RO(...e){let t=-1,n;for(;++t<e.length;)Cl(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":IO(n)}function IO(e){Cl(e);const t=e.codePointAt(0)===47;let n=LO(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function LO(e,t){let n="",i=0,o=-1,s=0,l=-1,c,d;for(;++l<=e.length;){if(l<e.length)c=e.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(o===l-1||s===1))if(o!==l-1&&s===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(d=n.lastIndexOf("/"),d!==n.length-1){d<0?(n="",i=0):(n=n.slice(0,d),i=n.length-1-n.lastIndexOf("/")),o=l,s=0;continue}}else if(n.length>0){n="",i=0,o=l,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+e.slice(o+1,l):n=e.slice(o+1,l),i=l-o-1;o=l,s=0}else c===46&&s>-1?s++:s=-1}return n}function Cl(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const UO={cwd:BO};function BO(){return"/"}function Nm(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function HO(e){if(typeof e=="string")e=new URL(e);else if(!Nm(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return PO(e)}function PO(e){if(e.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const i=t.codePointAt(n+2);if(i===70||i===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(t)}const jp=["history","path","basename","stem","extname","dirname"];class __{constructor(t){let n;t?Nm(t)?n={path:t}:typeof t=="string"||FO(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":UO.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<jp.length;){const s=jp[i];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let o;for(o in n)jp.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?sr.basename(this.path):void 0}set basename(t){Ap(t,"basename"),Np(t,"basename"),this.path=sr.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?sr.dirname(this.path):void 0}set dirname(t){Cb(this.basename,"dirname"),this.path=sr.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?sr.extname(this.path):void 0}set extname(t){if(Np(t,"extname"),Cb(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=sr.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Nm(t)&&(t=HO(t)),Ap(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?sr.basename(this.path,this.extname):void 0}set stem(t){Ap(t,"stem"),Np(t,"stem"),this.path=sr.join(this.dirname||"",t+(this.extname||""))}fail(t,n,i){const o=this.message(t,n,i);throw o.fatal=!0,o}info(t,n,i){const o=this.message(t,n,i);return o.fatal=void 0,o}message(t,n,i){const o=new Zt(t,n,i);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Np(e,t){if(e&&e.includes(sr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+sr.sep+"`")}function Ap(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Cb(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function FO(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const qO=(function(e){const i=this.constructor.prototype,o=i[e],s=function(){return o.apply(s,arguments)};return Object.setPrototypeOf(s,i),s}),$O={}.hasOwnProperty;class _g extends qO{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=TO()}copy(){const t=new _g;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];t.use(...i)}return t.data(Cp(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(zp("data",this.frozen),this.namespace[t]=n,this):$O.call(this.namespace,t)&&this.namespace[t]||void 0:t?(zp("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const o=n.call(t,...i);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=pc(t),i=this.parser||this.Parser;return Tp("parse",i),i(String(n),n)}process(t,n){const i=this;return this.freeze(),Tp("process",this.parser||this.Parser),Dp("process",this.compiler||this.Compiler),n?o(void 0,n):new Promise(o);function o(s,l){const c=pc(t),d=i.parse(c);i.run(d,c,function(m,p,g){if(m||!p||!g)return h(m);const y=p,w=i.stringify(y,g);GO(w)?g.value=w:g.result=w,h(m,g)});function h(m,p){m||!p?l(m):s?s(p):n(void 0,p)}}}processSync(t){let n=!1,i;return this.freeze(),Tp("processSync",this.parser||this.Parser),Dp("processSync",this.compiler||this.Compiler),this.process(t,o),Nb("processSync","process",n),i;function o(s,l){n=!0,kb(s),i=l}}run(t,n,i){jb(t),this.freeze();const o=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?s(void 0,i):new Promise(s);function s(l,c){const d=pc(n);o.run(t,d,h);function h(m,p,g){const y=p||t;m?c(m):l?l(y):i(void 0,y,g)}}}runSync(t,n){let i=!1,o;return this.run(t,n,s),Nb("runSync","run",i),o;function s(l,c){kb(l),o=c,i=!0}}stringify(t,n){this.freeze();const i=pc(n),o=this.compiler||this.Compiler;return Dp("stringify",o),jb(t),o(t,i)}use(t,...n){const i=this.attachers,o=this.namespace;if(zp("use",this.frozen),t!=null)if(typeof t=="function")d(t,n);else if(typeof t=="object")Array.isArray(t)?c(t):l(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(h){if(typeof h=="function")d(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[m,...p]=h;d(m,p)}else l(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function l(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(h.plugins),h.settings&&(o.settings=Cp(!0,o.settings,h.settings))}function c(h){let m=-1;if(h!=null)if(Array.isArray(h))for(;++m<h.length;){const p=h[m];s(p)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function d(h,m){let p=-1,g=-1;for(;++p<i.length;)if(i[p][0]===h){g=p;break}if(g===-1)i.push([h,...m]);else if(m.length>0){let[y,...w]=m;const S=i[g][1];jm(S)&&jm(y)&&(y=Cp(!0,S,y)),i[g]=[h,y,...w]}}}}const VO=new _g().freeze();function Tp(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Dp(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function zp(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function jb(e){if(!jm(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Nb(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function pc(e){return YO(e)?e:new __(e)}function YO(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function GO(e){return typeof e=="string"||XO(e)}function XO(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const ZO="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Ab=[],Tb={allowDangerousHtml:!0},KO=/^(https?|ircs?|mailto|xmpp)$/i,WO=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function QO(e){const t=JO(e),n=eR(e);return tR(t.runSync(t.parse(n),n),e)}function JO(e){const t=e.rehypePlugins||Ab,n=e.remarkPlugins||Ab,i=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Tb}:Tb;return VO().use(MM).use(n).use(jO,i).use(t)}function eR(e){const t=e.children||"",n=new __;return typeof t=="string"&&(n.value=t),n}function tR(e,t){const n=t.allowedElements,i=t.allowElement,o=t.components,s=t.disallowedElements,l=t.skipHtml,c=t.unwrapDisallowed,d=t.urlTransform||nR;for(const m of WO)Object.hasOwn(t,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+ZO+m.id,void 0);return Sg(e,h),g6(e,{Fragment:x.Fragment,components:o,ignoreInvalidStyle:!0,jsx:x.jsx,jsxs:x.jsxs,passKeys:!0,passNode:!0});function h(m,p,g){if(m.type==="raw"&&g&&typeof p=="number")return l?g.children.splice(p,1):g.children[p]={type:"text",value:m.value},p;if(m.type==="element"){let y;for(y in Sp)if(Object.hasOwn(Sp,y)&&Object.hasOwn(m.properties,y)){const w=m.properties[y],S=Sp[y];(S===null||S.includes(m.tagName))&&(m.properties[y]=d(String(w||""),y,m))}}if(m.type==="element"){let y=n?!n.includes(m.tagName):s?s.includes(m.tagName):!1;if(!y&&i&&typeof p=="number"&&(y=!i(m,p,g)),y&&g&&typeof p=="number")return c&&m.children?g.children.splice(p,1,...m.children):g.children.splice(p,1),p}}}function nR(e){const t=e.indexOf(":"),n=e.indexOf("?"),i=e.indexOf("#"),o=e.indexOf("/");return t===-1||o!==-1&&t>o||n!==-1&&t>n||i!==-1&&t>i||KO.test(e.slice(0,t))?e:""}function Db(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let i=0,o=n.indexOf(t);for(;o!==-1;)i++,o=n.indexOf(t,o+t.length);return i}function rR(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function iR(e,t,n){const o=If((n||{}).ignore||[]),s=aR(t);let l=-1;for(;++l<s.length;)S_(e,"text",c);function c(h,m){let p=-1,g;for(;++p<m.length;){const y=m[p],w=g?g.children:void 0;if(o(y,w?w.indexOf(y):void 0,g))return;g=y}if(g)return d(h,m)}function d(h,m){const p=m[m.length-1],g=s[l][0],y=s[l][1];let w=0;const _=p.children.indexOf(h);let b=!1,k=[];g.lastIndex=0;let E=g.exec(h.value);for(;E;){const j=E.index,A={index:E.index,input:E.input,stack:[...m,h]};let T=y(...E,A);if(typeof T=="string"&&(T=T.length>0?{type:"text",value:T}:void 0),T===!1?g.lastIndex=j+1:(w!==j&&k.push({type:"text",value:h.value.slice(w,j)}),Array.isArray(T)?k.push(...T):T&&k.push(T),w=j+E[0].length,b=!0),!g.global)break;E=g.exec(h.value)}return b?(w<h.value.length&&k.push({type:"text",value:h.value.slice(w)}),p.children.splice(_,1,...k)):k=[h],_+k.length}}function aR(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let i=-1;for(;++i<n.length;){const o=n[i];t.push([oR(o[0]),sR(o[1])])}return t}function oR(e){return typeof e=="string"?new RegExp(rR(e),"g"):e}function sR(e){return typeof e=="function"?e:function(){return e}}const Mp="phrasing",Op=["autolink","link","image","label"];function lR(){return{transforms:[mR],enter:{literalAutolink:cR,literalAutolinkEmail:Rp,literalAutolinkHttp:Rp,literalAutolinkWww:Rp},exit:{literalAutolink:pR,literalAutolinkEmail:hR,literalAutolinkHttp:fR,literalAutolinkWww:dR}}}function uR(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Mp,notInConstruct:Op},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Mp,notInConstruct:Op},{character:":",before:"[ps]",after:"\\/",inConstruct:Mp,notInConstruct:Op}]}}function cR(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Rp(e){this.config.enter.autolinkProtocol.call(this,e)}function fR(e){this.config.exit.autolinkProtocol.call(this,e)}function dR(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function hR(e){this.config.exit.autolinkEmail.call(this,e)}function pR(e){this.exit(e)}function mR(e){iR(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,gR],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),yR]],{ignore:["link","linkReference"]})}function gR(e,t,n,i,o){let s="";if(!k_(o)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!xR(n)))return!1;const l=vR(n+i);if(!l[0])return!1;const c={type:"link",title:null,url:s+t+l[0],children:[{type:"text",value:t+l[0]}]};return l[1]?[c,{type:"text",value:l[1]}]:c}function yR(e,t,n,i){return!k_(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function xR(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function vR(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],i=n.indexOf(")");const o=Db(e,"(");let s=Db(e,")");for(;i!==-1&&o>s;)e+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),s++;return[e,n]}function k_(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||ha(n)||Mf(n))&&(!t||n!==47)}E_.peek=NR;function bR(){this.buffer()}function wR(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function SR(){this.buffer()}function _R(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function kR(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=er(this.sliceSerialize(e)).toLowerCase(),n.label=t}function ER(e){this.exit(e)}function CR(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=er(this.sliceSerialize(e)).toLowerCase(),n.label=t}function jR(e){this.exit(e)}function NR(){return"["}function E_(e,t,n,i){const o=n.createTracker(i);let s=o.move("[^");const l=n.enter("footnoteReference"),c=n.enter("reference");return s+=o.move(n.safe(n.associationId(e),{after:"]",before:s})),c(),l(),s+=o.move("]"),s}function AR(){return{enter:{gfmFootnoteCallString:bR,gfmFootnoteCall:wR,gfmFootnoteDefinitionLabelString:SR,gfmFootnoteDefinition:_R},exit:{gfmFootnoteCallString:kR,gfmFootnoteCall:ER,gfmFootnoteDefinitionLabelString:CR,gfmFootnoteDefinition:jR}}}function TR(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:E_},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,o,s,l){const c=s.createTracker(l);let d=c.move("[^");const h=s.enter("footnoteDefinition"),m=s.enter("label");return d+=c.move(s.safe(s.associationId(i),{before:d,after:"]"})),m(),d+=c.move("]:"),i.children&&i.children.length>0&&(c.shift(4),d+=c.move((t?`
`:" ")+s.indentLines(s.containerFlow(i,c.current()),t?C_:DR))),h(),d}}function DR(e,t,n){return t===0?e:C_(e,t,n)}function C_(e,t,n){return(n?"":"    ")+e}const zR=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];j_.peek=LR;function MR(){return{canContainEols:["delete"],enter:{strikethrough:RR},exit:{strikethrough:IR}}}function OR(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:zR}],handlers:{delete:j_}}}function RR(e){this.enter({type:"delete",children:[]},e)}function IR(e){this.exit(e)}function j_(e,t,n,i){const o=n.createTracker(i),s=n.enter("strikethrough");let l=o.move("~~");return l+=n.containerPhrasing(e,{...o.current(),before:l,after:"~"}),l+=o.move("~~"),s(),l}function LR(){return"~"}function UR(e){return e.length}function BR(e,t){const n=t||{},i=(n.align||[]).concat(),o=n.stringLength||UR,s=[],l=[],c=[],d=[];let h=0,m=-1;for(;++m<e.length;){const S=[],_=[];let b=-1;for(e[m].length>h&&(h=e[m].length);++b<e[m].length;){const k=HR(e[m][b]);if(n.alignDelimiters!==!1){const E=o(k);_[b]=E,(d[b]===void 0||E>d[b])&&(d[b]=E)}S.push(k)}l[m]=S,c[m]=_}let p=-1;if(typeof i=="object"&&"length"in i)for(;++p<h;)s[p]=zb(i[p]);else{const S=zb(i);for(;++p<h;)s[p]=S}p=-1;const g=[],y=[];for(;++p<h;){const S=s[p];let _="",b="";S===99?(_=":",b=":"):S===108?_=":":S===114&&(b=":");let k=n.alignDelimiters===!1?1:Math.max(1,d[p]-_.length-b.length);const E=_+"-".repeat(k)+b;n.alignDelimiters!==!1&&(k=_.length+k+b.length,k>d[p]&&(d[p]=k),y[p]=k),g[p]=E}l.splice(1,0,g),c.splice(1,0,y),m=-1;const w=[];for(;++m<l.length;){const S=l[m],_=c[m];p=-1;const b=[];for(;++p<h;){const k=S[p]||"";let E="",j="";if(n.alignDelimiters!==!1){const A=d[p]-(_[p]||0),T=s[p];T===114?E=" ".repeat(A):T===99?A%2?(E=" ".repeat(A/2+.5),j=" ".repeat(A/2-.5)):(E=" ".repeat(A/2),j=E):j=" ".repeat(A)}n.delimiterStart!==!1&&!p&&b.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&k==="")&&(n.delimiterStart!==!1||p)&&b.push(" "),n.alignDelimiters!==!1&&b.push(E),b.push(k),n.alignDelimiters!==!1&&b.push(j),n.padding!==!1&&b.push(" "),(n.delimiterEnd!==!1||p!==h-1)&&b.push("|")}w.push(n.delimiterEnd===!1?b.join("").replace(/ +$/,""):b.join(""))}return w.join(`
`)}function HR(e){return e==null?"":String(e)}function zb(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function PR(e,t,n,i){const o=n.enter("blockquote"),s=n.createTracker(i);s.move("> "),s.shift(2);const l=n.indentLines(n.containerFlow(e,s.current()),FR);return o(),l}function FR(e,t,n){return">"+(n?"":" ")+e}function qR(e,t){return Mb(e,t.inConstruct,!0)&&!Mb(e,t.notInConstruct,!1)}function Mb(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let i=-1;for(;++i<t.length;)if(e.includes(t[i]))return!0;return!1}function Ob(e,t,n,i){let o=-1;for(;++o<n.unsafe.length;)if(n.unsafe[o].character===`
`&&qR(n.stack,n.unsafe[o]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function $R(e,t){const n=String(e);let i=n.indexOf(t),o=i,s=0,l=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===o?++s>l&&(l=s):s=1,o=i+t.length,i=n.indexOf(t,o);return l}function VR(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function YR(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function GR(e,t,n,i){const o=YR(n),s=e.value||"",l=o==="`"?"GraveAccent":"Tilde";if(VR(e,n)){const p=n.enter("codeIndented"),g=n.indentLines(s,XR);return p(),g}const c=n.createTracker(i),d=o.repeat(Math.max($R(s,o)+1,3)),h=n.enter("codeFenced");let m=c.move(d);if(e.lang){const p=n.enter(`codeFencedLang${l}`);m+=c.move(n.safe(e.lang,{before:m,after:" ",encode:["`"],...c.current()})),p()}if(e.lang&&e.meta){const p=n.enter(`codeFencedMeta${l}`);m+=c.move(" "),m+=c.move(n.safe(e.meta,{before:m,after:`
`,encode:["`"],...c.current()})),p()}return m+=c.move(`
`),s&&(m+=c.move(s+`
`)),m+=c.move(d),h(),m}function XR(e,t,n){return(n?"":"    ")+e}function kg(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function ZR(e,t,n,i){const o=kg(n),s=o==='"'?"Quote":"Apostrophe",l=n.enter("definition");let c=n.enter("label");const d=n.createTracker(i);let h=d.move("[");return h+=d.move(n.safe(n.associationId(e),{before:h,after:"]",...d.current()})),h+=d.move("]: "),c(),!e.url||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),h+=d.move("<"),h+=d.move(n.safe(e.url,{before:h,after:">",...d.current()})),h+=d.move(">")):(c=n.enter("destinationRaw"),h+=d.move(n.safe(e.url,{before:h,after:e.title?" ":`
`,...d.current()}))),c(),e.title&&(c=n.enter(`title${s}`),h+=d.move(" "+o),h+=d.move(n.safe(e.title,{before:h,after:o,...d.current()})),h+=d.move(o),c()),l(),h}function KR(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function dl(e){return"&#x"+e.toString(16).toUpperCase()+";"}function lf(e,t,n){const i=Co(e),o=Co(t);return i===void 0?o===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}N_.peek=WR;function N_(e,t,n,i){const o=KR(n),s=n.enter("emphasis"),l=n.createTracker(i),c=l.move(o);let d=l.move(n.containerPhrasing(e,{after:o,before:c,...l.current()}));const h=d.charCodeAt(0),m=lf(i.before.charCodeAt(i.before.length-1),h,o);m.inside&&(d=dl(h)+d.slice(1));const p=d.charCodeAt(d.length-1),g=lf(i.after.charCodeAt(0),p,o);g.inside&&(d=d.slice(0,-1)+dl(p));const y=l.move(o);return s(),n.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},c+d+y}function WR(e,t,n){return n.options.emphasis||"*"}function QR(e,t){let n=!1;return Sg(e,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,Em}),!!((!e.depth||e.depth<3)&&mg(e)&&(t.options.setext||n))}function JR(e,t,n,i){const o=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(i);if(QR(e,n)){const m=n.enter("headingSetext"),p=n.enter("phrasing"),g=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return p(),m(),g+`
`+(o===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const l="#".repeat(o),c=n.enter("headingAtx"),d=n.enter("phrasing");s.move(l+" ");let h=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(h)&&(h=dl(h.charCodeAt(0))+h.slice(1)),h=h?l+" "+h:l,n.options.closeAtx&&(h+=" "+l),d(),c(),h}A_.peek=e8;function A_(e){return e.value||""}function e8(){return"<"}T_.peek=t8;function T_(e,t,n,i){const o=kg(n),s=o==='"'?"Quote":"Apostrophe",l=n.enter("image");let c=n.enter("label");const d=n.createTracker(i);let h=d.move("![");return h+=d.move(n.safe(e.alt,{before:h,after:"]",...d.current()})),h+=d.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),h+=d.move("<"),h+=d.move(n.safe(e.url,{before:h,after:">",...d.current()})),h+=d.move(">")):(c=n.enter("destinationRaw"),h+=d.move(n.safe(e.url,{before:h,after:e.title?" ":")",...d.current()}))),c(),e.title&&(c=n.enter(`title${s}`),h+=d.move(" "+o),h+=d.move(n.safe(e.title,{before:h,after:o,...d.current()})),h+=d.move(o),c()),h+=d.move(")"),l(),h}function t8(){return"!"}D_.peek=n8;function D_(e,t,n,i){const o=e.referenceType,s=n.enter("imageReference");let l=n.enter("label");const c=n.createTracker(i);let d=c.move("![");const h=n.safe(e.alt,{before:d,after:"]",...c.current()});d+=c.move(h+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(e),{before:d,after:"]",...c.current()});return l(),n.stack=m,s(),o==="full"||!h||h!==p?d+=c.move(p+"]"):o==="shortcut"?d=d.slice(0,-1):d+=c.move("]"),d}function n8(){return"!"}z_.peek=r8;function z_(e,t,n){let i=e.value||"",o="`",s=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(i);)o+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++s<n.unsafe.length;){const l=n.unsafe[s],c=n.compilePattern(l);let d;if(l.atBreak)for(;d=c.exec(i);){let h=d.index;i.charCodeAt(h)===10&&i.charCodeAt(h-1)===13&&h--,i=i.slice(0,h)+" "+i.slice(d.index+1)}}return o+i+o}function r8(){return"`"}function M_(e,t){const n=mg(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}O_.peek=i8;function O_(e,t,n,i){const o=kg(n),s=o==='"'?"Quote":"Apostrophe",l=n.createTracker(i);let c,d;if(M_(e,n)){const m=n.stack;n.stack=[],c=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(e,{before:p,after:">",...l.current()})),p+=l.move(">"),c(),n.stack=m,p}c=n.enter("link"),d=n.enter("label");let h=l.move("[");return h+=l.move(n.containerPhrasing(e,{before:h,after:"](",...l.current()})),h+=l.move("]("),d(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(d=n.enter("destinationLiteral"),h+=l.move("<"),h+=l.move(n.safe(e.url,{before:h,after:">",...l.current()})),h+=l.move(">")):(d=n.enter("destinationRaw"),h+=l.move(n.safe(e.url,{before:h,after:e.title?" ":")",...l.current()}))),d(),e.title&&(d=n.enter(`title${s}`),h+=l.move(" "+o),h+=l.move(n.safe(e.title,{before:h,after:o,...l.current()})),h+=l.move(o),d()),h+=l.move(")"),c(),h}function i8(e,t,n){return M_(e,n)?"<":"["}R_.peek=a8;function R_(e,t,n,i){const o=e.referenceType,s=n.enter("linkReference");let l=n.enter("label");const c=n.createTracker(i);let d=c.move("[");const h=n.containerPhrasing(e,{before:d,after:"]",...c.current()});d+=c.move(h+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(e),{before:d,after:"]",...c.current()});return l(),n.stack=m,s(),o==="full"||!h||h!==p?d+=c.move(p+"]"):o==="shortcut"?d=d.slice(0,-1):d+=c.move("]"),d}function a8(){return"["}function Eg(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function o8(e){const t=Eg(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function s8(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function I_(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function l8(e,t,n,i){const o=n.enter("list"),s=n.bulletCurrent;let l=e.ordered?s8(n):Eg(n);const c=e.ordered?l==="."?")":".":o8(n);let d=t&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!e.ordered){const m=e.children?e.children[0]:void 0;if((l==="*"||l==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(d=!0),I_(n)===l&&m){let p=-1;for(;++p<e.children.length;){const g=e.children[p];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){d=!0;break}}}}d&&(l=c),n.bulletCurrent=l;const h=n.containerFlow(e,i);return n.bulletLastUsed=l,n.bulletCurrent=s,o(),h}function u8(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function c8(e,t,n,i){const o=u8(n);let s=n.bulletCurrent||Eg(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let l=s.length+1;(o==="tab"||o==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(l=Math.ceil(l/4)*4);const c=n.createTracker(i);c.move(s+" ".repeat(l-s.length)),c.shift(l);const d=n.enter("listItem"),h=n.indentLines(n.containerFlow(e,c.current()),m);return d(),h;function m(p,g,y){return g?(y?"":" ".repeat(l))+p:(y?s:s+" ".repeat(l-s.length))+p}}function f8(e,t,n,i){const o=n.enter("paragraph"),s=n.enter("phrasing"),l=n.containerPhrasing(e,i);return s(),o(),l}const d8=If(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function h8(e,t,n,i){return(e.children.some(function(l){return d8(l)})?n.containerPhrasing:n.containerFlow).call(n,e,i)}function p8(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}L_.peek=m8;function L_(e,t,n,i){const o=p8(n),s=n.enter("strong"),l=n.createTracker(i),c=l.move(o+o);let d=l.move(n.containerPhrasing(e,{after:o,before:c,...l.current()}));const h=d.charCodeAt(0),m=lf(i.before.charCodeAt(i.before.length-1),h,o);m.inside&&(d=dl(h)+d.slice(1));const p=d.charCodeAt(d.length-1),g=lf(i.after.charCodeAt(0),p,o);g.inside&&(d=d.slice(0,-1)+dl(p));const y=l.move(o+o);return s(),n.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},c+d+y}function m8(e,t,n){return n.options.strong||"*"}function g8(e,t,n,i){return n.safe(e.value,i)}function y8(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function x8(e,t,n){const i=(I_(n)+(n.options.ruleSpaces?" ":"")).repeat(y8(n));return n.options.ruleSpaces?i.slice(0,-1):i}const U_={blockquote:PR,break:Ob,code:GR,definition:ZR,emphasis:N_,hardBreak:Ob,heading:JR,html:A_,image:T_,imageReference:D_,inlineCode:z_,link:O_,linkReference:R_,list:l8,listItem:c8,paragraph:f8,root:h8,strong:L_,text:g8,thematicBreak:x8};function v8(){return{enter:{table:b8,tableData:Rb,tableHeader:Rb,tableRow:S8},exit:{codeText:_8,table:w8,tableData:Ip,tableHeader:Ip,tableRow:Ip}}}function b8(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function w8(e){this.exit(e),this.data.inTable=void 0}function S8(e){this.enter({type:"tableRow",children:[]},e)}function Ip(e){this.exit(e)}function Rb(e){this.enter({type:"tableCell",children:[]},e)}function _8(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,k8));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function k8(e,t){return t==="|"?t:e}function E8(e){const t=e||{},n=t.tableCellPadding,i=t.tablePipeAlign,o=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:l,tableCell:d,tableRow:c}};function l(y,w,S,_){return h(m(y,S,_),y.align)}function c(y,w,S,_){const b=p(y,S,_),k=h([b]);return k.slice(0,k.indexOf(`
`))}function d(y,w,S,_){const b=S.enter("tableCell"),k=S.enter("phrasing"),E=S.containerPhrasing(y,{..._,before:s,after:s});return k(),b(),E}function h(y,w){return BR(y,{align:w,alignDelimiters:i,padding:n,stringLength:o})}function m(y,w,S){const _=y.children;let b=-1;const k=[],E=w.enter("table");for(;++b<_.length;)k[b]=p(_[b],w,S);return E(),k}function p(y,w,S){const _=y.children;let b=-1;const k=[],E=w.enter("tableRow");for(;++b<_.length;)k[b]=d(_[b],y,w,S);return E(),k}function g(y,w,S){let _=U_.inlineCode(y,w,S);return S.stack.includes("tableCell")&&(_=_.replace(/\|/g,"\\$&")),_}}function C8(){return{exit:{taskListCheckValueChecked:Ib,taskListCheckValueUnchecked:Ib,paragraph:N8}}}function j8(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:A8}}}function Ib(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function N8(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const o=t.children;let s=-1,l;for(;++s<o.length;){const c=o[s];if(c.type==="paragraph"){l=c;break}}l===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(e)}function A8(e,t,n,i){const o=e.children[0],s=typeof e.checked=="boolean"&&o&&o.type==="paragraph",l="["+(e.checked?"x":" ")+"] ",c=n.createTracker(i);s&&c.move(l);let d=U_.listItem(e,t,n,{...i,...c.current()});return s&&(d=d.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),d;function h(m){return m+l}}function T8(){return[lR(),AR(),MR(),v8(),C8()]}function D8(e){return{extensions:[uR(),TR(e),OR(),E8(e),j8()]}}const z8={tokenize:U8,partial:!0},B_={tokenize:B8,partial:!0},H_={tokenize:H8,partial:!0},P_={tokenize:P8,partial:!0},M8={tokenize:F8,partial:!0},F_={name:"wwwAutolink",tokenize:I8,previous:$_},q_={name:"protocolAutolink",tokenize:L8,previous:V_},Xr={name:"emailAutolink",tokenize:R8,previous:Y_},hr={};function O8(){return{text:hr}}let ta=48;for(;ta<123;)hr[ta]=Xr,ta++,ta===58?ta=65:ta===91&&(ta=97);hr[43]=Xr;hr[45]=Xr;hr[46]=Xr;hr[95]=Xr;hr[72]=[Xr,q_];hr[104]=[Xr,q_];hr[87]=[Xr,F_];hr[119]=[Xr,F_];function R8(e,t,n){const i=this;let o,s;return l;function l(p){return!Am(p)||!Y_.call(i,i.previous)||Cg(i.events)?n(p):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),c(p))}function c(p){return Am(p)?(e.consume(p),c):p===64?(e.consume(p),d):n(p)}function d(p){return p===46?e.check(M8,m,h)(p):p===45||p===95||Xt(p)?(s=!0,e.consume(p),d):m(p)}function h(p){return e.consume(p),o=!0,d}function m(p){return s&&o&&Qt(i.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(p)):n(p)}}function I8(e,t,n){const i=this;return o;function o(l){return l!==87&&l!==119||!$_.call(i,i.previous)||Cg(i.events)?n(l):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(z8,e.attempt(B_,e.attempt(H_,s),n),n)(l))}function s(l){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(l)}}function L8(e,t,n){const i=this;let o="",s=!1;return l;function l(p){return(p===72||p===104)&&V_.call(i,i.previous)&&!Cg(i.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),o+=String.fromCodePoint(p),e.consume(p),c):n(p)}function c(p){if(Qt(p)&&o.length<5)return o+=String.fromCodePoint(p),e.consume(p),c;if(p===58){const g=o.toLowerCase();if(g==="http"||g==="https")return e.consume(p),d}return n(p)}function d(p){return p===47?(e.consume(p),s?h:(s=!0,d)):n(p)}function h(p){return p===null||af(p)||ft(p)||ha(p)||Mf(p)?n(p):e.attempt(B_,e.attempt(H_,m),n)(p)}function m(p){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(p)}}function U8(e,t,n){let i=0;return o;function o(l){return(l===87||l===119)&&i<3?(i++,e.consume(l),o):l===46&&i===3?(e.consume(l),s):n(l)}function s(l){return l===null?n(l):t(l)}}function B8(e,t,n){let i,o,s;return l;function l(h){return h===46||h===95?e.check(P_,d,c)(h):h===null||ft(h)||ha(h)||h!==45&&Mf(h)?d(h):(s=!0,e.consume(h),l)}function c(h){return h===95?i=!0:(o=i,i=void 0),e.consume(h),l}function d(h){return o||i||!s?n(h):t(h)}}function H8(e,t){let n=0,i=0;return o;function o(l){return l===40?(n++,e.consume(l),o):l===41&&i<n?s(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?e.check(P_,t,s)(l):l===null||ft(l)||ha(l)?t(l):(e.consume(l),o)}function s(l){return l===41&&i++,e.consume(l),o}}function P8(e,t,n){return i;function i(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(e.consume(c),i):c===38?(e.consume(c),s):c===93?(e.consume(c),o):c===60||c===null||ft(c)||ha(c)?t(c):n(c)}function o(c){return c===null||c===40||c===91||ft(c)||ha(c)?t(c):i(c)}function s(c){return Qt(c)?l(c):n(c)}function l(c){return c===59?(e.consume(c),i):Qt(c)?(e.consume(c),l):n(c)}}function F8(e,t,n){return i;function i(s){return e.consume(s),o}function o(s){return Xt(s)?n(s):t(s)}}function $_(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||ft(e)}function V_(e){return!Qt(e)}function Y_(e){return!(e===47||Am(e))}function Am(e){return e===43||e===45||e===46||e===95||Xt(e)}function Cg(e){let t=e.length,n=!1;for(;t--;){const i=e[t][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const q8={tokenize:W8,partial:!0};function $8(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:X8,continuation:{tokenize:Z8},exit:K8}},text:{91:{name:"gfmFootnoteCall",tokenize:G8},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:V8,resolveTo:Y8}}}}function V8(e,t,n){const i=this;let o=i.events.length;const s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let l;for(;o--;){const d=i.events[o][1];if(d.type==="labelImage"){l=d;break}if(d.type==="gfmFootnoteCall"||d.type==="labelLink"||d.type==="label"||d.type==="image"||d.type==="link")break}return c;function c(d){if(!l||!l._balanced)return n(d);const h=er(i.sliceSerialize({start:l.end,end:i.now()}));return h.codePointAt(0)!==94||!s.includes(h.slice(1))?n(d):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),t(d))}}function Y8(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},e[e.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},c=[e[n+1],e[n+2],["enter",i,t],e[n+3],e[n+4],["enter",o,t],["exit",o,t],["enter",s,t],["enter",l,t],["exit",l,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",i,t]];return e.splice(n,e.length-n+1,...c),e}function G8(e,t,n){const i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s=0,l;return c;function c(p){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),d}function d(p){return p!==94?n(p):(e.enter("gfmFootnoteCallMarker"),e.consume(p),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",h)}function h(p){if(s>999||p===93&&!l||p===null||p===91||ft(p))return n(p);if(p===93){e.exit("chunkString");const g=e.exit("gfmFootnoteCallString");return o.includes(er(i.sliceSerialize(g)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(p)}return ft(p)||(l=!0),s++,e.consume(p),p===92?m:h}function m(p){return p===91||p===92||p===93?(e.consume(p),s++,h):h(p)}}function X8(e,t,n){const i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s,l=0,c;return d;function d(w){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(w){return w===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",m):n(w)}function m(w){if(l>999||w===93&&!c||w===null||w===91||ft(w))return n(w);if(w===93){e.exit("chunkString");const S=e.exit("gfmFootnoteDefinitionLabelString");return s=er(i.sliceSerialize(S)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),g}return ft(w)||(c=!0),l++,e.consume(w),w===92?p:m}function p(w){return w===91||w===92||w===93?(e.consume(w),l++,m):m(w)}function g(w){return w===58?(e.enter("definitionMarker"),e.consume(w),e.exit("definitionMarker"),o.includes(s)||o.push(s),Je(e,y,"gfmFootnoteDefinitionWhitespace")):n(w)}function y(w){return t(w)}}function Z8(e,t,n){return e.check(El,t,e.attempt(q8,t,n))}function K8(e){e.exit("gfmFootnoteDefinition")}function W8(e,t,n){const i=this;return Je(e,o,"gfmFootnoteDefinitionIndent",5);function o(s){const l=i.events[i.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?t(s):n(s)}}function Q8(e){let n=(e||{}).singleTilde;const i={name:"strikethrough",tokenize:s,resolveAll:o};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function o(l,c){let d=-1;for(;++d<l.length;)if(l[d][0]==="enter"&&l[d][1].type==="strikethroughSequenceTemporary"&&l[d][1]._close){let h=d;for(;h--;)if(l[h][0]==="exit"&&l[h][1].type==="strikethroughSequenceTemporary"&&l[h][1]._open&&l[d][1].end.offset-l[d][1].start.offset===l[h][1].end.offset-l[h][1].start.offset){l[d][1].type="strikethroughSequence",l[h][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},l[h][1].start),end:Object.assign({},l[d][1].end)},p={type:"strikethroughText",start:Object.assign({},l[h][1].end),end:Object.assign({},l[d][1].start)},g=[["enter",m,c],["enter",l[h][1],c],["exit",l[h][1],c],["enter",p,c]],y=c.parser.constructs.insideSpan.null;y&&Nn(g,g.length,0,Of(y,l.slice(h+1,d),c)),Nn(g,g.length,0,[["exit",p,c],["enter",l[d][1],c],["exit",l[d][1],c],["exit",m,c]]),Nn(l,h-1,d-h+3,g),d=h+g.length-2;break}}for(d=-1;++d<l.length;)l[d][1].type==="strikethroughSequenceTemporary"&&(l[d][1].type="data");return l}function s(l,c,d){const h=this.previous,m=this.events;let p=0;return g;function g(w){return h===126&&m[m.length-1][1].type!=="characterEscape"?d(w):(l.enter("strikethroughSequenceTemporary"),y(w))}function y(w){const S=Co(h);if(w===126)return p>1?d(w):(l.consume(w),p++,y);if(p<2&&!n)return d(w);const _=l.exit("strikethroughSequenceTemporary"),b=Co(w);return _._open=!b||b===2&&!!S,_._close=!S||S===2&&!!b,c(w)}}}class J8{constructor(){this.map=[]}add(t,n,i){eI(this,t,n,i)}consume(t){if(this.map.sort(function(s,l){return s[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];i.push(t.slice()),t.length=0;let o=i.pop();for(;o;){for(const s of o)t.push(s);o=i.pop()}this.map.length=0}}function eI(e,t,n,i){let o=0;if(!(n===0&&i.length===0)){for(;o<e.map.length;){if(e.map[o][0]===t){e.map[o][1]+=n,e.map[o][2].push(...i);return}o+=1}e.map.push([t,n,i])}}function tI(e,t){let n=!1;const i=[];for(;t<e.length;){const o=e[t];if(n){if(o[0]==="enter")o[1].type==="tableContent"&&i.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(o[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=i.length-1;i[s]=i[s]==="left"?"center":"right"}}else if(o[1].type==="tableDelimiterRow")break}else o[0]==="enter"&&o[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return i}function nI(){return{flow:{null:{name:"table",tokenize:rI,resolveAll:iI}}}}function rI(e,t,n){const i=this;let o=0,s=0,l;return c;function c($){let Z=i.events.length-1;for(;Z>-1;){const N=i.events[Z][1].type;if(N==="lineEnding"||N==="linePrefix")Z--;else break}const D=Z>-1?i.events[Z][1].type:null,q=D==="tableHead"||D==="tableRow"?T:d;return q===T&&i.parser.lazy[i.now().line]?n($):q($)}function d($){return e.enter("tableHead"),e.enter("tableRow"),h($)}function h($){return $===124||(l=!0,s+=1),m($)}function m($){return $===null?n($):Le($)?s>1?(s=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),y):n($):Xe($)?Je(e,m,"whitespace")($):(s+=1,l&&(l=!1,o+=1),$===124?(e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),l=!0,m):(e.enter("data"),p($)))}function p($){return $===null||$===124||ft($)?(e.exit("data"),m($)):(e.consume($),$===92?g:p)}function g($){return $===92||$===124?(e.consume($),p):p($)}function y($){return i.interrupt=!1,i.parser.lazy[i.now().line]?n($):(e.enter("tableDelimiterRow"),l=!1,Xe($)?Je(e,w,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):w($))}function w($){return $===45||$===58?_($):$===124?(l=!0,e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),S):A($)}function S($){return Xe($)?Je(e,_,"whitespace")($):_($)}function _($){return $===58?(s+=1,l=!0,e.enter("tableDelimiterMarker"),e.consume($),e.exit("tableDelimiterMarker"),b):$===45?(s+=1,b($)):$===null||Le($)?j($):A($)}function b($){return $===45?(e.enter("tableDelimiterFiller"),k($)):A($)}function k($){return $===45?(e.consume($),k):$===58?(l=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume($),e.exit("tableDelimiterMarker"),E):(e.exit("tableDelimiterFiller"),E($))}function E($){return Xe($)?Je(e,j,"whitespace")($):j($)}function j($){return $===124?w($):$===null||Le($)?!l||o!==s?A($):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t($)):A($)}function A($){return n($)}function T($){return e.enter("tableRow"),M($)}function M($){return $===124?(e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),M):$===null||Le($)?(e.exit("tableRow"),t($)):Xe($)?Je(e,M,"whitespace")($):(e.enter("data"),P($))}function P($){return $===null||$===124||ft($)?(e.exit("data"),M($)):(e.consume($),$===92?F:P)}function F($){return $===92||$===124?(e.consume($),P):P($)}}function iI(e,t){let n=-1,i=!0,o=0,s=[0,0,0,0],l=[0,0,0,0],c=!1,d=0,h,m,p;const g=new J8;for(;++n<e.length;){const y=e[n],w=y[1];y[0]==="enter"?w.type==="tableHead"?(c=!1,d!==0&&(Lb(g,t,d,h,m),m=void 0,d=0),h={type:"table",start:Object.assign({},w.start),end:Object.assign({},w.end)},g.add(n,0,[["enter",h,t]])):w.type==="tableRow"||w.type==="tableDelimiterRow"?(i=!0,p=void 0,s=[0,0,0,0],l=[0,n+1,0,0],c&&(c=!1,m={type:"tableBody",start:Object.assign({},w.start),end:Object.assign({},w.end)},g.add(n,0,[["enter",m,t]])),o=w.type==="tableDelimiterRow"?2:m?3:1):o&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")?(i=!1,l[2]===0&&(s[1]!==0&&(l[0]=l[1],p=mc(g,t,s,o,void 0,p),s=[0,0,0,0]),l[2]=n)):w.type==="tableCellDivider"&&(i?i=!1:(s[1]!==0&&(l[0]=l[1],p=mc(g,t,s,o,void 0,p)),s=l,l=[s[1],n,0,0])):w.type==="tableHead"?(c=!0,d=n):w.type==="tableRow"||w.type==="tableDelimiterRow"?(d=n,s[1]!==0?(l[0]=l[1],p=mc(g,t,s,o,n,p)):l[1]!==0&&(p=mc(g,t,l,o,n,p)),o=0):o&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")&&(l[3]=n)}for(d!==0&&Lb(g,t,d,h,m),g.consume(t.events),n=-1;++n<t.events.length;){const y=t.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=tI(t.events,n))}return e}function mc(e,t,n,i,o,s){const l=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(s.end=Object.assign({},lo(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const d=lo(t.events,n[1]);if(s={type:l,start:Object.assign({},d),end:Object.assign({},d)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const h=lo(t.events,n[2]),m=lo(t.events,n[3]),p={type:c,start:Object.assign({},h),end:Object.assign({},m)};if(e.add(n[2],0,[["enter",p,t]]),i!==2){const g=t.events[n[2]],y=t.events[n[3]];if(g[1].end=Object.assign({},y[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const w=n[2]+1,S=n[3]-n[2]-1;e.add(w,S,[])}}e.add(n[3]+1,0,[["exit",p,t]])}return o!==void 0&&(s.end=Object.assign({},lo(t.events,o)),e.add(o,0,[["exit",s,t]]),s=void 0),s}function Lb(e,t,n,i,o){const s=[],l=lo(t.events,n);o&&(o.end=Object.assign({},l),s.push(["exit",o,t])),i.end=Object.assign({},l),s.push(["exit",i,t]),e.add(n+1,0,s)}function lo(e,t){const n=e[t],i=n[0]==="enter"?"start":"end";return n[1][i]}const aI={name:"tasklistCheck",tokenize:sI};function oI(){return{text:{91:aI}}}function sI(e,t,n){const i=this;return o;function o(d){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(d):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),s)}function s(d){return ft(d)?(e.enter("taskListCheckValueUnchecked"),e.consume(d),e.exit("taskListCheckValueUnchecked"),l):d===88||d===120?(e.enter("taskListCheckValueChecked"),e.consume(d),e.exit("taskListCheckValueChecked"),l):n(d)}function l(d){return d===93?(e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),c):n(d)}function c(d){return Le(d)?t(d):Xe(d)?e.check({tokenize:lI},t,n)(d):n(d)}}function lI(e,t,n){return Je(e,i,"whitespace");function i(o){return o===null?n(o):t(o)}}function uI(e){return r_([O8(),$8(),Q8(e),nI(),oI()])}const cI={};function fI(e){const t=this,n=e||cI,i=t.data(),o=i.micromarkExtensions||(i.micromarkExtensions=[]),s=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),l=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);o.push(uI(n)),s.push(T8()),l.push(D8(n))}function dI(e){const t=e.split(`
`),n=[];let i=null,o=[];const s=l=>{i&&i.id&&n.push({...i,endLine:l,content:o.join(`
`),linkedNodeIds:[]}),o=[],i=null};for(let l=0;l<t.length;l++){const c=t[l],d=l+1,h=c.match(/^(#{1,6})\s+(.+)$/);if(h){i&&s(d-1);const m=h[1].length,p=h[2].trim(),{type:g,id:y}=hI(p);i={id:y,type:g,heading:p,level:m,startLine:d},o=[c]}else i&&o.push(c)}return i&&s(t.length),n}function hI(e,t){const n=e.toLowerCase(),i=e.match(/SCENE\s+([A-Z])-?(\d+)/i);return i?{type:"scene",id:`scene-${i[1].toLowerCase()}${i[2]}`}:n.includes("screenplay")?{type:"screenplay",id:"screenplay"}:n.includes("flowboard node reference")?{type:"node-reference",id:"node-reference"}:n.includes("time period")?{type:"time-period",id:"time-period"}:n==="style"?{type:"style",id:"style"}:n==="camera"?{type:"camera",id:"camera"}:n==="characters"?{type:"characters",id:"characters"}:n==="extras"?{type:"extras",id:"extras"}:n==="settings"?{type:"settings",id:"settings"}:n==="props"?{type:"props",id:"props"}:n==="shots"?{type:"shots",id:"shots"}:n==="actions"?{type:"actions",id:"actions"}:{type:"unknown",id:e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"").slice(0,32)||`section-${Date.now()}`}}const G_=Di()(Af(e=>({content:"",sections:[],fileHandle:null,fileName:null,isDirty:!1,isEditing:!1,isOpen:!1,activeSectionId:null,setContent:t=>{e(n=>{n.content=t,n.sections=dI(t),n.isDirty=!0})},setFileHandle:(t,n)=>{e(i=>{i.fileHandle=t,i.fileName=n})},setDirty:t=>{e(n=>{n.isDirty=t})},setEditing:t=>{e(n=>{n.isEditing=t})},togglePanel:()=>{e(t=>{t.isOpen=!t.isOpen})},setOpen:t=>{e(n=>{n.isOpen=t})},setActiveSection:t=>{e(n=>{n.activeSectionId=t})},linkSectionToNode:(t,n)=>{e(i=>{const o=i.sections.find(s=>s.id===t);o&&!o.linkedNodeIds.includes(n)&&o.linkedNodeIds.push(n)})},unlinkSectionFromNode:(t,n)=>{e(i=>{const o=i.sections.find(s=>s.id===t);o&&(o.linkedNodeIds=o.linkedNodeIds.filter(s=>s!==n))})},clear:()=>{e(t=>{t.content="",t.sections=[],t.fileHandle=null,t.fileName=null,t.isDirty=!1,t.isEditing=!1,t.activeSectionId=null})}})));function pI(){const{content:e,sections:t,fileHandle:n,fileName:i,isDirty:o,isEditing:s,isOpen:l,activeSectionId:c,setContent:d,setFileHandle:h,setDirty:m,setEditing:p,togglePanel:g,setActiveSection:y,clear:w}=G_(),S=J.useRef(null),_=J.useRef(null),[b,k]=J.useState(!0),[E,j]=J.useState(e);J.useEffect(()=>{s||j(e)},[e,s]);const A=J.useCallback(async()=>{try{const[D]=await window.showOpenFilePicker({types:[{description:"Markdown files",accept:{"text/markdown":[".md"]}}],multiple:!1}),q=await D.getFile(),N=await q.text();h(D,q.name),d(N),j(N),m(!1)}catch(D){D.name!=="AbortError"&&console.error("Error opening file:",D)}},[h,d,m]),T=J.useCallback(async()=>{try{let D=n;D||(D=await window.showSaveFilePicker({suggestedName:"script.md",types:[{description:"Markdown files",accept:{"text/markdown":[".md"]}}]}),h(D,D.name));const q=await D.createWritable();await q.write(e),await q.close(),m(!1)}catch(D){D.name!=="AbortError"&&console.error("Error saving file:",D)}},[n,e,h,m]),M=J.useCallback(()=>{s&&d(E),p(!s)},[s,E,d,p]),P=J.useCallback(D=>{j(D.target.value)},[]),F=J.useCallback(D=>{y(D);const q=_.current?.querySelector(`[data-section-id="${D}"]`);q&&q.scrollIntoView({behavior:"smooth",block:"start"})},[y]);J.useEffect(()=>{const D=q=>{(q.metaKey||q.ctrlKey)&&q.key==="s"&&l&&(q.preventDefault(),T())};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[l,T]);const $=t.filter(D=>D.type==="scene"),Z=t.filter(D=>["characters","settings","props","style","camera","extras","shots","actions","time-period"].includes(D.type));return l?x.jsxs("div",{className:"h-full flex flex-col",style:{width:"400px",minWidth:"300px",maxWidth:"560px",background:"var(--color-bg-panel)",borderLeft:"1px solid var(--color-border-medium)"},children:[x.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--color-border-subtle)"},children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{onClick:A,className:"flex items-center justify-center rounded-md transition-colors hover:bg-bg-hover",style:{width:"32px",height:"32px",color:"var(--color-text-secondary)"},title:"Open file",children:x.jsx(mm,{size:16})}),x.jsx("button",{onClick:T,className:"flex items-center justify-center rounded-md transition-colors hover:bg-bg-hover disabled:opacity-40",style:{width:"32px",height:"32px",color:o?"#f59e0b":"var(--color-text-secondary)"},disabled:!o&&!!n,title:"Save (Cmd+S)",children:x.jsx(SS,{size:16})}),e&&x.jsx("button",{onClick:()=>{o?window.confirm("You have unsaved changes. Close anyway?")&&w():w()},className:"flex items-center justify-center rounded-md transition-colors hover:bg-bg-hover",style:{width:"32px",height:"32px",color:"var(--color-text-muted)"},title:"Close script",children:x.jsx(Tf,{size:16})}),x.jsx("div",{style:{width:"1px",height:"20px",background:"var(--color-border-subtle)",margin:"0 4px"}}),x.jsx("button",{onClick:M,className:"flex items-center justify-center rounded-md transition-colors hover:bg-bg-hover",style:{width:"32px",height:"32px",color:s?"#818cf8":"var(--color-text-secondary)"},title:s?"Preview mode":"Edit mode",children:s?x.jsx(NS,{size:16}):x.jsx(og,{size:16})})]}),x.jsx("button",{onClick:g,className:"flex items-center justify-center rounded-md transition-colors hover:bg-bg-hover",style:{width:"32px",height:"32px",color:"var(--color-text-muted)"},title:"Close panel (Cmd+\\)",children:x.jsx(wS,{size:16})})]}),x.jsxs("div",{className:"flex items-center gap-2",style:{marginTop:"10px"},children:[x.jsx("span",{className:"opacity-40",children:x.jsx(nf,{size:14})}),x.jsx("span",{className:"text-sm truncate",style:{color:i?"var(--color-text-primary)":"var(--color-text-muted)",flex:1},children:i||"No file open"}),o&&x.jsx("span",{style:{color:"#f59e0b",fontSize:"10px"},children:""})]})]}),e&&t.length>0&&!s&&x.jsxs("div",{style:{borderBottom:"1px solid var(--color-border-subtle)"},children:[x.jsxs("button",{onClick:()=>k(!b),className:"w-full flex items-center gap-3 transition-colors hover:bg-bg-hover",style:{padding:"10px 16px",color:"var(--color-text-muted)"},children:[x.jsx("span",{className:"transition-transform",style:{transform:b?"rotate(0deg)":"rotate(-90deg)"},children:x.jsx(ag,{size:14})}),x.jsx("span",{style:{fontSize:"11px",fontWeight:600,letterSpacing:"0.04em",textTransform:"uppercase"},children:"Contents"}),x.jsx("span",{style:{fontSize:"11px",color:"var(--color-text-muted)",marginLeft:"auto"},children:t.length})]}),b&&x.jsxs("div",{style:{padding:"0 12px 12px 12px",maxHeight:"200px",overflowY:"auto"},children:[$.length>0&&x.jsxs("div",{style:{marginBottom:"12px"},children:[x.jsx("div",{style:{fontSize:"10px",fontWeight:600,letterSpacing:"0.04em",textTransform:"uppercase",color:"var(--color-text-muted)",padding:"4px 10px 6px 10px"},children:"Scenes"}),$.map(D=>x.jsx("button",{onClick:()=>F(D.id),className:"w-full text-left truncate rounded-md transition-colors",style:{padding:"6px 10px",fontSize:"12px",background:c===D.id?"rgba(59, 130, 246, 0.12)":"transparent",color:c===D.id?"#60a5fa":"var(--color-text-secondary)"},onMouseEnter:q=>{c!==D.id&&(q.currentTarget.style.background="var(--color-bg-hover)")},onMouseLeave:q=>{c!==D.id&&(q.currentTarget.style.background="transparent")},children:D.heading},D.id))]}),Z.length>0&&x.jsxs("div",{children:[x.jsx("div",{style:{fontSize:"10px",fontWeight:600,letterSpacing:"0.04em",textTransform:"uppercase",color:"var(--color-text-muted)",padding:"4px 10px 6px 10px"},children:"Reference"}),Z.map(D=>x.jsx("button",{onClick:()=>F(D.id),className:"w-full text-left truncate rounded-md transition-colors",style:{padding:"6px 10px",fontSize:"12px",background:c===D.id?"rgba(59, 130, 246, 0.12)":"transparent",color:c===D.id?"#60a5fa":"var(--color-text-secondary)"},onMouseEnter:q=>{c!==D.id&&(q.currentTarget.style.background="var(--color-bg-hover)")},onMouseLeave:q=>{c!==D.id&&(q.currentTarget.style.background="transparent")},children:D.heading},D.id))]})]})]}),x.jsx("div",{className:"flex-1 overflow-hidden",children:s?x.jsx("textarea",{ref:S,value:E,onChange:P,className:"w-full h-full resize-none outline-none",style:{padding:"16px 20px",fontSize:"13px",lineHeight:1.7,fontFamily:"var(--font-mono)",background:"var(--color-bg-dark)",color:"var(--color-text-primary)",border:"none"},placeholder:"Paste or type your screenplay markdown here..."}):e?x.jsx("div",{ref:_,className:"h-full overflow-y-auto script-preview",style:{padding:"16px 20px 40px 20px"},children:x.jsx(QO,{remarkPlugins:[fI],components:{h1:({children:D,...q})=>{const N=Lp(t,String(D));return x.jsx("h1",{...q,"data-section-id":N?.id,style:{fontSize:"22px",fontWeight:700,color:"var(--color-text-primary)",marginBottom:"14px",marginTop:"28px",paddingBottom:"10px",borderBottom:"1px solid var(--color-border-subtle)",lineHeight:1.3},children:D})},h2:({children:D,...q})=>{const N=Lp(t,String(D));return x.jsx("h2",{...q,"data-section-id":N?.id,style:{fontSize:"17px",fontWeight:700,color:"var(--color-text-primary)",marginBottom:"10px",marginTop:"24px",lineHeight:1.3},children:D})},h3:({children:D,...q})=>{const N=Lp(t,String(D));return x.jsx("h3",{...q,"data-section-id":N?.id,style:{fontSize:"14px",fontWeight:600,color:"var(--color-text-primary)",marginBottom:"8px",marginTop:"20px",lineHeight:1.4},children:D})},h4:({children:D,...q})=>x.jsx("h4",{...q,style:{fontSize:"13px",fontWeight:600,color:"var(--color-text-muted)",marginBottom:"6px",marginTop:"16px",lineHeight:1.4},children:D}),p:({children:D,...q})=>x.jsx("p",{...q,style:{marginBottom:"12px",lineHeight:1.65,color:"var(--color-text-secondary)"},children:D}),strong:({children:D,...q})=>x.jsx("strong",{...q,style:{fontWeight:600,color:"#fbbf24"},children:D}),blockquote:({children:D,...q})=>x.jsx("blockquote",{...q,style:{borderLeft:"3px solid #3b82f6",paddingLeft:"14px",marginLeft:"0",marginTop:"12px",marginBottom:"12px",color:"#93c5fd",fontStyle:"italic"},children:D}),hr:({...D})=>x.jsx("hr",{...D,style:{border:"none",height:"1px",background:"var(--color-border-subtle)",margin:"24px 0"}}),table:({children:D,...q})=>x.jsx("div",{style:{overflowX:"auto",margin:"16px 0"},children:x.jsx("table",{...q,style:{width:"100%",fontSize:"12px",borderCollapse:"collapse"},children:D})}),th:({children:D,...q})=>x.jsx("th",{...q,style:{textAlign:"left",padding:"8px 12px",borderBottom:"1px solid var(--color-border-medium)",fontWeight:600,color:"var(--color-text-muted)",fontSize:"11px",textTransform:"uppercase",letterSpacing:"0.03em"},children:D}),td:({children:D,...q})=>x.jsx("td",{...q,style:{padding:"8px 12px",borderBottom:"1px solid var(--color-border-subtle)",color:"var(--color-text-secondary)",verticalAlign:"top",lineHeight:1.5},children:D}),code:({children:D,className:q,...N})=>q?.includes("language-")?x.jsx("pre",{style:{background:"var(--color-bg-dark)",borderRadius:"6px",padding:"12px 14px",margin:"12px 0",overflowX:"auto",border:"1px solid var(--color-border-subtle)"},children:x.jsx("code",{...N,style:{fontSize:"12px",fontFamily:"var(--font-mono)",lineHeight:1.5},children:D})}):x.jsx("code",{...N,style:{background:"var(--color-bg-hover)",padding:"2px 5px",borderRadius:"3px",fontSize:"12px",fontFamily:"var(--font-mono)"},children:D}),ul:({children:D,...q})=>x.jsx("ul",{...q,style:{listStyleType:"disc",paddingLeft:"20px",marginBottom:"12px"},children:D}),ol:({children:D,...q})=>x.jsx("ol",{...q,style:{listStyleType:"decimal",paddingLeft:"20px",marginBottom:"12px"},children:D}),li:({children:D,...q})=>x.jsx("li",{...q,style:{marginBottom:"4px",lineHeight:1.5,color:"var(--color-text-secondary)"},children:D})},children:e})}):x.jsxs("div",{className:"h-full flex flex-col items-center justify-center",style:{padding:"40px 24px"},children:[x.jsx("span",{className:"opacity-30 text-muted",style:{marginBottom:"16px"},children:x.jsx(nf,{size:40})}),x.jsx("p",{style:{fontSize:"13px",color:"var(--color-text-secondary)",marginBottom:"6px"},children:"No script loaded"}),x.jsx("p",{style:{fontSize:"12px",color:"var(--color-text-muted)",marginBottom:"16px"},children:"Open a markdown file to begin"}),x.jsxs("button",{onClick:A,className:"flex items-center gap-2 rounded-md transition-colors",style:{height:"32px",padding:"0 14px",background:"var(--color-accent-primary)",border:"none",fontSize:"12px",fontWeight:500,color:"#fff",cursor:"pointer"},onMouseEnter:D=>{D.currentTarget.style.background="#818cf8"},onMouseLeave:D=>{D.currentTarget.style.background="var(--color-accent-primary)"},children:[x.jsx(mm,{size:14}),x.jsx("span",{children:"Open File"})]})]})})]}):x.jsx("button",{onClick:g,className:"fixed right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center transition-all duration-200 hover:translate-x-0 translate-x-0.5",style:{width:"24px",height:"64px",background:"var(--color-bg-elevated)",border:"1px solid var(--color-border-medium)",borderRight:"none",borderRadius:"6px 0 0 6px",boxShadow:"-2px 0 8px rgba(0, 0, 0, 0.2)"},title:"Open Script Panel (Cmd+\\)",children:x.jsx("span",{className:"opacity-60",children:x.jsx(gD,{size:14})})})}function Lp(e,t){return e.find(n=>n.heading===t)}function _t({nodeId:e,nodeType:t,name:n,selected:i=!1,children:o,showSourceHandle:s=!0,showTargetHandle:l=!0,icon:c,additionalHandles:d}){const h=ct[t],m=ef[t],p=Qc(b=>b.toggleNodeCollapsed),g=Qc(b=>!!b.collapsedNodes[e]),y=Lt(b=>b.isolatedGroupId),w=Lt(b=>b.getGroupForNode(e)),S=y!==null&&w?.id!==y,_=b=>{b.stopPropagation(),p(e)};return x.jsxs("div",{className:"relative transition-opacity duration-200",style:{width:t==="output"?280:220,minWidth:t==="output"?280:220,opacity:S?.2:1,pointerEvents:S?"none":"auto"},children:[l&&x.jsx(Vt,{type:"target",position:ze.Left,style:{background:"var(--color-bg-panel)",borderColor:h,borderWidth:2}}),x.jsxs("div",{className:"rounded-xl overflow-hidden transition-shadow duration-200",style:{background:"var(--color-bg-panel)",border:`1px solid ${i?h:"var(--color-border-medium)"}`,boxShadow:i?`var(--shadow-node), 0 0 30px ${h}40`:"var(--shadow-node)"},children:[x.jsxs("div",{className:"flex items-center gap-3",style:{background:`${h}14`,padding:"14px 16px"},children:[x.jsx("div",{className:"w-7 h-7 rounded-lg flex items-center justify-center",style:{background:`${h}33`,color:h},children:c}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide leading-tight",style:{color:h},children:m}),x.jsx("div",{className:"text-[13px] font-semibold text-primary truncate mt-0.5",children:n})]}),x.jsx("button",{onClick:_,className:"w-7 h-7 rounded-lg flex items-center justify-center transition-colors",style:{color:"var(--color-text-muted)",background:"transparent"},onMouseEnter:b=>{b.currentTarget.style.background="var(--color-bg-hover)",b.currentTarget.style.color="var(--color-text-primary)"},onMouseLeave:b=>{b.currentTarget.style.background="transparent",b.currentTarget.style.color="var(--color-text-muted)"},children:x.jsx(ag,{size:14,className:`transition-transform duration-200 ${g?"-rotate-90":""}`})})]}),!g&&x.jsx("div",{style:{borderTop:"1px solid var(--color-border-subtle)",padding:"14px 16px 16px"},children:o})]}),s&&x.jsx(Vt,{type:"source",position:ze.Right,style:{background:"var(--color-bg-panel)",borderColor:h,borderWidth:2}}),d]})}function en({label:e,children:t}){return x.jsxs("div",{style:{marginBottom:"16px"},children:[x.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-muted",style:{marginBottom:"8px",marginLeft:"8px"},children:e}),x.jsx("div",{className:"font-mono text-[11px] leading-relaxed text-secondary rounded-lg",style:{background:"var(--color-bg-elevated)",border:"1px solid var(--color-border-subtle)",padding:"12px 16px"},children:t})]})}function mI({id:e,data:t,selected:n}){return x.jsx(_t,{nodeId:e,nodeType:"character",name:t.name,selected:n,showTargetHandle:!0,icon:x.jsx(mS,{size:14}),children:x.jsx(en,{label:"Description",children:x.jsx("div",{className:"line-clamp-3",children:t.description})})})}function gI({id:e,data:t,selected:n}){const i=x.jsx(Vt,{type:"target",position:ze.Left,id:"reference",style:{background:ct.reference,borderColor:ct.reference,borderWidth:2},title:"Connect reference image"});return x.jsx(_t,{nodeId:e,nodeType:"setting",name:t.name,selected:n,showTargetHandle:!1,icon:x.jsx(gS,{size:14}),additionalHandles:i,children:x.jsx(en,{label:"Description",children:x.jsx("div",{className:"line-clamp-3",children:t.description})})})}function yI({id:e,data:t,selected:n}){const i=x.jsx(Vt,{type:"target",position:ze.Left,id:"reference",style:{background:ct.reference,borderColor:ct.reference,borderWidth:2},title:"Connect reference image"});return x.jsx(_t,{nodeId:e,nodeType:"prop",name:t.name,selected:n,showTargetHandle:!1,icon:x.jsx(yS,{size:14}),additionalHandles:i,children:x.jsx(en,{label:"Description",children:x.jsx("div",{className:"line-clamp-3",children:t.description})})})}function xI({id:e,data:t,selected:n}){const i=x.jsx(Vt,{type:"target",position:ze.Left,id:"reference",style:{background:ct.reference,borderColor:ct.reference,borderWidth:2},title:"Connect reference image"});return x.jsx(_t,{nodeId:e,nodeType:"style",name:t.name,selected:n,showTargetHandle:!1,icon:x.jsx(xS,{size:14}),additionalHandles:i,children:x.jsx(en,{label:"Description",children:x.jsx("div",{className:"line-clamp-3",children:t.description})})})}function vI({id:e,data:t,selected:n}){return x.jsx(_t,{nodeId:e,nodeType:"extras",name:t.name,selected:n,showTargetHandle:!1,icon:x.jsx(CS,{size:14}),children:x.jsx(en,{label:"Description",children:x.jsx("div",{className:"line-clamp-3",children:t.description})})})}function bI({id:e,data:t,selected:n}){return x.jsxs(_t,{nodeId:e,nodeType:"shot",name:t.name,selected:n,showTargetHandle:!0,icon:x.jsx(vS,{size:14}),children:[x.jsx(en,{label:"Shot Type",children:Qm[t.preset]}),t.description&&x.jsx(en,{label:"Notes",children:x.jsx("div",{className:"line-clamp-2",children:t.description})})]})}function wI({id:e,data:t,selected:n}){return x.jsx(_t,{nodeId:e,nodeType:"outfit",name:t.name,selected:n,icon:x.jsx(ES,{size:14}),children:x.jsx(en,{label:"Description",children:x.jsx("div",{className:"line-clamp-3",children:t.description})})})}function SI({id:e,data:t,selected:n}){const i=[];return t.lensType&&t.lensType!=="standard"&&i.push(Jc[t.lensType]),t.depthOfField&&t.depthOfField!=="deep"&&i.push(Jm[t.depthOfField]),t.filmStock&&t.filmStock!=="digital"&&i.push(eg[t.filmStock]),t.vignette&&t.vignette!=="none"&&i.push(tg[t.vignette]),x.jsxs(_t,{nodeId:e,nodeType:"camera",name:t.name,selected:n,showTargetHandle:!1,icon:x.jsx(zS,{size:14}),children:[x.jsx(en,{label:"Lens",children:Jc[t.lensType]||"Standard 50mm"}),i.length>0&&x.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[i.slice(0,3).map(o=>x.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-indigo-500/20 text-indigo-300",children:o},o)),i.length>3&&x.jsxs("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-gray-500/20 text-gray-400",children:["+",i.length-3]})]})]})}function _I({id:e,data:t,selected:n}){return x.jsx(_t,{nodeId:e,nodeType:"action",name:"Scene Action",selected:n,icon:x.jsx(bS,{size:14}),children:x.jsx(en,{label:"Action",children:x.jsx("div",{className:"line-clamp-4",children:t.content})})})}function kI({id:e,data:t,selected:n}){return x.jsxs(_t,{nodeId:e,nodeType:"text",name:t.name,selected:n,showTargetHandle:!0,icon:x.jsx(RS,{size:14}),children:[x.jsx(en,{label:"Type",children:ng[t.textType]}),t.content&&x.jsx(en,{label:"Text",children:x.jsxs("div",{className:"line-clamp-3 text-xs italic",children:['"',t.content,'"']})}),t.mode==="reserve-space"&&x.jsx("div",{className:"text-[10px] text-muted mt-1",children:"(Space reserved)"})]})}function EI({id:e,data:t,selected:n}){return x.jsx(_t,{nodeId:e,nodeType:"negative",name:t.name,selected:n,showTargetHandle:!1,icon:x.jsx(kS,{size:14}),children:x.jsx(en,{label:"Avoid",children:x.jsx("div",{className:"line-clamp-3",children:t.content})})})}const CI={mock:"Mock","gemini-pro":"Gemini 3 Pro","gemini-flash":"Gemini 2.5 Flash","flux-schnell":"Flux Schnell","flux-dev":"Flux Dev",turbo:"Turbo","sdxl-turbo":"SDXL Turbo"};function jI({id:e,data:t,selected:n}){return x.jsx(_t,{nodeId:e,nodeType:"parameters",name:"Parameters",selected:n,showTargetHandle:!1,icon:x.jsx(pm,{size:14}),children:x.jsxs("div",{className:"space-y-2 text-[11px]",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-muted",children:"Model"}),x.jsx("span",{className:"text-secondary font-medium",children:CI[t.model]||t.model})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-muted",children:"Output"}),x.jsxs("span",{className:"text-secondary font-medium",children:[t.aspectRatio||"1:1"," @ ",t.resolution||"1K"]})]}),t.temperature!==void 0&&x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-muted",children:"Temperature"}),x.jsx("span",{className:"text-secondary font-medium",children:t.temperature.toFixed(1)})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-muted",children:"Images"}),x.jsxs("span",{className:"text-secondary font-medium",children:[t.numberOfImages||1,t.seed!==void 0&&t.seed!==null&&x.jsxs("span",{className:"text-muted ml-2",children:["seed: ",t.seed]})]})]})]})})}function NI({id:e,data:t,selected:n}){const i=t.eraPreset==="custom"?t.customEra||"Custom Era":rg[t.eraPreset];return x.jsx(_t,{nodeId:e,nodeType:"timeperiod",name:t.name,selected:n,showTargetHandle:!1,icon:x.jsx(MS,{size:14}),children:x.jsxs("div",{className:"space-y-2 text-[11px]",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-muted",children:"Era"}),x.jsx("span",{className:"text-secondary font-medium",children:i})]}),t.region&&x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-muted",children:"Region"}),x.jsx("span",{className:"text-secondary font-medium",children:t.region})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-muted",children:"Auto-Negatives"}),x.jsx("span",{className:`font-medium ${t.useAutoNegatives?"text-green-400":"text-muted"}`,children:t.useAutoNegatives?"On":"Off"})]}),t.description&&x.jsx(en,{label:"Notes",children:x.jsx("div",{className:"line-clamp-2",children:t.description})})]})})}function AI({id:e,data:t,selected:n}){return x.jsx(_t,{nodeId:e,nodeType:"edit",name:"Edit",selected:n,icon:x.jsx(og,{size:14}),children:x.jsx(en,{label:"Refinement",children:x.jsx("div",{className:"line-clamp-3",children:t.refinement})})})}function X_(e,t,n){const i=new Set,o=[],s=[],l=[],c=[],d=[],h=[],m=[],p=[],g=[],y=[],w=[],S=[],_=[];let b=null,k=null,E=null,j=null;const A=new Map,T=new Map;for(const I of n){const O=t.find(ee=>ee.id===I.source),Q=t.find(ee=>ee.id===I.target);!O||!Q||((O.type==="reference"||O.type==="output")&&["character","setting","prop","style"].includes(Q.type||"")&&A.set(I.source,I.target),O.type==="outfit"&&Q.type==="character"&&T.set(I.source,I.target))}const M=new Map;for(const I of n){if(I.targetHandle==="config"||I.targetHandle==="reference")continue;const O=M.get(I.target)||[];O.push(I.source),M.set(I.target,O)}for(const I of n)if(I.target===e&&I.targetHandle==="config"){const O=t.find(Q=>Q.id===I.source);if(!O)continue;O.type==="parameters"?E=O.data:O.type==="negative"?y.push(O.data):O.type==="timeperiod"&&(j=O.data)}const P=[];for(const I of n)if(I.target===e&&I.targetHandle==="reference"){const O=t.find(Q=>Q.id===I.source);if(O?.type==="reference"){const Q=O.data;Q.imageUrl&&P.push(Q)}else if(O?.type==="scene"){const Q=O.data;Q.capturedImage&&P.push({label:"Scene Reference",name:Q.sceneName||"Scene",description:Q.sceneDescription||"Composition reference from 3D scene",imageUrl:Q.capturedImage,imageType:"scene"})}}const F=I=>{for(const O of n){if(O.target===I&&O.targetHandle==="config"){const Q=t.find(ee=>ee.id===O.source);if(!Q)continue;if(Q.type==="parameters")E||(E=Q.data);else if(Q.type==="negative"){const ee=Q.data;y.some(ue=>ue.content===ee.content)||y.push(ee)}else Q.type==="timeperiod"&&(j||(j=Q.data))}if(O.target===I&&O.targetHandle==="reference"){const Q=t.find(ee=>ee.id===O.source);if(Q?.type==="reference"){const ee=Q.data;ee.imageUrl&&!P.some(ue=>ue.imageUrl===ee.imageUrl)&&P.push(ee)}else if(Q?.type==="scene"){const ee=Q.data;ee.capturedImage&&!P.some(ue=>ue.imageUrl===ee.capturedImage)&&P.push({label:"Scene Reference",name:ee.sceneName||"Scene",description:ee.sceneDescription||"Composition reference from 3D scene",imageUrl:ee.capturedImage,imageType:"scene"})}}}};function $(I){if(i.has(I))return;i.add(I);const O=t.find(ee=>ee.id===I);if(!O)return;switch(O.type){case"character":o.push({id:O.id,data:O.data});break;case"setting":s.push({id:O.id,data:O.data});break;case"prop":l.push({id:O.id,data:O.data});break;case"style":c.push({id:O.id,data:O.data});break;case"extras":d.push(O.data);break;case"outfit":T.has(O.id)||h.push(O.data);break;case"action":m.push(O.data);break;case"text":p.push(O.data);break;case"shot":b=O.data;break;case"camera":k=O.data;break;case"edit":g.push(O.data);break;case"reference":const ee=O.data;ee.imageUrl&&!A.has(O.id)&&w.push(ee);break;case"negative":y.some(ue=>ue.content===O.data.content)||y.push(O.data);break;case"parameters":E||(E=O.data);break;case"intercept":if(I!==e){const ue=O.data,ye=ue.editedPrompt||ue.assembledPrompt||"";ye&&S.push(ye);const de=ue.editedNegative||ue.assembledNegative||"";de&&_.push(de),F(I);return}break}const Q=M.get(I)||[];for(const ee of Q)$(ee)}$(e);const D=k?.promptPosition||"after-shot",q=j,N=I=>{for(const[O,Q]of T.entries())if(Q===I){const ee=t.find(ue=>ue.id===O);if(ee?.type==="outfit")return ee.data}return null},H={timePeriod:q?PI(q):void 0,shot:b?TI(b):void 0,camera:k?DI(k):void 0,characters:o.map(I=>{const O=N(I.id);return zI(I.data,O)}),props:l.map(I=>MI(I.data)),settings:s.map(I=>OI(I.data)),extras:d.map(RI),outfits:h.map(BI),actions:m.map(II),texts:p.map(LI),styles:c.map(I=>UI(I.data)),edits:g.map(HI)},U=[];H.timePeriod&&U.push(H.timePeriod),H.shot&&U.push(H.shot),H.camera&&D==="after-shot"&&U.push(H.camera),U.push(...H.characters),U.push(...H.outfits),H.camera&&D==="after-subject"&&U.push(H.camera),U.push(...H.props),U.push(...H.settings),U.push(...H.extras),U.push(...H.actions),U.push(...H.texts),H.camera&&D==="before-style"&&U.push(H.camera),U.push(...H.styles),U.push(...H.edits),U.push(...S);const V=E,X=$t.getState().defaults,Y=[],B=I=>{for(const[O,Q]of A.entries())if(Q===I){const ee=t.find(ue=>ue.id===O);if(ee?.type==="reference"){const ue=ee.data;if(ue.imageUrl)return{imageUrl:ue.imageUrl,name:ue.name}}if(ee?.type==="output"){const ue=ee.data;if(ue.generatedImageUrl)return{imageUrl:ue.generatedImageUrl,name:"Previous generation"}}}return null};for(const I of o){const O=B(I.id);O&&Y.push({imageUrl:O.imageUrl,imageType:"character",name:I.data.name,description:`Reference for character: ${I.data.name}. ${I.data.description}`})}for(const I of s){const O=B(I.id);O&&Y.push({imageUrl:O.imageUrl,imageType:"setting",name:I.data.name,description:`Reference for setting/environment: ${I.data.name}. ${I.data.description}`})}for(const I of l){const O=B(I.id);O&&Y.push({imageUrl:O.imageUrl,imageType:"prop",name:I.data.name,description:`Reference for prop/object: ${I.data.name}. ${I.data.description}`})}for(const I of c){const O=B(I.id);O&&Y.push({imageUrl:O.imageUrl,imageType:"style",name:I.data.name,description:`Style reference: ${I.data.name}. ${I.data.description}`})}for(const I of w)Y.push({imageUrl:I.imageUrl,imageType:I.imageType,name:I.name,description:I.description});for(const I of P)Y.push({imageUrl:I.imageUrl,imageType:I.imageType,name:I.name,description:I.description});const z=[];return q&&z.push(...FI(q)),z.push(...y.map(I=>I.content)),z.push(..._),{prompt:U.join(" "),negativePrompt:z.join(", "),referenceImages:Y,parameters:{model:V?.model||X.model,aspectRatio:V?.aspectRatio||X.aspectRatio,resolution:V?.resolution,seed:V?.seed,temperature:V?.temperature,numberOfImages:V?.numberOfImages},parts:H}}function TI(e){let n=`${Qm[e.preset]}.`;return e.description&&(n+=` ${e.description}`),n}function DI(e){const t=[];return e.lensType&&e.lensType!=="standard"&&t.push(Jc[e.lensType]),e.depthOfField&&e.depthOfField!=="deep"&&t.push(Jm[e.depthOfField]),e.cameraFeel&&e.cameraFeel!=="locked"&&t.push(cS[e.cameraFeel]+" camera"),e.filmStock&&e.filmStock!=="digital"&&t.push(eg[e.filmStock]+" look"),e.exposure&&e.exposure!=="balanced"&&t.push(fS[e.exposure]+" lighting"),e.vignette&&e.vignette!=="none"&&t.push(tg[e.vignette].toLowerCase()),t.length===0?"":t.join(", ")+"."}function zI(e,t){return t?`${e.name}, ${e.description}, wearing ${t.description}.`:`${e.name}, ${e.description}.`}function MI(e){return`${e.description}.`}function OI(e){return`Setting: ${e.description}.`}function RI(e){return e.description+"."}function II(e){return e.content}function LI(e){const t=ng[e.textType],n=[];if(e.mode==="reserve-space")n.push(`Leave space for ${t.toLowerCase()}`),e.position&&n.push(`at ${e.position}`),e.content&&n.push(`that will contain: "${e.content}"`);else{switch(e.textType){case"speech":e.speaker?n.push(`${e.speaker} saying in a speech balloon: "${e.content}"`):n.push(`Speech balloon with text: "${e.content}"`);break;case"thought":e.speaker?n.push(`${e.speaker} thinking in a thought bubble: "${e.content}"`):n.push(`Thought bubble with text: "${e.content}"`);break;case"caption":n.push(`Caption box with text: "${e.content}"`);break;case"title":n.push(`Title text: "${e.content}"`);break;case"sfx":n.push(`Sound effect text: "${e.content}"`);break;case"whisper":e.speaker?n.push(`${e.speaker} whispering in a small speech balloon: "${e.content}"`):n.push(`Whisper balloon with text: "${e.content}"`);break;case"shout":e.speaker?n.push(`${e.speaker} shouting in a bold speech balloon: "${e.content}"`):n.push(`Shout balloon with text: "${e.content}"`);break;case"sign":n.push(`Sign or label reading: "${e.content}"`);break;case"subtitle":n.push(`Subtitle text: "${e.content}"`);break;default:n.push(`Text: "${e.content}"`)}e.position&&n.push(`positioned ${e.position}`)}return n.join(" ")+"."}function UI(e){return`Style: ${e.description}.`}function BI(e){return`Wearing ${e.description}.`}function HI(e){return e.refinement}function PI(e){const t=[];return e.eraPreset==="custom"?e.customEra&&t.push(e.customEra):t.push(rg[e.eraPreset]),e.region&&t.push(e.region),e.description&&t.push(e.description),t.length===0?"":t.join(", ")+"."}function FI(e){const t=[];return e.useAutoNegatives&&e.eraPreset!=="custom"&&t.push(...dS[e.eraPreset]||[]),e.customNegatives&&t.push(...e.customNegatives.split(",").map(n=>n.trim()).filter(Boolean)),t}function qI({size:e=14}){return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("path",{d:"M12 2v4"}),x.jsx("path",{d:"M12 18v4"}),x.jsx("path",{d:"M4.93 4.93l2.83 2.83"}),x.jsx("path",{d:"M16.24 16.24l2.83 2.83"}),x.jsx("path",{d:"M2 12h4"}),x.jsx("path",{d:"M18 12h4"}),x.jsx("path",{d:"M4.93 19.07l2.83-2.83"}),x.jsx("path",{d:"M16.24 7.76l2.83-2.83"}),x.jsx("circle",{cx:"12",cy:"12",r:"4"})]})}function $I({id:e,data:t,selected:n}){const{nodes:i,edges:o,updateNodeData:s}=et(),l=J.useRef(null),c=J.useRef({prompt:"",negative:""}),[d,h]=J.useState(!1),m=t.assembledPrompt??"",p=t.editedPrompt??"",g=t.isEdited??!1,y=t.assembledNegative??"",w=t.editedNegative??"",S=t.isNegativeEdited??!1,_=ct.intercept,b=ct.negative,k=J.useCallback(()=>{const q=X_(e,i,o);return{prompt:q.prompt,negative:q.negativePrompt}},[e,i,o]);J.useEffect(()=>{const q=k(),N=q.prompt!==c.current.prompt,H=q.negative!==c.current.negative;if(N||H){c.current=q;const U={};N&&(U.assembledPrompt=q.prompt,g||(U.editedPrompt=q.prompt)),H&&(U.assembledNegative=q.negative,S||(U.editedNegative=q.negative)),Object.keys(U).length>0&&s(e,U)}},[e,k,g,S,s]);const E=J.useCallback(q=>{const N=q.target.value;s(e,{editedPrompt:N,isEdited:N!==m})},[e,m,s]),j=J.useCallback(q=>{const N=q.target.value;s(e,{editedNegative:N,isNegativeEdited:N!==y})},[e,y,s]),A=J.useCallback(()=>{s(e,{editedPrompt:m,isEdited:!1})},[e,m,s]),T=J.useCallback(()=>{s(e,{editedNegative:y,isNegativeEdited:!1})},[e,y,s]),M=J.useCallback(()=>{const q=k();c.current=q,s(e,{assembledPrompt:q.prompt,editedPrompt:q.prompt,isEdited:!1,assembledNegative:q.negative,editedNegative:q.negative,isNegativeEdited:!1})},[e,k,s]),P=p||m||"Connect nodes upstream to assemble prompt...",F=w||y||"",$=m.length>0,Z=y.length>0||w.length>0,D=x.jsxs(x.Fragment,{children:[x.jsx(Vt,{type:"target",position:ze.Left,id:"reference",style:{background:ct.reference,borderColor:ct.reference,borderWidth:2,top:"60%"},title:"Connect reference images"}),x.jsx(Vt,{type:"target",position:ze.Left,id:"config",style:{background:ct.parameters,borderColor:ct.parameters,borderWidth:2,top:"80%"},title:"Connect parameters or negative prompts"})]});return x.jsx(_t,{nodeId:e,nodeType:"intercept",name:t.name||"Intercept",selected:n,showTargetHandle:!0,showSourceHandle:!0,icon:x.jsx(qI,{size:14}),additionalHandles:D,children:x.jsxs("div",{className:"space-y-3 nodrag",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("div",{className:"flex items-center gap-2",children:g?x.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded text-[10px] font-medium",style:{background:`${_}30`,color:_},children:[x.jsx("span",{className:"w-1.5 h-1.5 rounded-full",style:{background:_}}),"Edited"]}):$?x.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded text-[10px] font-medium",style:{background:"rgba(34, 197, 94, 0.2)",color:"#22c55e"},children:[x.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),"Auto"]}):x.jsx("div",{className:"text-[10px] text-muted",children:"No input"})}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{onClick:M,className:"px-2 py-1 rounded text-[10px] text-muted hover:text-primary hover:bg-white/10 transition-colors",title:"Refresh from upstream",children:""}),g&&x.jsx("button",{onClick:A,className:"px-2 py-1 rounded text-[10px] transition-colors",style:{color:_},title:"Reset to auto-assembled",children:"Reset"})]})]}),x.jsx("div",{className:"relative rounded-lg overflow-hidden",style:{border:`1px solid ${g?_:"var(--color-border-subtle)"}`},children:x.jsx("textarea",{ref:l,value:P,onChange:E,onPointerDown:q=>q.stopPropagation(),onMouseDown:q=>q.stopPropagation(),placeholder:"Connect nodes upstream to assemble prompt...",className:"w-full min-h-[240px] max-h-[360px] text-[11px] font-mono leading-relaxed resize-y outline-none",style:{display:"block",background:"var(--color-bg-elevated)",color:$?"var(--color-text-secondary)":"var(--color-text-muted)",padding:"12px 12px 12px 16px"}})}),x.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted px-1",children:[x.jsxs("span",{children:[p.length," chars"]}),g&&m&&x.jsxs("span",{children:[p.length-m.length>0?"+":"",p.length-m.length," from original"]})]}),(Z||d)&&x.jsxs("div",{className:"space-y-2 border-t border-white/10",style:{marginTop:"12px",paddingTop:"10px"},children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-[10px] font-medium",style:{color:b},children:"Negative"}),S&&x.jsx("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded text-[9px] font-medium",style:{background:`${b}30`,color:b},children:"Edited"})]}),S&&x.jsx("button",{onClick:T,className:"px-2 py-0.5 rounded text-[9px] transition-colors",style:{color:b},title:"Reset negative to auto-assembled",children:"Reset"})]}),x.jsx("div",{className:"relative rounded-lg overflow-hidden",style:{border:`1px solid ${S?b:"var(--color-border-subtle)"}`},children:x.jsx("textarea",{value:F,onChange:j,onPointerDown:q=>q.stopPropagation(),onMouseDown:q=>q.stopPropagation(),placeholder:"No negative prompt",className:"w-full min-h-[60px] max-h-[150px] text-[10px] font-mono leading-relaxed resize-y outline-none",style:{display:"block",background:"var(--color-bg-elevated)",color:Z?"var(--color-text-secondary)":"var(--color-text-muted)",padding:"8px 8px 8px 16px"}})}),x.jsxs("div",{className:"text-[9px] text-muted px-1",children:[w.length," chars"]})]}),!Z&&!d&&x.jsx("button",{onClick:()=>h(!0),className:"w-full py-1.5 text-[10px] text-muted hover:text-primary border border-dashed border-white/10 rounded hover:border-white/20 transition-colors",children:"+ Add Negative Prompt"})]})})}const VI={character:"Character",setting:"Setting",prop:"Prop",style:"Style",scene:"Scene",mood:"Mood"};function YI({id:e,data:t,selected:n}){const i=et(E=>E.updateNodeData),[o,s]=J.useState(!1),l=t.isSequence??!1,c=t.sequenceImages??[],d=t.sequenceIndex??0,h=l?c[d]??null:t.imageUrl??null,m=J.useCallback(E=>{const j=E.target.files;if(!(!j||j.length===0)){if(l){const A=Array.from(j).filter(T=>T.type.startsWith("image/"));if(A.length===0)return;Promise.all(A.map(T=>new Promise(M=>{const P=new FileReader;P.onload=F=>M(F.target?.result),P.readAsDataURL(T)}))).then(T=>{const M=[...c,...T];i(e,{sequenceImages:M,sequenceIndex:c.length===0?0:d})})}else{const A=j[0];if(!A.type.startsWith("image/"))return;const T=new FileReader;T.onload=M=>{i(e,{imageUrl:M.target?.result})},T.readAsDataURL(A)}E.target.value=""}},[e,l,c,d,i]),p=J.useCallback(E=>{E.preventDefault(),E.stopPropagation(),s(!1);const j=Array.from(E.dataTransfer.files).filter(A=>A.type.startsWith("image/"));if(j.length!==0)if(l)Promise.all(j.map(A=>new Promise(T=>{const M=new FileReader;M.onload=P=>T(P.target?.result),M.readAsDataURL(A)}))).then(A=>{const T=[...c,...A];i(e,{sequenceImages:T,sequenceIndex:c.length===0?0:d})});else{const A=new FileReader;A.onload=T=>{i(e,{imageUrl:T.target?.result})},A.readAsDataURL(j[0])}},[e,l,c,d,i]),g=J.useCallback(E=>{E.preventDefault(),E.stopPropagation(),s(!0)},[]),y=J.useCallback(E=>{E.preventDefault(),E.stopPropagation(),s(!1)},[]),w=J.useCallback(E=>{const j=E.clipboardData.items;for(const A of j)if(A.type.startsWith("image/")){const T=A.getAsFile();if(!T)continue;const M=new FileReader;M.onload=P=>{const F=P.target?.result;l?i(e,{sequenceImages:[...c,F],sequenceIndex:c.length===0?0:d}):i(e,{imageUrl:F})},M.readAsDataURL(T);break}},[e,l,c,d,i]),S=J.useCallback(()=>{const E=!l;E&&t.imageUrl&&c.length===0?i(e,{isSequence:!0,sequenceImages:[t.imageUrl],sequenceIndex:0}):i(e,{isSequence:E})},[e,l,t.imageUrl,c,i]),_=J.useCallback(E=>{const j=Math.max(0,Math.min(E,c.length-1));i(e,{sequenceIndex:j})},[e,c.length,i]),b=J.useCallback(E=>{const j=c.filter((T,M)=>M!==E),A=Math.min(d,Math.max(0,j.length-1));i(e,{sequenceImages:j,sequenceIndex:A})},[e,c,d,i]),k=J.useCallback(()=>{i(e,{sequenceImages:[],sequenceIndex:0})},[e,i]);return x.jsx(_t,{nodeId:e,nodeType:"reference",name:t.name||"Reference Image",selected:n,showTargetHandle:!1,showSourceHandle:!0,icon:x.jsx(ig,{size:14}),children:x.jsxs("div",{className:"space-y-3",onDrop:p,onDragOver:g,onDragLeave:y,onPaste:w,tabIndex:0,children:[x.jsxs("div",{className:"flex items-center justify-between gap-2",children:[x.jsx("span",{className:"text-[10px] font-semibold px-2 py-1 rounded",style:{background:"var(--color-node-reference)",color:"white",opacity:.9},children:VI[t.imageType]||"Reference"}),x.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[x.jsx("input",{type:"checkbox",checked:l,onChange:S,className:"w-3 h-3 rounded border-2 border-gray-500 bg-transparent checked:bg-violet-500 checked:border-violet-500"}),x.jsx("span",{className:"text-[10px] text-muted",children:"Sequence"})]})]}),h?x.jsxs("div",{className:"relative group",children:[x.jsx("img",{src:h,alt:t.name||"Reference",className:"w-full rounded-lg",style:{maxHeight:"150px",objectFit:"cover",border:o?"2px solid var(--color-node-reference)":"none"}}),l&&c.length>0&&x.jsxs("div",{className:"absolute top-1 right-1 px-1.5 py-0.5 rounded text-[10px] font-mono font-bold",style:{background:"rgba(0, 0, 0, 0.7)",color:"white"},children:[d+1,"/",c.length]}),x.jsxs("label",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer rounded-lg",style:{background:"rgba(0, 0, 0, 0.6)"},children:[x.jsx("div",{className:"text-white text-[10px] font-medium",children:l?"Add frames":"Click to replace"}),x.jsx("input",{type:"file",accept:"image/*",multiple:l,onChange:m,className:"hidden"})]})]}):x.jsxs("label",{className:"flex flex-col items-center justify-center gap-2 py-6 rounded-lg cursor-pointer transition-colors hover:bg-bg-hover",style:{border:o?"2px solid var(--color-node-reference)":"2px dashed var(--color-border-medium)",background:o?"rgba(139, 92, 246, 0.1)":"var(--color-bg-elevated)"},children:[x.jsx(jS,{size:24,className:"text-muted"}),x.jsxs("div",{className:"text-[10px] text-muted text-center",children:[x.jsx("div",{className:"font-medium",children:l?"Drop images here":"Drop image here"}),x.jsx("div",{children:"or click to browse"})]}),x.jsx("input",{type:"file",accept:"image/*",multiple:l,onChange:m,className:"hidden"})]}),l&&c.length>1&&x.jsxs("div",{className:"space-y-2",children:[x.jsx("div",{className:"flex gap-1 overflow-x-auto pb-1",style:{scrollbarWidth:"thin"},children:c.map((E,j)=>x.jsxs("div",{className:"relative flex-shrink-0 cursor-pointer group/thumb",onClick:()=>_(j),children:[x.jsx("img",{src:E,alt:`Frame ${j+1}`,className:"h-10 w-10 object-cover rounded",style:{border:j===d?"2px solid var(--color-node-reference)":"2px solid transparent",opacity:j===d?1:.6}}),x.jsx("button",{onClick:A=>{A.stopPropagation(),b(j)},className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-red-500 text-white text-[10px] flex items-center justify-center opacity-0 group-hover/thumb:opacity-100 transition-opacity",title:"Remove frame",children:""})]},j))}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"range",min:0,max:c.length-1,value:d,onChange:E=>_(parseInt(E.target.value,10)),className:"flex-1 h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer",style:{accentColor:"var(--color-node-reference)"}}),x.jsx("button",{onClick:k,className:"text-[10px] text-red-400 hover:text-red-300",title:"Clear all frames",children:"Clear"})]})]}),t.description&&x.jsx("p",{className:"text-[10px] text-muted line-clamp-2",children:t.description})]})})}const GI={name:"mock",async generate(e){await new Promise(s=>setTimeout(s,1500+Math.random()*1e3));const t=XI(e.aspectRatio),n=e.seed||Math.floor(Math.random()*1e4),i=e.numberOfImages||1,o=[];for(let s=0;s<i;s++){const l=n+s,c=`https://picsum.photos/seed/${l}/${t.width}/${t.height}`;o.push({imageUrl:c,seed:l})}return{imageUrl:o[0].imageUrl,images:o,revisedPrompt:e.prompt,seed:n}},isConfigured(){return!0}};function XI(e){switch(e){case"16:9":return{width:1024,height:576};case"9:16":return{width:576,height:1024};case"2:3":return{width:683,height:1024};case"3:2":return{width:1024,height:683};default:return{width:1024,height:1024}}}const ZI={"gemini-pro":"gemini-3-pro-image-preview","gemini-flash":"gemini-2.5-flash-image"},Ub={name:"gemini",async generate(e){const t=$t.getState().apiKeys.gemini;if(!t)throw new Error("Gemini API key not configured");const n=ZI[e.model]||"gemini-2.0-flash-exp-image-generation";let i=e.prompt;if(e.referenceImages&&e.referenceImages.length>0){const p=e.referenceImages.filter(g=>g.description||g.name).map((g,y)=>{const w=g.name||`Reference ${y+1}`,S=g.description?`: ${g.description}`:"",_=g.imageType?` (${g.imageType})`:"";return`${w}${_}${S}`});p.length>0&&(i=`Reference images provided: ${p.join("; ")}. ${i}`)}e.negativePrompt&&(i+=` Avoid: ${e.negativePrompt}`);const o=[];if(e.referenceImages&&e.referenceImages.length>0){for(const p of e.referenceImages)if(p.imageUrl){const g=p.imageUrl.match(/^data:([^;]+);base64,(.+)$/);if(g){const y=g[1],w=g[2];o.push({inline_data:{mime_type:y,data:w}})}}}o.push({text:i});const s={contents:[{parts:o}],generationConfig:{responseModalities:["Text","Image"],...e.seed!==void 0&&{seed:e.seed},...e.temperature!==void 0&&{temperature:e.temperature},...e.numberOfImages!==void 0&&e.numberOfImages>1&&{candidateCount:e.numberOfImages},...(e.aspectRatio||e.resolution)&&{imageConfig:{...e.aspectRatio&&{aspectRatio:e.aspectRatio},...e.resolution&&{imageSize:e.resolution}}}}};console.log("Gemini request:",{modelId:n,requestBody:s});const l=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${n}:generateContent?key=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!l.ok){const p=await l.text();console.error("Gemini API error response:",p);try{const g=JSON.parse(p);throw new Error(g.error?.message||`Gemini API error: ${l.status}`)}catch{throw new Error(`Gemini API error (${l.status}): ${p.slice(0,200)}`)}}const d=(await l.json()).candidates;if(!d||d.length===0)throw new Error("No response from Gemini");const h=[];let m;for(const p of d){const g=p.content?.parts;if(g)for(const y of g)if(y.inlineData){const S=`data:${y.inlineData.mimeType||"image/png"};base64,${y.inlineData.data}`;h.push({imageUrl:S})}else y.text&&!m&&(m=y.text)}if(h.length===0)throw m?new Error(`Gemini response: ${m}`):new Error("No image in Gemini response");return{imageUrl:h[0].imageUrl,images:h,revisedPrompt:e.prompt}},isConfigured(){const e=$t.getState().apiKeys.gemini;return!!e&&e.length>0}};var na={},io={},Up={},Os={},Bb;function Z_(){return Bb||(Bb=1,(function(e){var t=Os&&Os.__awaiter||function(o,s,l,c){function d(h){return h instanceof l?h:new l(function(m){m(h)})}return new(l||(l=Promise))(function(h,m){function p(w){try{y(c.next(w))}catch(S){m(S)}}function g(w){try{y(c.throw(w))}catch(S){m(S)}}function y(w){w.done?h(w.value):d(w.value).then(p,g)}y((c=c.apply(o,s||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.TARGET_URL_HEADER=void 0,e.withMiddleware=n,e.withProxy=i;function n(...o){const s=l=>typeof l=="function";return l=>t(this,void 0,void 0,function*(){let c=Object.assign({},l);for(const d of o.filter(s))c=yield d(c);return c})}e.TARGET_URL_HEADER="x-fal-target-url";function i(o){const s=l=>Promise.resolve(l);return typeof window>"u"?s:l=>l.headers&&e.TARGET_URL_HEADER in l?s(l):Promise.resolve(Object.assign(Object.assign({},l),{url:o.targetUrl,headers:Object.assign(Object.assign({},l.headers||{}),{[e.TARGET_URL_HEADER]:l.url})}))}})(Os)),Os}var Xn={},Hb;function ma(){if(Hb)return Xn;Hb=1;var e=Xn&&Xn.__awaiter||function(l,c,d,h){function m(p){return p instanceof d?p:new d(function(g){g(p)})}return new(d||(d=Promise))(function(p,g){function y(_){try{S(h.next(_))}catch(b){g(b)}}function w(_){try{S(h.throw(_))}catch(b){g(b)}}function S(_){_.done?p(_.value):m(_.value).then(y,w)}S((h=h.apply(l,c||[])).next())})};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.ValidationError=Xn.ApiError=void 0,Xn.defaultResponseHandler=o,Xn.resultResponseHandler=s;const t="x-fal-request-id";class n extends Error{constructor({message:c,status:d,body:h,requestId:m}){super(c),this.name="ApiError",this.status=d,this.body=h,this.requestId=m||""}}Xn.ApiError=n;class i extends n{constructor(c){super(c),this.name="ValidationError"}get fieldErrors(){return typeof this.body.detail=="string"?[{loc:["body"],msg:this.body.detail,type:"value_error"}]:this.body.detail||[]}getFieldErrors(c){return this.fieldErrors.filter(d=>d.loc[d.loc.length-1]===c)}}Xn.ValidationError=i;function o(l){return e(this,void 0,void 0,function*(){var c;const{status:d,statusText:h}=l,m=(c=l.headers.get("Content-Type"))!==null&&c!==void 0?c:"",p=l.headers.get(t)||void 0;if(!l.ok){if(m.includes("application/json")){const g=yield l.json(),y=d===422?i:n;throw new y({message:g.message||h,status:d,body:g,requestId:p})}throw new n({message:`HTTP ${d}: ${h}`,status:d,requestId:p})}return m.includes("application/json")?l.json():m.includes("text/html")?l.text():m.includes("application/octet-stream")?l.arrayBuffer():l.text()})}function s(l){return e(this,void 0,void 0,function*(){return{data:yield o(l),requestId:l.headers.get(t)||""}})}return Xn}var Rs={},Bn={},Pb;function ga(){if(Pb)return Bn;Pb=1;var e=Bn&&Bn.__awaiter||function(m,p,g,y){function w(S){return S instanceof g?S:new g(function(_){_(S)})}return new(g||(g=Promise))(function(S,_){function b(j){try{E(y.next(j))}catch(A){_(A)}}function k(j){try{E(y.throw(j))}catch(A){_(A)}}function E(j){j.done?S(j.value):w(j.value).then(b,k)}E((y=y.apply(m,p||[])).next())})};Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.ensureEndpointIdFormat=t,Bn.parseEndpointId=i,Bn.isValidUrl=o,Bn.throttle=s,Bn.isReact=c,Bn.isPlainObject=d,Bn.sleep=h;function t(m){if(m.split("/").length>1)return m;const[,g,y]=/^([0-9]+)-([a-zA-Z0-9-]+)$/.exec(m)||[];if(g&&y)return`${g}/${y}`;throw new Error(`Invalid app id: ${m}. Must be in the format <appOwner>/<appId>`)}const n=["workflows","comfy"];function i(m){const g=t(m).split("/");return n.includes(g[0])?{owner:g[1],alias:g[2],path:g.slice(3).join("/")||void 0,namespace:g[0]}:{owner:g[0],alias:g[1],path:g.slice(2).join("/")||void 0}}function o(m){try{const{host:p}=new URL(m);return/(fal\.(ai|run))$/.test(p)}catch{return!1}}function s(m,p,g=!1){let y,w;return(...S)=>{!w&&g?(m(...S),w=Date.now()):(y&&clearTimeout(y),y=setTimeout(()=>{Date.now()-w>=p&&(m(...S),w=Date.now())},p-(Date.now()-w)))}}let l;function c(){if(l===void 0){const m=new Error().stack;l=!!m&&(m.includes("node_modules/react-dom/")||m.includes("node_modules/next/"))}return l}function d(m){return!!m&&Object.getPrototypeOf(m)===Object.prototype}function h(m){return e(this,void 0,void 0,function*(){return new Promise(p=>setTimeout(p,m))})}return Bn}var Fb;function Uf(){return Fb||(Fb=1,(function(e){var t=Rs&&Rs.__awaiter||function(c,d,h,m){function p(g){return g instanceof h?g:new h(function(y){y(g)})}return new(h||(h=Promise))(function(g,y){function w(b){try{_(m.next(b))}catch(k){y(k)}}function S(b){try{_(m.throw(b))}catch(k){y(k)}}function _(b){b.done?g(b.value):p(b.value).then(w,S)}_((m=m.apply(c,d||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_RETRY_OPTIONS=e.DEFAULT_RETRYABLE_STATUS_CODES=void 0,e.isRetryableError=o,e.calculateBackoffDelay=s,e.executeWithRetry=l;const n=ma(),i=ga();e.DEFAULT_RETRYABLE_STATUS_CODES=[429,502,503,504],e.DEFAULT_RETRY_OPTIONS={maxRetries:3,baseDelay:1e3,maxDelay:3e4,backoffMultiplier:2,retryableStatusCodes:e.DEFAULT_RETRYABLE_STATUS_CODES,enableJitter:!0};function o(c,d){return c instanceof n.ApiError&&d.includes(c.status)}function s(c,d,h,m,p){const g=Math.min(d*Math.pow(m,c),h);if(p){const y=.25*g*(Math.random()*2-1);return Math.max(0,g+y)}return g}function l(c,d,h){return t(this,void 0,void 0,function*(){const m={totalAttempts:0,totalDelay:0};let p;for(let g=0;g<=d.maxRetries;g++){m.totalAttempts++;try{return{result:yield c(),metrics:m}}catch(y){if(p=y,m.lastError=y,g===d.maxRetries||!o(y,d.retryableStatusCodes))throw y;const w=s(g,d.baseDelay,d.maxDelay,d.backoffMultiplier,d.enableJitter);m.totalDelay+=w,h&&h(g+1,y,w),yield(0,i.sleep)(w)}}throw p})}})(Rs)),Rs}var Is={};const KI="@fal-ai/client",WI="1.8.3",QI={name:KI,version:WI};var qb;function jg(){if(qb)return Is;qb=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.isBrowser=e,Is.getUserAgent=n;function e(){return typeof window<"u"&&typeof window.document<"u"}let t=null;function n(){if(t!==null)return t;const i=QI;return t=`${i.name}/${i.version}`,t}return Is}var $b;function Ng(){return $b||($b=1,(function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),e.credentialsFromEnv=void 0,e.resolveDefaultFetch=l,e.createConfig=m,e.getRestApiUrl=p;const n=Z_(),i=ma(),o=Uf(),s=jg();function l(){if(typeof fetch>"u")throw new Error("Your environment does not support fetch. Please provide your own fetch implementation.");return fetch}function c(){return typeof process<"u"&&t&&(typeof t.FAL_KEY<"u"||typeof t.FAL_KEY_ID<"u"&&typeof t.FAL_KEY_SECRET<"u")}const d=()=>{if(c())return typeof t.FAL_KEY<"u"?t.FAL_KEY:t.FAL_KEY_ID?`${t.FAL_KEY_ID}:${t.FAL_KEY_SECRET}`:void 0};e.credentialsFromEnv=d;const h={credentials:e.credentialsFromEnv,suppressLocalCredentialsWarning:!1,requestMiddleware:g=>Promise.resolve(g),responseHandler:i.defaultResponseHandler,retry:o.DEFAULT_RETRY_OPTIONS};function m(g){var y;let w=Object.assign(Object.assign(Object.assign({},h),g),{fetch:(y=g.fetch)!==null&&y!==void 0?y:l(),retry:Object.assign(Object.assign({},o.DEFAULT_RETRY_OPTIONS),g.retry||{})});g.proxyUrl&&(w=Object.assign(Object.assign({},w),{requestMiddleware:(0,n.withMiddleware)(w.requestMiddleware,(0,n.withProxy)({targetUrl:g.proxyUrl}))}));const{credentials:S,suppressLocalCredentialsWarning:_}=w,b=typeof S=="function"?S():S;return(0,s.isBrowser)()&&b&&!_&&console.warn("The fal credentials are exposed in the browser's environment. That's not recommended for production use cases."),w}function p(){return"https://rest.alpha.fal.ai"}})(Up)),Up}var Ir={},Lr={},Vb;function jl(){if(Vb)return Lr;Vb=1;var e=Lr&&Lr.__awaiter||function(d,h,m,p){function g(y){return y instanceof m?y:new m(function(w){w(y)})}return new(m||(m=Promise))(function(y,w){function S(k){try{b(p.next(k))}catch(E){w(E)}}function _(k){try{b(p.throw(k))}catch(E){w(E)}}function b(k){k.done?y(k.value):g(k.value).then(S,_)}b((p=p.apply(d,h||[])).next())})},t=Lr&&Lr.__rest||function(d,h){var m={};for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&h.indexOf(p)<0&&(m[p]=d[p]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,p=Object.getOwnPropertySymbols(d);g<p.length;g++)h.indexOf(p[g])<0&&Object.prototype.propertyIsEnumerable.call(d,p[g])&&(m[p[g]]=d[p[g]]);return m};Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.dispatchRequest=l,Lr.buildUrl=c;const n=Uf(),i=jg(),o=ga(),s=typeof navigator<"u"&&navigator?.userAgent==="Cloudflare-Workers";function l(d){return e(this,void 0,void 0,function*(){var h;const{targetUrl:m,input:p,config:g,options:y={}}=d,{credentials:w,requestMiddleware:S,responseHandler:_,fetch:b}=g,k=Object.assign(Object.assign({},g.retry),y.retry||{}),E=()=>e(this,void 0,void 0,function*(){var A,T,M;const P=(0,i.isBrowser)()?{}:{"User-Agent":(0,i.getUserAgent)()},F=typeof w=="function"?w():w,{method:$,url:Z,headers:D}=yield S({method:((T=(A=d.method)!==null&&A!==void 0?A:y.method)!==null&&T!==void 0?T:"post").toUpperCase(),url:m,headers:d.headers}),q=F?{Authorization:`Key ${F}`}:{},N=Object.assign(Object.assign(Object.assign(Object.assign({},q),{Accept:"application/json","Content-Type":"application/json"}),P),D??{}),{responseHandler:H,retry:U}=y,V=t(y,["responseHandler","retry"]),X=yield b(Z,Object.assign(Object.assign(Object.assign(Object.assign({},V),{method:$,headers:Object.assign(Object.assign({},N),(M=V.headers)!==null&&M!==void 0?M:{})}),!s&&{mode:"cors"}),{signal:y.signal,body:$.toLowerCase()!=="get"&&p?JSON.stringify(p):void 0}));return yield(H??_)(X)});let j;for(let A=0;A<=k.maxRetries;A++)try{return yield E()}catch(T){if(j=T,A===k.maxRetries||!(0,n.isRetryableError)(T,k.retryableStatusCodes)||((h=y.signal)===null||h===void 0?void 0:h.aborted))throw T;const P=(0,n.calculateBackoffDelay)(A,k.baseDelay,k.maxDelay,k.backoffMultiplier,k.enableJitter);yield(0,o.sleep)(P)}throw j})}function c(d,h={}){var m,p;const g=((m=h.method)!==null&&m!==void 0?m:"post").toLowerCase(),y=((p=h.path)!==null&&p!==void 0?p:"").replace(/^\//,"").replace(/\/{2,}/,"/"),w=h.input,S=Object.assign(Object.assign({},h.query||{}),g==="get"?w:{}),_=Object.keys(S).length>0?`?${new URLSearchParams(S).toString()}`:"";if((0,o.isValidUrl)(d))return`${d.endsWith("/")?d:`${d}/`}${y}${_}`;const b=(0,o.ensureEndpointIdFormat)(d);return`${`https://${h.subdomain?`${h.subdomain}.`:""}fal.run/${b}/${y}`.replace(/\/$/,"")}${_}`}return Lr}var Ls={},Yb;function K_(){return Yb||(Yb=1,(function(e){var t=Ls&&Ls.__awaiter||function(w,S,_,b){function k(E){return E instanceof _?E:new _(function(j){j(E)})}return new(_||(_=Promise))(function(E,j){function A(P){try{M(b.next(P))}catch(F){j(F)}}function T(P){try{M(b.throw(P))}catch(F){j(F)}}function M(P){P.done?E(P.value):k(P.value).then(A,T)}M((b=b.apply(w,S||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.OBJECT_LIFECYCYLE_PREFERENCE_HEADER=void 0,e.getExpirationDurationSeconds=l,e.buildObjectLifecycleHeaders=c,e.createStorageClient=y;const n=Ng(),i=jl(),o=ga();e.OBJECT_LIFECYCYLE_PREFERENCE_HEADER="x-fal-object-lifecycle-preference";const s={never:31536e5,immediate:void 0,"1h":3600,"1d":86400,"7d":604800,"30d":2592e3,"1y":31536e3};function l(w){const{expiresIn:S}=w;return typeof S=="number"?S:s[S]}function c(w){if(!w)return{};const S=l(w);return S===void 0?{}:{[e.OBJECT_LIFECYCYLE_PREFERENCE_HEADER]:JSON.stringify({expiration_duration_seconds:S})}}function d(w){var S;const[,_]=w.split("/");return(S=_.split(/[-;]/)[0])!==null&&S!==void 0?S:"bin"}function h(w,S,_,b){return t(this,void 0,void 0,function*(){const k=w.name||`${Date.now()}.${d(_)}`,E={};if(b){const j={expiration_duration_seconds:l(b),allow_io_storage:b.expiresIn!=="immediate"};E["X-Fal-Object-Lifecycle"]=JSON.stringify(j)}return yield(0,i.dispatchRequest)({method:"POST",targetUrl:`${(0,n.getRestApiUrl)()}/storage/upload/initiate?storage_type=fal-cdn-v3`,input:{content_type:_,file_name:k},config:S,headers:E})})}function m(w,S,_,b){return t(this,void 0,void 0,function*(){const k=w.name||`${Date.now()}.${d(_)}`,E={};return b&&(E["X-Fal-Object-Lifecycle"]=JSON.stringify(b)),yield(0,i.dispatchRequest)({method:"POST",targetUrl:`${(0,n.getRestApiUrl)()}/storage/upload/initiate-multipart?storage_type=fal-cdn-v3`,input:{content_type:_,file_name:k},config:S,headers:E})})}function p(w,S,_){return t(this,arguments,void 0,function*(b,k,E,j=3){if(j===0)throw new Error("Part upload failed, retries exhausted");const{fetch:A,responseHandler:T}=E;try{const M=yield A(b,{method:"PUT",body:k});return yield T(M)}catch{return yield p(b,k,E,j-1)}})}function g(w,S,_){return t(this,void 0,void 0,function*(){const{fetch:b,responseHandler:k}=S,E=w.type||"application/octet-stream",{upload_url:j,file_url:A}=yield m(w,S,E,_),T=10*1024*1024,M=Math.ceil(w.size/T),P=new URL(j),F=[];for(let D=0;D<M;D++){const q=D*T,N=Math.min(q+T,w.size),H=w.slice(q,N),U=D+1,V=`${P.origin}${P.pathname}/${U}${P.search}`;F.push(yield p(V,H,S))}const $=`${P.origin}${P.pathname}/complete${P.search}`,Z=yield b($,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parts:F.map(D=>({partNumber:D.partNumber,etag:D.etag}))})});return yield k(Z),A})}function y({config:w}){const S={upload:(_,b)=>t(this,void 0,void 0,function*(){const k=b?.lifecycle;if(_.size>94371840)return yield g(_,w,k);const E=_.type||"application/octet-stream",{fetch:j,responseHandler:A}=w,{upload_url:T,file_url:M}=yield h(_,w,E,k),P=yield j(T,{method:"PUT",body:_,headers:{"Content-Type":_.type||"application/octet-stream"}});return yield A(P),M}),transformInput:_=>t(this,void 0,void 0,function*(){if(Array.isArray(_))return Promise.all(_.map(b=>S.transformInput(b)));if(_ instanceof Blob)return yield S.upload(_);if((0,o.isPlainObject)(_)){const k=Object.entries(_).map(j=>t(this,[j],void 0,function*([A,T]){return[A,yield S.transformInput(T)]})),E=yield Promise.all(k);return Object.fromEntries(E)}return _})};return S}})(Ls)),Ls}var Hn={},gc={},Gb;function JI(){if(Gb)return gc;Gb=1,Object.defineProperty(gc,"__esModule",{value:!0});function e(i){let o,s,l,c,d,h,m;return p(),{feed:g,reset:p};function p(){o=!0,s="",l=0,c=-1,d=void 0,h=void 0,m=""}function g(w){s=s?s+w:w,o&&n(s)&&(s=s.slice(t.length)),o=!1;const S=s.length;let _=0,b=!1;for(;_<S;){b&&(s[_]===`
`&&++_,b=!1);let k=-1,E=c,j;for(let A=l;k<0&&A<S;++A)j=s[A],j===":"&&E<0?E=A-_:j==="\r"?(b=!0,k=A-_):j===`
`&&(k=A-_);if(k<0){l=S-_,c=E;break}else l=0,c=-1;y(s,_,E,k),_+=k+1}_===S?s="":_>0&&(s=s.slice(_))}function y(w,S,_,b){if(b===0){m.length>0&&(i({type:"event",id:d,event:h||void 0,data:m.slice(0,-1)}),m="",d=void 0),h=void 0;return}const k=_<0,E=w.slice(S,S+(k?b:_));let j=0;k?j=b:w[S+_+1]===" "?j=_+2:j=_+1;const A=S+j,T=b-j,M=w.slice(A,A+T).toString();if(E==="data")m+=M?"".concat(M,`
`):`
`;else if(E==="event")h=M;else if(E==="id"&&!M.includes("\0"))d=M;else if(E==="retry"){const P=parseInt(M,10);Number.isNaN(P)||i({type:"reconnect-interval",value:P})}}}const t=[239,187,191];function n(i){return t.every((o,s)=>i.charCodeAt(s)===o)}return gc.createParser=e,gc}var Us={},Xb;function W_(){return Xb||(Xb=1,(function(e){var t=Us&&Us.__awaiter||function(l,c,d,h){function m(p){return p instanceof d?p:new d(function(g){g(p)})}return new(d||(d=Promise))(function(p,g){function y(_){try{S(h.next(_))}catch(b){g(b)}}function w(_){try{S(h.throw(_))}catch(b){g(b)}}function S(_){_.done?p(_.value):m(_.value).then(y,w)}S((h=h.apply(l,c||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.TOKEN_EXPIRATION_SECONDS=void 0,e.getTemporaryAuthToken=s;const n=Ng(),i=jl(),o=ga();e.TOKEN_EXPIRATION_SECONDS=120;function s(l,c){return t(this,void 0,void 0,function*(){const d=(0,o.parseEndpointId)(l),h=yield(0,i.dispatchRequest)({method:"POST",targetUrl:`${(0,n.getRestApiUrl)()}/tokens/`,config:c,input:{allowed_apps:[d.alias],token_expiration:e.TOKEN_EXPIRATION_SECONDS}});return typeof h!="string"&&h.detail?h.detail:h})}})(Us)),Us}var Zb;function Q_(){if(Zb)return Hn;Zb=1;var e=Hn&&Hn.__awaiter||function(p,g,y,w){function S(_){return _ instanceof y?_:new y(function(b){b(_)})}return new(y||(y=Promise))(function(_,b){function k(A){try{j(w.next(A))}catch(T){b(T)}}function E(A){try{j(w.throw(A))}catch(T){b(T)}}function j(A){A.done?_(A.value):S(A.value).then(k,E)}j((w=w.apply(p,g||[])).next())})},t=Hn&&Hn.__await||function(p){return this instanceof t?(this.v=p,this):new t(p)},n=Hn&&Hn.__asyncGenerator||function(p,g,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var w=y.apply(p,g||[]),S,_=[];return S={},k("next"),k("throw"),k("return",b),S[Symbol.asyncIterator]=function(){return this},S;function b(P){return function(F){return Promise.resolve(F).then(P,T)}}function k(P,F){w[P]&&(S[P]=function($){return new Promise(function(Z,D){_.push([P,$,Z,D])>1||E(P,$)})},F&&(S[P]=F(S[P])))}function E(P,F){try{j(w[P](F))}catch($){M(_[0][3],$)}}function j(P){P.value instanceof t?Promise.resolve(P.value.v).then(A,T):M(_[0][2],P)}function A(P){E("next",P)}function T(P){E("throw",P)}function M(P,F){P(F),_.shift(),_.length&&E(_[0][0],_[0][1])}};Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.FalStream=void 0,Hn.createStreamingClient=m;const i=JI(),o=W_(),s=jl(),l=ma(),c="text/event-stream",d=15*1e3;class h{constructor(g,y,w){var S;this.listeners=new Map,this.buffer=[],this.currentData=void 0,this.lastEventTimestamp=0,this.streamClosed=!1,this._requestId=null,this.abortController=new AbortController,this.start=()=>e(this,void 0,void 0,function*(){var _,b;const{endpointId:k,options:E}=this,{input:j,method:A="post",connectionMode:T="server"}=E;try{if(T==="client"){const M=yield(0,o.getTemporaryAuthToken)(k,this.config),{fetch:P}=this.config,F=new URL(this.url);F.searchParams.set("fal_jwt_token",M);const $=yield P(F.toString(),{method:A.toUpperCase(),headers:{accept:(_=E.accept)!==null&&_!==void 0?_:c,"content-type":"application/json"},body:j&&A!=="get"?JSON.stringify(j):void 0,signal:this.abortController.signal});return this._requestId=$.headers.get("x-fal-request-id"),yield this.handleResponse($)}return yield(0,s.dispatchRequest)({method:A.toUpperCase(),targetUrl:this.url,input:j,config:this.config,options:{headers:{accept:(b=E.accept)!==null&&b!==void 0?b:c},responseHandler:M=>e(this,void 0,void 0,function*(){return this._requestId=M.headers.get("x-fal-request-id"),yield this.handleResponse(M)}),signal:this.abortController.signal}})}catch(M){this.handleError(M)}}),this.handleResponse=_=>e(this,void 0,void 0,function*(){var b,k;if(!_.ok){try{yield(0,l.defaultResponseHandler)(_)}catch($){this.emit("error",$)}return}const E=_.body;if(!E){this.emit("error",new l.ApiError({message:"Response body is empty.",status:400,body:void 0,requestId:this._requestId||void 0}));return}if(!((b=_.headers.get("content-type"))!==null&&b!==void 0?b:"").startsWith(c)){const $=E.getReader(),Z=()=>{$.read().then(({done:D,value:q})=>{if(D){this.emit("done",this.currentData);return}this.buffer.push(q),this.currentData=q,this.emit("data",q),Z()})};Z();return}const A=new TextDecoder("utf-8"),T=_.body.getReader(),M=(0,i.createParser)($=>{if($.type==="event"){const Z=$.data;try{const D=JSON.parse(Z);this.buffer.push(D),this.currentData=D,this.emit("data",D),this.emit("message",D)}catch(D){this.emit("error",D)}}}),P=(k=this.options.timeout)!==null&&k!==void 0?k:d,F=()=>e(this,void 0,void 0,function*(){const{value:$,done:Z}=yield T.read();this.lastEventTimestamp=Date.now(),M.feed(A.decode($)),Date.now()-this.lastEventTimestamp>P&&this.emit("error",new l.ApiError({message:`Event stream timed out after ${(P/1e3).toFixed(0)} seconds with no messages.`,status:408,requestId:this._requestId||void 0})),Z?this.emit("done",this.currentData):F().catch(this.handleError)});F().catch(this.handleError)}),this.handleError=_=>{var b;if(_.name==="AbortError"||this.signal.aborted)return;const k=_ instanceof l.ApiError?_:new l.ApiError({message:(b=_.message)!==null&&b!==void 0?b:"An unknown error occurred",status:500,requestId:this._requestId||void 0});this.emit("error",k)},this.on=(_,b)=>{var k;this.listeners.has(_)||this.listeners.set(_,[]),(k=this.listeners.get(_))===null||k===void 0||k.push(b)},this.emit=(_,b)=>{const k=this.listeners.get(_)||[];for(const E of k)E(b)},this.done=()=>e(this,void 0,void 0,function*(){return this.donePromise}),this.abort=_=>{this.streamClosed||this.abortController.abort(_)},this.endpointId=g,this.config=y,this.url=(S=w.url)!==null&&S!==void 0?S:(0,s.buildUrl)(g,{path:"/stream",query:w.queryParams}),this.options=w,this.donePromise=new Promise((_,b)=>{this.streamClosed&&b(new l.ApiError({message:"Streaming connection is already closed.",status:400,body:void 0,requestId:this._requestId||void 0})),this.signal.addEventListener("abort",()=>{var k;_((k=this.currentData)!==null&&k!==void 0?k:{})}),this.on("done",k=>{this.streamClosed=!0,_(k)}),this.on("error",k=>{this.streamClosed=!0,b(k)})}),w.signal&&w.signal.addEventListener("abort",()=>{this.abortController.abort()}),this.start().catch(this.handleError)}[Symbol.asyncIterator](){return n(this,arguments,function*(){let y=!0;const w=()=>y=!1;for(this.on("error",w),this.on("done",w);y||this.buffer.length>0;){const S=this.buffer.shift();S&&(yield yield t(S)),yield t(new Promise(_=>setTimeout(_,16)))}})}get signal(){return this.abortController.signal}get requestId(){return this._requestId}}Hn.FalStream=h;function m({config:p,storage:g}){return{stream(y,w){return e(this,void 0,void 0,function*(){const S=w.input?yield g.transformInput(w.input):void 0;return new h(y,p,Object.assign(Object.assign({},w),{input:S}))})}}}return Hn}var Kb;function eL(){if(Kb)return Ir;Kb=1;var e=Ir&&Ir.__awaiter||function(w,S,_,b){function k(E){return E instanceof _?E:new _(function(j){j(E)})}return new(_||(_=Promise))(function(E,j){function A(P){try{M(b.next(P))}catch(F){j(F)}}function T(P){try{M(b.throw(P))}catch(F){j(F)}}function M(P){P.done?E(P.value):k(P.value).then(A,T)}M((b=b.apply(w,S||[])).next())})},t=Ir&&Ir.__rest||function(w,S){var _={};for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&S.indexOf(b)<0&&(_[b]=w[b]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var k=0,b=Object.getOwnPropertySymbols(w);k<b.length;k++)S.indexOf(b[k])<0&&Object.prototype.propertyIsEnumerable.call(w,b[k])&&(_[b[k]]=w[b[k]]);return _};Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.createQueueClient=void 0;const n=jl(),i=ma(),o=Uf(),s=K_(),l=Q_(),c=ga(),d=500,h="x-fal-queue-priority",m="x-fal-runner-hint",p={maxRetries:3,baseDelay:1e3,maxDelay:6e4,retryableStatusCodes:o.DEFAULT_RETRYABLE_STATUS_CODES},g={maxRetries:5,baseDelay:1e3,maxDelay:3e4,retryableStatusCodes:[...o.DEFAULT_RETRYABLE_STATUS_CODES,500]},y=({config:w,storage:S})=>{const _={submit(b,k){return e(this,void 0,void 0,function*(){const{webhookUrl:E,priority:j,hint:A,headers:T,storageSettings:M}=k,P=t(k,["webhookUrl","priority","hint","headers","storageSettings"]),F=k.input?yield S.transformInput(k.input):void 0,$=Object.fromEntries(Object.entries(T??{}).map(([Z,D])=>[Z.toLowerCase(),D]));return(0,n.dispatchRequest)({method:k.method,targetUrl:(0,n.buildUrl)(b,Object.assign(Object.assign({},P),{subdomain:"queue",query:E?{fal_webhook:E}:void 0})),headers:Object.assign(Object.assign(Object.assign(Object.assign({},$),(0,s.buildObjectLifecycleHeaders)(M)),{[h]:j??"normal"}),A&&{[m]:A}),input:F,config:w,options:{signal:k.abortSignal,retry:p}})})},status(b,k){return e(this,arguments,void 0,function*(E,{requestId:j,logs:A=!1,abortSignal:T}){const M=(0,c.parseEndpointId)(E),P=M.namespace?`${M.namespace}/`:"";return(0,n.dispatchRequest)({method:"get",targetUrl:(0,n.buildUrl)(`${P}${M.owner}/${M.alias}`,{subdomain:"queue",query:{logs:A?"1":"0"},path:`/requests/${j}/status`}),config:w,options:{signal:T,retry:g}})})},streamStatus(b,k){return e(this,arguments,void 0,function*(E,{requestId:j,logs:A=!1,connectionMode:T}){const M=(0,c.parseEndpointId)(E),P=M.namespace?`${M.namespace}/`:"",F={logs:A?"1":"0"},$=(0,n.buildUrl)(`${P}${M.owner}/${M.alias}`,{subdomain:"queue",path:`/requests/${j}/status/stream`,query:F});return new l.FalStream(E,w,{url:$,method:"get",connectionMode:T,queryParams:F})})},subscribeToStatus(b,k){return e(this,void 0,void 0,function*(){const E=k.requestId,j=k.timeout;let A;const T=()=>{};if(k.mode==="streaming"){const M=yield _.streamStatus(b,{requestId:E,logs:k.logs,connectionMode:"connectionMode"in k?k.connectionMode:void 0}),P=[];j&&(A=setTimeout(()=>{throw M.abort(),_.cancel(b,{requestId:E}).catch(T),new Error(`Client timed out waiting for the request to complete after ${j}ms`)},j)),M.on("data",$=>{k.onQueueUpdate&&("logs"in $&&Array.isArray($.logs)&&$.logs.length>0&&P.push(...$.logs),k.onQueueUpdate("logs"in $?Object.assign(Object.assign({},$),{logs:P}):$))});const F=yield M.done();return A&&clearTimeout(A),F}return new Promise((M,P)=>{var F;let $;const Z="pollInterval"in k&&typeof k.pollInterval=="number"&&(F=k.pollInterval)!==null&&F!==void 0?F:d,D=()=>{A&&clearTimeout(A),$&&clearTimeout($)};j&&(A=setTimeout(()=>{D(),_.cancel(b,{requestId:E}).catch(T),P(new Error(`Client timed out waiting for the request to complete after ${j}ms`))},j));const q=()=>e(this,void 0,void 0,function*(){var N;try{const H=yield _.status(b,{requestId:E,logs:(N=k.logs)!==null&&N!==void 0?N:!1,abortSignal:k.abortSignal});if(k.onQueueUpdate&&k.onQueueUpdate(H),H.status==="COMPLETED"){D(),M(H);return}$=setTimeout(q,Z)}catch(H){D(),P(H)}});q().catch(P)})})},result(b,k){return e(this,arguments,void 0,function*(E,{requestId:j,abortSignal:A}){const T=(0,c.parseEndpointId)(E),M=T.namespace?`${T.namespace}/`:"";return(0,n.dispatchRequest)({method:"get",targetUrl:(0,n.buildUrl)(`${M}${T.owner}/${T.alias}`,{subdomain:"queue",path:`/requests/${j}`}),config:Object.assign(Object.assign({},w),{responseHandler:i.resultResponseHandler}),options:{signal:A,retry:p}})})},cancel(b,k){return e(this,arguments,void 0,function*(E,{requestId:j,abortSignal:A}){const T=(0,c.parseEndpointId)(E),M=T.namespace?`${T.namespace}/`:"";yield(0,n.dispatchRequest)({method:"put",targetUrl:(0,n.buildUrl)(`${M}${T.owner}/${T.alias}`,{subdomain:"queue",path:`/requests/${j}/cancel`}),config:w,options:{signal:A}})})}};return _};return Ir.createQueueClient=y,Ir}var ao={};function tL(e){const t=e.length;let n=0,i=0;for(;i<t;){let o=e.charCodeAt(i++);if((o&4294967168)===0){n++;continue}else if((o&4294965248)===0)n+=2;else{if(o>=55296&&o<=56319&&i<t){const s=e.charCodeAt(i);(s&64512)===56320&&(++i,o=((o&1023)<<10)+(s&1023)+65536)}(o&4294901760)===0?n+=3:n+=4}}return n}function nL(e,t,n){const i=e.length;let o=n,s=0;for(;s<i;){let l=e.charCodeAt(s++);if((l&4294967168)===0){t[o++]=l;continue}else if((l&4294965248)===0)t[o++]=l>>6&31|192;else{if(l>=55296&&l<=56319&&s<i){const c=e.charCodeAt(s);(c&64512)===56320&&(++s,l=((l&1023)<<10)+(c&1023)+65536)}(l&4294901760)===0?(t[o++]=l>>12&15|224,t[o++]=l>>6&63|128):(t[o++]=l>>18&7|240,t[o++]=l>>12&63|128,t[o++]=l>>6&63|128)}t[o++]=l&63|128}}const rL=new TextEncoder,iL=50;function aL(e,t,n){rL.encodeInto(e,t.subarray(n))}function oL(e,t,n){e.length>iL?aL(e,t,n):nL(e,t,n)}const sL=4096;function J_(e,t,n){let i=t;const o=i+n,s=[];let l="";for(;i<o;){const c=e[i++];if((c&128)===0)s.push(c);else if((c&224)===192){const d=e[i++]&63;s.push((c&31)<<6|d)}else if((c&240)===224){const d=e[i++]&63,h=e[i++]&63;s.push((c&31)<<12|d<<6|h)}else if((c&248)===240){const d=e[i++]&63,h=e[i++]&63,m=e[i++]&63;let p=(c&7)<<18|d<<12|h<<6|m;p>65535&&(p-=65536,s.push(p>>>10&1023|55296),p=56320|p&1023),s.push(p)}else s.push(c);s.length>=sL&&(l+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(l+=String.fromCharCode(...s)),l}const lL=new TextDecoder,uL=200;function cL(e,t,n){const i=e.subarray(t,t+n);return lL.decode(i)}function fL(e,t,n){return n>uL?cL(e,t,n):J_(e,t,n)}class Vs{type;data;constructor(t,n){this.type=t,this.data=n}}class dn extends Error{constructor(t){super(t);const n=Object.create(dn.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:dn.name})}}const Bs=4294967295;function dL(e,t,n){const i=n/4294967296,o=n;e.setUint32(t,i),e.setUint32(t+4,o)}function ek(e,t,n){const i=Math.floor(n/4294967296),o=n;e.setUint32(t,i),e.setUint32(t+4,o)}function tk(e,t){const n=e.getInt32(t),i=e.getUint32(t+4);return n*4294967296+i}function hL(e,t){const n=e.getUint32(t),i=e.getUint32(t+4);return n*4294967296+i}const nk=-1,pL=4294967296-1,mL=17179869184-1;function rk({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=mL)if(t===0&&e<=pL){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e),n}else{const n=e/4294967296,i=e&4294967295,o=new Uint8Array(8),s=new DataView(o.buffer);return s.setUint32(0,t<<2|n&3),s.setUint32(4,i),o}else{const n=new Uint8Array(12),i=new DataView(n.buffer);return i.setUint32(0,t),ek(i,4,e),n}}function ik(e){const t=e.getTime(),n=Math.floor(t/1e3),i=(t-n*1e3)*1e6,o=Math.floor(i/1e9);return{sec:n+o,nsec:i-o*1e9}}function ak(e){if(e instanceof Date){const t=ik(e);return rk(t)}else return null}function ok(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const n=t.getUint32(0),i=t.getUint32(4),o=(n&3)*4294967296+i,s=n>>>2;return{sec:o,nsec:s}}case 12:{const n=tk(t,4),i=t.getUint32(0);return{sec:n,nsec:i}}default:throw new dn(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}function sk(e){const t=ok(e);return new Date(t.sec*1e3+t.nsec/1e6)}const gL={type:nk,encode:ak,decode:sk};class Nl{static defaultCodec=new Nl;__brand;builtInEncoders=[];builtInDecoders=[];encoders=[];decoders=[];constructor(){this.register(gL)}register({type:t,encode:n,decode:i}){if(t>=0)this.encoders[t]=n,this.decoders[t]=i;else{const o=-1-t;this.builtInEncoders[o]=n,this.builtInDecoders[o]=i}}tryToEncode(t,n){for(let i=0;i<this.builtInEncoders.length;i++){const o=this.builtInEncoders[i];if(o!=null){const s=o(t,n);if(s!=null){const l=-1-i;return new Vs(l,s)}}}for(let i=0;i<this.encoders.length;i++){const o=this.encoders[i];if(o!=null){const s=o(t,n);if(s!=null){const l=i;return new Vs(l,s)}}}return t instanceof Vs?t:null}decode(t,n,i){const o=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return o?o(t,n,i):new Vs(n,t)}}function yL(e){return e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer}function Tm(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):yL(e)?new Uint8Array(e):Uint8Array.from(e)}const xL=100,vL=2048;class Bf{extensionCodec;context;useBigInt64;maxDepth;initialBufferSize;sortKeys;forceFloat32;ignoreUndefined;forceIntegerToFloat;pos;view;bytes;entered=!1;constructor(t){this.extensionCodec=t?.extensionCodec??Nl.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.maxDepth=t?.maxDepth??xL,this.initialBufferSize=t?.initialBufferSize??vL,this.sortKeys=t?.sortKeys??!1,this.forceFloat32=t?.forceFloat32??!1,this.ignoreUndefined=t?.ignoreUndefined??!1,this.forceIntegerToFloat=t?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new Bf({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(t){if(this.entered)return this.clone().encodeSharedRef(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(t){if(this.entered)return this.clone().encode(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(t,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);t==null?this.encodeNil():typeof t=="boolean"?this.encodeBoolean(t):typeof t=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(t):this.encodeNumber(t):typeof t=="string"?this.encodeString(t):this.useBigInt64&&typeof t=="bigint"?this.encodeBigInt64(t):this.encodeObject(t,n)}ensureBufferSizeToWrite(t){const n=this.pos+t;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(t){const n=new ArrayBuffer(t),i=new Uint8Array(n),o=new DataView(n);i.set(this.bytes),this.view=o,this.bytes=i}encodeNil(){this.writeU8(192)}encodeBoolean(t){t===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(t){!this.forceIntegerToFloat&&Number.isSafeInteger(t)?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(211),this.writeI64(t)):this.encodeNumberAsFloat(t)}encodeNumberAsFloat(t){this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))}encodeBigInt64(t){t>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(t)):(this.writeU8(211),this.writeBigInt64(t))}writeStringHeader(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else if(t<4294967296)this.writeU8(219),this.writeU32(t);else throw new Error(`Too long string: ${t} bytes in UTF-8`)}encodeString(t){const i=tL(t);this.ensureBufferSizeToWrite(5+i),this.writeStringHeader(i),oL(t,this.bytes,this.pos),this.pos+=i}encodeObject(t,n){const i=this.extensionCodec.tryToEncode(t,this.context);if(i!=null)this.encodeExtension(i);else if(Array.isArray(t))this.encodeArray(t,n);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else if(typeof t=="object")this.encodeMap(t,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(t)}`)}encodeBinary(t){const n=t.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const i=Tm(t);this.writeU8a(i)}encodeArray(t,n){const i=t.length;if(i<16)this.writeU8(144+i);else if(i<65536)this.writeU8(220),this.writeU16(i);else if(i<4294967296)this.writeU8(221),this.writeU32(i);else throw new Error(`Too large array: ${i}`);for(const o of t)this.doEncode(o,n+1)}countWithoutUndefined(t,n){let i=0;for(const o of n)t[o]!==void 0&&i++;return i}encodeMap(t,n){const i=Object.keys(t);this.sortKeys&&i.sort();const o=this.ignoreUndefined?this.countWithoutUndefined(t,i):i.length;if(o<16)this.writeU8(128+o);else if(o<65536)this.writeU8(222),this.writeU16(o);else if(o<4294967296)this.writeU8(223),this.writeU32(o);else throw new Error(`Too large map object: ${o}`);for(const s of i){const l=t[s];this.ignoreUndefined&&l===void 0||(this.encodeString(s),this.doEncode(l,n+1))}}encodeExtension(t){if(typeof t.data=="function"){const i=t.data(this.pos+6),o=i.length;if(o>=4294967296)throw new Error(`Too large extension object: ${o}`);this.writeU8(201),this.writeU32(o),this.writeI8(t.type),this.writeU8a(i);return}const n=t.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(t.type),this.writeU8a(t.data)}writeU8(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++}writeU8a(t){const n=t.length;this.ensureBufferSizeToWrite(n),this.bytes.set(t,this.pos),this.pos+=n}writeI8(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++}writeU16(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2}writeI16(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2}writeU32(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4}writeI32(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4}writeF32(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4}writeF64(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8}writeU64(t){this.ensureBufferSizeToWrite(8),dL(this.view,this.pos,t),this.pos+=8}writeI64(t){this.ensureBufferSizeToWrite(8),ek(this.view,this.pos,t),this.pos+=8}writeBigUint64(t){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,t),this.pos+=8}writeBigInt64(t){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,t),this.pos+=8}}function bL(e,t){return new Bf(t).encodeSharedRef(e)}function Bp(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}const wL=16,SL=16;class _L{hit=0;miss=0;caches;maxKeyLength;maxLengthPerKey;constructor(t=wL,n=SL){this.maxKeyLength=t,this.maxLengthPerKey=n,this.caches=[];for(let i=0;i<this.maxKeyLength;i++)this.caches.push([])}canBeCached(t){return t>0&&t<=this.maxKeyLength}find(t,n,i){const o=this.caches[i-1];e:for(const s of o){const l=s.bytes;for(let c=0;c<i;c++)if(l[c]!==t[n+c])continue e;return s.str}return null}store(t,n){const i=this.caches[t.length-1],o={bytes:t,str:n};i.length>=this.maxLengthPerKey?i[Math.random()*i.length|0]=o:i.push(o)}decode(t,n,i){const o=this.find(t,n,i);if(o!=null)return this.hit++,o;this.miss++;const s=J_(t,n,i),l=Uint8Array.prototype.slice.call(t,n,n+i);return this.store(l,s),s}}const Dm="array",Ws="map_key",lk="map_value",kL=e=>{if(typeof e=="string"||typeof e=="number")return e;throw new dn("The type of key must be string or number but "+typeof e)};class EL{stack=[];stackHeadPosition=-1;get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(t){const n=this.getUninitializedStateFromPool();n.type=Dm,n.position=0,n.size=t,n.array=new Array(t)}pushMapState(t){const n=this.getUninitializedStateFromPool();n.type=Ws,n.readCount=0,n.size=t,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const t={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(t)}return this.stack[this.stackHeadPosition]}release(t){if(this.stack[this.stackHeadPosition]!==t)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(t.type===Dm){const i=t;i.size=0,i.array=void 0,i.position=0,i.type=void 0}if(t.type===Ws||t.type===lk){const i=t;i.size=0,i.map=void 0,i.readCount=0,i.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Hs=-1,Ag=new DataView(new ArrayBuffer(0)),CL=new Uint8Array(Ag.buffer);try{Ag.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const Wb=new RangeError("Insufficient data"),jL=new _L;class Mi{extensionCodec;context;useBigInt64;rawStrings;maxStrLength;maxBinLength;maxArrayLength;maxMapLength;maxExtLength;keyDecoder;mapKeyConverter;totalPos=0;pos=0;view=Ag;bytes=CL;headByte=Hs;stack=new EL;entered=!1;constructor(t){this.extensionCodec=t?.extensionCodec??Nl.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.rawStrings=t?.rawStrings??!1,this.maxStrLength=t?.maxStrLength??Bs,this.maxBinLength=t?.maxBinLength??Bs,this.maxArrayLength=t?.maxArrayLength??Bs,this.maxMapLength=t?.maxMapLength??Bs,this.maxExtLength=t?.maxExtLength??Bs,this.keyDecoder=t?.keyDecoder!==void 0?t.keyDecoder:jL,this.mapKeyConverter=t?.mapKeyConverter??kL}clone(){return new Mi({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Hs,this.stack.reset()}setBuffer(t){const n=Tm(t);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(t){if(this.headByte===Hs&&!this.hasRemaining(1))this.setBuffer(t);else{const n=this.bytes.subarray(this.pos),i=Tm(t),o=new Uint8Array(n.length+i.length);o.set(n),o.set(i,n.length),this.setBuffer(o)}}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){const{view:n,pos:i}=this;return new RangeError(`Extra ${n.byteLength-i} of ${n.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered)return this.clone().decode(t);try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){yield*this.clone().decodeMulti(t);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(t){if(this.entered)return this.clone().decodeAsync(t);try{this.entered=!0;let n=!1,i;for await(const c of t){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(c);try{i=this.doDecodeSync(),n=!0}catch(d){if(!(d instanceof RangeError))throw d}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return i}const{headByte:o,pos:s,totalPos:l}=this;throw new RangeError(`Insufficient data in parsing ${Bp(o)} at ${l} (${s} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,n){if(this.entered){yield*this.clone().decodeMultiAsync(t,n);return}try{this.entered=!0;let i=n,o=-1;for await(const s of t){if(n&&o===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),i&&(o=this.readArraySize(),i=!1,this.complete());try{for(;yield this.doDecodeSync(),--o!==0;);}catch(l){if(!(l instanceof RangeError))throw l}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const t=this.readHeadByte();let n;if(t>=224)n=t-256;else if(t<192)if(t<128)n=t;else if(t<144){const o=t-128;if(o!==0){this.pushMapState(o),this.complete();continue e}else n={}}else if(t<160){const o=t-144;if(o!==0){this.pushArrayState(o),this.complete();continue e}else n=[]}else{const o=t-160;n=this.decodeString(o,0)}else if(t===192)n=null;else if(t===194)n=!1;else if(t===195)n=!0;else if(t===202)n=this.readF32();else if(t===203)n=this.readF64();else if(t===204)n=this.readU8();else if(t===205)n=this.readU16();else if(t===206)n=this.readU32();else if(t===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(t===208)n=this.readI8();else if(t===209)n=this.readI16();else if(t===210)n=this.readI32();else if(t===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(t===217){const o=this.lookU8();n=this.decodeString(o,1)}else if(t===218){const o=this.lookU16();n=this.decodeString(o,2)}else if(t===219){const o=this.lookU32();n=this.decodeString(o,4)}else if(t===220){const o=this.readU16();if(o!==0){this.pushArrayState(o),this.complete();continue e}else n=[]}else if(t===221){const o=this.readU32();if(o!==0){this.pushArrayState(o),this.complete();continue e}else n=[]}else if(t===222){const o=this.readU16();if(o!==0){this.pushMapState(o),this.complete();continue e}else n={}}else if(t===223){const o=this.readU32();if(o!==0){this.pushMapState(o),this.complete();continue e}else n={}}else if(t===196){const o=this.lookU8();n=this.decodeBinary(o,1)}else if(t===197){const o=this.lookU16();n=this.decodeBinary(o,2)}else if(t===198){const o=this.lookU32();n=this.decodeBinary(o,4)}else if(t===212)n=this.decodeExtension(1,0);else if(t===213)n=this.decodeExtension(2,0);else if(t===214)n=this.decodeExtension(4,0);else if(t===215)n=this.decodeExtension(8,0);else if(t===216)n=this.decodeExtension(16,0);else if(t===199){const o=this.lookU8();n=this.decodeExtension(o,1)}else if(t===200){const o=this.lookU16();n=this.decodeExtension(o,2)}else if(t===201){const o=this.lookU32();n=this.decodeExtension(o,4)}else throw new dn(`Unrecognized type byte: ${Bp(t)}`);this.complete();const i=this.stack;for(;i.length>0;){const o=i.top();if(o.type===Dm)if(o.array[o.position]=n,o.position++,o.position===o.size)n=o.array,i.release(o);else continue e;else if(o.type===Ws){if(n==="__proto__")throw new dn("The key __proto__ is not allowed");o.key=this.mapKeyConverter(n),o.type=lk;continue e}else if(o.map[o.key]=n,o.readCount++,o.readCount===o.size)n=o.map,i.release(o);else{o.key=null,o.type=Ws;continue e}}return n}}readHeadByte(){return this.headByte===Hs&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Hs}readArraySize(){const t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new dn(`Unrecognized array type byte: ${Bp(t)}`)}}}pushMapState(t){if(t>this.maxMapLength)throw new dn(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new dn(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,n):this.decodeBinary(t,n)}decodeUtf8String(t,n){if(t>this.maxStrLength)throw new dn(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+t)throw Wb;const i=this.pos+n;let o;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(t)?o=this.keyDecoder.decode(this.bytes,i,t):o=fL(this.bytes,i,t),this.pos+=n+t,o}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Ws:!1}decodeBinary(t,n){if(t>this.maxBinLength)throw new dn(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+n))throw Wb;const i=this.pos+n,o=this.bytes.subarray(i,i+t);return this.pos+=n+t,o}decodeExtension(t,n){if(t>this.maxExtLength)throw new dn(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);const i=this.view.getInt8(this.pos+n),o=this.decodeBinary(t,n+1);return this.extensionCodec.decode(o,i,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){const t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){const t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){const t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){const t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){const t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){const t=hL(this.view,this.pos);return this.pos+=8,t}readI64(){const t=tk(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){const t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){const t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){const t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){const t=this.view.getFloat64(this.pos);return this.pos+=8,t}}function NL(e,t){return new Mi(t).decode(e)}function AL(e,t){return new Mi(t).decodeMulti(e)}function TL(e){return e[Symbol.asyncIterator]!=null}async function*DL(e){const t=e.getReader();try{for(;;){const{done:n,value:i}=await t.read();if(n)return;yield i}}finally{t.releaseLock()}}function Tg(e){return TL(e)?e:DL(e)}async function zL(e,t){const n=Tg(e);return new Mi(t).decodeAsync(n)}function ML(e,t){const n=Tg(e);return new Mi(t).decodeArrayStream(n)}function OL(e,t){const n=Tg(e);return new Mi(t).decodeStream(n)}const RL=Object.freeze(Object.defineProperty({__proto__:null,DecodeError:dn,Decoder:Mi,EXT_TIMESTAMP:nk,Encoder:Bf,ExtData:Vs,ExtensionCodec:Nl,decode:NL,decodeArrayStream:ML,decodeAsync:zL,decodeMulti:AL,decodeMultiStream:OL,decodeTimestampExtension:sk,decodeTimestampToTimeSpec:ok,encode:bL,encodeDateToTimeSpec:ik,encodeTimeSpecToTimestamp:rk,encodeTimestampExtension:ak},Symbol.toStringTag,{value:"Module"})),IL=gC(RL);var _n={},Qb;function LL(){if(Qb)return _n;Qb=1,Object.defineProperty(_n,"__esModule",{value:!0});function e(Y){return{enumerable:!0,value:Y}}function t(Y){return{enumerable:!0,writable:!0,value:Y}}let n={},i=()=>!0,o=()=>({}),s=Y=>Y,l=(Y,B,z,I)=>Y.apply(z,I)&&B.apply(z,I),c=(Y,B,z,[I,O])=>B.call(z,Y.call(z,I,O),O),d=(Y,B)=>Object.freeze(Object.create(Y,B));function h(Y,B,z){return Y.reduce((I,O)=>function(...Q){return z(I,O,this,Q)},B)}function m(Y){return d(this,{fn:e(Y)})}let p={},g=m.bind(p),y=Y=>g((B,z)=>!!~Y(B,z)&&B),w={},S=m.bind(w);function _(Y,B){return B.filter(z=>Y.isPrototypeOf(z))}function b(Y,B,...z){let I=h(_(w,z).map(Q=>Q.fn),i,l),O=h(_(p,z).map(Q=>Q.fn),s,c);return d(this,{from:e(Y),to:e(B),guards:e(I),reducers:e(O)})}let k={},E={},j=b.bind(k),A=b.bind(E,null);function T(Y,B,z){return H(B,Y,z,this.immediates)||Y}function M(Y){let B=new Map;for(let z of Y)B.has(z.from)||B.set(z.from,[]),B.get(z.from).push(z);return B}let P={enter:s};function F(...Y){let B=_(k,Y),z=_(E,Y),I={final:e(Y.length===0),transitions:e(M(B))};return z.length&&(I.immediates=e(z),I.enter=e(T)),d(P,I)}let $={enter(Y,B,z){let I=this.fn.call(B,B.context,z);return q.isPrototypeOf(I)?d(Z,{machine:e(I),transitions:e(this.transitions)}).enter(Y,B,z):(I.then(O=>B.send({type:"done",data:O})).catch(O=>B.send({type:"error",error:O})),Y)}},Z={enter(Y,B,z){if(B.child=X(this.machine,I=>{B.onChange(I),B.child==I&&I.machine.state.value.final&&(delete B.child,B.send({type:"done",data:I.context}))},B.context,z),B.child.machine.state.value.final){let I=B.child.context;return delete B.child,H(B,Y,{type:"done",data:I},this.transitions.get("done"))}return Y}};function D(Y,...B){let z=e(M(B));return q.isPrototypeOf(Y)?d(Z,{machine:e(Y),transitions:z}):d($,{fn:e(Y),transitions:z})}let q={get state(){return{name:this.current,value:this.states[this.current]}}};function N(Y,B,z=o){return typeof Y!="string"&&(z=B||o,B=Y,Y=Object.keys(B)[0]),n._create&&n._create(Y,B),d(q,{context:e(z),current:e(Y),states:e(B)})}function H(Y,B,z,I){let{context:O}=Y;for(let{to:Q,guards:ee,reducers:ue}of I)if(ee(O,z)){Y.context=ue.call(Y,O,z);let ye=B.original||B,de=d(ye,{current:e(Q),original:{value:ye}});return n._onEnter&&n._onEnter(B,Q,Y.context,O,z),de.state.value.enter(de,Y,z)}}function U(Y,B){let z=B.type||B,{machine:I}=Y,{value:O,name:Q}=I.state;return O.transitions.has(z)?H(Y,I,B,O.transitions.get(z))||I:(n._send&&n._send(z,Q),I)}let V={send(Y){this.machine=U(this,Y),this.onChange(this)}};function X(Y,B,z,I){let O=Object.create(V,{machine:t(Y),context:t(Y.context(z,I)),onChange:e(B)});return O.send=O.send.bind(O),O.machine=O.machine.state.value.enter(O.machine,O,I),O}return _n.action=y,_n.createMachine=N,_n.d=n,_n.guard=S,_n.immediate=A,_n.interpret=X,_n.invoke=D,_n.reduce=g,_n.state=F,_n.transition=j,_n}var Jb;function UL(){if(Jb)return ao;Jb=1;var e=ao&&ao.__awaiter||function(U,V,X,Y){function B(z){return z instanceof X?z:new X(function(I){I(z)})}return new(X||(X=Promise))(function(z,I){function O(ue){try{ee(Y.next(ue))}catch(ye){I(ye)}}function Q(ue){try{ee(Y.throw(ue))}catch(ye){I(ye)}}function ee(ue){ue.done?z(ue.value):B(ue.value).then(O,Q)}ee((Y=Y.apply(U,V||[])).next())})};Object.defineProperty(ao,"__esModule",{value:!0}),ao.createRealtimeClient=H;const t=IL,n=LL(),i=W_(),o=ma(),s=jg(),l=ga(),c=()=>({enqueuedMessage:void 0});function d(U){return U.token!==void 0}function h(U){return!d(U)}function m(U,V){return Object.assign(Object.assign({},U),{enqueuedMessage:V.message})}function p(U){return U.websocket&&U.websocket.readyState===WebSocket.OPEN&&U.websocket.close(),Object.assign(Object.assign({},U),{websocket:void 0})}function g(U,V){return U.websocket&&U.websocket.readyState===WebSocket.OPEN?(V.message instanceof Uint8Array||typeof V.message=="string"?U.websocket.send(V.message):U.websocket.send((0,t.encode)(V.message)),Object.assign(Object.assign({},U),{enqueuedMessage:void 0})):Object.assign(Object.assign({},U),{enqueuedMessage:V.message})}function y(U){return Object.assign(Object.assign({},U),{token:void 0})}function w(U,V){return Object.assign(Object.assign({},U),{token:V.token})}function S(U,V){return Object.assign(Object.assign({},U),{websocket:V.websocket})}const _=(0,n.createMachine)("idle",{idle:(0,n.state)((0,n.transition)("send","connecting",(0,n.reduce)(m)),(0,n.transition)("expireToken","idle",(0,n.reduce)(y)),(0,n.transition)("close","idle",(0,n.reduce)(p))),connecting:(0,n.state)((0,n.transition)("connecting","connecting"),(0,n.transition)("connected","active",(0,n.reduce)(S)),(0,n.transition)("connectionClosed","idle",(0,n.reduce)(p)),(0,n.transition)("send","connecting",(0,n.reduce)(m)),(0,n.transition)("close","idle",(0,n.reduce)(p)),(0,n.immediate)("authRequired",(0,n.guard)(h))),authRequired:(0,n.state)((0,n.transition)("initiateAuth","authInProgress"),(0,n.transition)("send","authRequired",(0,n.reduce)(m)),(0,n.transition)("close","idle",(0,n.reduce)(p))),authInProgress:(0,n.state)((0,n.transition)("authenticated","connecting",(0,n.reduce)(w)),(0,n.transition)("unauthorized","idle",(0,n.reduce)(y),(0,n.reduce)(p)),(0,n.transition)("send","authInProgress",(0,n.reduce)(m)),(0,n.transition)("close","idle",(0,n.reduce)(p))),active:(0,n.state)((0,n.transition)("send","active",(0,n.reduce)(g)),(0,n.transition)("unauthorized","idle",(0,n.reduce)(y)),(0,n.transition)("connectionClosed","idle",(0,n.reduce)(p)),(0,n.transition)("close","idle",(0,n.reduce)(p))),failed:(0,n.state)((0,n.transition)("send","failed"),(0,n.transition)("close","idle",(0,n.reduce)(p)))},c);function b(U,{token:V,maxBuffering:X,path:Y}){if(X!==void 0&&(X<1||X>60))throw new Error("The `maxBuffering` must be between 1 and 60 (inclusive)");const B=new URLSearchParams({fal_jwt_token:V});X!==void 0&&B.set("max_buffering",X.toFixed(0));const z=(0,l.ensureEndpointIdFormat)(U),I=Y?`/${Y.replace(/^\/+/,"")}`:"/realtime";return`wss://fal.run/${z}${I}?${B.toString()}`}const k=128;function E(U){return U.status==="error"&&U.error==="Unauthorized"}const j={NORMAL_CLOSURE:1e3},A=new Map,T=new Map;function M(U,V,X){if(!A.has(U)){const Y=(0,n.interpret)(_,X);A.set(U,Object.assign(Object.assign({},Y),{throttledSend:V>0?(0,l.throttle)(Y.send,V,!0):Y.send}))}return A.get(U)}const P=()=>{},F={send:P,close:P};function $(U){return U.status!=="error"&&U.type!=="x-fal-message"&&!Z(U)}function Z(U){return U.type==="x-fal-error"}function D(U){return e(this,void 0,void 0,function*(){if(typeof U=="string")return JSON.parse(U);const V=X=>e(this,void 0,void 0,function*(){return X instanceof Uint8Array?X:X instanceof Blob?new Uint8Array(yield X.arrayBuffer()):new Uint8Array(X)});return U instanceof ArrayBuffer||U instanceof Uint8Array?(0,t.decode)(yield V(U)):U instanceof Blob?(0,t.decode)(yield V(U)):U})}function q(U){return U instanceof Uint8Array?U:(0,t.encode)(U)}function N({data:U,decodeMessage:V,onResult:X,onError:Y,send:B}){const z=I=>{if(E(I)){B({type:"unauthorized",error:new Error("Unauthorized")});return}if($(I)){X(I);return}if(Z(I)){if(I.error==="TIMEOUT")return;Y(new o.ApiError({message:`${I.error}: ${I.reason}`,status:400,body:I}));return}};Promise.resolve(V(U)).then(z).catch(I=>{var O;Y(new o.ApiError({message:(O=I?.message)!==null&&O!==void 0?O:"Failed to decode realtime message",status:400}))})}function H({config:U}){return{connect(V,X){const{clientOnly:Y=(0,l.isReact)()&&!(0,s.isBrowser)(),connectionKey:B=crypto.randomUUID(),maxBuffering:z,path:I,throttleInterval:O=k,encodeMessage:Q,decodeMessage:ee}=X;if(Y&&!(0,s.isBrowser)())return F;const ue=Q??(L=>q(L)),ye=ee??(L=>D(L));let de,ve;T.set(B,{decodeMessage:ye,onError:X.onError,onResult:X.onResult});const Ae=()=>T.get(B),je=M(B,O,({context:L,machine:te,send:re})=>{const{enqueuedMessage:W,token:K,websocket:ie}=L;if(ve=W,te.current==="active"&&W&&ie?.readyState===WebSocket.OPEN&&re({type:"send",message:W}),te.current==="authRequired"&&K===void 0&&de!==te.current&&(re({type:"initiateAuth"}),(0,i.getTemporaryAuthToken)(V,U).then(pe=>{re({type:"authenticated",token:pe});const ge=Math.round(i.TOKEN_EXPIRATION_SECONDS*.9*1e3);setTimeout(()=>{re({type:"expireToken"})},ge)}).catch(pe=>{re({type:"unauthorized",error:pe})})),te.current==="connecting"&&de!==te.current&&K!==void 0){const pe=new WebSocket(b(V,{token:K,maxBuffering:z,path:I}));pe.onopen=()=>{var ge,oe;re({type:"connected",websocket:pe});const _e=(oe=(ge=je.context)===null||ge===void 0?void 0:ge.enqueuedMessage)!==null&&oe!==void 0?oe:ve;_e&&(pe.send(ue(_e)),je.context=Object.assign(Object.assign({},je.context),{enqueuedMessage:void 0}))},pe.onclose=ge=>{if(ge.code!==j.NORMAL_CLOSURE){const{onError:oe=P}=Ae();oe(new o.ApiError({message:`Error closing the connection: ${ge.reason}`,status:ge.code}))}re({type:"connectionClosed",code:ge.code})},pe.onerror=ge=>{const{onError:oe=P}=Ae();oe(new o.ApiError({message:"Unknown error",status:500}))},pe.onmessage=ge=>{const{decodeMessage:oe=ye,onResult:_e,onError:Ce=P}=Ae();N({data:ge.data,decodeMessage:oe,onResult:_e,onError:Ce,send:re})}}de=te.current});return{send:L=>{je.throttledSend({type:"send",message:ue(L)})},close:()=>{je.send({type:"close"})}}}}}return ao}var ew;function tw(){if(ew)return io;ew=1;var e=io&&io.__awaiter||function(h,m,p,g){function y(w){return w instanceof p?w:new p(function(S){S(w)})}return new(p||(p=Promise))(function(w,S){function _(E){try{k(g.next(E))}catch(j){S(j)}}function b(E){try{k(g.throw(E))}catch(j){S(j)}}function k(E){E.done?w(E.value):y(E.value).then(_,b)}k((g=g.apply(h,m||[])).next())})};Object.defineProperty(io,"__esModule",{value:!0}),io.createFalClient=d;const t=Ng(),n=eL(),i=UL(),o=jl(),s=ma(),l=K_(),c=Q_();function d(h={}){const m=(0,t.createConfig)(h),p=(0,l.createStorageClient)({config:m}),g=(0,n.createQueueClient)({config:m,storage:p}),y=(0,c.createStreamingClient)({config:m,storage:p}),w=(0,i.createRealtimeClient)({config:m});return{queue:g,realtime:w,storage:p,streaming:y,stream:y.stream,run(S){return e(this,arguments,void 0,function*(_,b={}){const k=b.input?yield p.transformInput(b.input):void 0;return(0,o.dispatchRequest)({method:b.method,targetUrl:(0,o.buildUrl)(_,b),input:k,headers:(0,l.buildObjectLifecycleHeaders)(b.storageSettings),config:Object.assign(Object.assign({},m),{responseHandler:s.resultResponseHandler}),options:{signal:b.abortSignal,retry:{maxRetries:3,baseDelay:500,maxDelay:15e3}}})})},subscribe:(S,_)=>e(this,void 0,void 0,function*(){const{request_id:b}=yield g.submit(S,_);return _.onEnqueue&&_.onEnqueue(b),yield g.subscribeToStatus(S,Object.assign({requestId:b},_)),g.result(S,{requestId:b})})}}return io}var Ps={},nw;function BL(){if(nw)return Ps;nw=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.isQueueStatus=e,Ps.isCompletedQueueStatus=t;function e(n){return n&&n.status&&n.response_url}function t(n){return e(n)&&n.status==="COMPLETED"}return Ps}var rw;function HL(){return rw||(rw=1,(function(e){var t=na&&na.__createBinding||(Object.create?(function(h,m,p,g){g===void 0&&(g=p);var y=Object.getOwnPropertyDescriptor(m,p);(!y||("get"in y?!m.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(h,g,y)}):(function(h,m,p,g){g===void 0&&(g=p),h[g]=m[p]})),n=na&&na.__exportStar||function(h,m){for(var p in h)p!=="default"&&!Object.prototype.hasOwnProperty.call(m,p)&&t(m,h,p)};Object.defineProperty(e,"__esModule",{value:!0}),e.fal=e.parseEndpointId=e.isRetryableError=e.ValidationError=e.ApiError=e.withProxy=e.withMiddleware=e.createFalClient=void 0;const i=tw();var o=tw();Object.defineProperty(e,"createFalClient",{enumerable:!0,get:function(){return o.createFalClient}});var s=Z_();Object.defineProperty(e,"withMiddleware",{enumerable:!0,get:function(){return s.withMiddleware}}),Object.defineProperty(e,"withProxy",{enumerable:!0,get:function(){return s.withProxy}});var l=ma();Object.defineProperty(e,"ApiError",{enumerable:!0,get:function(){return l.ApiError}}),Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return l.ValidationError}});var c=Uf();Object.defineProperty(e,"isRetryableError",{enumerable:!0,get:function(){return c.isRetryableError}}),n(BL(),e);var d=ga();Object.defineProperty(e,"parseEndpointId",{enumerable:!0,get:function(){return d.parseEndpointId}}),e.fal=(function(){let m=(0,i.createFalClient)();return{config(p){m=(0,i.createFalClient)(p)},get queue(){return m.queue},get realtime(){return m.realtime},get storage(){return m.storage},get streaming(){return m.streaming},run(p,g){return m.run(p,g)},subscribe(p,g){return m.subscribe(p,g)},stream(p,g){return m.stream(p,g)}}})()})(na)),na}var iw=HL();const PL={"flux-schnell":"fal-ai/flux/schnell","flux-dev":"fal-ai/flux/dev",turbo:"fal-ai/fast-turbo-diffusion","sdxl-turbo":"fal-ai/fast-sdxl"},yc={name:"fal",async generate(e){const t=$t.getState().apiKeys.fal;if(!t)throw new Error("fal.ai API key not configured");const n=PL[e.model];if(!n)throw new Error(`Unsupported fal.ai model: ${e.model}`);iw.fal.config({credentials:t});const{width:i,height:o}=FL(e.aspectRatio),l=(await iw.fal.subscribe(n,{input:{prompt:e.prompt,negative_prompt:e.negativePrompt||"",image_size:{width:i,height:o},seed:e.seed,num_images:e.numberOfImages||1,enable_safety_checker:!1}})).data;if(!l.images||l.images.length===0)throw new Error("No images returned from fal.ai");return{imageUrl:l.images[0].url,images:l.images.map(c=>({imageUrl:c.url,seed:l.seed})),seed:l.seed}},isConfigured(){const e=$t.getState().apiKeys.fal;return!!e&&e.length>0}};function FL(e){switch(e){case"16:9":return{width:1344,height:768};case"9:16":return{width:768,height:1344};case"2:3":return{width:832,height:1216};case"3:2":return{width:1216,height:832};default:return{width:1024,height:1024}}}const qL={"sd3-large":{endpoint:"https://api.stability.ai/v2beta/stable-image/generate/sd3",model:"sd3-large"},"sd3-large-turbo":{endpoint:"https://api.stability.ai/v2beta/stable-image/generate/sd3",model:"sd3-large-turbo"},"sd3-medium":{endpoint:"https://api.stability.ai/v2beta/stable-image/generate/sd3",model:"sd3-medium"},"sdxl-1.0":{endpoint:"https://api.stability.ai/v2beta/stable-image/generate/core"}},xc={name:"stability",async generate(e){const t=$t.getState().apiKeys.stability;if(!t)throw new Error("Stability AI API key not configured");const n=qL[e.model];if(!n)throw new Error(`Unsupported Stability AI model: ${e.model}`);const i=$L(e.aspectRatio),o=new FormData;o.append("prompt",e.prompt),o.append("output_format","png"),o.append("aspect_ratio",i),n.model&&o.append("model",n.model),e.negativePrompt&&o.append("negative_prompt",e.negativePrompt),e.seed!==void 0&&o.append("seed",e.seed.toString());const s=await fetch(n.endpoint,{method:"POST",headers:{Authorization:`Bearer ${t}`,Accept:"image/*"},body:o});if(!s.ok){const m=await s.text();let p=`Stability AI API error: ${s.status}`;try{const g=JSON.parse(m);p=g.message||g.errors?.[0]||p}catch{m&&(p=m)}throw new Error(p)}const l=await s.blob(),c=await VL(l),d=s.headers.get("x-seed"),h=d?parseInt(d,10):void 0;return{imageUrl:c,images:[{imageUrl:c,seed:h}],seed:h}},isConfigured(){const e=$t.getState().apiKeys.stability;return!!e&&e.length>0}};function $L(e){switch(e){case"16:9":return"16:9";case"9:16":return"9:16";case"2:3":return"2:3";case"3:2":return"3:2";default:return"1:1"}}function VL(e){return new Promise((t,n)=>{const i=new FileReader;i.onloadend=()=>t(i.result),i.onerror=n,i.readAsDataURL(e)})}const YL={mock:GI,"gemini-pro":Ub,"gemini-flash":Ub,"flux-schnell":yc,"flux-dev":yc,turbo:yc,"sdxl-turbo":yc,"sd3-large":xc,"sd3-large-turbo":xc,"sd3-medium":xc,"sdxl-1.0":xc};async function GL(e){const t=YL[e.model];if(!t)return{success:!1,error:{message:`Unknown model: ${e.model}`}};if(!t.isConfigured())return{success:!1,error:{message:`${{gemini:"Gemini",fal:"fal.ai",stability:"Stability AI"}[t.name]||t.name} API key not configured. Add it in Settings.`}};try{return{success:!0,data:await t.generate(e)}}catch(n){return{success:!1,error:{message:n instanceof Error?n.message:"Image generation failed"}}}}const XL={mock:"Mock (Test)","gemini-pro":"Gemini 3 Pro","gemini-flash":"Gemini 2.5 Flash","flux-schnell":"Flux Schnell","flux-dev":"Flux Dev",turbo:"Turbo","sdxl-turbo":"SDXL Turbo"};function ZL({id:e,data:t,selected:n}){const{nodes:i,edges:o,updateNodeData:s}=et(),l=Dc(j=>j.addEntry),[c,d]=J.useState(!1),[h,m]=J.useState(""),p=()=>{const j=X_(e,i,o);return s(e,{promptPreview:j.prompt}),m(j.parameters.model),j},g=async()=>{const j=p();try{await navigator.clipboard.writeText(j.prompt),d(!0),setTimeout(()=>d(!1),2e3)}catch(A){console.error("Failed to copy:",A)}},y=t.selectedImageIndex??0,w=t.generatedImages??[],S=w.length>0?w[y]?.imageUrl:t.generatedImageUrl,_=j=>{s(e,{selectedImageIndex:j,generatedImageUrl:w[j]?.imageUrl})},b=()=>{if(!S)return;const j=document.createElement("a");j.href=S;const A=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19),T=w.length>1?`-${y+1}`:"";j.download=`flowboard-${A}${T}.png`,document.body.appendChild(j),j.click(),document.body.removeChild(j)},k=async()=>{const j=p();s(e,{promptPreview:j.prompt,status:"generating",error:void 0});const A=await GL({prompt:j.prompt,negativePrompt:j.negativePrompt||void 0,referenceImages:j.referenceImages.length>0?j.referenceImages:void 0,model:j.parameters.model,aspectRatio:j.parameters.aspectRatio,resolution:j.parameters.resolution,seed:j.parameters.seed,temperature:j.parameters.temperature,numberOfImages:j.parameters.numberOfImages});if(A.success){const T=A.data.images.map(M=>({imageUrl:M.imageUrl,seed:M.seed}));s(e,{status:"complete",generatedImageUrl:A.data.imageUrl,generatedImages:T,selectedImageIndex:0,error:void 0}),l({imageUrl:A.data.imageUrl,prompt:j.prompt,negativePrompt:j.negativePrompt||void 0,model:j.parameters.model,aspectRatio:j.parameters.aspectRatio,seed:A.data.seed})}else s(e,{status:"error",error:A.error.message})},E=x.jsxs(x.Fragment,{children:[x.jsx(Vt,{type:"target",position:ze.Left,id:"reference",style:{background:ct.reference,borderColor:ct.reference,borderWidth:2,top:"60%"},title:"Connect reference images"}),x.jsx(Vt,{type:"target",position:ze.Left,id:"config",style:{background:ct.parameters,borderColor:ct.parameters,borderWidth:2,top:"80%"},title:"Connect parameters or negative prompts"})]});return x.jsxs(_t,{nodeId:e,nodeType:"output",name:"Output",selected:n,showSourceHandle:!!t.generatedImageUrl,icon:x.jsx(ig,{size:14}),additionalHandles:E,children:[x.jsxs("div",{style:{marginBottom:"16px"},children:[x.jsxs("div",{className:"flex items-center justify-between",style:{marginBottom:"8px",marginLeft:"8px",marginRight:"8px"},children:[x.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wide text-muted",children:"Assembled Prompt"}),x.jsx("button",{onClick:g,className:"flex items-center gap-1 text-[10px] text-muted hover:text-primary transition-colors",title:"Copy prompt to clipboard",children:c?x.jsxs(x.Fragment,{children:[x.jsx(fD,{size:12}),x.jsx("span",{className:"text-emerald-400",children:"Copied!"})]}):x.jsxs(x.Fragment,{children:[x.jsx(AS,{size:12}),x.jsx("span",{children:"Copy"})]})})]}),x.jsx("div",{className:"font-mono text-[10px] leading-relaxed text-secondary rounded-lg max-h-24 overflow-y-auto",style:{background:"var(--color-bg-elevated)",border:"1px solid var(--color-border-subtle)",padding:"12px 16px"},children:t.promptPreview||x.jsx("span",{className:"text-muted italic",children:"Connect nodes to see preview..."})})]}),h&&x.jsxs("div",{className:"text-[10px] text-muted mb-3",style:{marginLeft:"8px"},children:["Using: ",x.jsx("span",{className:"text-secondary",children:XL[h]||h})]}),S&&x.jsxs("div",{style:{marginBottom:"12px"},children:[x.jsxs("div",{className:"relative group",children:[x.jsx("img",{src:S,alt:"Generated",className:"w-full rounded-lg",style:{background:"var(--color-bg-elevated)",display:"block"}}),x.jsx("button",{onClick:b,className:"absolute top-2 right-2 p-2 rounded-md opacity-0 group-hover:opacity-100 transition-opacity",style:{background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)"},title:"Download image",children:x.jsx(Sl,{size:16,className:"text-white"})})]}),w.length>1&&x.jsx("div",{className:"flex justify-center gap-2 mt-2",children:w.map((j,A)=>x.jsx("button",{onClick:()=>_(A),className:"transition-all duration-150",style:{width:A===y?"20px":"8px",height:"8px",borderRadius:"4px",background:A===y?"var(--color-node-output)":"var(--color-border-subtle)"},title:`Image ${A+1}`},A))})]}),x.jsx("button",{onClick:k,disabled:t.status==="generating",className:"w-full flex items-center justify-center gap-2 px-3 py-2 rounded-md text-xs font-semibold text-white transition-all duration-150 disabled:opacity-50 disabled:cursor-not-allowed",style:{background:t.status==="generating"?"var(--color-bg-hover)":"linear-gradient(135deg, var(--color-node-output), #dc2626)",boxShadow:t.status==="generating"?"none":"0 0 20px rgba(239, 68, 68, 0.3)"},children:t.status==="generating"?x.jsxs(x.Fragment,{children:[x.jsx(aD,{size:14,className:"animate-spin"}),"Generating..."]}):x.jsxs(x.Fragment,{children:[x.jsx(iD,{size:14}),"Generate"]})}),t.error&&x.jsx("div",{className:"mt-2 text-[10px] text-error",children:t.error})]})}function KL(e,t,n){if(e<=0)return{cols:1,rows:1,totalSlots:1};if(e===1)return{cols:1,rows:1,totalSlots:1};let i=1,o=e,s=1/0;for(let l=1;l<=e;l++){const c=Math.ceil(e/l),d=l*c,h=t/l,m=n/c,p=h/m,g=d-e,y=Math.abs(Math.log(p)),w=g*.5,S=y+w;S<s&&(s=S,i=l,o=c)}return{cols:i,rows:o,totalSlots:i*o}}function WL(e,t){const n=[],i=100/e,o=100/t;for(let s=0;s<t;s++)for(let l=0;l<e;l++)n.push({x:l*i,y:s*o,w:i,h:o});return n}const aw={full:[{x:0,y:0,w:100,h:100}],"2-up-h":[{x:0,y:0,w:50,h:100},{x:50,y:0,w:50,h:100}],"2-up-v":[{x:0,y:0,w:100,h:50},{x:0,y:50,w:100,h:50}],"3-up-left":[{x:0,y:0,w:60,h:100},{x:60,y:0,w:40,h:50},{x:60,y:50,w:40,h:50}],"3-up-right":[{x:0,y:0,w:40,h:50},{x:0,y:50,w:40,h:50},{x:40,y:0,w:60,h:100}],"3-up-top":[{x:0,y:0,w:100,h:60},{x:0,y:60,w:50,h:40},{x:50,y:60,w:50,h:40}],"3-up-bottom":[{x:0,y:0,w:50,h:40},{x:50,y:0,w:50,h:40},{x:0,y:40,w:100,h:60}],"4-up":[{x:0,y:0,w:50,h:50},{x:50,y:0,w:50,h:50},{x:0,y:50,w:50,h:50},{x:50,y:50,w:50,h:50}],"6-up":[{x:0,y:0,w:33.33,h:50},{x:33.33,y:0,w:33.33,h:50},{x:66.66,y:0,w:33.34,h:50},{x:0,y:50,w:33.33,h:50},{x:33.33,y:50,w:33.33,h:50},{x:66.66,y:50,w:33.34,h:50}],"manga-3":[{x:0,y:0,w:100,h:40},{x:0,y:40,w:45,h:60},{x:45,y:40,w:55,h:60}],"manga-4":[{x:0,y:0,w:55,h:50},{x:55,y:0,w:45,h:35},{x:55,y:35,w:45,h:65},{x:0,y:50,w:55,h:50}],inset:[{x:0,y:0,w:100,h:100},{x:65,y:5,w:30,h:30}]};function QL(e){if(!e)return{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",objectPosition:"center"};const t=e.scale??1,n=e.offsetX??0,i=e.offsetY??0,o=e.rotation??0,s=e.flipH??!1,l=e.flipV??!1,c=e.alignment??"center";let d=-50,h=-50;c.includes("left")?d=0:c.includes("right")&&(d=-100),c.includes("top")?h=0:c.includes("bottom")&&(h=-100),d-=n,h-=i;const m=[];m.push(`translate(${d}%, ${h}%)`),m.push(`scale(${t})`),o!==0&&m.push(`rotate(${o}deg)`),(s||l)&&m.push(`scale(${s?-1:1}, ${l?-1:1})`);let p="50%",g="50%";return c.includes("top")?p=0:c.includes("bottom")&&(p="100%"),c.includes("left")?g=0:c.includes("right")&&(g="100%"),{position:"absolute",top:p,left:g,width:"100%",height:"100%",objectFit:"contain",transform:m.join(" "),transformOrigin:"center center",opacity:(e.opacity??100)/100}}function JL({id:e,data:t,selected:n}){const{nodes:i,edges:o,updateNodeData:s}=et(),l=J.useRef(null),c=t5(),{slotCount:d,layoutDef:h}=(()=>{if(t.useNumGrid&&t.numPanels&&t.numPanels>0){const{cols:b,rows:k,totalSlots:E}=KL(t.numPanels,t.outputWidth||1200,t.outputHeight||1600);return{slotCount:E,layoutDef:WL(b,k)}}return{slotCount:rD[t.layout]||1,layoutDef:aw[t.layout]||aw.full}})();J.useEffect(()=>{c(e)},[e,d,t.layout,t.useNumGrid,t.numPanels,c]);const m=J.useCallback(()=>{const b=new Array(d).fill(null).map(()=>({imageUrl:null})),k=E=>{const j=i.find(A=>A.id===E);if(!j)return{imageUrl:null};if(j.type==="output")return{imageUrl:j.data.generatedImageUrl||null};if(j.type==="reference")return{imageUrl:j.data.imageUrl||null};if(j.type==="comp")return{imageUrl:j.data.composedImageUrl||null};if(j.type==="transform"){const A=j.data,T=o.find(M=>M.target===E);return T?{imageUrl:k(T.source).imageUrl,transform:{scale:A.scale??1,offsetX:A.offsetX??0,offsetY:A.offsetY??0,rotation:A.rotation??0,flipH:A.flipH??!1,flipV:A.flipV??!1,alignment:A.alignment??"center",opacity:A.opacity??100}}:{imageUrl:null}}if(j.type==="timeline"){const A=j.data,T=o.find(M=>M.target===E);if(T){const M=k(T.source),P=A.currentTransforms;return{imageUrl:M.imageUrl,transform:P?{scale:P.scale??1,offsetX:P.offsetX??0,offsetY:P.offsetY??0,rotation:P.rotation??0,flipH:!1,flipV:!1,alignment:"center",opacity:P.opacity??100}:M.transform}}return{imageUrl:null}}return{imageUrl:null}};for(const E of o)if(E.target===e&&E.targetHandle?.startsWith("panel-")){const j=parseInt(E.targetHandle.replace("panel-",""),10);if(j<d){const A=k(E.source);b[j]={imageUrl:A.imageUrl,transform:A.transform}}}return b},[e,o,i,d]),p=J.useCallback(()=>m().map(b=>b.imageUrl),[m]),g=m();J.useEffect(()=>{const b=p(),k=t.panelImages||[];JSON.stringify(b)!==JSON.stringify(k)&&s(e,{panelImages:b})},[e,o,i,p,t.panelImages,s]);const y=J.useCallback(async()=>{const b=l.current;if(!b)return null;const k=b.getContext("2d");if(!k)return null;const E=t.outputWidth||1200,j=t.outputHeight||1600;b.width=E,b.height=j,k.fillStyle=t.backgroundColor||"#ffffff",k.fillRect(0,0,E,j);const A=t.gutter||8,T=m();for(let M=0;M<h.length;M++){const P=h[M],F=T[M],$=F?.imageUrl,Z=P.x/100*E+A/2,D=P.y/100*j+A/2,q=P.w/100*E-A,N=P.h/100*j-A;if(k.fillStyle="#1a1a2e",k.fillRect(Z,D,q,N),$)try{const H=new Image;H.crossOrigin="anonymous",await new Promise((te,re)=>{H.onload=()=>te(),H.onerror=re,H.src=$}),k.save(),k.beginPath(),k.rect(Z,D,q,N),k.clip();const U=F.transform,V=U?.scale??1,X=U?.offsetX??0,Y=U?.offsetY??0,B=U?.rotation??0,z=U?.flipH??!1,I=U?.flipV??!1,O=U?.alignment??"center",Q=U?.opacity??100;k.globalAlpha=Q/100;const ee=H.width/H.height,ue=q/N;let ye,de;U?ee>ue?(ye=q,de=q/ee):(de=N,ye=N*ee):ee>ue?(ye=N*ee,de=N):(ye=q,de=q/ee);const ve=ye*V,Ae=de*V;let je=Z+q/2,Te=D+N/2;O.includes("left")?je=Z:O.includes("right")&&(je=Z+q),O.includes("top")?Te=D:O.includes("bottom")&&(Te=D+N);let De=je-ve/2,L=Te-Ae/2;O.includes("left")?De=je:O.includes("right")&&(De=je-ve),O.includes("top")?L=Te:O.includes("bottom")&&(L=Te-Ae),De-=X/100*q,L-=Y/100*N,k.translate(je,Te),B!==0&&k.rotate(B*Math.PI/180),(z||I)&&k.scale(z?-1:1,I?-1:1),k.drawImage(H,De-je,L-Te,ve,Ae),k.restore()}catch(H){console.error("Failed to load image for panel",M,H)}}return b},[t.backgroundColor,t.gutter,t.outputWidth,t.outputHeight,h,m]),w=async()=>{const b=await y();if(!b)return;const k=document.createElement("a");k.download=`flowboard-page-${Date.now()}.png`,k.href=b.toDataURL("image/png"),k.click()},S=Array.from({length:d},(b,k)=>{const E=d===1?50:20+k*60/(d-1);return x.jsx(Vt,{type:"target",position:ze.Left,id:`panel-${k}`,style:{top:`${E}%`,background:ct.page,borderColor:ct.page,borderWidth:2},title:`Panel ${k+1}`},`panel-${k}`)}),_=t.panelImages||[];return x.jsxs(_t,{nodeId:e,nodeType:"page",name:t.name||"Page Layout",selected:n,showTargetHandle:!1,showSourceHandle:!1,icon:x.jsx(TS,{size:14}),additionalHandles:x.jsx(x.Fragment,{children:S}),children:[x.jsx("div",{className:"relative rounded-lg overflow-hidden",style:{width:"100%",aspectRatio:`${t.outputWidth||1200} / ${t.outputHeight||1600}`,background:t.backgroundColor||"#ffffff"},children:h.map((b,k)=>x.jsx("div",{className:"absolute overflow-hidden",style:{left:`${b.x}%`,top:`${b.y}%`,width:`${b.w}%`,height:`${b.h}%`,padding:`${(t.gutter||8)/4}px`},children:x.jsxs("div",{className:"w-full h-full rounded-sm flex items-center justify-center overflow-hidden",style:{backgroundColor:"#1a1a2e",position:"relative"},children:[g[k]?.imageUrl&&x.jsx("img",{src:g[k].imageUrl,alt:`Panel ${k+1}`,style:QL(g[k].transform)}),!g[k]?.imageUrl&&x.jsx("span",{className:"text-[8px] text-gray-500",children:k+1})]})},k))}),x.jsxs("button",{onClick:w,disabled:!_.some(Boolean),className:"w-full mt-3 flex items-center justify-center gap-2 px-3 py-2 rounded-md text-xs font-semibold text-white transition-all duration-150 disabled:opacity-50 disabled:cursor-not-allowed",style:{background:_.some(Boolean)?"linear-gradient(135deg, #0ea5e9, #0284c7)":"var(--color-bg-hover)"},children:[x.jsx(Sl,{size:14}),"Export Page"]}),x.jsx("canvas",{ref:l,style:{display:"none"}})]})}const eU=[{value:"top-left",label:""},{value:"top",label:""},{value:"top-right",label:""},{value:"left",label:""},{value:"center",label:""},{value:"right",label:""},{value:"bottom-left",label:""},{value:"bottom",label:""},{value:"bottom-right",label:""}];function Hp({label:e,value:t,min:n,max:i,step:o,onChange:s,suffix:l="",accentColor:c="var(--color-node-transform)"}){const d=(t-n)/(i-n)*100;return x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-[10px] text-secondary w-14 shrink-0",children:e}),x.jsxs("div",{className:"relative flex-1 h-5 flex items-center",children:[x.jsx("div",{className:"absolute inset-x-0 h-1 rounded-full bg-black/30"}),x.jsx("div",{className:"absolute h-1 rounded-full transition-all duration-75",style:{width:`${d}%`,background:c,opacity:.7}}),x.jsx("input",{type:"range",min:n,max:i,step:o,value:t,onChange:h=>s(parseFloat(h.target.value)),onPointerDown:h=>h.stopPropagation(),onMouseDown:h=>h.stopPropagation(),className:"absolute inset-0 w-full opacity-0 cursor-ew-resize"}),x.jsx("div",{className:"absolute w-2 h-2 rounded-full shadow-sm pointer-events-none transition-all duration-75",style:{left:`calc(${d}% - 4px)`,background:c,boxShadow:`0 0 4px ${c}50`}})]}),x.jsxs("span",{className:"text-[10px] font-mono text-primary w-10 text-right tabular-nums",children:[t,l]})]})}function ow({label:e,value:t,min:n,max:i,step:o,onChange:s,accentColor:l="var(--color-node-transform)"}){const c=(t-n)/(i-n)*100,d=Math.min(50,c),m=Math.max(50,c)-d;return x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-[10px] text-secondary w-14 shrink-0",children:e}),x.jsxs("div",{className:"relative flex-1 h-5 flex items-center",children:[x.jsx("div",{className:"absolute inset-x-0 h-1 rounded-full bg-black/30"}),x.jsx("div",{className:"absolute h-2 w-px bg-white/20",style:{left:"50%"}}),x.jsx("div",{className:"absolute h-1 rounded-full transition-all duration-75",style:{left:`${d}%`,width:`${m}%`,background:l,opacity:.7}}),x.jsx("input",{type:"range",min:n,max:i,step:o,value:t,onChange:p=>s(parseFloat(p.target.value)),onPointerDown:p=>p.stopPropagation(),onMouseDown:p=>p.stopPropagation(),className:"absolute inset-0 w-full opacity-0 cursor-ew-resize"}),x.jsx("div",{className:"absolute w-2 h-2 rounded-full shadow-sm pointer-events-none transition-all duration-75",style:{left:`calc(${c}% - 4px)`,background:l,boxShadow:`0 0 4px ${l}50`}})]}),x.jsx("span",{className:"text-[10px] font-mono text-primary w-8 text-right tabular-nums",children:t})]})}function Pp({children:e,className:t=""}){return x.jsx("div",{className:`px-2.5 py-2 rounded-md bg-black/15 ${t}`,children:e})}function tU({id:e,data:t,selected:n}){const i=et(S=>S.updateNodeData),o=t.scale??1,s=t.offsetX??0,l=t.offsetY??0,c=t.rotation??0,d=t.opacity??100,h=t.flipH??!1,m=t.flipV??!1,p=t.alignment??"center",g=J.useCallback((S,_)=>{i(e,{[S]:_})},[e,i]),y="#f472b6",w={background:"var(--color-bg-panel)",borderColor:"#a855f7",borderWidth:2,width:12,height:12};return x.jsx(_t,{nodeId:e,nodeType:"transform",name:t.name||"Transform",selected:n,showTargetHandle:!0,showSourceHandle:!0,icon:x.jsx(DS,{size:14}),additionalHandles:x.jsx(Vt,{type:"target",position:ze.Bottom,id:"timeline-in",style:{...w}}),children:x.jsxs("div",{className:"space-y-2.5 nodrag",children:[x.jsx(Pp,{children:x.jsxs("div",{className:"space-y-2",children:[x.jsx(Hp,{label:"Scale",value:Math.round(o*100),min:10,max:200,step:1,onChange:S=>g("scale",S/100),suffix:"%",accentColor:y}),x.jsx(ow,{label:"Offset X",value:s,min:-100,max:100,step:1,onChange:S=>g("offsetX",S),accentColor:y}),x.jsx(ow,{label:"Offset Y",value:l,min:-100,max:100,step:1,onChange:S=>g("offsetY",S),accentColor:y}),x.jsx(Hp,{label:"Rotation",value:c,min:-180,max:180,step:1,onChange:S=>g("rotation",S),suffix:"",accentColor:y})]})}),x.jsx(Pp,{children:x.jsx(Hp,{label:"Opacity",value:d,min:0,max:100,step:1,onChange:S=>g("opacity",S),suffix:"%",accentColor:y})}),x.jsx(Pp,{className:"space-y-2",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("div",{className:"flex items-center gap-1.5",children:[x.jsx("span",{className:"text-[10px] text-secondary",children:"Flip"}),x.jsx("button",{onClick:()=>g("flipH",!h),className:"w-6 h-6 text-[10px] font-semibold rounded transition-all",style:{background:h?y:"rgba(0,0,0,0.3)",color:h?"white":"var(--color-text-muted)",boxShadow:h?`0 0 8px ${y}40`:"none"},title:"Flip Horizontal",children:"H"}),x.jsx("button",{onClick:()=>g("flipV",!m),className:"w-6 h-6 text-[10px] font-semibold rounded transition-all",style:{background:m?y:"rgba(0,0,0,0.3)",color:m?"white":"var(--color-text-muted)",boxShadow:m?`0 0 8px ${y}40`:"none"},title:"Flip Vertical",children:"V"})]}),x.jsx("div",{className:"w-px h-5 bg-white/10"}),x.jsxs("div",{className:"flex items-center gap-1.5",children:[x.jsx("span",{className:"text-[10px] text-secondary",children:"Align"}),x.jsx("div",{className:"grid grid-cols-3 gap-px p-0.5 rounded bg-black/30",children:eU.map(S=>x.jsx("button",{onClick:()=>g("alignment",S.value),className:"w-4 h-4 text-[9px] rounded-sm transition-all flex items-center justify-center",style:{background:p===S.value?y:"transparent",color:p===S.value?"white":"var(--color-text-muted)"},title:S.value,children:S.label},S.value))})]})]})})]})})}const oo=["back","mid","fore","ext"],nU={back:"Back",mid:"Mid",fore:"Fore",ext:"Ext"},rU={back:80,mid:60,fore:40,ext:20};function iU({id:e,data:t,selected:n}){const{nodes:i,edges:o,updateNodeData:s}=et(),l=J.useRef(null),c=J.useCallback(b=>{const k=i.find(E=>E.id===b);if(!k)return{imageUrl:null};if(k.type==="output")return{imageUrl:k.data.generatedImageUrl||null};if(k.type==="reference")return{imageUrl:k.data.imageUrl||null};if(k.type==="transform"){const E=k.data,j=o.find(A=>A.target===b&&A.targetHandle!=="timeline-in");return j?{imageUrl:c(j.source).imageUrl,transform:{scale:E.scale??1,offsetX:E.offsetX??0,offsetY:E.offsetY??0,rotation:E.rotation??0,flipH:E.flipH??!1,flipV:E.flipV??!1,alignment:E.alignment??"center",opacity:E.opacity??100}}:{imageUrl:null}}if(k.type==="timeline"){const E=k.data,j=o.find(A=>A.target===b);if(j){const A=c(j.source),T=E.currentTransforms;return{imageUrl:A.imageUrl,transform:T?{scale:T.scale??1,offsetX:T.offsetX??0,offsetY:T.offsetY??0,rotation:T.rotation??0,flipH:!1,flipV:!1,alignment:"center",opacity:T.opacity??100}:A.transform}}return{imageUrl:null}}return{imageUrl:null}},[i,o]),h=J.useCallback(()=>{const b={back:{imageUrl:null},mid:{imageUrl:null},fore:{imageUrl:null},ext:{imageUrl:null}};for(const k of o)if(k.target===e&&k.targetHandle){const E=k.targetHandle;oo.includes(E)&&(b[E]=c(k.source))}return b},[e,o,c])(),m=oo.some(b=>h[b].imageUrl),p=J.useCallback(async()=>{const b=l.current;if(!b)return null;const k=b.getContext("2d");if(!k)return null;const E=t.outputWidth||1920,j=t.outputHeight||1080;b.width=E,b.height=j,k.clearRect(0,0,E,j),k.fillStyle=t.backgroundColor||"#000000",k.fillRect(0,0,E,j);for(const A of oo){const T=h[A];if(T.imageUrl)try{const M=new Image;M.crossOrigin="anonymous",await new Promise((ee,ue)=>{M.onload=()=>ee(),M.onerror=ue,M.src=T.imageUrl}),k.save();const P=T.transform,F=P?.scale??1,$=P?.offsetX??0,Z=P?.offsetY??0,D=P?.rotation??0,q=P?.flipH??!1,N=P?.flipV??!1,H=P?.alignment??"center",U=P?.opacity??100;k.globalAlpha=U/100;const V=M.width/M.height,X=E/j;let Y,B;V>X?(Y=E,B=E/V):(B=j,Y=j*V),Y*=F,B*=F;let z=E/2,I=j/2;H.includes("left")?z=0:H.includes("right")&&(z=E),H.includes("top")?I=0:H.includes("bottom")&&(I=j);let O=z-Y/2,Q=I-B/2;H.includes("left")?O=z:H.includes("right")&&(O=z-Y),H.includes("top")?Q=I:H.includes("bottom")&&(Q=I-B),O-=$/100*E,Q-=Z/100*j,k.translate(z,I),D!==0&&k.rotate(D*Math.PI/180),(q||N)&&k.scale(q?-1:1,N?-1:1),k.translate(-z,-I),k.drawImage(M,O,Q,Y,B),k.restore()}catch(M){console.error(`Failed to load image for layer ${A}`,M)}}return b},[t.backgroundColor,t.outputWidth,t.outputHeight,h]),g=oo.map(b=>{const k=h[b],E=k.transform,j=E?`${E.scale}-${E.offsetX}-${E.offsetY}-${E.rotation}-${E.flipH}-${E.flipV}-${E.alignment}-${E.opacity}`:"";return`${k.imageUrl||""}:${j}`}).join("|"),y=J.useRef("");J.useEffect(()=>{if(g!==y.current){if(y.current=g,!m){s(e,{composedImageUrl:void 0});return}(async()=>{const b=await p();if(b){const k=b.toDataURL("image/png");s(e,{composedImageUrl:k})}})()}},[e,g,m]);const w=async()=>{const b=await p();if(!b)return;const k=document.createElement("a");k.download=`flowboard-comp-${Date.now()}.png`,k.href=b.toDataURL("image/png"),k.click()},S=b=>{const k=b.transform;if(!k)return{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain",objectPosition:"center center"};const{scale:E,offsetX:j,offsetY:A,rotation:T,flipH:M,flipV:P,alignment:F,opacity:$}=k;let Z="50%",D="50%";F.includes("left")?Z="0%":F.includes("right")&&(Z="100%"),F.includes("top")?D="0%":F.includes("bottom")&&(D="100%");const q=`${Z} ${D}`,N=[];return(j!==0||A!==0)&&N.push(`translate(${-j}%, ${-A}%)`),E!==1&&N.push(`scale(${E})`),T!==0&&N.push(`rotate(${T}deg)`),(M||P)&&N.push(`scale(${M?-1:1}, ${P?-1:1})`),{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain",objectPosition:`${Z} ${D}`,transform:N.length>0?N.join(" "):void 0,transformOrigin:q,opacity:$/100}},_=oo.map(b=>x.jsx(Vt,{type:"target",position:ze.Left,id:b,style:{top:`${rU[b]}%`,background:h[b].imageUrl?ct.comp:"#374151",borderColor:ct.comp,borderWidth:2},title:`${nU[b]} layer`},b));return x.jsxs(_t,{nodeId:e,nodeType:"comp",name:t.name||"Composition",selected:n,showTargetHandle:!1,showSourceHandle:!0,icon:x.jsx(_S,{size:14}),additionalHandles:x.jsx(x.Fragment,{children:_}),children:[x.jsx("div",{className:"absolute text-[8px] font-mono text-muted",style:{left:"-36px",top:"17%"},children:"Ext"}),x.jsx("div",{className:"absolute text-[8px] font-mono text-muted",style:{left:"-36px",top:"37%"},children:"Fore"}),x.jsx("div",{className:"absolute text-[8px] font-mono text-muted",style:{left:"-36px",top:"57%"},children:"Mid"}),x.jsx("div",{className:"absolute text-[8px] font-mono text-muted",style:{left:"-36px",top:"77%"},children:"Back"}),x.jsxs("div",{className:"relative rounded-lg overflow-hidden",style:{width:"100%",aspectRatio:`${t.outputWidth||1920} / ${t.outputHeight||1080}`,background:t.backgroundColor||"#000000"},children:[oo.map(b=>{const k=h[b];return k.imageUrl?x.jsx("img",{src:k.imageUrl,alt:`${b} layer`,style:S(k)},b):null}),!m&&x.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs text-gray-500",children:"Connect images to layers"})]}),x.jsxs("div",{className:"text-[10px] text-muted mt-2 text-center",children:[t.outputWidth||1920,"  ",t.outputHeight||1080]}),x.jsxs("button",{onClick:w,disabled:!m,className:"w-full mt-2 flex items-center justify-center gap-2 px-3 py-2 rounded-md text-xs font-semibold text-white transition-all duration-150 disabled:opacity-50 disabled:cursor-not-allowed",style:{background:m?`linear-gradient(135deg, ${ct.comp}, #16a34a)`:"var(--color-bg-hover)"},children:[x.jsx(Sl,{size:14}),"Export Comp"]}),x.jsx("canvas",{ref:l,style:{display:"none"}})]})}const sw={linear:e=>e,"ease-in":e=>e*e,"ease-out":e=>e*(2-e),"ease-in-out":e=>e<.5?2*e*e:-1+(4-2*e)*e,spring:e=>{const t=2*Math.PI/3;return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*t)+1}};function aU(e,t){return(sw[t]||sw.linear)(Math.max(0,Math.min(1,e)))}function vc(e,t,n){return e+(t-e)*n}function oU(e,t,n){return{scale:vc(e?.scale??1,t?.scale??1,n),offsetX:vc(e?.offsetX??0,t?.offsetX??0,n),offsetY:vc(e?.offsetY??0,t?.offsetY??0,n),rotation:sU(e?.rotation??0,t?.rotation??0,n),opacity:vc(e?.opacity??100,t?.opacity??100,n)}}function sU(e,t,n){e=(e%360+360)%360,t=(t%360+360)%360;let i=t-e;return i>180&&(i-=360),i<-180&&(i+=360),((e+i*n)%360+360)%360}function lU(e,t){if(e.length===0)return{before:null,after:null};const n=[...e].sort((s,l)=>s.time-l.time);let i=null,o=null;for(const s of n)if(s.time<=t&&(i=s),s.time>=t&&!o){o=s;break}return i||(i=n[0]),o||(o=n[n.length-1]),{before:i,after:o}}const ra={scale:1,offsetX:0,offsetY:0,rotation:0,opacity:100};function uk(e,t,n="ease-in-out"){if(!e||e.length===0)return{...ra};if(e.length===1){const m=e[0]?.transforms;return m?{...ra,...m}:{...ra}}const{before:i,after:o}=lU(e,t);if(!i||!o)return{...ra};const s=i.transforms||ra,l=o.transforms||ra;if(i===o||i.time===o.time)return{...ra,...s};const c=(t-i.time)/(o.time-i.time),d=o.easing||n,h=aU(c,d);return oU(s,l,h)}function Ai(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fp={exports:{}};var lw;function uU(){return lw||(lw=1,(function(e,t){(function(n){e.exports=n()})(function(){return(function n(i,o,s){function l(h,m){if(!o[h]){if(!i[h]){var p=typeof Ai=="function"&&Ai;if(!m&&p)return p(h,!0);if(c)return c(h,!0);var g=new Error("Cannot find module '"+h+"'");throw g.code="MODULE_NOT_FOUND",g}var y=o[h]={exports:{}};i[h][0].call(y.exports,function(w){var S=i[h][1][w];return l(S||w)},y,y.exports,n,i,o,s)}return o[h].exports}for(var c=typeof Ai=="function"&&Ai,d=0;d<s.length;d++)l(s[d]);return l})({1:[function(n,i,o){var s=n("./utils"),l=n("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(d){for(var h,m,p,g,y,w,S,_=[],b=0,k=d.length,E=k,j=s.getTypeOf(d)!=="string";b<d.length;)E=k-b,p=j?(h=d[b++],m=b<k?d[b++]:0,b<k?d[b++]:0):(h=d.charCodeAt(b++),m=b<k?d.charCodeAt(b++):0,b<k?d.charCodeAt(b++):0),g=h>>2,y=(3&h)<<4|m>>4,w=1<E?(15&m)<<2|p>>6:64,S=2<E?63&p:64,_.push(c.charAt(g)+c.charAt(y)+c.charAt(w)+c.charAt(S));return _.join("")},o.decode=function(d){var h,m,p,g,y,w,S=0,_=0,b="data:";if(d.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var k,E=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===c.charAt(64)&&E--,d.charAt(d.length-2)===c.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=l.uint8array?new Uint8Array(0|E):new Array(0|E);S<d.length;)h=c.indexOf(d.charAt(S++))<<2|(g=c.indexOf(d.charAt(S++)))>>4,m=(15&g)<<4|(y=c.indexOf(d.charAt(S++)))>>2,p=(3&y)<<6|(w=c.indexOf(d.charAt(S++))),k[_++]=h,y!==64&&(k[_++]=m),w!==64&&(k[_++]=p);return k}},{"./support":30,"./utils":32}],2:[function(n,i,o){var s=n("./external"),l=n("./stream/DataWorker"),c=n("./stream/Crc32Probe"),d=n("./stream/DataLengthProbe");function h(m,p,g,y,w){this.compressedSize=m,this.uncompressedSize=p,this.crc32=g,this.compression=y,this.compressedContent=w}h.prototype={getContentWorker:function(){var m=new l(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),p=this;return m.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new l(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(m,p,g){return m.pipe(new c).pipe(new d("uncompressedSize")).pipe(p.compressWorker(g)).pipe(new d("compressedSize")).withStreamInfo("compression",p)},i.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,i,o){var s=n("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},o.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,i,o){var s=n("./utils"),l=(function(){for(var c,d=[],h=0;h<256;h++){c=h;for(var m=0;m<8;m++)c=1&c?3988292384^c>>>1:c>>>1;d[h]=c}return d})();i.exports=function(c,d){return c!==void 0&&c.length?s.getTypeOf(c)!=="string"?(function(h,m,p,g){var y=l,w=g+p;h^=-1;for(var S=g;S<w;S++)h=h>>>8^y[255&(h^m[S])];return-1^h})(0|d,c,c.length,0):(function(h,m,p,g){var y=l,w=g+p;h^=-1;for(var S=g;S<w;S++)h=h>>>8^y[255&(h^m.charCodeAt(S))];return-1^h})(0|d,c,c.length,0):0}},{"./utils":32}],5:[function(n,i,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(n,i,o){var s=null;s=typeof Promise<"u"?Promise:n("lie"),i.exports={Promise:s}},{lie:37}],7:[function(n,i,o){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=n("pako"),c=n("./utils"),d=n("./stream/GenericWorker"),h=s?"uint8array":"array";function m(p,g){d.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=g,this.meta={}}o.magic="\b\0",c.inherits(m,d),m.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(h,p.data),!1)},m.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(g){p.push({data:g,meta:p.meta})}},o.compressWorker=function(p){return new m("Deflate",p)},o.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,i,o){function s(y,w){var S,_="";for(S=0;S<w;S++)_+=String.fromCharCode(255&y),y>>>=8;return _}function l(y,w,S,_,b,k){var E,j,A=y.file,T=y.compression,M=k!==h.utf8encode,P=c.transformTo("string",k(A.name)),F=c.transformTo("string",h.utf8encode(A.name)),$=A.comment,Z=c.transformTo("string",k($)),D=c.transformTo("string",h.utf8encode($)),q=F.length!==A.name.length,N=D.length!==$.length,H="",U="",V="",X=A.dir,Y=A.date,B={crc32:0,compressedSize:0,uncompressedSize:0};w&&!S||(B.crc32=y.crc32,B.compressedSize=y.compressedSize,B.uncompressedSize=y.uncompressedSize);var z=0;w&&(z|=8),M||!q&&!N||(z|=2048);var I=0,O=0;X&&(I|=16),b==="UNIX"?(O=798,I|=(function(ee,ue){var ye=ee;return ee||(ye=ue?16893:33204),(65535&ye)<<16})(A.unixPermissions,X)):(O=20,I|=(function(ee){return 63&(ee||0)})(A.dosPermissions)),E=Y.getUTCHours(),E<<=6,E|=Y.getUTCMinutes(),E<<=5,E|=Y.getUTCSeconds()/2,j=Y.getUTCFullYear()-1980,j<<=4,j|=Y.getUTCMonth()+1,j<<=5,j|=Y.getUTCDate(),q&&(U=s(1,1)+s(m(P),4)+F,H+="up"+s(U.length,2)+U),N&&(V=s(1,1)+s(m(Z),4)+D,H+="uc"+s(V.length,2)+V);var Q="";return Q+=`
\0`,Q+=s(z,2),Q+=T.magic,Q+=s(E,2),Q+=s(j,2),Q+=s(B.crc32,4),Q+=s(B.compressedSize,4),Q+=s(B.uncompressedSize,4),Q+=s(P.length,2),Q+=s(H.length,2),{fileRecord:p.LOCAL_FILE_HEADER+Q+P+H,dirRecord:p.CENTRAL_FILE_HEADER+s(O,2)+Q+s(Z.length,2)+"\0\0\0\0"+s(I,4)+s(_,4)+P+H+Z}}var c=n("../utils"),d=n("../stream/GenericWorker"),h=n("../utf8"),m=n("../crc32"),p=n("../signature");function g(y,w,S,_){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=S,this.encodeFileName=_,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(g,d),g.prototype.push=function(y){var w=y.meta.percent||0,S=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,d.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:S?(w+100*(S-_-1))/S:100}}))},g.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var w=this.streamFiles&&!y.file.dir;if(w){var S=l(y,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:S.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(y){this.accumulate=!1;var w=this.streamFiles&&!y.file.dir,S=l(y,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(S.dirRecord),w)this.push({data:(function(_){return p.DATA_DESCRIPTOR+s(_.crc32,4)+s(_.compressedSize,4)+s(_.uncompressedSize,4)})(y),meta:{percent:100}});else for(this.push({data:S.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var y=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var S=this.bytesWritten-y,_=(function(b,k,E,j,A){var T=c.transformTo("string",A(j));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(b,2)+s(b,2)+s(k,4)+s(E,4)+s(T.length,2)+T})(this.dirRecords.length,S,y,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(y){this._sources.push(y);var w=this;return y.on("data",function(S){w.processChunk(S)}),y.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),y.on("error",function(S){w.error(S)}),this},g.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(y){var w=this._sources;if(!d.prototype.error.call(this,y))return!1;for(var S=0;S<w.length;S++)try{w[S].error(y)}catch{}return!0},g.prototype.lock=function(){d.prototype.lock.call(this);for(var y=this._sources,w=0;w<y.length;w++)y[w].lock()},i.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,i,o){var s=n("../compressions"),l=n("./ZipFileWorker");o.generateWorker=function(c,d,h){var m=new l(d.streamFiles,h,d.platform,d.encodeFileName),p=0;try{c.forEach(function(g,y){p++;var w=(function(k,E){var j=k||E,A=s[j];if(!A)throw new Error(j+" is not a valid compression method !");return A})(y.options.compression,d.compression),S=y.options.compressionOptions||d.compressionOptions||{},_=y.dir,b=y.date;y._compressWorker(w,S).withStreamInfo("file",{name:g,dir:_,date:b,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(m)}),m.entriesCount=p}catch(g){m.error(g)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,i,o){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new s;for(var c in this)typeof this[c]!="function"&&(l[c]=this[c]);return l}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(l,c){return new s().loadAsync(l,c)},s.external=n("./external"),i.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,i,o){var s=n("./utils"),l=n("./external"),c=n("./utf8"),d=n("./zipEntries"),h=n("./stream/Crc32Probe"),m=n("./nodejsUtils");function p(g){return new l.Promise(function(y,w){var S=g.decompressed.getContentWorker().pipe(new h);S.on("error",function(_){w(_)}).on("end",function(){S.streamInfo.crc32!==g.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}i.exports=function(g,y){var w=this;return y=s.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),m.isNode&&m.isStream(g)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",g,!0,y.optimizedBinaryString,y.base64).then(function(S){var _=new d(y);return _.load(S),_}).then(function(S){var _=[l.Promise.resolve(S)],b=S.files;if(y.checkCRC32)for(var k=0;k<b.length;k++)_.push(p(b[k]));return l.Promise.all(_)}).then(function(S){for(var _=S.shift(),b=_.files,k=0;k<b.length;k++){var E=b[k],j=E.fileNameStr,A=s.resolve(E.fileNameStr);w.file(A,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:y.createFolders}),E.dir||(w.file(A).unsafeOriginalName=j)}return _.zipComment.length&&(w.comment=_.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,i,o){var s=n("../utils"),l=n("../stream/GenericWorker");function c(d,h){l.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(h)}s.inherits(c,l),c.prototype._bindStream=function(d){var h=this;(this._stream=d).pause(),d.on("data",function(m){h.push({data:m,meta:{percent:0}})}).on("error",function(m){h.isPaused?this.generatedError=m:h.error(m)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},c.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,i,o){var s=n("readable-stream").Readable;function l(c,d,h){s.call(this,d),this._helper=c;var m=this;c.on("data",function(p,g){m.push(p)||m._helper.pause(),h&&h(g)}).on("error",function(p){m.emit("error",p)}).on("end",function(){m.push(null)})}n("../utils").inherits(l,s),l.prototype._read=function(){this._helper.resume()},i.exports=l},{"../utils":32,"readable-stream":16}],14:[function(n,i,o){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,l);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,l)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var l=new Buffer(s);return l.fill(0),l},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,i,o){function s(A,T,M){var P,F=c.getTypeOf(T),$=c.extend(M||{},m);$.date=$.date||new Date,$.compression!==null&&($.compression=$.compression.toUpperCase()),typeof $.unixPermissions=="string"&&($.unixPermissions=parseInt($.unixPermissions,8)),$.unixPermissions&&16384&$.unixPermissions&&($.dir=!0),$.dosPermissions&&16&$.dosPermissions&&($.dir=!0),$.dir&&(A=b(A)),$.createFolders&&(P=_(A))&&k.call(this,P,!0);var Z=F==="string"&&$.binary===!1&&$.base64===!1;M&&M.binary!==void 0||($.binary=!Z),(T instanceof p&&T.uncompressedSize===0||$.dir||!T||T.length===0)&&($.base64=!1,$.binary=!0,T="",$.compression="STORE",F="string");var D=null;D=T instanceof p||T instanceof d?T:w.isNode&&w.isStream(T)?new S(A,T):c.prepareContent(A,T,$.binary,$.optimizedBinaryString,$.base64);var q=new g(A,D,$);this.files[A]=q}var l=n("./utf8"),c=n("./utils"),d=n("./stream/GenericWorker"),h=n("./stream/StreamHelper"),m=n("./defaults"),p=n("./compressedObject"),g=n("./zipObject"),y=n("./generate"),w=n("./nodejsUtils"),S=n("./nodejs/NodejsStreamInputAdapter"),_=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var T=A.lastIndexOf("/");return 0<T?A.substring(0,T):""},b=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},k=function(A,T){return T=T!==void 0?T:m.createFolders,A=b(A),this.files[A]||s.call(this,A,null,{dir:!0,createFolders:T}),this.files[A]};function E(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var j={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var T,M,P;for(T in this.files)P=this.files[T],(M=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&A(M,P)},filter:function(A){var T=[];return this.forEach(function(M,P){A(M,P)&&T.push(P)}),T},file:function(A,T,M){if(arguments.length!==1)return A=this.root+A,s.call(this,A,T,M),this;if(E(A)){var P=A;return this.filter(function($,Z){return!Z.dir&&P.test($)})}var F=this.files[this.root+A];return F&&!F.dir?F:null},folder:function(A){if(!A)return this;if(E(A))return this.filter(function(F,$){return $.dir&&A.test(F)});var T=this.root+A,M=k.call(this,T),P=this.clone();return P.root=M.name,P},remove:function(A){A=this.root+A;var T=this.files[A];if(T||(A.slice(-1)!=="/"&&(A+="/"),T=this.files[A]),T&&!T.dir)delete this.files[A];else for(var M=this.filter(function(F,$){return $.name.slice(0,A.length)===A}),P=0;P<M.length;P++)delete this.files[M[P].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var T,M={};try{if((M=c.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=M.type.toLowerCase(),M.compression=M.compression.toUpperCase(),M.type==="binarystring"&&(M.type="string"),!M.type)throw new Error("No output type specified.");c.checkSupport(M.type),M.platform!=="darwin"&&M.platform!=="freebsd"&&M.platform!=="linux"&&M.platform!=="sunos"||(M.platform="UNIX"),M.platform==="win32"&&(M.platform="DOS");var P=M.comment||this.comment||"";T=y.generateWorker(this,M,P)}catch(F){(T=new d("error")).error(F)}return new h(T,M.type||"string",M.mimeType)},generateAsync:function(A,T){return this.generateInternalStream(A).accumulate(T)},generateNodeStream:function(A,T){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(T)}};i.exports=j},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,i,o){i.exports=n("stream")},{stream:void 0}],17:[function(n,i,o){var s=n("./DataReader");function l(c){s.call(this,c);for(var d=0;d<this.data.length;d++)c[d]=255&c[d]}n("../utils").inherits(l,s),l.prototype.byteAt=function(c){return this.data[this.zero+c]},l.prototype.lastIndexOfSignature=function(c){for(var d=c.charCodeAt(0),h=c.charCodeAt(1),m=c.charCodeAt(2),p=c.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===d&&this.data[g+1]===h&&this.data[g+2]===m&&this.data[g+3]===p)return g-this.zero;return-1},l.prototype.readAndCheckSignature=function(c){var d=c.charCodeAt(0),h=c.charCodeAt(1),m=c.charCodeAt(2),p=c.charCodeAt(3),g=this.readData(4);return d===g[0]&&h===g[1]&&m===g[2]&&p===g[3]},l.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},i.exports=l},{"../utils":32,"./DataReader":18}],18:[function(n,i,o){var s=n("../utils");function l(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var d,h=0;for(this.checkOffset(c),d=this.index+c-1;d>=this.index;d--)h=(h<<8)+this.byteAt(d);return this.index+=c,h},readString:function(c){return s.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},i.exports=l},{"../utils":32}],19:[function(n,i,o){var s=n("./Uint8ArrayReader");function l(c){s.call(this,c)}n("../utils").inherits(l,s),l.prototype.readData=function(c){this.checkOffset(c);var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},i.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,i,o){var s=n("./DataReader");function l(c){s.call(this,c)}n("../utils").inherits(l,s),l.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},l.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},l.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},l.prototype.readData=function(c){this.checkOffset(c);var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},i.exports=l},{"../utils":32,"./DataReader":18}],21:[function(n,i,o){var s=n("./ArrayReader");function l(c){s.call(this,c)}n("../utils").inherits(l,s),l.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},i.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(n,i,o){var s=n("../utils"),l=n("../support"),c=n("./ArrayReader"),d=n("./StringReader"),h=n("./NodeBufferReader"),m=n("./Uint8ArrayReader");i.exports=function(p){var g=s.getTypeOf(p);return s.checkSupport(g),g!=="string"||l.uint8array?g==="nodebuffer"?new h(p):l.uint8array?new m(s.transformTo("uint8array",p)):new c(s.transformTo("array",p)):new d(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,i,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,i,o){var s=n("./GenericWorker"),l=n("../utils");function c(d){s.call(this,"ConvertWorker to "+d),this.destType=d}l.inherits(c,s),c.prototype.processChunk=function(d){this.push({data:l.transformTo(this.destType,d.data),meta:d.meta})},i.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(n,i,o){var s=n("./GenericWorker"),l=n("../crc32");function c(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(c,s),c.prototype.processChunk=function(d){this.streamInfo.crc32=l(d.data,this.streamInfo.crc32||0),this.push(d)},i.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,i,o){var s=n("../utils"),l=n("./GenericWorker");function c(d){l.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}s.inherits(c,l),c.prototype.processChunk=function(d){if(d){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+d.data.length}l.prototype.processChunk.call(this,d)},i.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(n,i,o){var s=n("../utils"),l=n("./GenericWorker");function c(d){l.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(m){h.dataIsReady=!0,h.data=m,h.max=m&&m.length||0,h.type=s.getTypeOf(m),h.isPaused||h._tickAndRepeat()},function(m){h.error(m)})}s.inherits(c,l),c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,h);break;case"uint8array":d=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":d=this.data.slice(this.index,h)}return this.index=h,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(n,i,o){function s(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,c){return this._listeners[l].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,c){if(this._listeners[l])for(var d=0;d<this._listeners[l].length;d++)this._listeners[l][d].call(this,c)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var c=this;return l.on("data",function(d){c.processChunk(d)}),l.on("end",function(){c.end()}),l.on("error",function(d){c.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,c){return this.extraStreamInfo[l]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},i.exports=s},{}],29:[function(n,i,o){var s=n("../utils"),l=n("./ConvertWorker"),c=n("./GenericWorker"),d=n("../base64"),h=n("../support"),m=n("../external"),p=null;if(h.nodestream)try{p=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(w,S){return new m.Promise(function(_,b){var k=[],E=w._internalType,j=w._outputType,A=w._mimeType;w.on("data",function(T,M){k.push(T),S&&S(M)}).on("error",function(T){k=[],b(T)}).on("end",function(){try{var T=(function(M,P,F){switch(M){case"blob":return s.newBlob(s.transformTo("arraybuffer",P),F);case"base64":return d.encode(P);default:return s.transformTo(M,P)}})(j,(function(M,P){var F,$=0,Z=null,D=0;for(F=0;F<P.length;F++)D+=P[F].length;switch(M){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(Z=new Uint8Array(D),F=0;F<P.length;F++)Z.set(P[F],$),$+=P[F].length;return Z;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+M+"'")}})(E,k),A);_(T)}catch(M){b(M)}k=[]}).resume()})}function y(w,S,_){var b=S;switch(S){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=S,this._mimeType=_,s.checkSupport(b),this._worker=w.pipe(new l(b)),w.lock()}catch(k){this._worker=new c("error"),this._worker.error(k)}}y.prototype={accumulate:function(w){return g(this,w)},on:function(w,S){var _=this;return w==="data"?this._worker.on(w,function(b){S.call(_,b.data,b.meta)}):this._worker.on(w,function(){s.delay(S,arguments,_)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},w)}},i.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,i,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var s=new ArrayBuffer(0);try{o.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(s),o.blob=l.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!n("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(n,i,o){for(var s=n("./utils"),l=n("./support"),c=n("./nodejsUtils"),d=n("./stream/GenericWorker"),h=new Array(256),m=0;m<256;m++)h[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;h[254]=h[254]=1;function p(){d.call(this,"utf-8 decode"),this.leftOver=null}function g(){d.call(this,"utf-8 encode")}o.utf8encode=function(y){return l.nodebuffer?c.newBufferFrom(y,"utf-8"):(function(w){var S,_,b,k,E,j=w.length,A=0;for(k=0;k<j;k++)(64512&(_=w.charCodeAt(k)))==55296&&k+1<j&&(64512&(b=w.charCodeAt(k+1)))==56320&&(_=65536+(_-55296<<10)+(b-56320),k++),A+=_<128?1:_<2048?2:_<65536?3:4;for(S=l.uint8array?new Uint8Array(A):new Array(A),k=E=0;E<A;k++)(64512&(_=w.charCodeAt(k)))==55296&&k+1<j&&(64512&(b=w.charCodeAt(k+1)))==56320&&(_=65536+(_-55296<<10)+(b-56320),k++),_<128?S[E++]=_:(_<2048?S[E++]=192|_>>>6:(_<65536?S[E++]=224|_>>>12:(S[E++]=240|_>>>18,S[E++]=128|_>>>12&63),S[E++]=128|_>>>6&63),S[E++]=128|63&_);return S})(y)},o.utf8decode=function(y){return l.nodebuffer?s.transformTo("nodebuffer",y).toString("utf-8"):(function(w){var S,_,b,k,E=w.length,j=new Array(2*E);for(S=_=0;S<E;)if((b=w[S++])<128)j[_++]=b;else if(4<(k=h[b]))j[_++]=65533,S+=k-1;else{for(b&=k===2?31:k===3?15:7;1<k&&S<E;)b=b<<6|63&w[S++],k--;1<k?j[_++]=65533:b<65536?j[_++]=b:(b-=65536,j[_++]=55296|b>>10&1023,j[_++]=56320|1023&b)}return j.length!==_&&(j.subarray?j=j.subarray(0,_):j.length=_),s.applyFromCharCode(j)})(y=s.transformTo(l.uint8array?"uint8array":"array",y))},s.inherits(p,d),p.prototype.processChunk=function(y){var w=s.transformTo(l.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var S=w;(w=new Uint8Array(S.length+this.leftOver.length)).set(this.leftOver,0),w.set(S,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var _=(function(k,E){var j;for((E=E||k.length)>k.length&&(E=k.length),j=E-1;0<=j&&(192&k[j])==128;)j--;return j<0||j===0?E:j+h[k[j]]>E?j:E})(w),b=w;_!==w.length&&(l.uint8array?(b=w.subarray(0,_),this.leftOver=w.subarray(_,w.length)):(b=w.slice(0,_),this.leftOver=w.slice(_,w.length))),this.push({data:o.utf8decode(b),meta:y.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=p,s.inherits(g,d),g.prototype.processChunk=function(y){this.push({data:o.utf8encode(y.data),meta:y.meta})},o.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,i,o){var s=n("./support"),l=n("./base64"),c=n("./nodejsUtils"),d=n("./external");function h(S){return S}function m(S,_){for(var b=0;b<S.length;++b)_[b]=255&S.charCodeAt(b);return _}n("setimmediate"),o.newBlob=function(S,_){o.checkSupport("blob");try{return new Blob([S],{type:_})}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(S),b.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(S,_,b){var k=[],E=0,j=S.length;if(j<=b)return String.fromCharCode.apply(null,S);for(;E<j;)_==="array"||_==="nodebuffer"?k.push(String.fromCharCode.apply(null,S.slice(E,Math.min(E+b,j)))):k.push(String.fromCharCode.apply(null,S.subarray(E,Math.min(E+b,j)))),E+=b;return k.join("")},stringifyByChar:function(S){for(var _="",b=0;b<S.length;b++)_+=String.fromCharCode(S[b]);return _},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}})()}};function g(S){var _=65536,b=o.getTypeOf(S),k=!0;if(b==="uint8array"?k=p.applyCanBeUsed.uint8array:b==="nodebuffer"&&(k=p.applyCanBeUsed.nodebuffer),k)for(;1<_;)try{return p.stringifyByChunk(S,b,_)}catch{_=Math.floor(_/2)}return p.stringifyByChar(S)}function y(S,_){for(var b=0;b<S.length;b++)_[b]=S[b];return _}o.applyFromCharCode=g;var w={};w.string={string:h,array:function(S){return m(S,new Array(S.length))},arraybuffer:function(S){return w.string.uint8array(S).buffer},uint8array:function(S){return m(S,new Uint8Array(S.length))},nodebuffer:function(S){return m(S,c.allocBuffer(S.length))}},w.array={string:g,array:h,arraybuffer:function(S){return new Uint8Array(S).buffer},uint8array:function(S){return new Uint8Array(S)},nodebuffer:function(S){return c.newBufferFrom(S)}},w.arraybuffer={string:function(S){return g(new Uint8Array(S))},array:function(S){return y(new Uint8Array(S),new Array(S.byteLength))},arraybuffer:h,uint8array:function(S){return new Uint8Array(S)},nodebuffer:function(S){return c.newBufferFrom(new Uint8Array(S))}},w.uint8array={string:g,array:function(S){return y(S,new Array(S.length))},arraybuffer:function(S){return S.buffer},uint8array:h,nodebuffer:function(S){return c.newBufferFrom(S)}},w.nodebuffer={string:g,array:function(S){return y(S,new Array(S.length))},arraybuffer:function(S){return w.nodebuffer.uint8array(S).buffer},uint8array:function(S){return y(S,new Uint8Array(S.length))},nodebuffer:h},o.transformTo=function(S,_){if(_=_||"",!S)return _;o.checkSupport(S);var b=o.getTypeOf(_);return w[b][S](_)},o.resolve=function(S){for(var _=S.split("/"),b=[],k=0;k<_.length;k++){var E=_[k];E==="."||E===""&&k!==0&&k!==_.length-1||(E===".."?b.pop():b.push(E))}return b.join("/")},o.getTypeOf=function(S){return typeof S=="string"?"string":Object.prototype.toString.call(S)==="[object Array]"?"array":s.nodebuffer&&c.isBuffer(S)?"nodebuffer":s.uint8array&&S instanceof Uint8Array?"uint8array":s.arraybuffer&&S instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(S){if(!s[S.toLowerCase()])throw new Error(S+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(S){var _,b,k="";for(b=0;b<(S||"").length;b++)k+="\\x"+((_=S.charCodeAt(b))<16?"0":"")+_.toString(16).toUpperCase();return k},o.delay=function(S,_,b){setImmediate(function(){S.apply(b||null,_||[])})},o.inherits=function(S,_){function b(){}b.prototype=_.prototype,S.prototype=new b},o.extend=function(){var S,_,b={};for(S=0;S<arguments.length;S++)for(_ in arguments[S])Object.prototype.hasOwnProperty.call(arguments[S],_)&&b[_]===void 0&&(b[_]=arguments[S][_]);return b},o.prepareContent=function(S,_,b,k,E){return d.Promise.resolve(_).then(function(j){return s.blob&&(j instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(j))!==-1)&&typeof FileReader<"u"?new d.Promise(function(A,T){var M=new FileReader;M.onload=function(P){A(P.target.result)},M.onerror=function(P){T(P.target.error)},M.readAsArrayBuffer(j)}):j}).then(function(j){var A=o.getTypeOf(j);return A?(A==="arraybuffer"?j=o.transformTo("uint8array",j):A==="string"&&(E?j=l.decode(j):b&&k!==!0&&(j=(function(T){return m(T,s.uint8array?new Uint8Array(T.length):new Array(T.length))})(j))),j):d.Promise.reject(new Error("Can't read the data of '"+S+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,i,o){var s=n("./reader/readerFor"),l=n("./utils"),c=n("./signature"),d=n("./zipEntry"),h=n("./support");function m(p){this.files=[],this.loadOptions=p}m.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(g)+", expected "+l.pretty(p)+")")}},isSignature:function(p,g){var y=this.reader.index;this.reader.setIndex(p);var w=this.reader.readString(4)===g;return this.reader.setIndex(y),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),g=h.uint8array?"uint8array":"array",y=l.transformTo(g,p);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,g,y,w=this.zip64EndOfCentralSize-44;0<w;)p=this.reader.readInt(2),g=this.reader.readInt(4),y=this.reader.readData(g),this.zip64ExtensibleData[p]={id:p,length:g,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,g;for(p=0;p<this.files.length;p++)g=this.files[p],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(p=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var g=p;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var w=g-y;if(0<w)this.isSignature(g,c.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(p){this.reader=s(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,i,o){var s=n("./reader/readerFor"),l=n("./utils"),c=n("./compressedObject"),d=n("./crc32"),h=n("./utf8"),m=n("./compressions"),p=n("./support");function g(y,w){this.options=y,this.loadOptions=w}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var w,S;if(y.skip(22),this.fileNameLength=y.readInt(2),S=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(S),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=(function(_){for(var b in m)if(Object.prototype.hasOwnProperty.call(m,b)&&m[b].magic===_)return m[b];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,w,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var w=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(w),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=s(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var w,S,_,b=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<b;)w=y.readInt(2),S=y.readInt(2),_=y.readData(S),this.extraFields[w]={id:w,length:S,value:_};y.setIndex(b)},handleUTF8:function(){var y=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var S=l.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(S)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var b=l.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var w=s(y.value);return w.readInt(1)!==1||d(this.fileName)!==w.readInt(4)?null:h.utf8decode(w.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var w=s(y.value);return w.readInt(1)!==1||d(this.fileComment)!==w.readInt(4)?null:h.utf8decode(w.readData(y.length-5))}return null}},i.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,i,o){function s(w,S,_){this.name=w,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=S,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var l=n("./stream/StreamHelper"),c=n("./stream/DataWorker"),d=n("./utf8"),h=n("./compressedObject"),m=n("./stream/GenericWorker");s.prototype={internalStream:function(w){var S=null,_="string";try{if(!w)throw new Error("No output type specified.");var b=(_=w.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),S=this._decompressWorker();var k=!this._dataBinary;k&&!b&&(S=S.pipe(new d.Utf8EncodeWorker)),!k&&b&&(S=S.pipe(new d.Utf8DecodeWorker))}catch(E){(S=new m("error")).error(E)}return new l(S,_,"")},async:function(w,S){return this.internalStream(w).accumulate(S)},nodeStream:function(w,S){return this.internalStream(w||"nodebuffer").toNodejsStream(S)},_compressWorker:function(w,S){if(this._data instanceof h&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new d.Utf8EncodeWorker)),h.createWorkerFrom(_,w,S)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof m?this._data:new c(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<p.length;y++)s.prototype[p[y]]=g;i.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,i,o){(function(s){var l,c,d=s.MutationObserver||s.WebKitMutationObserver;if(d){var h=0,m=new d(w),p=s.document.createTextNode("");m.observe(p,{characterData:!0}),l=function(){p.data=h=++h%2}}else if(s.setImmediate||s.MessageChannel===void 0)l="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var S=s.document.createElement("script");S.onreadystatechange=function(){w(),S.onreadystatechange=null,S.parentNode.removeChild(S),S=null},s.document.documentElement.appendChild(S)}:function(){setTimeout(w,0)};else{var g=new s.MessageChannel;g.port1.onmessage=w,l=function(){g.port2.postMessage(0)}}var y=[];function w(){var S,_;c=!0;for(var b=y.length;b;){for(_=y,y=[],S=-1;++S<b;)_[S]();b=y.length}c=!1}i.exports=function(S){y.push(S)!==1||c||l()}}).call(this,typeof Qu<"u"?Qu:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,i,o){var s=n("immediate");function l(){}var c={},d=["REJECTED"],h=["FULFILLED"],m=["PENDING"];function p(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,b!==l&&S(this,b)}function g(b,k,E){this.promise=b,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function y(b,k,E){s(function(){var j;try{j=k(E)}catch(A){return c.reject(b,A)}j===b?c.reject(b,new TypeError("Cannot resolve promise with itself")):c.resolve(b,j)})}function w(b){var k=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof k=="function")return function(){k.apply(b,arguments)}}function S(b,k){var E=!1;function j(M){E||(E=!0,c.reject(b,M))}function A(M){E||(E=!0,c.resolve(b,M))}var T=_(function(){k(A,j)});T.status==="error"&&j(T.value)}function _(b,k){var E={};try{E.value=b(k),E.status="success"}catch(j){E.status="error",E.value=j}return E}(i.exports=p).prototype.finally=function(b){if(typeof b!="function")return this;var k=this.constructor;return this.then(function(E){return k.resolve(b()).then(function(){return E})},function(E){return k.resolve(b()).then(function(){throw E})})},p.prototype.catch=function(b){return this.then(null,b)},p.prototype.then=function(b,k){if(typeof b!="function"&&this.state===h||typeof k!="function"&&this.state===d)return this;var E=new this.constructor(l);return this.state!==m?y(E,this.state===h?b:k,this.outcome):this.queue.push(new g(E,b,k)),E},g.prototype.callFulfilled=function(b){c.resolve(this.promise,b)},g.prototype.otherCallFulfilled=function(b){y(this.promise,this.onFulfilled,b)},g.prototype.callRejected=function(b){c.reject(this.promise,b)},g.prototype.otherCallRejected=function(b){y(this.promise,this.onRejected,b)},c.resolve=function(b,k){var E=_(w,k);if(E.status==="error")return c.reject(b,E.value);var j=E.value;if(j)S(b,j);else{b.state=h,b.outcome=k;for(var A=-1,T=b.queue.length;++A<T;)b.queue[A].callFulfilled(k)}return b},c.reject=function(b,k){b.state=d,b.outcome=k;for(var E=-1,j=b.queue.length;++E<j;)b.queue[E].callRejected(k);return b},p.resolve=function(b){return b instanceof this?b:c.resolve(new this(l),b)},p.reject=function(b){var k=new this(l);return c.reject(k,b)},p.all=function(b){var k=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=b.length,j=!1;if(!E)return this.resolve([]);for(var A=new Array(E),T=0,M=-1,P=new this(l);++M<E;)F(b[M],M);return P;function F($,Z){k.resolve($).then(function(D){A[Z]=D,++T!==E||j||(j=!0,c.resolve(P,A))},function(D){j||(j=!0,c.reject(P,D))})}},p.race=function(b){var k=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=b.length,j=!1;if(!E)return this.resolve([]);for(var A=-1,T=new this(l);++A<E;)M=b[A],k.resolve(M).then(function(P){j||(j=!0,c.resolve(T,P))},function(P){j||(j=!0,c.reject(T,P))});var M;return T}},{immediate:36}],38:[function(n,i,o){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),i.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,i,o){var s=n("./zlib/deflate"),l=n("./utils/common"),c=n("./utils/strings"),d=n("./zlib/messages"),h=n("./zlib/zstream"),m=Object.prototype.toString,p=0,g=-1,y=0,w=8;function S(b){if(!(this instanceof S))return new S(b);this.options=l.assign({level:g,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},b||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var E=s.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(E!==p)throw new Error(d[E]);if(k.header&&s.deflateSetHeader(this.strm,k.header),k.dictionary){var j;if(j=typeof k.dictionary=="string"?c.string2buf(k.dictionary):m.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(E=s.deflateSetDictionary(this.strm,j))!==p)throw new Error(d[E]);this._dict_set=!0}}function _(b,k){var E=new S(k);if(E.push(b,!0),E.err)throw E.msg||d[E.err];return E.result}S.prototype.push=function(b,k){var E,j,A=this.strm,T=this.options.chunkSize;if(this.ended)return!1;j=k===~~k?k:k===!0?4:0,typeof b=="string"?A.input=c.string2buf(b):m.call(b)==="[object ArrayBuffer]"?A.input=new Uint8Array(b):A.input=b,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new l.Buf8(T),A.next_out=0,A.avail_out=T),(E=s.deflate(A,j))!==1&&E!==p)return this.onEnd(E),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||j!==4&&j!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(l.shrinkBuf(A.output,A.next_out))):this.onData(l.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&E!==1);return j===4?(E=s.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===p):j!==2||(this.onEnd(p),!(A.avail_out=0))},S.prototype.onData=function(b){this.chunks.push(b)},S.prototype.onEnd=function(b){b===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},o.Deflate=S,o.deflate=_,o.deflateRaw=function(b,k){return(k=k||{}).raw=!0,_(b,k)},o.gzip=function(b,k){return(k=k||{}).gzip=!0,_(b,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,i,o){var s=n("./zlib/inflate"),l=n("./utils/common"),c=n("./utils/strings"),d=n("./zlib/constants"),h=n("./zlib/messages"),m=n("./zlib/zstream"),p=n("./zlib/gzheader"),g=Object.prototype.toString;function y(S){if(!(this instanceof y))return new y(S);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},S||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||S&&S.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var b=s.inflateInit2(this.strm,_.windowBits);if(b!==d.Z_OK)throw new Error(h[b]);this.header=new p,s.inflateGetHeader(this.strm,this.header)}function w(S,_){var b=new y(_);if(b.push(S,!0),b.err)throw b.msg||h[b.err];return b.result}y.prototype.push=function(S,_){var b,k,E,j,A,T,M=this.strm,P=this.options.chunkSize,F=this.options.dictionary,$=!1;if(this.ended)return!1;k=_===~~_?_:_===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof S=="string"?M.input=c.binstring2buf(S):g.call(S)==="[object ArrayBuffer]"?M.input=new Uint8Array(S):M.input=S,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new l.Buf8(P),M.next_out=0,M.avail_out=P),(b=s.inflate(M,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&F&&(T=typeof F=="string"?c.string2buf(F):g.call(F)==="[object ArrayBuffer]"?new Uint8Array(F):F,b=s.inflateSetDictionary(this.strm,T)),b===d.Z_BUF_ERROR&&$===!0&&(b=d.Z_OK,$=!1),b!==d.Z_STREAM_END&&b!==d.Z_OK)return this.onEnd(b),!(this.ended=!0);M.next_out&&(M.avail_out!==0&&b!==d.Z_STREAM_END&&(M.avail_in!==0||k!==d.Z_FINISH&&k!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=c.utf8border(M.output,M.next_out),j=M.next_out-E,A=c.buf2string(M.output,E),M.next_out=j,M.avail_out=P-j,j&&l.arraySet(M.output,M.output,E,j,0),this.onData(A)):this.onData(l.shrinkBuf(M.output,M.next_out)))),M.avail_in===0&&M.avail_out===0&&($=!0)}while((0<M.avail_in||M.avail_out===0)&&b!==d.Z_STREAM_END);return b===d.Z_STREAM_END&&(k=d.Z_FINISH),k===d.Z_FINISH?(b=s.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===d.Z_OK):k!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(M.avail_out=0))},y.prototype.onData=function(S){this.chunks.push(S)},y.prototype.onEnd=function(S){S===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},o.Inflate=y,o.inflate=w,o.inflateRaw=function(S,_){return(_=_||{}).raw=!0,w(S,_)},o.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,i,o){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(d){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var m=h.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var p in m)m.hasOwnProperty(p)&&(d[p]=m[p])}}return d},o.shrinkBuf=function(d,h){return d.length===h?d:d.subarray?d.subarray(0,h):(d.length=h,d)};var l={arraySet:function(d,h,m,p,g){if(h.subarray&&d.subarray)d.set(h.subarray(m,m+p),g);else for(var y=0;y<p;y++)d[g+y]=h[m+y]},flattenChunks:function(d){var h,m,p,g,y,w;for(h=p=0,m=d.length;h<m;h++)p+=d[h].length;for(w=new Uint8Array(p),h=g=0,m=d.length;h<m;h++)y=d[h],w.set(y,g),g+=y.length;return w}},c={arraySet:function(d,h,m,p,g){for(var y=0;y<p;y++)d[g+y]=h[m+y]},flattenChunks:function(d){return[].concat.apply([],d)}};o.setTyped=function(d){d?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,l)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,c))},o.setTyped(s)},{}],42:[function(n,i,o){var s=n("./common"),l=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var d=new s.Buf8(256),h=0;h<256;h++)d[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function m(p,g){if(g<65537&&(p.subarray&&c||!p.subarray&&l))return String.fromCharCode.apply(null,s.shrinkBuf(p,g));for(var y="",w=0;w<g;w++)y+=String.fromCharCode(p[w]);return y}d[254]=d[254]=1,o.string2buf=function(p){var g,y,w,S,_,b=p.length,k=0;for(S=0;S<b;S++)(64512&(y=p.charCodeAt(S)))==55296&&S+1<b&&(64512&(w=p.charCodeAt(S+1)))==56320&&(y=65536+(y-55296<<10)+(w-56320),S++),k+=y<128?1:y<2048?2:y<65536?3:4;for(g=new s.Buf8(k),S=_=0;_<k;S++)(64512&(y=p.charCodeAt(S)))==55296&&S+1<b&&(64512&(w=p.charCodeAt(S+1)))==56320&&(y=65536+(y-55296<<10)+(w-56320),S++),y<128?g[_++]=y:(y<2048?g[_++]=192|y>>>6:(y<65536?g[_++]=224|y>>>12:(g[_++]=240|y>>>18,g[_++]=128|y>>>12&63),g[_++]=128|y>>>6&63),g[_++]=128|63&y);return g},o.buf2binstring=function(p){return m(p,p.length)},o.binstring2buf=function(p){for(var g=new s.Buf8(p.length),y=0,w=g.length;y<w;y++)g[y]=p.charCodeAt(y);return g},o.buf2string=function(p,g){var y,w,S,_,b=g||p.length,k=new Array(2*b);for(y=w=0;y<b;)if((S=p[y++])<128)k[w++]=S;else if(4<(_=d[S]))k[w++]=65533,y+=_-1;else{for(S&=_===2?31:_===3?15:7;1<_&&y<b;)S=S<<6|63&p[y++],_--;1<_?k[w++]=65533:S<65536?k[w++]=S:(S-=65536,k[w++]=55296|S>>10&1023,k[w++]=56320|1023&S)}return m(k,w)},o.utf8border=function(p,g){var y;for((g=g||p.length)>p.length&&(g=p.length),y=g-1;0<=y&&(192&p[y])==128;)y--;return y<0||y===0?g:y+d[p[y]]>g?y:g}},{"./common":41}],43:[function(n,i,o){i.exports=function(s,l,c,d){for(var h=65535&s|0,m=s>>>16&65535|0,p=0;c!==0;){for(c-=p=2e3<c?2e3:c;m=m+(h=h+l[d++]|0)|0,--p;);h%=65521,m%=65521}return h|m<<16|0}},{}],44:[function(n,i,o){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,i,o){var s=(function(){for(var l,c=[],d=0;d<256;d++){l=d;for(var h=0;h<8;h++)l=1&l?3988292384^l>>>1:l>>>1;c[d]=l}return c})();i.exports=function(l,c,d,h){var m=s,p=h+d;l^=-1;for(var g=h;g<p;g++)l=l>>>8^m[255&(l^c[g])];return-1^l}},{}],46:[function(n,i,o){var s,l=n("../utils/common"),c=n("./trees"),d=n("./adler32"),h=n("./crc32"),m=n("./messages"),p=0,g=4,y=0,w=-2,S=-1,_=4,b=2,k=8,E=9,j=286,A=30,T=19,M=2*j+1,P=15,F=3,$=258,Z=$+F+1,D=42,q=113,N=1,H=2,U=3,V=4;function X(L,te){return L.msg=m[te],te}function Y(L){return(L<<1)-(4<L?9:0)}function B(L){for(var te=L.length;0<=--te;)L[te]=0}function z(L){var te=L.state,re=te.pending;re>L.avail_out&&(re=L.avail_out),re!==0&&(l.arraySet(L.output,te.pending_buf,te.pending_out,re,L.next_out),L.next_out+=re,te.pending_out+=re,L.total_out+=re,L.avail_out-=re,te.pending-=re,te.pending===0&&(te.pending_out=0))}function I(L,te){c._tr_flush_block(L,0<=L.block_start?L.block_start:-1,L.strstart-L.block_start,te),L.block_start=L.strstart,z(L.strm)}function O(L,te){L.pending_buf[L.pending++]=te}function Q(L,te){L.pending_buf[L.pending++]=te>>>8&255,L.pending_buf[L.pending++]=255&te}function ee(L,te){var re,W,K=L.max_chain_length,ie=L.strstart,pe=L.prev_length,ge=L.nice_match,oe=L.strstart>L.w_size-Z?L.strstart-(L.w_size-Z):0,_e=L.window,Ce=L.w_mask,ke=L.prev,se=L.strstart+$,we=_e[ie+pe-1],Ne=_e[ie+pe];L.prev_length>=L.good_match&&(K>>=2),ge>L.lookahead&&(ge=L.lookahead);do if(_e[(re=te)+pe]===Ne&&_e[re+pe-1]===we&&_e[re]===_e[ie]&&_e[++re]===_e[ie+1]){ie+=2,re++;do;while(_e[++ie]===_e[++re]&&_e[++ie]===_e[++re]&&_e[++ie]===_e[++re]&&_e[++ie]===_e[++re]&&_e[++ie]===_e[++re]&&_e[++ie]===_e[++re]&&_e[++ie]===_e[++re]&&_e[++ie]===_e[++re]&&ie<se);if(W=$-(se-ie),ie=se-$,pe<W){if(L.match_start=te,ge<=(pe=W))break;we=_e[ie+pe-1],Ne=_e[ie+pe]}}while((te=ke[te&Ce])>oe&&--K!=0);return pe<=L.lookahead?pe:L.lookahead}function ue(L){var te,re,W,K,ie,pe,ge,oe,_e,Ce,ke=L.w_size;do{if(K=L.window_size-L.lookahead-L.strstart,L.strstart>=ke+(ke-Z)){for(l.arraySet(L.window,L.window,ke,ke,0),L.match_start-=ke,L.strstart-=ke,L.block_start-=ke,te=re=L.hash_size;W=L.head[--te],L.head[te]=ke<=W?W-ke:0,--re;);for(te=re=ke;W=L.prev[--te],L.prev[te]=ke<=W?W-ke:0,--re;);K+=ke}if(L.strm.avail_in===0)break;if(pe=L.strm,ge=L.window,oe=L.strstart+L.lookahead,_e=K,Ce=void 0,Ce=pe.avail_in,_e<Ce&&(Ce=_e),re=Ce===0?0:(pe.avail_in-=Ce,l.arraySet(ge,pe.input,pe.next_in,Ce,oe),pe.state.wrap===1?pe.adler=d(pe.adler,ge,Ce,oe):pe.state.wrap===2&&(pe.adler=h(pe.adler,ge,Ce,oe)),pe.next_in+=Ce,pe.total_in+=Ce,Ce),L.lookahead+=re,L.lookahead+L.insert>=F)for(ie=L.strstart-L.insert,L.ins_h=L.window[ie],L.ins_h=(L.ins_h<<L.hash_shift^L.window[ie+1])&L.hash_mask;L.insert&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[ie+F-1])&L.hash_mask,L.prev[ie&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=ie,ie++,L.insert--,!(L.lookahead+L.insert<F)););}while(L.lookahead<Z&&L.strm.avail_in!==0)}function ye(L,te){for(var re,W;;){if(L.lookahead<Z){if(ue(L),L.lookahead<Z&&te===p)return N;if(L.lookahead===0)break}if(re=0,L.lookahead>=F&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+F-1])&L.hash_mask,re=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),re!==0&&L.strstart-re<=L.w_size-Z&&(L.match_length=ee(L,re)),L.match_length>=F)if(W=c._tr_tally(L,L.strstart-L.match_start,L.match_length-F),L.lookahead-=L.match_length,L.match_length<=L.max_lazy_match&&L.lookahead>=F){for(L.match_length--;L.strstart++,L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+F-1])&L.hash_mask,re=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart,--L.match_length!=0;);L.strstart++}else L.strstart+=L.match_length,L.match_length=0,L.ins_h=L.window[L.strstart],L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+1])&L.hash_mask;else W=c._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++;if(W&&(I(L,!1),L.strm.avail_out===0))return N}return L.insert=L.strstart<F-1?L.strstart:F-1,te===g?(I(L,!0),L.strm.avail_out===0?U:V):L.last_lit&&(I(L,!1),L.strm.avail_out===0)?N:H}function de(L,te){for(var re,W,K;;){if(L.lookahead<Z){if(ue(L),L.lookahead<Z&&te===p)return N;if(L.lookahead===0)break}if(re=0,L.lookahead>=F&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+F-1])&L.hash_mask,re=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),L.prev_length=L.match_length,L.prev_match=L.match_start,L.match_length=F-1,re!==0&&L.prev_length<L.max_lazy_match&&L.strstart-re<=L.w_size-Z&&(L.match_length=ee(L,re),L.match_length<=5&&(L.strategy===1||L.match_length===F&&4096<L.strstart-L.match_start)&&(L.match_length=F-1)),L.prev_length>=F&&L.match_length<=L.prev_length){for(K=L.strstart+L.lookahead-F,W=c._tr_tally(L,L.strstart-1-L.prev_match,L.prev_length-F),L.lookahead-=L.prev_length-1,L.prev_length-=2;++L.strstart<=K&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+F-1])&L.hash_mask,re=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),--L.prev_length!=0;);if(L.match_available=0,L.match_length=F-1,L.strstart++,W&&(I(L,!1),L.strm.avail_out===0))return N}else if(L.match_available){if((W=c._tr_tally(L,0,L.window[L.strstart-1]))&&I(L,!1),L.strstart++,L.lookahead--,L.strm.avail_out===0)return N}else L.match_available=1,L.strstart++,L.lookahead--}return L.match_available&&(W=c._tr_tally(L,0,L.window[L.strstart-1]),L.match_available=0),L.insert=L.strstart<F-1?L.strstart:F-1,te===g?(I(L,!0),L.strm.avail_out===0?U:V):L.last_lit&&(I(L,!1),L.strm.avail_out===0)?N:H}function ve(L,te,re,W,K){this.good_length=L,this.max_lazy=te,this.nice_length=re,this.max_chain=W,this.func=K}function Ae(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*M),this.dyn_dtree=new l.Buf16(2*(2*A+1)),this.bl_tree=new l.Buf16(2*(2*T+1)),B(this.dyn_ltree),B(this.dyn_dtree),B(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(P+1),this.heap=new l.Buf16(2*j+1),B(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*j+1),B(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function je(L){var te;return L&&L.state?(L.total_in=L.total_out=0,L.data_type=b,(te=L.state).pending=0,te.pending_out=0,te.wrap<0&&(te.wrap=-te.wrap),te.status=te.wrap?D:q,L.adler=te.wrap===2?0:1,te.last_flush=p,c._tr_init(te),y):X(L,w)}function Te(L){var te=je(L);return te===y&&(function(re){re.window_size=2*re.w_size,B(re.head),re.max_lazy_match=s[re.level].max_lazy,re.good_match=s[re.level].good_length,re.nice_match=s[re.level].nice_length,re.max_chain_length=s[re.level].max_chain,re.strstart=0,re.block_start=0,re.lookahead=0,re.insert=0,re.match_length=re.prev_length=F-1,re.match_available=0,re.ins_h=0})(L.state),te}function De(L,te,re,W,K,ie){if(!L)return w;var pe=1;if(te===S&&(te=6),W<0?(pe=0,W=-W):15<W&&(pe=2,W-=16),K<1||E<K||re!==k||W<8||15<W||te<0||9<te||ie<0||_<ie)return X(L,w);W===8&&(W=9);var ge=new Ae;return(L.state=ge).strm=L,ge.wrap=pe,ge.gzhead=null,ge.w_bits=W,ge.w_size=1<<ge.w_bits,ge.w_mask=ge.w_size-1,ge.hash_bits=K+7,ge.hash_size=1<<ge.hash_bits,ge.hash_mask=ge.hash_size-1,ge.hash_shift=~~((ge.hash_bits+F-1)/F),ge.window=new l.Buf8(2*ge.w_size),ge.head=new l.Buf16(ge.hash_size),ge.prev=new l.Buf16(ge.w_size),ge.lit_bufsize=1<<K+6,ge.pending_buf_size=4*ge.lit_bufsize,ge.pending_buf=new l.Buf8(ge.pending_buf_size),ge.d_buf=1*ge.lit_bufsize,ge.l_buf=3*ge.lit_bufsize,ge.level=te,ge.strategy=ie,ge.method=re,Te(L)}s=[new ve(0,0,0,0,function(L,te){var re=65535;for(re>L.pending_buf_size-5&&(re=L.pending_buf_size-5);;){if(L.lookahead<=1){if(ue(L),L.lookahead===0&&te===p)return N;if(L.lookahead===0)break}L.strstart+=L.lookahead,L.lookahead=0;var W=L.block_start+re;if((L.strstart===0||L.strstart>=W)&&(L.lookahead=L.strstart-W,L.strstart=W,I(L,!1),L.strm.avail_out===0)||L.strstart-L.block_start>=L.w_size-Z&&(I(L,!1),L.strm.avail_out===0))return N}return L.insert=0,te===g?(I(L,!0),L.strm.avail_out===0?U:V):(L.strstart>L.block_start&&(I(L,!1),L.strm.avail_out),N)}),new ve(4,4,8,4,ye),new ve(4,5,16,8,ye),new ve(4,6,32,32,ye),new ve(4,4,16,16,de),new ve(8,16,32,32,de),new ve(8,16,128,128,de),new ve(8,32,128,256,de),new ve(32,128,258,1024,de),new ve(32,258,258,4096,de)],o.deflateInit=function(L,te){return De(L,te,k,15,8,0)},o.deflateInit2=De,o.deflateReset=Te,o.deflateResetKeep=je,o.deflateSetHeader=function(L,te){return L&&L.state?L.state.wrap!==2?w:(L.state.gzhead=te,y):w},o.deflate=function(L,te){var re,W,K,ie;if(!L||!L.state||5<te||te<0)return L?X(L,w):w;if(W=L.state,!L.output||!L.input&&L.avail_in!==0||W.status===666&&te!==g)return X(L,L.avail_out===0?-5:w);if(W.strm=L,re=W.last_flush,W.last_flush=te,W.status===D)if(W.wrap===2)L.adler=0,O(W,31),O(W,139),O(W,8),W.gzhead?(O(W,(W.gzhead.text?1:0)+(W.gzhead.hcrc?2:0)+(W.gzhead.extra?4:0)+(W.gzhead.name?8:0)+(W.gzhead.comment?16:0)),O(W,255&W.gzhead.time),O(W,W.gzhead.time>>8&255),O(W,W.gzhead.time>>16&255),O(W,W.gzhead.time>>24&255),O(W,W.level===9?2:2<=W.strategy||W.level<2?4:0),O(W,255&W.gzhead.os),W.gzhead.extra&&W.gzhead.extra.length&&(O(W,255&W.gzhead.extra.length),O(W,W.gzhead.extra.length>>8&255)),W.gzhead.hcrc&&(L.adler=h(L.adler,W.pending_buf,W.pending,0)),W.gzindex=0,W.status=69):(O(W,0),O(W,0),O(W,0),O(W,0),O(W,0),O(W,W.level===9?2:2<=W.strategy||W.level<2?4:0),O(W,3),W.status=q);else{var pe=k+(W.w_bits-8<<4)<<8;pe|=(2<=W.strategy||W.level<2?0:W.level<6?1:W.level===6?2:3)<<6,W.strstart!==0&&(pe|=32),pe+=31-pe%31,W.status=q,Q(W,pe),W.strstart!==0&&(Q(W,L.adler>>>16),Q(W,65535&L.adler)),L.adler=1}if(W.status===69)if(W.gzhead.extra){for(K=W.pending;W.gzindex<(65535&W.gzhead.extra.length)&&(W.pending!==W.pending_buf_size||(W.gzhead.hcrc&&W.pending>K&&(L.adler=h(L.adler,W.pending_buf,W.pending-K,K)),z(L),K=W.pending,W.pending!==W.pending_buf_size));)O(W,255&W.gzhead.extra[W.gzindex]),W.gzindex++;W.gzhead.hcrc&&W.pending>K&&(L.adler=h(L.adler,W.pending_buf,W.pending-K,K)),W.gzindex===W.gzhead.extra.length&&(W.gzindex=0,W.status=73)}else W.status=73;if(W.status===73)if(W.gzhead.name){K=W.pending;do{if(W.pending===W.pending_buf_size&&(W.gzhead.hcrc&&W.pending>K&&(L.adler=h(L.adler,W.pending_buf,W.pending-K,K)),z(L),K=W.pending,W.pending===W.pending_buf_size)){ie=1;break}ie=W.gzindex<W.gzhead.name.length?255&W.gzhead.name.charCodeAt(W.gzindex++):0,O(W,ie)}while(ie!==0);W.gzhead.hcrc&&W.pending>K&&(L.adler=h(L.adler,W.pending_buf,W.pending-K,K)),ie===0&&(W.gzindex=0,W.status=91)}else W.status=91;if(W.status===91)if(W.gzhead.comment){K=W.pending;do{if(W.pending===W.pending_buf_size&&(W.gzhead.hcrc&&W.pending>K&&(L.adler=h(L.adler,W.pending_buf,W.pending-K,K)),z(L),K=W.pending,W.pending===W.pending_buf_size)){ie=1;break}ie=W.gzindex<W.gzhead.comment.length?255&W.gzhead.comment.charCodeAt(W.gzindex++):0,O(W,ie)}while(ie!==0);W.gzhead.hcrc&&W.pending>K&&(L.adler=h(L.adler,W.pending_buf,W.pending-K,K)),ie===0&&(W.status=103)}else W.status=103;if(W.status===103&&(W.gzhead.hcrc?(W.pending+2>W.pending_buf_size&&z(L),W.pending+2<=W.pending_buf_size&&(O(W,255&L.adler),O(W,L.adler>>8&255),L.adler=0,W.status=q)):W.status=q),W.pending!==0){if(z(L),L.avail_out===0)return W.last_flush=-1,y}else if(L.avail_in===0&&Y(te)<=Y(re)&&te!==g)return X(L,-5);if(W.status===666&&L.avail_in!==0)return X(L,-5);if(L.avail_in!==0||W.lookahead!==0||te!==p&&W.status!==666){var ge=W.strategy===2?(function(oe,_e){for(var Ce;;){if(oe.lookahead===0&&(ue(oe),oe.lookahead===0)){if(_e===p)return N;break}if(oe.match_length=0,Ce=c._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++,Ce&&(I(oe,!1),oe.strm.avail_out===0))return N}return oe.insert=0,_e===g?(I(oe,!0),oe.strm.avail_out===0?U:V):oe.last_lit&&(I(oe,!1),oe.strm.avail_out===0)?N:H})(W,te):W.strategy===3?(function(oe,_e){for(var Ce,ke,se,we,Ne=oe.window;;){if(oe.lookahead<=$){if(ue(oe),oe.lookahead<=$&&_e===p)return N;if(oe.lookahead===0)break}if(oe.match_length=0,oe.lookahead>=F&&0<oe.strstart&&(ke=Ne[se=oe.strstart-1])===Ne[++se]&&ke===Ne[++se]&&ke===Ne[++se]){we=oe.strstart+$;do;while(ke===Ne[++se]&&ke===Ne[++se]&&ke===Ne[++se]&&ke===Ne[++se]&&ke===Ne[++se]&&ke===Ne[++se]&&ke===Ne[++se]&&ke===Ne[++se]&&se<we);oe.match_length=$-(we-se),oe.match_length>oe.lookahead&&(oe.match_length=oe.lookahead)}if(oe.match_length>=F?(Ce=c._tr_tally(oe,1,oe.match_length-F),oe.lookahead-=oe.match_length,oe.strstart+=oe.match_length,oe.match_length=0):(Ce=c._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++),Ce&&(I(oe,!1),oe.strm.avail_out===0))return N}return oe.insert=0,_e===g?(I(oe,!0),oe.strm.avail_out===0?U:V):oe.last_lit&&(I(oe,!1),oe.strm.avail_out===0)?N:H})(W,te):s[W.level].func(W,te);if(ge!==U&&ge!==V||(W.status=666),ge===N||ge===U)return L.avail_out===0&&(W.last_flush=-1),y;if(ge===H&&(te===1?c._tr_align(W):te!==5&&(c._tr_stored_block(W,0,0,!1),te===3&&(B(W.head),W.lookahead===0&&(W.strstart=0,W.block_start=0,W.insert=0))),z(L),L.avail_out===0))return W.last_flush=-1,y}return te!==g?y:W.wrap<=0?1:(W.wrap===2?(O(W,255&L.adler),O(W,L.adler>>8&255),O(W,L.adler>>16&255),O(W,L.adler>>24&255),O(W,255&L.total_in),O(W,L.total_in>>8&255),O(W,L.total_in>>16&255),O(W,L.total_in>>24&255)):(Q(W,L.adler>>>16),Q(W,65535&L.adler)),z(L),0<W.wrap&&(W.wrap=-W.wrap),W.pending!==0?y:1)},o.deflateEnd=function(L){var te;return L&&L.state?(te=L.state.status)!==D&&te!==69&&te!==73&&te!==91&&te!==103&&te!==q&&te!==666?X(L,w):(L.state=null,te===q?X(L,-3):y):w},o.deflateSetDictionary=function(L,te){var re,W,K,ie,pe,ge,oe,_e,Ce=te.length;if(!L||!L.state||(ie=(re=L.state).wrap)===2||ie===1&&re.status!==D||re.lookahead)return w;for(ie===1&&(L.adler=d(L.adler,te,Ce,0)),re.wrap=0,Ce>=re.w_size&&(ie===0&&(B(re.head),re.strstart=0,re.block_start=0,re.insert=0),_e=new l.Buf8(re.w_size),l.arraySet(_e,te,Ce-re.w_size,re.w_size,0),te=_e,Ce=re.w_size),pe=L.avail_in,ge=L.next_in,oe=L.input,L.avail_in=Ce,L.next_in=0,L.input=te,ue(re);re.lookahead>=F;){for(W=re.strstart,K=re.lookahead-(F-1);re.ins_h=(re.ins_h<<re.hash_shift^re.window[W+F-1])&re.hash_mask,re.prev[W&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=W,W++,--K;);re.strstart=W,re.lookahead=F-1,ue(re)}return re.strstart+=re.lookahead,re.block_start=re.strstart,re.insert=re.lookahead,re.lookahead=0,re.match_length=re.prev_length=F-1,re.match_available=0,L.next_in=ge,L.input=oe,L.avail_in=pe,re.wrap=ie,y},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,i,o){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,i,o){i.exports=function(s,l){var c,d,h,m,p,g,y,w,S,_,b,k,E,j,A,T,M,P,F,$,Z,D,q,N,H;c=s.state,d=s.next_in,N=s.input,h=d+(s.avail_in-5),m=s.next_out,H=s.output,p=m-(l-s.avail_out),g=m+(s.avail_out-257),y=c.dmax,w=c.wsize,S=c.whave,_=c.wnext,b=c.window,k=c.hold,E=c.bits,j=c.lencode,A=c.distcode,T=(1<<c.lenbits)-1,M=(1<<c.distbits)-1;e:do{E<15&&(k+=N[d++]<<E,E+=8,k+=N[d++]<<E,E+=8),P=j[k&T];t:for(;;){if(k>>>=F=P>>>24,E-=F,(F=P>>>16&255)===0)H[m++]=65535&P;else{if(!(16&F)){if((64&F)==0){P=j[(65535&P)+(k&(1<<F)-1)];continue t}if(32&F){c.mode=12;break e}s.msg="invalid literal/length code",c.mode=30;break e}$=65535&P,(F&=15)&&(E<F&&(k+=N[d++]<<E,E+=8),$+=k&(1<<F)-1,k>>>=F,E-=F),E<15&&(k+=N[d++]<<E,E+=8,k+=N[d++]<<E,E+=8),P=A[k&M];n:for(;;){if(k>>>=F=P>>>24,E-=F,!(16&(F=P>>>16&255))){if((64&F)==0){P=A[(65535&P)+(k&(1<<F)-1)];continue n}s.msg="invalid distance code",c.mode=30;break e}if(Z=65535&P,E<(F&=15)&&(k+=N[d++]<<E,(E+=8)<F&&(k+=N[d++]<<E,E+=8)),y<(Z+=k&(1<<F)-1)){s.msg="invalid distance too far back",c.mode=30;break e}if(k>>>=F,E-=F,(F=m-p)<Z){if(S<(F=Z-F)&&c.sane){s.msg="invalid distance too far back",c.mode=30;break e}if(q=b,(D=0)===_){if(D+=w-F,F<$){for($-=F;H[m++]=b[D++],--F;);D=m-Z,q=H}}else if(_<F){if(D+=w+_-F,(F-=_)<$){for($-=F;H[m++]=b[D++],--F;);if(D=0,_<$){for($-=F=_;H[m++]=b[D++],--F;);D=m-Z,q=H}}}else if(D+=_-F,F<$){for($-=F;H[m++]=b[D++],--F;);D=m-Z,q=H}for(;2<$;)H[m++]=q[D++],H[m++]=q[D++],H[m++]=q[D++],$-=3;$&&(H[m++]=q[D++],1<$&&(H[m++]=q[D++]))}else{for(D=m-Z;H[m++]=H[D++],H[m++]=H[D++],H[m++]=H[D++],2<($-=3););$&&(H[m++]=H[D++],1<$&&(H[m++]=H[D++]))}break}}break}}while(d<h&&m<g);d-=$=E>>3,k&=(1<<(E-=$<<3))-1,s.next_in=d,s.next_out=m,s.avail_in=d<h?h-d+5:5-(d-h),s.avail_out=m<g?g-m+257:257-(m-g),c.hold=k,c.bits=E}},{}],49:[function(n,i,o){var s=n("../utils/common"),l=n("./adler32"),c=n("./crc32"),d=n("./inffast"),h=n("./inftrees"),m=1,p=2,g=0,y=-2,w=1,S=852,_=592;function b(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(D){var q;return D&&D.state?(q=D.state,D.total_in=D.total_out=q.total=0,D.msg="",q.wrap&&(D.adler=1&q.wrap),q.mode=w,q.last=0,q.havedict=0,q.dmax=32768,q.head=null,q.hold=0,q.bits=0,q.lencode=q.lendyn=new s.Buf32(S),q.distcode=q.distdyn=new s.Buf32(_),q.sane=1,q.back=-1,g):y}function j(D){var q;return D&&D.state?((q=D.state).wsize=0,q.whave=0,q.wnext=0,E(D)):y}function A(D,q){var N,H;return D&&D.state?(H=D.state,q<0?(N=0,q=-q):(N=1+(q>>4),q<48&&(q&=15)),q&&(q<8||15<q)?y:(H.window!==null&&H.wbits!==q&&(H.window=null),H.wrap=N,H.wbits=q,j(D))):y}function T(D,q){var N,H;return D?(H=new k,(D.state=H).window=null,(N=A(D,q))!==g&&(D.state=null),N):y}var M,P,F=!0;function $(D){if(F){var q;for(M=new s.Buf32(512),P=new s.Buf32(32),q=0;q<144;)D.lens[q++]=8;for(;q<256;)D.lens[q++]=9;for(;q<280;)D.lens[q++]=7;for(;q<288;)D.lens[q++]=8;for(h(m,D.lens,0,288,M,0,D.work,{bits:9}),q=0;q<32;)D.lens[q++]=5;h(p,D.lens,0,32,P,0,D.work,{bits:5}),F=!1}D.lencode=M,D.lenbits=9,D.distcode=P,D.distbits=5}function Z(D,q,N,H){var U,V=D.state;return V.window===null&&(V.wsize=1<<V.wbits,V.wnext=0,V.whave=0,V.window=new s.Buf8(V.wsize)),H>=V.wsize?(s.arraySet(V.window,q,N-V.wsize,V.wsize,0),V.wnext=0,V.whave=V.wsize):(H<(U=V.wsize-V.wnext)&&(U=H),s.arraySet(V.window,q,N-H,U,V.wnext),(H-=U)?(s.arraySet(V.window,q,N-H,H,0),V.wnext=H,V.whave=V.wsize):(V.wnext+=U,V.wnext===V.wsize&&(V.wnext=0),V.whave<V.wsize&&(V.whave+=U))),0}o.inflateReset=j,o.inflateReset2=A,o.inflateResetKeep=E,o.inflateInit=function(D){return T(D,15)},o.inflateInit2=T,o.inflate=function(D,q){var N,H,U,V,X,Y,B,z,I,O,Q,ee,ue,ye,de,ve,Ae,je,Te,De,L,te,re,W,K=0,ie=new s.Buf8(4),pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return y;(N=D.state).mode===12&&(N.mode=13),X=D.next_out,U=D.output,B=D.avail_out,V=D.next_in,H=D.input,Y=D.avail_in,z=N.hold,I=N.bits,O=Y,Q=B,te=g;e:for(;;)switch(N.mode){case w:if(N.wrap===0){N.mode=13;break}for(;I<16;){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}if(2&N.wrap&&z===35615){ie[N.check=0]=255&z,ie[1]=z>>>8&255,N.check=c(N.check,ie,2,0),I=z=0,N.mode=2;break}if(N.flags=0,N.head&&(N.head.done=!1),!(1&N.wrap)||(((255&z)<<8)+(z>>8))%31){D.msg="incorrect header check",N.mode=30;break}if((15&z)!=8){D.msg="unknown compression method",N.mode=30;break}if(I-=4,L=8+(15&(z>>>=4)),N.wbits===0)N.wbits=L;else if(L>N.wbits){D.msg="invalid window size",N.mode=30;break}N.dmax=1<<L,D.adler=N.check=1,N.mode=512&z?10:12,I=z=0;break;case 2:for(;I<16;){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}if(N.flags=z,(255&N.flags)!=8){D.msg="unknown compression method",N.mode=30;break}if(57344&N.flags){D.msg="unknown header flags set",N.mode=30;break}N.head&&(N.head.text=z>>8&1),512&N.flags&&(ie[0]=255&z,ie[1]=z>>>8&255,N.check=c(N.check,ie,2,0)),I=z=0,N.mode=3;case 3:for(;I<32;){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}N.head&&(N.head.time=z),512&N.flags&&(ie[0]=255&z,ie[1]=z>>>8&255,ie[2]=z>>>16&255,ie[3]=z>>>24&255,N.check=c(N.check,ie,4,0)),I=z=0,N.mode=4;case 4:for(;I<16;){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}N.head&&(N.head.xflags=255&z,N.head.os=z>>8),512&N.flags&&(ie[0]=255&z,ie[1]=z>>>8&255,N.check=c(N.check,ie,2,0)),I=z=0,N.mode=5;case 5:if(1024&N.flags){for(;I<16;){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}N.length=z,N.head&&(N.head.extra_len=z),512&N.flags&&(ie[0]=255&z,ie[1]=z>>>8&255,N.check=c(N.check,ie,2,0)),I=z=0}else N.head&&(N.head.extra=null);N.mode=6;case 6:if(1024&N.flags&&(Y<(ee=N.length)&&(ee=Y),ee&&(N.head&&(L=N.head.extra_len-N.length,N.head.extra||(N.head.extra=new Array(N.head.extra_len)),s.arraySet(N.head.extra,H,V,ee,L)),512&N.flags&&(N.check=c(N.check,H,ee,V)),Y-=ee,V+=ee,N.length-=ee),N.length))break e;N.length=0,N.mode=7;case 7:if(2048&N.flags){if(Y===0)break e;for(ee=0;L=H[V+ee++],N.head&&L&&N.length<65536&&(N.head.name+=String.fromCharCode(L)),L&&ee<Y;);if(512&N.flags&&(N.check=c(N.check,H,ee,V)),Y-=ee,V+=ee,L)break e}else N.head&&(N.head.name=null);N.length=0,N.mode=8;case 8:if(4096&N.flags){if(Y===0)break e;for(ee=0;L=H[V+ee++],N.head&&L&&N.length<65536&&(N.head.comment+=String.fromCharCode(L)),L&&ee<Y;);if(512&N.flags&&(N.check=c(N.check,H,ee,V)),Y-=ee,V+=ee,L)break e}else N.head&&(N.head.comment=null);N.mode=9;case 9:if(512&N.flags){for(;I<16;){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}if(z!==(65535&N.check)){D.msg="header crc mismatch",N.mode=30;break}I=z=0}N.head&&(N.head.hcrc=N.flags>>9&1,N.head.done=!0),D.adler=N.check=0,N.mode=12;break;case 10:for(;I<32;){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}D.adler=N.check=b(z),I=z=0,N.mode=11;case 11:if(N.havedict===0)return D.next_out=X,D.avail_out=B,D.next_in=V,D.avail_in=Y,N.hold=z,N.bits=I,2;D.adler=N.check=1,N.mode=12;case 12:if(q===5||q===6)break e;case 13:if(N.last){z>>>=7&I,I-=7&I,N.mode=27;break}for(;I<3;){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}switch(N.last=1&z,I-=1,3&(z>>>=1)){case 0:N.mode=14;break;case 1:if($(N),N.mode=20,q!==6)break;z>>>=2,I-=2;break e;case 2:N.mode=17;break;case 3:D.msg="invalid block type",N.mode=30}z>>>=2,I-=2;break;case 14:for(z>>>=7&I,I-=7&I;I<32;){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}if((65535&z)!=(z>>>16^65535)){D.msg="invalid stored block lengths",N.mode=30;break}if(N.length=65535&z,I=z=0,N.mode=15,q===6)break e;case 15:N.mode=16;case 16:if(ee=N.length){if(Y<ee&&(ee=Y),B<ee&&(ee=B),ee===0)break e;s.arraySet(U,H,V,ee,X),Y-=ee,V+=ee,B-=ee,X+=ee,N.length-=ee;break}N.mode=12;break;case 17:for(;I<14;){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}if(N.nlen=257+(31&z),z>>>=5,I-=5,N.ndist=1+(31&z),z>>>=5,I-=5,N.ncode=4+(15&z),z>>>=4,I-=4,286<N.nlen||30<N.ndist){D.msg="too many length or distance symbols",N.mode=30;break}N.have=0,N.mode=18;case 18:for(;N.have<N.ncode;){for(;I<3;){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}N.lens[pe[N.have++]]=7&z,z>>>=3,I-=3}for(;N.have<19;)N.lens[pe[N.have++]]=0;if(N.lencode=N.lendyn,N.lenbits=7,re={bits:N.lenbits},te=h(0,N.lens,0,19,N.lencode,0,N.work,re),N.lenbits=re.bits,te){D.msg="invalid code lengths set",N.mode=30;break}N.have=0,N.mode=19;case 19:for(;N.have<N.nlen+N.ndist;){for(;ve=(K=N.lencode[z&(1<<N.lenbits)-1])>>>16&255,Ae=65535&K,!((de=K>>>24)<=I);){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}if(Ae<16)z>>>=de,I-=de,N.lens[N.have++]=Ae;else{if(Ae===16){for(W=de+2;I<W;){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}if(z>>>=de,I-=de,N.have===0){D.msg="invalid bit length repeat",N.mode=30;break}L=N.lens[N.have-1],ee=3+(3&z),z>>>=2,I-=2}else if(Ae===17){for(W=de+3;I<W;){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}I-=de,L=0,ee=3+(7&(z>>>=de)),z>>>=3,I-=3}else{for(W=de+7;I<W;){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}I-=de,L=0,ee=11+(127&(z>>>=de)),z>>>=7,I-=7}if(N.have+ee>N.nlen+N.ndist){D.msg="invalid bit length repeat",N.mode=30;break}for(;ee--;)N.lens[N.have++]=L}}if(N.mode===30)break;if(N.lens[256]===0){D.msg="invalid code -- missing end-of-block",N.mode=30;break}if(N.lenbits=9,re={bits:N.lenbits},te=h(m,N.lens,0,N.nlen,N.lencode,0,N.work,re),N.lenbits=re.bits,te){D.msg="invalid literal/lengths set",N.mode=30;break}if(N.distbits=6,N.distcode=N.distdyn,re={bits:N.distbits},te=h(p,N.lens,N.nlen,N.ndist,N.distcode,0,N.work,re),N.distbits=re.bits,te){D.msg="invalid distances set",N.mode=30;break}if(N.mode=20,q===6)break e;case 20:N.mode=21;case 21:if(6<=Y&&258<=B){D.next_out=X,D.avail_out=B,D.next_in=V,D.avail_in=Y,N.hold=z,N.bits=I,d(D,Q),X=D.next_out,U=D.output,B=D.avail_out,V=D.next_in,H=D.input,Y=D.avail_in,z=N.hold,I=N.bits,N.mode===12&&(N.back=-1);break}for(N.back=0;ve=(K=N.lencode[z&(1<<N.lenbits)-1])>>>16&255,Ae=65535&K,!((de=K>>>24)<=I);){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}if(ve&&(240&ve)==0){for(je=de,Te=ve,De=Ae;ve=(K=N.lencode[De+((z&(1<<je+Te)-1)>>je)])>>>16&255,Ae=65535&K,!(je+(de=K>>>24)<=I);){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}z>>>=je,I-=je,N.back+=je}if(z>>>=de,I-=de,N.back+=de,N.length=Ae,ve===0){N.mode=26;break}if(32&ve){N.back=-1,N.mode=12;break}if(64&ve){D.msg="invalid literal/length code",N.mode=30;break}N.extra=15&ve,N.mode=22;case 22:if(N.extra){for(W=N.extra;I<W;){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}N.length+=z&(1<<N.extra)-1,z>>>=N.extra,I-=N.extra,N.back+=N.extra}N.was=N.length,N.mode=23;case 23:for(;ve=(K=N.distcode[z&(1<<N.distbits)-1])>>>16&255,Ae=65535&K,!((de=K>>>24)<=I);){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}if((240&ve)==0){for(je=de,Te=ve,De=Ae;ve=(K=N.distcode[De+((z&(1<<je+Te)-1)>>je)])>>>16&255,Ae=65535&K,!(je+(de=K>>>24)<=I);){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}z>>>=je,I-=je,N.back+=je}if(z>>>=de,I-=de,N.back+=de,64&ve){D.msg="invalid distance code",N.mode=30;break}N.offset=Ae,N.extra=15&ve,N.mode=24;case 24:if(N.extra){for(W=N.extra;I<W;){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}N.offset+=z&(1<<N.extra)-1,z>>>=N.extra,I-=N.extra,N.back+=N.extra}if(N.offset>N.dmax){D.msg="invalid distance too far back",N.mode=30;break}N.mode=25;case 25:if(B===0)break e;if(ee=Q-B,N.offset>ee){if((ee=N.offset-ee)>N.whave&&N.sane){D.msg="invalid distance too far back",N.mode=30;break}ue=ee>N.wnext?(ee-=N.wnext,N.wsize-ee):N.wnext-ee,ee>N.length&&(ee=N.length),ye=N.window}else ye=U,ue=X-N.offset,ee=N.length;for(B<ee&&(ee=B),B-=ee,N.length-=ee;U[X++]=ye[ue++],--ee;);N.length===0&&(N.mode=21);break;case 26:if(B===0)break e;U[X++]=N.length,B--,N.mode=21;break;case 27:if(N.wrap){for(;I<32;){if(Y===0)break e;Y--,z|=H[V++]<<I,I+=8}if(Q-=B,D.total_out+=Q,N.total+=Q,Q&&(D.adler=N.check=N.flags?c(N.check,U,Q,X-Q):l(N.check,U,Q,X-Q)),Q=B,(N.flags?z:b(z))!==N.check){D.msg="incorrect data check",N.mode=30;break}I=z=0}N.mode=28;case 28:if(N.wrap&&N.flags){for(;I<32;){if(Y===0)break e;Y--,z+=H[V++]<<I,I+=8}if(z!==(4294967295&N.total)){D.msg="incorrect length check",N.mode=30;break}I=z=0}N.mode=29;case 29:te=1;break e;case 30:te=-3;break e;case 31:return-4;default:return y}return D.next_out=X,D.avail_out=B,D.next_in=V,D.avail_in=Y,N.hold=z,N.bits=I,(N.wsize||Q!==D.avail_out&&N.mode<30&&(N.mode<27||q!==4))&&Z(D,D.output,D.next_out,Q-D.avail_out)?(N.mode=31,-4):(O-=D.avail_in,Q-=D.avail_out,D.total_in+=O,D.total_out+=Q,N.total+=Q,N.wrap&&Q&&(D.adler=N.check=N.flags?c(N.check,U,Q,D.next_out-Q):l(N.check,U,Q,D.next_out-Q)),D.data_type=N.bits+(N.last?64:0)+(N.mode===12?128:0)+(N.mode===20||N.mode===15?256:0),(O==0&&Q===0||q===4)&&te===g&&(te=-5),te)},o.inflateEnd=function(D){if(!D||!D.state)return y;var q=D.state;return q.window&&(q.window=null),D.state=null,g},o.inflateGetHeader=function(D,q){var N;return D&&D.state?(2&(N=D.state).wrap)==0?y:((N.head=q).done=!1,g):y},o.inflateSetDictionary=function(D,q){var N,H=q.length;return D&&D.state?(N=D.state).wrap!==0&&N.mode!==11?y:N.mode===11&&l(1,q,H,0)!==N.check?-3:Z(D,q,H,H)?(N.mode=31,-4):(N.havedict=1,g):y},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,i,o){var s=n("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(m,p,g,y,w,S,_,b){var k,E,j,A,T,M,P,F,$,Z=b.bits,D=0,q=0,N=0,H=0,U=0,V=0,X=0,Y=0,B=0,z=0,I=null,O=0,Q=new s.Buf16(16),ee=new s.Buf16(16),ue=null,ye=0;for(D=0;D<=15;D++)Q[D]=0;for(q=0;q<y;q++)Q[p[g+q]]++;for(U=Z,H=15;1<=H&&Q[H]===0;H--);if(H<U&&(U=H),H===0)return w[S++]=20971520,w[S++]=20971520,b.bits=1,0;for(N=1;N<H&&Q[N]===0;N++);for(U<N&&(U=N),D=Y=1;D<=15;D++)if(Y<<=1,(Y-=Q[D])<0)return-1;if(0<Y&&(m===0||H!==1))return-1;for(ee[1]=0,D=1;D<15;D++)ee[D+1]=ee[D]+Q[D];for(q=0;q<y;q++)p[g+q]!==0&&(_[ee[p[g+q]]++]=q);if(M=m===0?(I=ue=_,19):m===1?(I=l,O-=257,ue=c,ye-=257,256):(I=d,ue=h,-1),D=N,T=S,X=q=z=0,j=-1,A=(B=1<<(V=U))-1,m===1&&852<B||m===2&&592<B)return 1;for(;;){for(P=D-X,$=_[q]<M?(F=0,_[q]):_[q]>M?(F=ue[ye+_[q]],I[O+_[q]]):(F=96,0),k=1<<D-X,N=E=1<<V;w[T+(z>>X)+(E-=k)]=P<<24|F<<16|$|0,E!==0;);for(k=1<<D-1;z&k;)k>>=1;if(k!==0?(z&=k-1,z+=k):z=0,q++,--Q[D]==0){if(D===H)break;D=p[g+_[q]]}if(U<D&&(z&A)!==j){for(X===0&&(X=U),T+=N,Y=1<<(V=D-X);V+X<H&&!((Y-=Q[V+X])<=0);)V++,Y<<=1;if(B+=1<<V,m===1&&852<B||m===2&&592<B)return 1;w[j=z&A]=U<<24|V<<16|T-S|0}}return z!==0&&(w[T+z]=D-X<<24|64<<16|0),b.bits=U,0}},{"../utils/common":41}],51:[function(n,i,o){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,i,o){var s=n("../utils/common"),l=0,c=1;function d(K){for(var ie=K.length;0<=--ie;)K[ie]=0}var h=0,m=29,p=256,g=p+1+m,y=30,w=19,S=2*g+1,_=15,b=16,k=7,E=256,j=16,A=17,T=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=new Array(2*(g+2));d(Z);var D=new Array(2*y);d(D);var q=new Array(512);d(q);var N=new Array(256);d(N);var H=new Array(m);d(H);var U,V,X,Y=new Array(y);function B(K,ie,pe,ge,oe){this.static_tree=K,this.extra_bits=ie,this.extra_base=pe,this.elems=ge,this.max_length=oe,this.has_stree=K&&K.length}function z(K,ie){this.dyn_tree=K,this.max_code=0,this.stat_desc=ie}function I(K){return K<256?q[K]:q[256+(K>>>7)]}function O(K,ie){K.pending_buf[K.pending++]=255&ie,K.pending_buf[K.pending++]=ie>>>8&255}function Q(K,ie,pe){K.bi_valid>b-pe?(K.bi_buf|=ie<<K.bi_valid&65535,O(K,K.bi_buf),K.bi_buf=ie>>b-K.bi_valid,K.bi_valid+=pe-b):(K.bi_buf|=ie<<K.bi_valid&65535,K.bi_valid+=pe)}function ee(K,ie,pe){Q(K,pe[2*ie],pe[2*ie+1])}function ue(K,ie){for(var pe=0;pe|=1&K,K>>>=1,pe<<=1,0<--ie;);return pe>>>1}function ye(K,ie,pe){var ge,oe,_e=new Array(_+1),Ce=0;for(ge=1;ge<=_;ge++)_e[ge]=Ce=Ce+pe[ge-1]<<1;for(oe=0;oe<=ie;oe++){var ke=K[2*oe+1];ke!==0&&(K[2*oe]=ue(_e[ke]++,ke))}}function de(K){var ie;for(ie=0;ie<g;ie++)K.dyn_ltree[2*ie]=0;for(ie=0;ie<y;ie++)K.dyn_dtree[2*ie]=0;for(ie=0;ie<w;ie++)K.bl_tree[2*ie]=0;K.dyn_ltree[2*E]=1,K.opt_len=K.static_len=0,K.last_lit=K.matches=0}function ve(K){8<K.bi_valid?O(K,K.bi_buf):0<K.bi_valid&&(K.pending_buf[K.pending++]=K.bi_buf),K.bi_buf=0,K.bi_valid=0}function Ae(K,ie,pe,ge){var oe=2*ie,_e=2*pe;return K[oe]<K[_e]||K[oe]===K[_e]&&ge[ie]<=ge[pe]}function je(K,ie,pe){for(var ge=K.heap[pe],oe=pe<<1;oe<=K.heap_len&&(oe<K.heap_len&&Ae(ie,K.heap[oe+1],K.heap[oe],K.depth)&&oe++,!Ae(ie,ge,K.heap[oe],K.depth));)K.heap[pe]=K.heap[oe],pe=oe,oe<<=1;K.heap[pe]=ge}function Te(K,ie,pe){var ge,oe,_e,Ce,ke=0;if(K.last_lit!==0)for(;ge=K.pending_buf[K.d_buf+2*ke]<<8|K.pending_buf[K.d_buf+2*ke+1],oe=K.pending_buf[K.l_buf+ke],ke++,ge===0?ee(K,oe,ie):(ee(K,(_e=N[oe])+p+1,ie),(Ce=M[_e])!==0&&Q(K,oe-=H[_e],Ce),ee(K,_e=I(--ge),pe),(Ce=P[_e])!==0&&Q(K,ge-=Y[_e],Ce)),ke<K.last_lit;);ee(K,E,ie)}function De(K,ie){var pe,ge,oe,_e=ie.dyn_tree,Ce=ie.stat_desc.static_tree,ke=ie.stat_desc.has_stree,se=ie.stat_desc.elems,we=-1;for(K.heap_len=0,K.heap_max=S,pe=0;pe<se;pe++)_e[2*pe]!==0?(K.heap[++K.heap_len]=we=pe,K.depth[pe]=0):_e[2*pe+1]=0;for(;K.heap_len<2;)_e[2*(oe=K.heap[++K.heap_len]=we<2?++we:0)]=1,K.depth[oe]=0,K.opt_len--,ke&&(K.static_len-=Ce[2*oe+1]);for(ie.max_code=we,pe=K.heap_len>>1;1<=pe;pe--)je(K,_e,pe);for(oe=se;pe=K.heap[1],K.heap[1]=K.heap[K.heap_len--],je(K,_e,1),ge=K.heap[1],K.heap[--K.heap_max]=pe,K.heap[--K.heap_max]=ge,_e[2*oe]=_e[2*pe]+_e[2*ge],K.depth[oe]=(K.depth[pe]>=K.depth[ge]?K.depth[pe]:K.depth[ge])+1,_e[2*pe+1]=_e[2*ge+1]=oe,K.heap[1]=oe++,je(K,_e,1),2<=K.heap_len;);K.heap[--K.heap_max]=K.heap[1],(function(Ne,Ie){var qe,dt,Bt,$e,ht,jt,Ve=Ie.dyn_tree,mn=Ie.max_code,Kt=Ie.stat_desc.static_tree,To=Ie.stat_desc.has_stree,Zr=Ie.stat_desc.extra_bits,pr=Ie.stat_desc.extra_base,Tn=Ie.stat_desc.max_length,tn=0;for($e=0;$e<=_;$e++)Ne.bl_count[$e]=0;for(Ve[2*Ne.heap[Ne.heap_max]+1]=0,qe=Ne.heap_max+1;qe<S;qe++)Tn<($e=Ve[2*Ve[2*(dt=Ne.heap[qe])+1]+1]+1)&&($e=Tn,tn++),Ve[2*dt+1]=$e,mn<dt||(Ne.bl_count[$e]++,ht=0,pr<=dt&&(ht=Zr[dt-pr]),jt=Ve[2*dt],Ne.opt_len+=jt*($e+ht),To&&(Ne.static_len+=jt*(Kt[2*dt+1]+ht)));if(tn!==0){do{for($e=Tn-1;Ne.bl_count[$e]===0;)$e--;Ne.bl_count[$e]--,Ne.bl_count[$e+1]+=2,Ne.bl_count[Tn]--,tn-=2}while(0<tn);for($e=Tn;$e!==0;$e--)for(dt=Ne.bl_count[$e];dt!==0;)mn<(Bt=Ne.heap[--qe])||(Ve[2*Bt+1]!==$e&&(Ne.opt_len+=($e-Ve[2*Bt+1])*Ve[2*Bt],Ve[2*Bt+1]=$e),dt--)}})(K,ie),ye(_e,we,K.bl_count)}function L(K,ie,pe){var ge,oe,_e=-1,Ce=ie[1],ke=0,se=7,we=4;for(Ce===0&&(se=138,we=3),ie[2*(pe+1)+1]=65535,ge=0;ge<=pe;ge++)oe=Ce,Ce=ie[2*(ge+1)+1],++ke<se&&oe===Ce||(ke<we?K.bl_tree[2*oe]+=ke:oe!==0?(oe!==_e&&K.bl_tree[2*oe]++,K.bl_tree[2*j]++):ke<=10?K.bl_tree[2*A]++:K.bl_tree[2*T]++,_e=oe,we=(ke=0)===Ce?(se=138,3):oe===Ce?(se=6,3):(se=7,4))}function te(K,ie,pe){var ge,oe,_e=-1,Ce=ie[1],ke=0,se=7,we=4;for(Ce===0&&(se=138,we=3),ge=0;ge<=pe;ge++)if(oe=Ce,Ce=ie[2*(ge+1)+1],!(++ke<se&&oe===Ce)){if(ke<we)for(;ee(K,oe,K.bl_tree),--ke!=0;);else oe!==0?(oe!==_e&&(ee(K,oe,K.bl_tree),ke--),ee(K,j,K.bl_tree),Q(K,ke-3,2)):ke<=10?(ee(K,A,K.bl_tree),Q(K,ke-3,3)):(ee(K,T,K.bl_tree),Q(K,ke-11,7));_e=oe,we=(ke=0)===Ce?(se=138,3):oe===Ce?(se=6,3):(se=7,4)}}d(Y);var re=!1;function W(K,ie,pe,ge){Q(K,(h<<1)+(ge?1:0),3),(function(oe,_e,Ce,ke){ve(oe),O(oe,Ce),O(oe,~Ce),s.arraySet(oe.pending_buf,oe.window,_e,Ce,oe.pending),oe.pending+=Ce})(K,ie,pe)}o._tr_init=function(K){re||((function(){var ie,pe,ge,oe,_e,Ce=new Array(_+1);for(oe=ge=0;oe<m-1;oe++)for(H[oe]=ge,ie=0;ie<1<<M[oe];ie++)N[ge++]=oe;for(N[ge-1]=oe,oe=_e=0;oe<16;oe++)for(Y[oe]=_e,ie=0;ie<1<<P[oe];ie++)q[_e++]=oe;for(_e>>=7;oe<y;oe++)for(Y[oe]=_e<<7,ie=0;ie<1<<P[oe]-7;ie++)q[256+_e++]=oe;for(pe=0;pe<=_;pe++)Ce[pe]=0;for(ie=0;ie<=143;)Z[2*ie+1]=8,ie++,Ce[8]++;for(;ie<=255;)Z[2*ie+1]=9,ie++,Ce[9]++;for(;ie<=279;)Z[2*ie+1]=7,ie++,Ce[7]++;for(;ie<=287;)Z[2*ie+1]=8,ie++,Ce[8]++;for(ye(Z,g+1,Ce),ie=0;ie<y;ie++)D[2*ie+1]=5,D[2*ie]=ue(ie,5);U=new B(Z,M,p+1,g,_),V=new B(D,P,0,y,_),X=new B(new Array(0),F,0,w,k)})(),re=!0),K.l_desc=new z(K.dyn_ltree,U),K.d_desc=new z(K.dyn_dtree,V),K.bl_desc=new z(K.bl_tree,X),K.bi_buf=0,K.bi_valid=0,de(K)},o._tr_stored_block=W,o._tr_flush_block=function(K,ie,pe,ge){var oe,_e,Ce=0;0<K.level?(K.strm.data_type===2&&(K.strm.data_type=(function(ke){var se,we=4093624447;for(se=0;se<=31;se++,we>>>=1)if(1&we&&ke.dyn_ltree[2*se]!==0)return l;if(ke.dyn_ltree[18]!==0||ke.dyn_ltree[20]!==0||ke.dyn_ltree[26]!==0)return c;for(se=32;se<p;se++)if(ke.dyn_ltree[2*se]!==0)return c;return l})(K)),De(K,K.l_desc),De(K,K.d_desc),Ce=(function(ke){var se;for(L(ke,ke.dyn_ltree,ke.l_desc.max_code),L(ke,ke.dyn_dtree,ke.d_desc.max_code),De(ke,ke.bl_desc),se=w-1;3<=se&&ke.bl_tree[2*$[se]+1]===0;se--);return ke.opt_len+=3*(se+1)+5+5+4,se})(K),oe=K.opt_len+3+7>>>3,(_e=K.static_len+3+7>>>3)<=oe&&(oe=_e)):oe=_e=pe+5,pe+4<=oe&&ie!==-1?W(K,ie,pe,ge):K.strategy===4||_e===oe?(Q(K,2+(ge?1:0),3),Te(K,Z,D)):(Q(K,4+(ge?1:0),3),(function(ke,se,we,Ne){var Ie;for(Q(ke,se-257,5),Q(ke,we-1,5),Q(ke,Ne-4,4),Ie=0;Ie<Ne;Ie++)Q(ke,ke.bl_tree[2*$[Ie]+1],3);te(ke,ke.dyn_ltree,se-1),te(ke,ke.dyn_dtree,we-1)})(K,K.l_desc.max_code+1,K.d_desc.max_code+1,Ce+1),Te(K,K.dyn_ltree,K.dyn_dtree)),de(K),ge&&ve(K)},o._tr_tally=function(K,ie,pe){return K.pending_buf[K.d_buf+2*K.last_lit]=ie>>>8&255,K.pending_buf[K.d_buf+2*K.last_lit+1]=255&ie,K.pending_buf[K.l_buf+K.last_lit]=255&pe,K.last_lit++,ie===0?K.dyn_ltree[2*pe]++:(K.matches++,ie--,K.dyn_ltree[2*(N[pe]+p+1)]++,K.dyn_dtree[2*I(ie)]++),K.last_lit===K.lit_bufsize-1},o._tr_align=function(K){Q(K,2,3),ee(K,E,Z),(function(ie){ie.bi_valid===16?(O(ie,ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0):8<=ie.bi_valid&&(ie.pending_buf[ie.pending++]=255&ie.bi_buf,ie.bi_buf>>=8,ie.bi_valid-=8)})(K)}},{"../utils/common":41}],53:[function(n,i,o){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,i,o){(function(s){(function(l,c){if(!l.setImmediate){var d,h,m,p,g=1,y={},w=!1,S=l.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(l);_=_&&_.setTimeout?_:l,d={}.toString.call(l.process)==="[object process]"?function(j){process.nextTick(function(){k(j)})}:(function(){if(l.postMessage&&!l.importScripts){var j=!0,A=l.onmessage;return l.onmessage=function(){j=!1},l.postMessage("","*"),l.onmessage=A,j}})()?(p="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",E,!1):l.attachEvent("onmessage",E),function(j){l.postMessage(p+j,"*")}):l.MessageChannel?((m=new MessageChannel).port1.onmessage=function(j){k(j.data)},function(j){m.port2.postMessage(j)}):S&&"onreadystatechange"in S.createElement("script")?(h=S.documentElement,function(j){var A=S.createElement("script");A.onreadystatechange=function(){k(j),A.onreadystatechange=null,h.removeChild(A),A=null},h.appendChild(A)}):function(j){setTimeout(k,0,j)},_.setImmediate=function(j){typeof j!="function"&&(j=new Function(""+j));for(var A=new Array(arguments.length-1),T=0;T<A.length;T++)A[T]=arguments[T+1];var M={callback:j,args:A};return y[g]=M,d(g),g++},_.clearImmediate=b}function b(j){delete y[j]}function k(j){if(w)setTimeout(k,0,j);else{var A=y[j];if(A){w=!0;try{(function(T){var M=T.callback,P=T.args;switch(P.length){case 0:M();break;case 1:M(P[0]);break;case 2:M(P[0],P[1]);break;case 3:M(P[0],P[1],P[2]);break;default:M.apply(c,P)}})(A)}finally{b(j),w=!1}}}}function E(j){j.source===l&&typeof j.data=="string"&&j.data.indexOf(p)===0&&k(+j.data.slice(p.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Qu<"u"?Qu:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Fp)),Fp.exports}var cU=uU();const fU=jo(cU);var qp={exports:{}},uw;function dU(){return uw||(uw=1,(function(e,t){(function(n){e.exports=n()})(function(){return(function n(i,o,s){function l(h,m){if(!o[h]){if(!i[h]){var p=typeof Ai=="function"&&Ai;if(!m&&p)return p(h,!0);if(c)return c(h,!0);var g=new Error("Cannot find module '"+h+"'");throw g.code="MODULE_NOT_FOUND",g}var y=o[h]={exports:{}};i[h][0].call(y.exports,function(w){var S=i[h][1][w];return l(S||w)},y,y.exports,n,i,o,s)}return o[h].exports}for(var c=typeof Ai=="function"&&Ai,d=0;d<s.length;d++)l(s[d]);return l})({1:[function(n,i,o){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}i.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(m){if(!c(m)||m<0||isNaN(m))throw TypeError("n must be a positive number");return this._maxListeners=m,this},s.prototype.emit=function(m){var p,g,y,w,S,_;if(this._events||(this._events={}),m==="error"&&(!this._events.error||d(this._events.error)&&!this._events.error.length)){if(p=arguments[1],p instanceof Error)throw p;var b=new Error('Uncaught, unspecified "error" event. ('+p+")");throw b.context=p,b}if(g=this._events[m],h(g))return!1;if(l(g))switch(arguments.length){case 1:g.call(this);break;case 2:g.call(this,arguments[1]);break;case 3:g.call(this,arguments[1],arguments[2]);break;default:w=Array.prototype.slice.call(arguments,1),g.apply(this,w)}else if(d(g))for(w=Array.prototype.slice.call(arguments,1),_=g.slice(),y=_.length,S=0;S<y;S++)_[S].apply(this,w);return!0},s.prototype.addListener=function(m,p){var g;if(!l(p))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",m,l(p.listener)?p.listener:p),this._events[m]?d(this._events[m])?this._events[m].push(p):this._events[m]=[this._events[m],p]:this._events[m]=p,d(this._events[m])&&!this._events[m].warned&&(h(this._maxListeners)?g=s.defaultMaxListeners:g=this._maxListeners,g&&g>0&&this._events[m].length>g&&(this._events[m].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[m].length),typeof console.trace=="function"&&console.trace())),this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(m,p){if(!l(p))throw TypeError("listener must be a function");var g=!1;function y(){this.removeListener(m,y),g||(g=!0,p.apply(this,arguments))}return y.listener=p,this.on(m,y),this},s.prototype.removeListener=function(m,p){var g,y,w,S;if(!l(p))throw TypeError("listener must be a function");if(!this._events||!this._events[m])return this;if(g=this._events[m],w=g.length,y=-1,g===p||l(g.listener)&&g.listener===p)delete this._events[m],this._events.removeListener&&this.emit("removeListener",m,p);else if(d(g)){for(S=w;S-- >0;)if(g[S]===p||g[S].listener&&g[S].listener===p){y=S;break}if(y<0)return this;g.length===1?(g.length=0,delete this._events[m]):g.splice(y,1),this._events.removeListener&&this.emit("removeListener",m,p)}return this},s.prototype.removeAllListeners=function(m){var p,g;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[m]&&delete this._events[m],this;if(arguments.length===0){for(p in this._events)p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events={},this}if(g=this._events[m],l(g))this.removeListener(m,g);else if(g)for(;g.length;)this.removeListener(m,g[g.length-1]);return delete this._events[m],this},s.prototype.listeners=function(m){var p;return!this._events||!this._events[m]?p=[]:l(this._events[m])?p=[this._events[m]]:p=this._events[m].slice(),p},s.prototype.listenerCount=function(m){if(this._events){var p=this._events[m];if(l(p))return 1;if(p)return p.length}return 0},s.listenerCount=function(m,p){return m.listenerCount(p)};function l(m){return typeof m=="function"}function c(m){return typeof m=="number"}function d(m){return typeof m=="object"&&m!==null}function h(m){return m===void 0}},{}],2:[function(n,i,o){var s,l,c,d,h;h=navigator.userAgent.toLowerCase(),d=navigator.platform.toLowerCase(),s=h.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],c=s[1]==="ie"&&document.documentMode,l={name:s[1]==="version"?s[3]:s[1],version:c||parseFloat(s[1]==="opera"&&s[4]?s[4]:s[2]),platform:{name:h.match(/ip(?:ad|od|hone)/)?"ios":(h.match(/(?:webos|android)/)||d.match(/mac|win|linux/)||["other"])[0]}},l[l.name]=!0,l[l.name+parseInt(l.version,10)]=!0,l.platform[l.platform.name]=!0,i.exports=l},{}],3:[function(n,i,o){var s,l,c,d=function(g,y){for(var w in y)h.call(y,w)&&(g[w]=y[w]);function S(){this.constructor=g}return S.prototype=y.prototype,g.prototype=new S,g.__super__=y.prototype,g},h={}.hasOwnProperty,m=[].indexOf||function(g){for(var y=0,w=this.length;y<w;y++)if(y in this&&this[y]===g)return y;return-1},p=[].slice;s=n("events").EventEmitter,c=n("./browser.coffee"),l=(function(g){var y,w;d(S,g),y={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},w={delay:500,copy:!1};function S(_){var b,k,E;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(_);for(k in y)E=y[k],(b=this.options)[k]==null&&(b[k]=E)}return S.prototype.setOption=function(_,b){if(this.options[_]=b,this._canvas!=null&&(_==="width"||_==="height"))return this._canvas[_]=b},S.prototype.setOptions=function(_){var b,k,E;k=[];for(b in _)h.call(_,b)&&(E=_[b],k.push(this.setOption(b,E)));return k},S.prototype.addFrame=function(_,b){var k,E;b==null&&(b={}),k={},k.transparent=this.options.transparent;for(E in w)k[E]=b[E]||w[E];if(this.options.width==null&&this.setOption("width",_.width),this.options.height==null&&this.setOption("height",_.height),typeof ImageData<"u"&&ImageData!==null&&_ instanceof ImageData)k.data=_.data;else if(typeof CanvasRenderingContext2D<"u"&&CanvasRenderingContext2D!==null&&_ instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext<"u"&&WebGLRenderingContext!==null&&_ instanceof WebGLRenderingContext)b.copy?k.data=this.getContextData(_):k.context=_;else if(_.childNodes!=null)b.copy?k.data=this.getImageData(_):k.image=_;else throw new Error("Invalid image");return this.frames.push(k)},S.prototype.render=function(){var _,b,k;if(this.running)throw new Error("Already running");if(this.options.width==null||this.options.height==null)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=(function(){var E,j,A;for(A=[],E=0,j=this.frames.length;0<=j?E<j:E>j;0<=j?++E:--E)A.push(null);return A}).call(this),b=this.spawnWorkers(),this.options.globalPalette===!0)this.renderNextFrame();else for(_=0,k=b;0<=k?_<k:_>k;0<=k?++_:--_)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},S.prototype.abort=function(){for(var _;_=this.activeWorkers.shift(),_!=null;)this.log("killing active worker"),_.terminate();return this.running=!1,this.emit("abort")},S.prototype.spawnWorkers=function(){var _,b,k;return _=Math.min(this.options.workers,this.frames.length),(function(){k=[];for(var E=b=this.freeWorkers.length;b<=_?E<_:E>_;b<=_?E++:E--)k.push(E);return k}).apply(this).forEach((function(E){return function(j){var A;return E.log("spawning worker "+j),A=new Worker(E.options.workerScript),A.onmessage=function(T){return E.activeWorkers.splice(E.activeWorkers.indexOf(A),1),E.freeWorkers.push(A),E.frameFinished(T.data)},E.freeWorkers.push(A)}})(this)),_},S.prototype.frameFinished=function(_){var b,k;if(this.log("frame "+_.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[_.index]=_,this.options.globalPalette===!0&&(this.options.globalPalette=_.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(b=1,k=this.freeWorkers.length;1<=k?b<k:b>k;1<=k?++b:--b)this.renderNextFrame();return m.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},S.prototype.finishRendering=function(){var _,b,k,E,j,A,T,M,P,F,$,Z,D,q,N,H;for(M=0,q=this.imageParts,j=0,P=q.length;j<P;j++)b=q[j],M+=(b.data.length-1)*b.pageSize+b.cursor;for(M+=b.pageSize-b.cursor,this.log("rendering finished - filesize "+Math.round(M/1e3)+"kb"),_=new Uint8Array(M),Z=0,N=this.imageParts,A=0,F=N.length;A<F;A++)for(b=N[A],H=b.data,k=T=0,$=H.length;T<$;k=++T)D=H[k],_.set(D,Z),k===b.data.length-1?Z+=b.cursor:Z+=b.pageSize;return E=new Blob([_],{type:"image/gif"}),this.emit("finished",E,_)},S.prototype.renderNextFrame=function(){var _,b,k;if(this.freeWorkers.length===0)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return _=this.frames[this.nextFrame++],k=this.freeWorkers.shift(),b=this.getTask(_),this.log("starting frame "+(b.index+1)+" of "+this.frames.length),this.activeWorkers.push(k),k.postMessage(b)},S.prototype.getContextData=function(_){return _.getImageData(0,0,this.options.width,this.options.height).data},S.prototype.getImageData=function(_){var b;return this._canvas==null&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),b=this._canvas.getContext("2d"),b.setFill=this.options.background,b.fillRect(0,0,this.options.width,this.options.height),b.drawImage(_,0,0),this.getContextData(b)},S.prototype.getTask=function(_){var b,k;if(b=this.frames.indexOf(_),k={index:b,last:b===this.frames.length-1,delay:_.delay,transparent:_.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:c.name==="chrome"},_.data!=null)k.data=_.data;else if(_.context!=null)k.data=this.getContextData(_.context);else if(_.image!=null)k.data=this.getImageData(_.image);else throw new Error("Invalid frame");return k},S.prototype.log=function(){var _;if(_=1<=arguments.length?p.call(arguments,0):[],!!this.options.debug)return console.log.apply(console,_)},S})(s),i.exports=l},{"./browser.coffee":2,events:1}]},{},[3])(3)})})(qp)),qp.exports}var hU=dU();const pU=jo(hU),mU=["back","mid","fore","ext"],Mc=new Map,Oc=new Map;async function ck(e){if(Mc.has(e))return Mc.get(e);const t=new Image;return t.crossOrigin="anonymous",await new Promise((n,i)=>{t.onload=()=>n(),t.onerror=i,t.src=e}),Mc.set(e,t),t}async function gU(e,t,n){const i=`${e}:${t}x${n}`;if(Oc.has(i))return Oc.get(i);const o=await ck(e),s=document.createElement("canvas");s.width=t,s.height=n;const l=s.getContext("2d",{alpha:!0});if(!l)throw new Error("Failed to create pre-render context");l.imageSmoothingEnabled=!0,l.imageSmoothingQuality="high",l.drawImage(o,0,0,t,n);const c={canvas:s,width:t,height:n};return Oc.set(i,c),c}function yU(){Mc.clear(),Oc.clear()}const uf=2;function xU(e){const{nodes:t}=et.getState(),n=t.find(p=>p.id===e);if(!n)return null;const i=n.data,o=i.outputWidth||1920,s=i.outputHeight||1080,l=i.backgroundColor||"#000000",c=document.createElement("canvas");c.width=o*uf,c.height=s*uf;const d=c.getContext("2d",{alpha:!1,willReadFrequently:!0});if(!d)return null;d.imageSmoothingEnabled=!0,d.imageSmoothingQuality="high";const h=document.createElement("canvas");h.width=o,h.height=s;const m=h.getContext("2d",{alpha:!1,willReadFrequently:!0});return m?(m.imageSmoothingEnabled=!0,m.imageSmoothingQuality="high",{canvas:c,ctx:d,outputCanvas:h,outputCtx:m,width:o,height:s,backgroundColor:l}):null}async function vU(e,t,n,i){const{nodes:o,edges:s}=et.getState();let l,c,d,h,m,p,g,y,w;if(i)l=i.ctx,c=i.canvas,d=i.outputCanvas,h=i.outputCtx,m=i.width,p=i.height,y=m*uf,w=p*uf,g=i.backgroundColor;else{const b=o.find(j=>j.id===e);if(!b)return null;const k=b.data;m=k.outputWidth||1920,p=k.outputHeight||1080,y=m,w=p,g=k.backgroundColor||"#000000",c=document.createElement("canvas"),c.width=m,c.height=p;const E=c.getContext("2d");if(!E)return null;l=E,l.imageSmoothingEnabled=!0,l.imageSmoothingQuality="high",d=c,h=l}l.fillStyle=g,l.fillRect(0,0,y,w);const S=b=>{const k=o.find(E=>E.id===b);if(!k)return{imageUrl:null,transformId:null};if(k.type==="output")return{imageUrl:k.data.generatedImageUrl||null,transformId:null};if(k.type==="reference")return{imageUrl:k.data.imageUrl||null,transformId:null};if(k.type==="transform"){const E=s.find(A=>A.target===b&&A.targetHandle!=="timeline-in");return{imageUrl:(E?S(E.source):{imageUrl:null}).imageUrl,transformId:b}}return{imageUrl:null,transformId:null}},_={};for(const b of s)b.target===e&&b.targetHandle&&(_[b.targetHandle]=S(b.source));for(const b of mU){const k=_[b];if(k?.imageUrl)try{const E=await ck(k.imageUrl);l.save();let j=1,A=0,T=0,M=0,P=100;if(k.transformId){const U=n?.[k.transformId];if(U)j=U.scale,A=U.offsetX,T=U.offsetY,M=U.rotation,P=U.opacity;else{const V=o.find(X=>X.id===k.transformId);if(V){const X=V.data;j=X.scale??1,A=X.offsetX??0,T=X.offsetY??0,M=X.rotation??0,P=X.opacity??100}}}l.globalAlpha=P/100;const F=E.width/E.height,$=y/w;let Z,D;F>$?(Z=y,D=y/F):(D=w,Z=w*F),Z=Math.round(Z),D=Math.round(D);const q=await gU(k.imageUrl,Z,D),N=y/2-A/100*y,H=w/2-T/100*w;l.translate(N,H),M!==0&&l.rotate(M*Math.PI/180),l.scale(j,j),l.drawImage(q.canvas,-Z/2,-D/2),l.restore()}catch(E){console.error(`Failed to load image for layer ${b}`,E)}}return i&&d!==c?(h.drawImage(c,0,0,m,p),d.toDataURL("image/png")):c.toDataURL("image/png")}async function bU(e){const{fps:t,duration:n,tracks:i,easing:o,renderNodeId:s,renderNodeType:l,onProgress:c}=e,d=Math.ceil(t*n),h=[],m=xU(s);if(!m)throw new Error("Failed to create render context");const p={},g=et.getState().nodes;for(const y of Object.keys(i)){const w=g.find(S=>S.id===y);if(w&&w.type==="transform"){const S=w.data;p[y]={scale:S.scale,offsetX:S.offsetX,offsetY:S.offsetY,rotation:S.rotation,opacity:S.opacity}}}try{for(let y=0;y<=d;y++){const w=y/t,S=y/d*100;c?.(S,`Capturing frame ${y+1} of ${d+1}`);const _={};for(const[k,E]of Object.entries(i))if(E.length>0){const j=uk(E,w,o);_[k]={scale:j.scale,offsetX:j.offsetX,offsetY:j.offsetY,rotation:j.rotation,opacity:j.opacity}}const b=await vU(s,l,_,m);b&&h.push({frameNumber:y,time:w,dataUrl:b})}}finally{const y=et.getState().updateNodeData;for(const[w,S]of Object.entries(p))y(w,S)}return h}async function wU(e,t){const n=new fU,i=n.folder("frames");if(!i)throw new Error("Failed to create ZIP folder");for(let l=0;l<e.length;l++){const c=e[l],d=50+l/e.length*40;t?.(d,`Packaging frame ${l+1} of ${e.length}`);const h=c.dataUrl.split(",")[1],m=String(c.frameNumber).padStart(5,"0");i.file(`frame_${m}.png`,h,{base64:!0})}t?.(95,"Generating ZIP file...");const o=await n.generateAsync({type:"blob"}),s=document.createElement("a");s.href=URL.createObjectURL(o),s.download=`animation_${Date.now()}.zip`,s.click(),URL.revokeObjectURL(s.href),t?.(100,"Export complete!")}async function SU(e,t,n){return new Promise((i,o)=>{const s=new Image;s.onload=async()=>{const l=s.width,c=s.height;console.log(`Creating GIF: ${l}x${c}, ${e.length} frames at ${t}fps`);const d=document.createElement("canvas");d.width=l,d.height=c;const h=d.getContext("2d");if(!h){o(new Error("Failed to get canvas context"));return}const m=new pU({workers:0,quality:10,width:l,height:c}),p=Math.round(1e3/t),g=setTimeout(()=>{console.error("GIF render timed out after 120 seconds"),m.abort(),o(new Error("GIF encoding timed out. Try reducing duration or FPS."))},12e4);console.log(`Adding ${e.length} frames to GIF...`);for(let y=0;y<e.length;y++){const w=50+y/e.length*30;n?.(w,`Encoding frame ${y+1} of ${e.length}`);const S=new Image;await new Promise((_,b)=>{S.onload=()=>_(),S.onerror=()=>b(new Error(`Failed to load frame ${y}`)),S.src=e[y].dataUrl}),h.clearRect(0,0,l,c),h.drawImage(S,0,0),m.addFrame(h,{copy:!0,delay:p}),console.log(`Added frame ${y+1}/${e.length}`)}console.log("All frames added, calling render()..."),m.on("progress",y=>{const w=80+y*20;n?.(w,"Finalizing GIF...")}),m.on("finished",y=>{clearTimeout(g),console.log("GIF finished, size:",y.size);const w=document.createElement("a");w.href=URL.createObjectURL(y),w.download=`animation_${Date.now()}.gif`,w.click(),URL.revokeObjectURL(w.href),n?.(100,"Export complete!"),i()}),console.log("Starting GIF render..."),m.render()},s.onerror=()=>o(new Error("Failed to load first frame")),s.src=e[0].dataUrl})}async function _U(e){const{format:t,fps:n,onProgress:i}=e;yU();try{i?.(0,"Starting export...");const o=await bU(e);if(o.length===0)throw new Error("No frames captured. Make sure a Comp or Page node is connected.");i?.(50,`Captured ${o.length} frames`),t==="sequence"?await wU(o,i):await SU(o,n,i)}catch(o){throw console.error("Animation export failed:",o),o}}function kU(e){const{nodes:t,edges:n}=et.getState(),i=n.filter(d=>d.source===e&&d.sourceHandle==="timeline-out"),o=new Set;for(const d of i)t.find(m=>m.id===d.target)?.type==="transform"&&o.add(d.target);const s=d=>{const h=n.filter(m=>m.target===d);for(const m of h){if(o.has(m.source))return!0;const p=t.find(g=>g.id===m.source);if(p?.type==="transform"&&o.has(p.id))return!0}return!1};for(const d of t)if(d.type==="comp"&&s(d.id))return{id:d.id,type:"comp"};for(const d of t)if(d.type==="page"&&s(d.id))return{id:d.id,type:"page"};const l=t.find(d=>d.type==="comp");if(l)return{id:l.id,type:"comp"};const c=t.find(d=>d.type==="page");return c?{id:c.id,type:"page"}:null}const EU=e=>{const t=et(n=>{const i=n.edges.filter(s=>s.source===e&&s.sourceHandle==="timeline-out"),o=[];for(const s of i){const l=n.nodes.find(c=>c.id===s.target);if(l&&l.type==="transform"){const c=l.data;o.push(`${l.id}::${c.name||"Transform"}`)}}return o.join("|")});return J.useMemo(()=>t?t.split("|").filter(Boolean).map(n=>{const[i,o]=n.split("::");return{id:i,name:o}}):[],[t])},CU=()=>`kf-${Date.now().toString(36)}-${Math.random().toString(36).substring(2,6)}`;function bc({children:e,className:t=""}){return x.jsx("div",{className:`px-2.5 py-2 rounded-md bg-black/15 ${t}`,children:e})}function jU({id:e,data:t,selected:n}){const i=et(te=>te.updateNodeData),o=EU(e),s=J.useRef(null),l=J.useRef(0),c=J.useRef(t.currentTime??0),d=t.fps??24,h=t.duration??2,m=t.tracks??{},p=t.selectedTracks??o.map(te=>te.id),g=t.loop??!0,y=t.easing??"ease-in-out",w=t.currentTime??0,S=t.isPlaying??!1,_=t.playDirection??1,b=J.useRef(m),k=J.useRef(y),E=J.useRef(h),j=J.useRef(g),A=J.useRef(0);b.current=m,k.current=y,E.current=h,j.current=g;const T=ct.timeline,[M,P]=J.useState(!1),[F,$]=J.useState(0),[Z,D]=J.useState(""),q=J.useMemo(()=>Object.values(m).reduce((te,re)=>te+re.length,0),[m]),N=J.useMemo(()=>{const te=[];for(const[W,K]of Object.entries(m))for(const ie of K)te.push({time:ie.time,trackId:W,id:ie.id});const re=new Map;for(const W of te){const K=Math.round(W.time*100);re.has(K)||re.set(K,W)}return Array.from(re.values()).sort((W,K)=>W.time-K.time)},[m]);J.useEffect(()=>{S||(c.current=w)},[w,S]);const H=J.useCallback(te=>{const{nodes:re}=et.getState(),W=re.find(K=>K.id===te);return!W||W.type!=="transform"?null:W.data},[]),U=J.useCallback((te,re,W)=>{for(const K of o){const ie=re[K.id];if(ie&&ie.length>0){const pe=uk(ie,te,W);i(K.id,{scale:pe.scale,offsetX:pe.offsetX,offsetY:pe.offsetY,rotation:pe.rotation,opacity:pe.opacity})}}},[o,i]);J.useEffect(()=>{if(!S){s.current&&(cancelAnimationFrame(s.current),s.current=null);return}l.current=performance.now();const te=re=>{const W=(re-l.current)/1e3;l.current=re;const K=E.current,ie=j.current,pe=b.current,ge=k.current;let oe=c.current+W*_;if(_>0){if(oe>=K)if(ie)oe=0;else{oe=K,c.current=oe,i(e,{currentTime:oe,isPlaying:!1});return}}else if(oe<=0)if(ie)oe=K;else{oe=0,c.current=oe,i(e,{currentTime:oe,isPlaying:!1});return}c.current=oe,re-A.current>=50&&(A.current=re,U(oe,pe,ge),i(e,{currentTime:oe})),s.current=requestAnimationFrame(te)};return s.current=requestAnimationFrame(te),()=>{s.current&&(cancelAnimationFrame(s.current),s.current=null)}},[e,S,_,i,U]),J.useEffect(()=>{S||U(w,m,y)},[w,m,y,S,U]);const V=J.useCallback(()=>{if(S&&_===1)i(e,{isPlaying:!1});else{const te=w>=h?0:w;c.current=te,i(e,{isPlaying:!0,playDirection:1,currentTime:te})}},[e,S,_,w,h,i]),X=J.useCallback(()=>{if(S&&_===-1)i(e,{isPlaying:!1});else{const te=w<=0?h:w;c.current=te,i(e,{isPlaying:!0,playDirection:-1,currentTime:te})}},[e,S,_,w,h,i]),Y=J.useCallback(()=>{c.current=0,i(e,{isPlaying:!1,currentTime:0})},[e,i]),B=J.useCallback(te=>{const re=Math.max(0,Math.min(parseFloat(te.target.value),h));c.current=re,i(e,{currentTime:re,isPlaying:!1})},[e,h,i]),z=J.useCallback(te=>{i(e,{fps:parseInt(te.target.value,10)})},[e,i]),I=J.useCallback(te=>{const re=Math.max(.1,parseFloat(te.target.value)||1),W=Math.min(w,re);c.current=W,i(e,{duration:re,currentTime:W})},[e,w,i]),O=J.useCallback(()=>{i(e,{loop:!g})},[e,g,i]),Q=J.useCallback(te=>{i(e,{easing:te.target.value})},[e,i]),ee=J.useCallback(te=>{const re=p.includes(te)?p.filter(W=>W!==te):[...p,te];i(e,{selectedTracks:re})},[e,p,i]),ue=J.useCallback(()=>{const te=Math.max(0,Math.min(w,h)),re={...m};for(const W of p){const K=H(W);if(!K)continue;const ie={scale:K.scale??1,offsetX:K.offsetX??0,offsetY:K.offsetY??0,rotation:K.rotation??0,opacity:K.opacity??100},pe=re[W]||[],ge=pe.find(oe=>Math.abs(oe.time-te)<.05);if(ge)re[W]=pe.map(oe=>oe.id===ge.id?{...oe,transforms:ie}:oe);else{const oe={id:CU(),time:te,transforms:ie};re[W]=[...pe,oe].sort((_e,Ce)=>_e.time-Ce.time)}}i(e,{tracks:re})},[e,w,h,m,p,H,i]),ye=J.useCallback(()=>{const te={...m};let re=!1;for(const[W,K]of Object.entries(te)){const ie=K.find(pe=>Math.abs(pe.time-w)<.05);ie&&(te[W]=K.filter(pe=>pe.id!==ie.id),re=!0)}re&&i(e,{tracks:te})},[e,w,m,i]),de=J.useCallback(te=>{c.current=te,i(e,{currentTime:te,isPlaying:!1})},[e,i]),ve=J.useCallback(async te=>{S&&i(e,{isPlaying:!1});const re=kU(e);if(!re){alert("No Comp or Page node found. Connect your transforms to a Comp or Page node to export.");return}P(!0),$(0),D("Starting export...");try{await _U({timelineId:e,renderNodeId:re.id,renderNodeType:re.type,fps:d,duration:h,tracks:m,easing:y,format:te,onProgress:(W,K)=>{$(W),D(K)}})}catch(W){console.error("Export failed:",W),alert(`Export failed: ${W instanceof Error?W.message:"Unknown error"}`)}finally{P(!1),$(0),D("")}},[e,S,d,h,m,y,i]),Ae=N.some(te=>Math.abs(te.time-w)<.05),je=te=>Math.max(0,te).toFixed(1)+"s",Te=Math.ceil(d*h),De=Math.max(0,Math.min(w,h)),L={background:"var(--color-bg-panel)",borderColor:T,borderWidth:2,width:12,height:12};return x.jsx(_t,{nodeId:e,nodeType:"timeline",name:t.name||"Timeline",selected:n,showTargetHandle:!1,showSourceHandle:!1,icon:x.jsx(OS,{size:14}),additionalHandles:x.jsx(Vt,{type:"source",position:ze.Top,id:"timeline-out",style:L}),children:x.jsxs("div",{className:"space-y-2.5 nodrag",children:[o.length===0?x.jsx("div",{className:"text-[10px] px-2.5 py-1.5 rounded-md text-center",style:{background:"rgba(239, 68, 68, 0.15)",color:"#fca5a5"},children:"Connect to Transform nodes"}):x.jsxs(bc,{children:[x.jsx("div",{className:"text-[9px] text-muted uppercase tracking-wide mb-1.5",children:"Transforms"}),x.jsx("div",{className:"space-y-1",children:o.map(te=>x.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-[11px]",children:[x.jsx("input",{type:"checkbox",checked:p.includes(te.id),onChange:()=>ee(te.id),className:"w-3 h-3 rounded border-white/20 bg-black/30 text-yellow-500 focus:ring-0 focus:ring-offset-0"}),x.jsx("span",{className:"truncate",style:{color:p.includes(te.id)?"var(--color-text-primary)":"var(--color-text-muted)"},children:te.name}),x.jsxs("span",{className:"text-[9px] text-muted ml-auto",children:[(m[te.id]||[]).length," keys"]})]},te.id))})]}),x.jsx(bc,{children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("div",{className:"flex items-center gap-1.5",children:[x.jsx("span",{className:"text-[9px] text-muted uppercase tracking-wide",children:"FPS"}),x.jsx("select",{value:d,onChange:z,className:"w-12 px-1 py-0.5 text-[10px] font-mono rounded bg-black/30 border-none text-primary outline-none cursor-pointer",children:pS.map(te=>x.jsx("option",{value:te,children:te},te))})]}),x.jsx("div",{className:"w-px h-4 bg-white/10"}),x.jsxs("div",{className:"flex items-center gap-1.5",children:[x.jsx("span",{className:"text-[9px] text-muted uppercase tracking-wide",children:"Dur"}),x.jsx("input",{type:"number",min:.1,max:60,step:.1,value:h,onChange:I,className:"w-10 px-1 py-0.5 text-[10px] font-mono rounded bg-black/30 border-none text-primary outline-none no-spinner text-center"}),x.jsx("span",{className:"text-[9px] text-muted",children:"s"})]}),x.jsx("div",{className:"w-px h-4 bg-white/10"}),x.jsx("select",{value:y,onChange:Q,className:"flex-1 min-w-0 px-1 py-0.5 text-[10px] rounded bg-black/30 border-none text-primary outline-none cursor-pointer",children:Object.entries(hS).map(([te,re])=>x.jsx("option",{value:te,children:re},te))})]})}),x.jsxs(bc,{className:"py-3",children:[x.jsxs("div",{className:"flex justify-between text-[8px] text-muted mb-1.5 px-0.5",children:[x.jsx("span",{children:"0s"}),x.jsx("span",{children:je(h/2)}),x.jsx("span",{children:je(h)})]}),x.jsxs("div",{className:"relative h-6 rounded bg-black/30",children:[N.map(te=>{const re=Math.max(0,Math.min(te.time/h*100,100)),W=Math.abs(te.time-w)<.05;return x.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 -translate-x-1/2 group",style:{left:`${re}%`,zIndex:10},children:x.jsx("button",{onClick:()=>de(te.time),onPointerDown:K=>K.stopPropagation(),className:"w-2.5 h-2.5 transition-transform hover:scale-125",style:{color:W?T:"var(--color-text-muted)",filter:W?`drop-shadow(0 0 3px ${T})`:"none"},title:`Keyframe at ${je(te.time)}`,children:x.jsx("svg",{viewBox:"0 0 10 10",fill:"currentColor",className:"w-full h-full",children:x.jsx("path",{d:"M5 0L10 5L5 10L0 5Z"})})})},`${te.trackId}-${te.id}`)}),x.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 transition-all duration-75 pointer-events-none",style:{left:`${Math.max(0,Math.min(De/h*100,100))}%`,background:T,boxShadow:`0 0 6px ${T}`,zIndex:5},children:x.jsx("div",{className:"absolute -top-0.5 left-1/2 -translate-x-1/2 w-1.5 h-1.5 rounded-full",style:{background:T}})}),x.jsx("input",{type:"range",min:0,max:h,step:.01,value:De,onChange:B,onPointerDown:te=>te.stopPropagation(),onMouseDown:te=>te.stopPropagation(),className:"absolute inset-0 w-full h-full opacity-0 cursor-ew-resize",style:{zIndex:1}})]})]}),x.jsxs("div",{className:"flex items-center justify-between px-1",children:[x.jsxs("div",{className:"flex items-center gap-0.5",children:[x.jsx("button",{onClick:X,className:"p-1.5 rounded transition-all",style:{background:S&&_===-1?T:"transparent",color:S&&_===-1?"white":"var(--color-text-muted)"},title:"Play Reverse",children:x.jsx("svg",{width:10,height:10,viewBox:"0 0 10 10",fill:"currentColor",children:x.jsx("polygon",{points:"8,1 2,5 8,9"})})}),x.jsx("button",{onClick:Y,className:"p-1.5 rounded text-muted hover:text-primary transition-colors",title:"Stop",children:x.jsx("svg",{width:10,height:10,viewBox:"0 0 10 10",fill:"currentColor",children:x.jsx("rect",{x:"2",y:"2",width:"6",height:"6"})})}),x.jsx("button",{onClick:V,className:"p-1.5 rounded transition-all",style:{background:S&&_===1?T:"transparent",color:S&&_===1?"white":"var(--color-text-muted)"},title:"Play Forward",children:x.jsx("svg",{width:10,height:10,viewBox:"0 0 10 10",fill:"currentColor",children:x.jsx("polygon",{points:"2,1 8,5 2,9"})})}),x.jsx("div",{className:"w-px h-4 bg-white/10 mx-0.5"}),x.jsx("button",{onClick:O,className:"p-1.5 rounded transition-all",style:{background:g?`${T}30`:"transparent",color:g?T:"var(--color-text-muted)"},title:g?"Loop enabled":"Loop disabled",children:x.jsx(mD,{size:11})})]}),x.jsxs("div",{className:"text-[10px] font-mono tabular-nums px-2 py-0.5 rounded",style:{background:"rgba(0,0,0,0.2)"},children:[x.jsx("span",{className:"text-primary",children:je(De)}),x.jsxs("span",{className:"text-muted",children:[" / ",je(h)]})]}),x.jsx("div",{className:"flex items-center gap-1",children:Ae?x.jsxs(x.Fragment,{children:[x.jsxs("button",{onClick:ue,disabled:p.length===0,className:"flex items-center gap-1 px-2 py-1 rounded text-[10px] transition-all disabled:opacity-40",style:{background:"rgba(0,0,0,0.3)"},title:"Update keyframe",children:[x.jsx(tf,{size:10}),x.jsx("span",{className:"text-muted",children:"Upd"})]}),x.jsx("button",{onClick:ye,className:"p-1 rounded transition-all",style:{background:"rgba(239, 68, 68, 0.2)"},title:"Delete keyframe",children:x.jsx(Tf,{size:12,className:"text-red-400"})})]}):x.jsxs("button",{onClick:ue,disabled:p.length===0,className:"flex items-center gap-1 px-2 py-1 rounded text-[10px] transition-all disabled:opacity-40",style:{background:p.length>0?`${T}30`:"rgba(0,0,0,0.3)"},title:p.length>0?"Add keyframe":"Select transforms first",children:[x.jsx("span",{style:{color:p.length>0?T:void 0},children:x.jsx(tf,{size:10})}),x.jsx("span",{className:p.length>0?"text-primary":"text-muted",children:"Key"})]})})]}),M?x.jsxs(bc,{className:"space-y-1.5",children:[x.jsx("div",{className:"text-[10px] text-center",children:Z}),x.jsx("div",{className:"h-1.5 rounded-full bg-black/30 overflow-hidden",children:x.jsx("div",{className:"h-full rounded-full transition-all duration-150",style:{width:`${F}%`,background:T}})})]}):x.jsx("div",{className:"flex items-center gap-1.5 px-1",children:x.jsxs("button",{onClick:()=>ve("sequence"),disabled:q===0,className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 rounded text-[10px] transition-all disabled:opacity-40",style:{background:q>0?`${T}30`:"rgba(0,0,0,0.3)"},title:q>0?"Export PNG sequence (use ffmpeg to convert to video)":"Add keyframes first",children:[x.jsx(Sl,{size:10}),x.jsx("span",{children:"Export Frames"})]})}),x.jsxs("div",{className:"flex justify-between text-[9px] text-muted px-1 pt-0.5 border-t border-white/5",children:[x.jsxs("span",{children:[q," keyframe",q!==1?"s":""]}),x.jsxs("span",{children:[Te," frames"]})]})]})})}const cw="https://jweese001.github.io/threejs-ide-react/",NU="https://jweese001.github.io";class AU{listeners=new Set;isConnected=!1;ideWindow=null;constructor(){this.initialize()}initialize(){window.addEventListener("message",this.handleWindowMessage)}handleWindowMessage=t=>{if(t.origin!==NU)return;const n=t.data;!n||typeof n!="object"||!n.type||(t.source&&t.source!==window&&(this.ideWindow=t.source),this.handleMessage(n))};handleMessage(t){if(t.type==="status"){const n=t.payload;this.isConnected=n.connected}this.listeners.forEach(n=>{try{n(t)}catch(i){console.error("Error in IDE bridge listener:",i)}})}openIDE(){if(this.ideWindow&&!this.ideWindow.closed){this.ideWindow.focus();return}this.ideWindow=window.open(cw,"flowboard-ide")}requestCapture(t){console.log("requestCapture called, ideWindow exists:",!!this.ideWindow),this.sendMessage({type:"request",payload:{action:"capture",nodeId:t},timestamp:Date.now()})}requestShaderEditor(t){this.sendMessage({type:"request",payload:{action:"openShaderEditor",nodeId:t},timestamp:Date.now()})}sendMessage(t){if(!this.ideWindow||this.ideWindow.closed){console.warn("IDE window not available - click Open IDE first");return}this.ideWindow.postMessage(t,"*")}subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}getConnectionStatus(){return this.isConnected}getIDEUrl(){return cw}destroy(){window.removeEventListener("message",this.handleWindowMessage),this.listeners.clear(),this.isConnected=!1}}const $p=new AU;function TU({id:e,data:t,selected:n}){const i=et(y=>y.updateNodeData),[o,s]=J.useState(t.ideConnected??!1),[l,c]=J.useState(!1);J.useEffect(()=>{const y=$p.subscribe(w=>{if(w.type==="status"){const S=w.payload;s(S.connected),i(e,{ideConnected:S.connected})}if(w.type==="capture"){const S=w.payload;c(!1),i(e,{capturedImage:S.imageData,sceneDescription:S.sceneDescription,sceneName:S.sceneName,resolution:{width:S.width,height:S.height},depthMap:S.depthMap,edgeMap:S.edgeMap,lastCaptureTime:Date.now(),ideConnected:!0}),s(!0)}});return()=>y()},[e,i]);const d=J.useCallback(()=>{$p.openIDE()},[]),h=J.useCallback(()=>{c(!0),$p.requestCapture(e),setTimeout(()=>{c(!1)},5e3)},[e]),m=J.useCallback(y=>{i(e,{mode:y})},[e,i]),p=t.mode??"scene",g=!!t.capturedImage;return x.jsx(_t,{nodeId:e,nodeType:"scene",name:t.name||"Scene",selected:n,showTargetHandle:p==="shader",showSourceHandle:!0,icon:x.jsx(gm,{size:14}),children:x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("button",{onClick:d,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-[11px] font-medium transition-colors",style:{background:"var(--color-bg-elevated)",border:"1px solid var(--color-border-subtle)",color:"var(--color-text-primary)"},onMouseEnter:y=>{y.currentTarget.style.background="var(--color-bg-hover)"},onMouseLeave:y=>{y.currentTarget.style.background="var(--color-bg-elevated)"},children:[x.jsx(xD,{size:12}),"Open IDE"]}),x.jsxs("button",{onClick:h,disabled:l,className:"flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-[11px] font-medium transition-colors",style:{background:l?"var(--color-bg-elevated)":"var(--color-node-scene)",border:"1px solid transparent",color:l?"var(--color-text-muted)":"white",opacity:l?.7:1},onMouseEnter:y=>{l||(y.currentTarget.style.opacity="0.9")},onMouseLeave:y=>{y.currentTarget.style.opacity=l?"0.7":"1"},children:[x.jsx(yD,{size:12,className:l?"animate-spin":""}),l?"Capturing...":"Capture"]})]}),x.jsxs("div",{className:"flex rounded-lg overflow-hidden",style:{border:"1px solid var(--color-border-subtle)"},children:[x.jsx("button",{onClick:()=>m("scene"),className:"flex-1 py-2 text-[10px] font-semibold transition-colors",style:{background:p==="scene"?"var(--color-node-scene)":"var(--color-bg-elevated)",color:p==="scene"?"white":"var(--color-text-muted)"},children:"3D Reference"}),x.jsx("button",{onClick:()=>m("shader"),className:"flex-1 py-2 text-[10px] font-semibold transition-colors",style:{background:p==="shader"?"var(--color-node-scene)":"var(--color-bg-elevated)",color:p==="shader"?"white":"var(--color-text-muted)"},children:"Shader FX"})]}),g?x.jsxs("div",{className:"relative",children:[x.jsx("img",{src:t.capturedImage,alt:t.sceneName||"Scene capture",className:"w-full rounded-lg",style:{maxHeight:"120px",objectFit:"cover",border:"1px solid var(--color-border-subtle)"}}),x.jsxs("div",{className:"absolute bottom-1 right-1 px-1.5 py-0.5 rounded text-[9px] font-mono",style:{background:"rgba(0, 0, 0, 0.7)",color:"white"},children:[t.resolution?.width,"x",t.resolution?.height]})]}):x.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-6 rounded-lg",style:{border:"2px dashed var(--color-border-medium)",background:"var(--color-bg-elevated)"},children:[x.jsx(gm,{size:24,className:"text-muted"}),x.jsxs("div",{className:"text-[10px] text-muted text-center",children:[x.jsx("div",{className:"font-medium",children:"No scene captured"}),x.jsx("div",{children:"Open IDE and click Capture"})]})]}),t.sceneName&&x.jsxs("div",{className:"px-3 py-2 rounded-lg text-[10px]",style:{background:"var(--color-bg-elevated)",border:"1px solid var(--color-border-subtle)"},children:[x.jsx("div",{className:"text-muted",children:"Scene:"}),x.jsx("div",{className:"text-secondary font-medium truncate",children:t.sceneName})]}),t.sceneDescription&&x.jsx("div",{className:"px-3 py-2 rounded-lg text-[10px] text-muted line-clamp-3",style:{background:"var(--color-bg-elevated)",border:"1px solid var(--color-border-subtle)"},children:t.sceneDescription}),x.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[x.jsx("div",{className:"w-2 h-2 rounded-full",style:{background:o?"#22c55e":"#6b7280",boxShadow:o?"0 0 6px #22c55e":"none"}}),x.jsx("span",{className:"text-muted",children:o?"Connected":"Not connected"})]})]})})}const DU={character:mI,setting:gI,prop:yI,style:xI,extras:vI,shot:bI,outfit:wI,camera:SI,action:_I,text:kI,negative:EI,parameters:jI,timeperiod:NI,edit:AI,intercept:$I,reference:YI,output:ZL,page:JL,transform:tU,comp:iU,timeline:jU,scene:TU},wc=16,Sc=12,zU=8;function MU(){const e=Lt(k=>k.groups),t=Lt(k=>k.isolatedGroupId),n=Lt(k=>k.isolateGroup),i=Lt(k=>k.renameGroup),o=We(k=>k.nodeLookup),{x:s,y:l,zoom:c}=r5(),[d,h]=J.useState(null),m=J.useRef(null),p=d?.groupId;J.useEffect(()=>{p&&m.current&&(m.current.focus(),m.current.select())},[p]);const g=k=>{n(t===k?null:k)},y=(k,E,j)=>{k.stopPropagation(),h({groupId:E,value:j})},w=k=>{d&&h({...d,value:k.target.value})},S=()=>{d&&d.value.trim()&&i(d.groupId,d.value.trim()),h(null)},_=k=>{k.key==="Enter"?S():k.key==="Escape"&&h(null)},b=J.useCallback(k=>{let E=1/0,j=1/0,A=-1/0,T=-1/0;for(const M of k){const P=o.get(M);if(!P)continue;const F=P.type==="output"?280:220,$=Math.max(P.measured?.width??F,F),Z=P.measured?.height??80;E=Math.min(E,P.position.x),j=Math.min(j,P.position.y),A=Math.max(A,P.position.x+$),T=Math.max(T,P.position.y+Z)}return E===1/0?null:{x:E-wc,y:j-wc,width:A-E+wc*2+zU,height:T-j+wc*2}},[o]);return e.length===0?null:x.jsxs(x.Fragment,{children:[x.jsx("svg",{className:"react-flow__group-overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",overflow:"visible"},children:x.jsx("g",{transform:`translate(${s}, ${l}) scale(${c})`,children:e.map(k=>{const E=b(k.nodeIds);if(!E)return null;const j=t===k.id;return x.jsxs("g",{children:[x.jsx("rect",{x:E.x,y:E.y,width:E.width,height:E.height,rx:Sc,ry:Sc,fill:j?`${k.color}15`:`${k.color}08`,stroke:"none",style:{pointerEvents:"none"}}),x.jsx("rect",{x:E.x,y:E.y,width:E.width,height:E.height,rx:Sc,ry:Sc,fill:"none",stroke:k.color,strokeWidth:j?3:2,strokeDasharray:j?"none":"8 4",strokeOpacity:j?.8:.5,style:{pointerEvents:"stroke",cursor:"pointer"},onDoubleClick:()=>g(k.id)})]},k.id)})})}),x.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",overflow:"visible",zIndex:10},children:e.map(k=>{const E=b(k.nodeIds);if(!E)return null;const j=d?.groupId===k.id,A=(E.x+8)*c+s,T=(E.y-18)*c+l;return x.jsx("div",{style:{position:"absolute",left:A,top:T,pointerEvents:"auto"},children:j?x.jsx("input",{ref:m,type:"text",value:d.value,onChange:w,onBlur:S,onKeyDown:_,style:{background:"var(--color-bg-panel)",border:`1px solid ${k.color}`,borderRadius:4,padding:"2px 6px",fontSize:11,fontWeight:600,fontFamily:"system-ui, sans-serif",color:k.color,outline:"none",minWidth:60}}):x.jsx("span",{onClick:M=>y(M,k.id,k.name),style:{fontSize:11,fontWeight:600,fontFamily:"system-ui, sans-serif",color:k.color,cursor:"pointer",padding:"2px 6px",borderRadius:4,transition:"background 0.15s"},onMouseEnter:M=>{M.currentTarget.style.background=`${k.color}20`},onMouseLeave:M=>{M.currentTarget.style.background="transparent"},children:k.name})},k.id)})})]})}function OU({x:e,y:t,nodeId:n,onClose:i,onDelete:o,onDuplicate:s,onCopy:l}){const c=J.useRef(null);J.useEffect(()=>{const m=g=>{c.current&&!c.current.contains(g.target)&&i()},p=g=>{g.key==="Escape"&&i()};return document.addEventListener("mousedown",m),document.addEventListener("keydown",p),()=>{document.removeEventListener("mousedown",m),document.removeEventListener("keydown",p)}},[i]);const d=Math.min(e,window.innerWidth-180),h=Math.min(t,window.innerHeight-200);return n?x.jsx("div",{ref:c,className:"fixed z-50 min-w-[180px] rounded-lg shadow-xl overflow-hidden",style:{left:d,top:h,background:"var(--color-bg-panel)",border:"1px solid var(--color-border-subtle)"},children:x.jsxs("div",{className:"p-2",children:[x.jsx(Vp,{label:"Copy",shortcut:"Cmd+C",onClick:l}),x.jsx(Vp,{label:"Duplicate",shortcut:"Cmd+D",onClick:s}),x.jsx(RU,{}),x.jsx(Vp,{label:"Delete",shortcut:"Del",onClick:o,danger:!0})]})}):null}function Vp({label:e,shortcut:t,onClick:n,danger:i}){return x.jsxs("button",{onClick:n,className:"w-full flex items-center justify-between text-sm transition-colors hover:bg-bg-hover text-left rounded-md",style:{color:i?"var(--color-node-negative)":"var(--color-text-primary)",padding:"10px 14px"},children:[x.jsx("span",{children:e}),t&&x.jsx("span",{className:"text-xs text-muted ml-8",children:t})]})}function RU(){return x.jsx("div",{className:"my-1.5 mx-2",style:{borderTop:"1px solid var(--color-border-subtle)"}})}function IU(){const{nodes:e,edges:t,onNodesChange:n,onEdgesChange:i,onConnect:o,copyNodes:s,pasteNodes:l,deleteNode:c,addNode:d}=et(),{selectNode:h,showMinimap:m,toggleMinimap:p}=Qc(),g=J.useRef([]),y=bl(),[w,S]=J.useState(null),_=J.useCallback(({nodes:A})=>{g.current=A.map(T=>T.id),A.length===1?h(A[0].id):h(null)},[h]),b=J.useCallback(A=>{if(A.length===0)return;e.filter(M=>A.includes(M.id)).forEach(M=>{const P=uS(M.type),F={...JSON.parse(JSON.stringify(M)),id:P,position:{x:M.position.x+50,y:M.position.y+50},selected:!0};d(F)}),n(A.map(M=>({type:"select",id:M,selected:!1})))},[e,d,n]),k=J.useCallback(A=>{A.forEach(T=>c(T)),h(null)},[c,h]),E=J.useCallback(A=>{A.preventDefault();const M=A.target.closest(".react-flow__node");if(M){const P=M.getAttribute("data-id");S({x:A.clientX,y:A.clientY,nodeId:P||null})}else S(null)},[]),j=J.useCallback(()=>{S(null)},[]);return J.useEffect(()=>{const A=T=>{const M=T.target;if(M.tagName==="INPUT"||M.tagName==="TEXTAREA"||M.isContentEditable)return;const F=navigator.platform.toUpperCase().indexOf("MAC")>=0?T.metaKey:T.ctrlKey;if(F&&T.key==="c"&&(T.preventDefault(),g.current.length>0&&s(g.current)),F&&T.key==="v"&&(T.preventDefault(),l()),F&&T.key==="d"&&(T.preventDefault(),g.current.length>0&&b(g.current)),(T.key==="Backspace"||T.key==="Delete")&&!F&&(T.preventDefault(),g.current.length>0&&k(g.current)),F&&T.key==="m"&&(T.preventDefault(),p()),F&&T.key==="g"&&!T.shiftKey&&(T.preventDefault(),g.current.length>=2&&Lt.getState().createGroup(g.current)),F&&T.key==="g"&&T.shiftKey){T.preventDefault();const $=Lt.getState(),Z=new Set;for(const D of g.current){const q=$.getGroupForNode(D);q&&Z.add(q.id)}for(const D of Z)$.dissolveGroup(D)}if(T.key==="Escape"){const $=Lt.getState();$.isolatedGroupId&&(T.preventDefault(),$.isolateGroup(null))}if(F&&T.key==="s"&&!T.shiftKey){T.preventDefault();const{isFileBacked:$}=Pr.getState(),{saveCurrentProject:Z,saveCurrentToFile:D}=Fr.getState();$?D():Z()}if(F&&T.key==="s"&&T.shiftKey){T.preventDefault();const{saveCurrentAsFile:$,isFileSystemSupported:Z}=Fr.getState();Z()&&$()}if(F&&T.key==="o"){T.preventDefault();const{openFromFile:$,isFileSystemSupported:Z}=Fr.getState();Z()&&$()}};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[s,l,b,k,p]),x.jsxs("div",{className:"flex-1 h-full",onClick:j,children:[x.jsxs(e5,{nodes:e,edges:t,onNodesChange:n,onEdgesChange:i,onConnect:o,onSelectionChange:_,onContextMenu:E,nodeTypes:DU,fitView:!0,fitViewOptions:{padding:.2},minZoom:.1,maxZoom:2,defaultEdgeOptions:{type:"bezier",style:{strokeWidth:2}},selectionOnDrag:!0,panOnDrag:[1,2],selectNodesOnDrag:!1,proOptions:{hideAttribution:!0},children:[x.jsx(MU,{}),x.jsx(l5,{variant:$r.Dots,gap:20,size:1,color:"rgba(255, 255, 255, 0.05)"}),m&&x.jsx(j5,{nodeColor:A=>ct[A.type]||"#666",maskColor:"rgba(0, 0, 0, 0.8)",position:"bottom-right",style:{marginRight:10,marginBottom:60}}),x.jsxs("div",{className:"absolute flex items-center gap-1 p-1 rounded-lg",style:{bottom:10,right:10,zIndex:5,background:"var(--color-bg-panel)",border:"1px solid var(--color-border-subtle)"},children:[x.jsx("button",{onClick:p,className:"w-8 h-8 rounded-md flex items-center justify-center transition-colors hover:bg-bg-hover",style:{color:m?"var(--color-text-primary)":"var(--color-text-muted)"},title:m?"Hide Minimap (Cmd+M)":"Show Minimap (Cmd+M)",children:x.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[x.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),x.jsx("rect",{x:"12",y:"12",width:"7",height:"7",rx:"1",fill:"currentColor",opacity:"0.3"})]})}),x.jsx("button",{onClick:()=>y.fitView({padding:.2}),className:"w-8 h-8 rounded-md flex items-center justify-center transition-colors hover:bg-bg-hover",style:{color:"var(--color-text-muted)"},title:"Fit View",children:x.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[x.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}),x.jsx("path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}),x.jsx("path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}),x.jsx("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"})]})}),x.jsx("button",{onClick:()=>y.zoomOut(),className:"w-8 h-8 rounded-md flex items-center justify-center transition-colors hover:bg-bg-hover",style:{color:"var(--color-text-muted)"},title:"Zoom Out",children:x.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:x.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})}),x.jsx("button",{onClick:()=>y.zoomIn(),className:"w-8 h-8 rounded-md flex items-center justify-center transition-colors hover:bg-bg-hover",style:{color:"var(--color-text-muted)"},title:"Zoom In",children:x.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[x.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),x.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})]}),w&&x.jsx(OU,{x:w.x,y:w.y,nodeId:w.nodeId,onClose:j,onDelete:()=>{w.nodeId?k([w.nodeId]):g.current.length>0&&k(g.current),j()},onDuplicate:()=>{w.nodeId?b([w.nodeId]):g.current.length>0&&b(g.current),j()},onCopy:()=>{w.nodeId?s([w.nodeId]):g.current.length>0&&s(g.current),j()}})]})}function LU(){const e=et(p=>p.isDirty),t=et(p=>p.nodes),n=et(p=>p.edges),i=$t(p=>p.autoSaveEnabled),o=Fr(p=>p.saveCurrentProject),s=Fr(p=>p.loadProject),l=J.useRef(!1),c=J.useRef(null),d=J.useRef(!1),h=J.useRef(!1);J.useEffect(()=>{if(l.current)return;l.current=!0,(async()=>{const g=zf();if(g&&await s(g)){console.log("Auto-loaded project:",g);return}await o(),console.log("Created default project")})()},[s,o]);const m=J.useCallback(()=>{c.current&&clearTimeout(c.current),c.current=setTimeout(async()=>{const p=et.getState().isDirty,{autoSaveEnabled:g,autoSaveToFileEnabled:y}=$t.getState(),{isFileBacked:w}=Pr.getState(),{saveCurrentProject:S,saveCurrentToFile:_}=Fr.getState();if(p&&g&&!d.current){d.current=!0;try{if(w){if(y)try{await _(),console.log("Auto-saved to file")}catch{console.warn("File auto-save skipped (permission may have expired)")}}else try{await S(),console.log("Auto-saved to localStorage")}catch(b){h.current||(h.current=!0,console.error("Auto-save failed - localStorage full:",b))}}catch(b){console.error("Auto-save failed:",b)}finally{d.current=!1}}},2e3)},[]);J.useEffect(()=>(e&&i&&m(),()=>{c.current&&clearTimeout(c.current)}),[t,n,e,i,m]),J.useEffect(()=>{const p=g=>{if(et.getState().isDirty){try{const w=Fr.getState().saveCurrentProject;w()}catch{}return g.preventDefault(),g.returnValue="You have unsaved changes. Are you sure you want to leave?",g.returnValue}};return window.addEventListener("beforeunload",p),()=>{window.removeEventListener("beforeunload",p)}},[]),J.useEffect(()=>()=>{if(c.current&&clearTimeout(c.current),et.getState().isDirty&&!d.current)try{const g=Fr.getState().saveCurrentProject;g(),console.log("Saved on unmount")}catch(g){console.error("Failed to save on unmount:",g)}},[])}function UU(){const e=G_(t=>t.togglePanel);J.useEffect(()=>{const t=n=>{(n.metaKey||n.ctrlKey)&&n.key==="\\"&&(n.preventDefault(),e())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e])}function BU(){return LU(),UU(),x.jsxs("div",{className:"h-screen w-screen flex overflow-hidden",style:{background:"var(--color-bg-base)"},children:[x.jsx(HD,{}),x.jsx(IU,{}),x.jsx(pI,{})]})}function HU(){return x.jsx(K2,{children:x.jsx(BU,{})})}EC.createRoot(document.getElementById("root")).render(x.jsx(J.StrictMode,{children:x.jsx(HU,{})}));
